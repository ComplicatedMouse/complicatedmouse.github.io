<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>EC Applet | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- EC Applet -->
<div class="pagetitle" id="PageId_162184187">EC Applet</div>
<div class="text_separate">
<p>The ec applet connects to the Nintendo eShop server and displays the eShop screen to allow the user to purchase downloadable content and subscription service items directly within an application.</p>
<h1 id="Anchor_162184187_h1_1">EC Applet Usage</h1>
<p>To use the ec applet, use one of the functions in the ec library that make a call to Nintendo eShop.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Feature</th>
      <th>Corresponding Function</th>
      <th>Header File that Needs to Be Included</th>
    </tr>
    <tr>
      <td>Display a list of downloadable content and the purchase screen</td>
      <td>
        <code>
          <span class="ApiLink_nn__ec__ShowShopAddOnContentList">nn::ec::ShowShopAddOnContentList</span>
        </code>
      </td>
      <td>
        <code>nn/ec/ec_ShopApi.h</code> (or <code>nn/ec.h</code>)</td>
    </tr>
    <tr>
      <td>Display a list of subscription service items and the purchase screen</td>
      <td>
        <code>
          <span class="ApiLink_nn__ec__ShowShopSubscriptionList">nn::ec::ShowShopSubscriptionList</span>
        </code>
      </td>
      <td>
        <code>nn/ec/ec_ShopApi.h</code> (or <code>nn/ec.h</code>)</td>
    </tr>
  </tbody>
</table>
<p>These functions require the application ID of the application to which the downloadable content or subscription service item belongs to be specified (in most cases, this will be the application ID of the application that called the ec applet). These application IDs must be issued in advance using the prescribed procedure.</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>Also, these functions do not have return values and do not provide any way to determine which action the user actually took (that is, whether the user purchased the item and so on).</p>
  </div>
</div>
<p>For more information about these functions, see the EC Library page in the documentation in addition to the documentation for the <code><span class="ApiLink_nn__ec">nn::ec</span></code> namespace in the API reference.</p>
<h3 id="Anchor_162184187_h3_1">Considerations When Calling the EC Applet</h3>
<p>The system internally uses the web browser feature to display the ec applet. Instances of the ec applet that are called from an application run on the same core and in the same environment as that application. However, if the application continues to run background processes while the ec applet is running, the ec applet may exhibit reduced performance.<br />In the worst-case scenario, the ec applet may not run normally. Keep application background processing to the minimum necessary while the ec applet is running.</p>
<h4 id="Anchor_162184187_h4_1">Standards for Specific CPU Utilization Rate Affecting EC Applet Processing</h4>
<p>Use the following as an estimate of the standards for the specific CPU usage rate that affects ec applet processing.</p>
<ul>
  <li>The ec applet cannot run if the application uses all of the CPU cores at close to 100%.</li>
  <li>The ec applet operations lag if the application uses all of the CPU cores at 40% or more.<ul><li>For this reason, for the ec applet to run normally, 60% or more of any one CPU core must be available.</li></ul></li>
</ul>
<h4 id="Anchor_162184187_h4_2">CPU Utilization Rate and Warning Messages for the Dummy EC Applet</h4>
<p>For NX Add-On 10.9.0 and later SDK versions, the usage rate of each CPU core is displayed in the dummy ec applet, and you can use it to check the approximate background processing load of the application.</p>
<p>For NX Add-On 10.4.0 and later SDK versions, the following warning message is displayed in the dummy ec applet when the background processing load for the running application reaches a certain level (all of the CPU cores are used at 40% or higher). If this happens, modify the application to reduce background processing.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Warning: application background tasks are too heavy.</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_162184187_h1_2">
  <span style="color: rgb(117,117,117);">EC Applet for Developers</span>
</h1>
<p>As with previous platforms, the NX platform provides a way to verify the feature for jumping to the shop, without actually connecting to the shop server. For this feature, the shop to which you can jump to from the menu of the development hardware, is replaced with an entity named the dummy ec applet.</p>
<h1 id="Anchor_162184187_h1_3">Dummy EC Applet</h1>
<p>The dummy ec applet is an applet for verifying the settings at the time that the ec applet starts in the development environment. With it, you can check whether the parameter specifications are correct when an application that wants to jump to the shop, calls the API that jumps to the shop.</p>
<h1 id="Anchor_162184187_h1_4">Starting the Dummy EC Applet</h1>
<p>To use the dummy ec applet, use the function that makes calls to the ec applet on the development hardware. See the previous EC Applet Usage section in this document.</p>
<h1 id="Anchor_162184187_h1_5">Display Content of the Dummy EC Applet</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>The following information is under development.</p>
    <p>This information is subject to future additions and deletions.</p>
  </div>
</div>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <td>Item</td>
      <td>Description</td>
      <td>Notes</td>
    </tr>
    <tr>
      <td>Scene</td>
      <td>Scene name to transition to in the shop.</td>
      <td>
        <p>The scene name and shop jump functions are supported as follows.</p>
        <table class="wrapped">
          <tbody>
            <tr>
              <th>Transition Target Scene Name</th>
              <th>Transition Target Scene Description</th>
              <th>Function</th>
              <th>Notes</th>
            </tr>
            <tr>
              <td>Product detail</td>
              <td>Downloadable software/downloadable content details</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopApplicationInformation()</span>
                  </li>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopProductDetails()</span>
                    <br />
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
            <tr>
              <td>
                <span style="color: rgb(23,43,77);">Add-on content list</span>
              </td>
              <td>List of downloadable content</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopAddOnContentList()</span>
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
            <tr>
              <td>Subscription list</td>
              <td>Subscription service item list/details</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopSubscriptionList()</span>
                  </li>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopSubscriptionDetails()</span>
                  </li>
                </ul>
              </td>
              <td>
                <p>Transition to the <span style="color: rgb(23,43,77);">subscription service items</span> list <span style="color: rgb(23,43,77);">for <span style="color: rgb(23,43,77);"><code>ShowShopSubscriptionList()</code></span>, and </span> to <span style="color: rgb(23,43,77);">subscription service item</span> details for <span style="color: rgb(23,43,77);"><code>ShowShopSubscriptionDetails()</code></span></p>
                <p>
                  <br />
                </p>
              </td>
            </tr>
            <tr>
              <td>Consumable item list</td>
              <td>List of consumable service items</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopConsumableItemList()</span>
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
            <tr>
              <td>
                <span style="color: rgb(23,43,77);">Consumable item detail</span>
              </td>
              <td>Consumable service item details</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopConsumableItemDetail()</span>
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
            <tr>
              <td>
                <span style="color: rgb(23,43,77);">Product list</span>
              </td>
              <td>List of specified downloadable content</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopProductList()</span>
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
            <tr>
              <td>Enter code scene</td>
              <td>Enter download code</td>
              <td>
                <ul>
                  <li>
                    <span style="color: rgb(23,43,77);">ShowShopEnterCodeScene()</span>
                  </li>
                </ul>
              </td>
              <td>
                <br />
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td>From</td>
      <td>Caller (none for standard titles)</td>
      <td>
        <br />
      </td>
    </tr>
    <tr>
      <td>AppID</td>
      <td>Application ID specified in the scene to transition to.</td>
      <td>
        <br />
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_162184187_h1_6">Exiting the Dummy EC Applet</h1>
<p>Exit the dummy ec applet by pressing the <strong>A Button</strong> on the controller.</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__ec__ShowShopAddOnContentList', '../../../Api/HtmlNX/namespacenn_1_1ec.html#a3af64a8c382f8c433071dc320a2bcfc4' )
SetUrl( 'ApiLink_nn__ec__ShowShopSubscriptionList', '../../../Api/HtmlNX/namespacenn_1_1ec.html#a9f3297f2c1958edb6cc5ff4c439fa187' )
SetUrl( 'ApiLink_nn__ec', '../../../Api/HtmlNX/namespacenn_1_1ec.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
