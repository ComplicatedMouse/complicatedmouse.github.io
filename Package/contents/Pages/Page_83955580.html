<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Effect Emitters | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Effect Emitters -->
<div class="pagetitle" id="PageId_83955580">Effect Emitters</div>
<div class="text_separate">
<p>Describes the various emitter behavior types and their characteristics for NintendoWare Effect.</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="#Anchor_83955580_everyone">Emitter Types</a>
      </th>
      <td>This section describes the three emitter types of NintendoWare Effect.</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/96637542.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955580_artist">Detailed Descriptions of Emitter Types</a>
      </th>
      <td>This description for designers provides more details about emitter types.</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/96637529.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955580_developer">Detailed Descriptions of Emitter Types</a>
      </th>
      <td>This description for developers provides more details about emitter types.</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/96637546.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955580_everyone"></a>
</p>
<h1 id="Anchor_83955580_h1_1">Emitter Types<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/96637542.png" width="100" class="embedded-image" /></span></h1>
<p>This section describes the three emitter types of NintendoWare Effect.</p>
<p>NintendoWare Effect makes use of the following three emitter types.<br />The processing of a particle's position and velocity depends on the emitter type.</p>
<table class="table">
  <tbody>
    <tr>
      <th> <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079867.png" class="embedded-image" /></span> </th>
      <th>
        <a href="#Anchor_83955580_cpu">CPU Emitter</a>
      </th>
      <td>CPU emitters are calculated by the CPU.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955580_gpu">
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955555/83079866.png" class="embedded-image" />
          </span>
        </a>
      </th>
      <th>
        <a href="#Anchor_83955580_gpu">GPU Emitter</a>
      </th>
      <td>
        <p>The GPU emitter is calculated by the GPU using the vertex shader.</p>
      </td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955580_gpu_so">
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955555/83079865.png" class="embedded-image" />
          </span>
        </a>
      </th>
      <th>
        <a href="#Anchor_83955580_gpu_so">GPU+SO emitter</a>
      </th>
      <td>
        <p>The GPU + SO emitters are calculated by the GPU using the compute shader, which is good at computation processing.</p>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955580_h2_1">Features of Each Emitter Type</h2>
<p>The following table summarizes the features of each emitter type.</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;"> Emitter<br />Type</th>
      <th class="highlight-green" style="text-align: center;">Shader That Runs</th>
      <th class="highlight-green" style="text-align: center;">Features</th>
      <th class="highlight-green" style="text-align: center;">CPU<br />Cost</th>
      <th class="highlight-green" style="text-align: center;">GPU<br />Cost</th>
      <th class="highlight-green" style="text-align: center;">Consumption<br />Memory</th>
    </tr>
    <tr>
      <td style="text-align: center;">
        <strong>CPU</strong>
      </td>
      <td>Vertex/pixel</td>
      <td>There is flexibility for particle behavior calculation. Applications can look up and edit particle behavior calculation results but that comes at a very high CPU processing cost.</td>
      <td style="text-align: center;">&times;</td>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">△</td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <strong>GPU</strong>
      </td>
      <td>Vertex/pixel</td>
      <td>While there is no flexibility in the particle behavior calculation, the CPU processing cost and amount of memory consumption is low.</td>
      <td style="text-align: center;">◎</td>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">◎</td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <strong>GPU+SO</strong>
      </td>
      <td>Compute/vertex/pixel</td>
      <td>Particle behavior calculation is flexible, and the CPU processing cost and amount of memory consumption is low.<br />GPU processing is required, however, for the amount of work performed by the compute shader.</td>
      <td style="text-align: center;">◎</td>
      <td style="text-align: center;">△</td>
      <td style="text-align: center;">◎</td>
    </tr>
  </tbody>
</table>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p> In addition to position and speed, particles also calculate other elements such as color, scale, and rotation.<br />The calculations for color, scale, and rotation, etc., are all performed by the <strong>GPU (vertex shader)</strong>. There are no differences between emitter types.</p>
  </div>
</div>
<h2 id="Anchor_83955580_h2_2">Changing Emitter Types<br /></h2>
<p>        Artists and developers do not need to pay attention to emitter types.<br /> With EffectMaker, the emitter type is switched <strong>automatically</strong> to optimize performance according to the features of the nodes added to the emitter.    <br />For example, if a field has been added to the emitter, EffectMaker switches automatically from the GPU emitter type to the GPU+SO emitter type because particle position and velocity must be output to memory.<br /></p>
<p>The following table illustrates the correspondence between node states and emitter types.<br /> </p>
<table class="table">
  <tbody>
    <tr>
      <th class="highlight-green" style="text-align: center;">Node State</th>
      <th class="highlight-green" style="text-align: center;">CPU Emitter</th>
      <th class="highlight-green" style="text-align: center;">GPU Emitter</th>
      <th class="highlight-green" style="text-align: center;">GPU+SO Emitter</th>
    </tr>
    <tr>
      <th>Emitter node only</th>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">-</td>
    </tr>
    <tr>
      <th>Addition of emitter child node<br />(Parent emitter)</th>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">-</td>
    </tr>
    <tr>
      <th>Addition of stripe node to emitter</th>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">-</td>
    </tr>
    <tr>
      <th>Addition of custom action node to emitter</th>
      <td style="text-align: center;">○</td>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">-</td>
    </tr>
    <tr>
      <th>Addition of field node to emitter</th>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">○</td>
    </tr>
    <tr>
      <th>Addition of animation to field node</th>
      <td style="text-align: center;">〇</td>
      <td style="text-align: center;">-</td>
      <td style="text-align: center;">-</td>
    </tr>
  </tbody>
</table>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>You can check which emitter type is being used by using the EffectMaker workspace node icon, as shown in the following image.</p>
    <p>
      <span class="embedded-file-wrapper ">
        <img src="../Attachments/Attach_83956195/524657585.png" width="226" height="109" class="embedded-image" />
      </span>
    </p>
  </div>
</div>
<p>  <span class="status_macro_base status_macro_Blue">Related Links</span> For more information, see the following pages. </p>
<table class="table">
  <thead>
    <tr>
      <th>
        <a href="../Pages/Page_87916700.html">Custom Field</a>
      </th>
      <td>Describes the <strong>Custom Fields</strong> feature for configuring fields that have been independently prepared for a game application.</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_83955720.html">Custom Action Node</a>
      </th>
      <td>Describes the <strong>Custom Action</strong> feature, which can be used to configure user-defined actions for game applications.</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955580_h2_3">Emitter Processes</h2>
<p>Emitters run the following five processes on either the <strong>CPU</strong> or the <strong>GPU</strong>.</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">Emitter Processing</th>
      <th style="text-align: center;">Processing Description</th>
    </tr>
    <tr>
      <td>Emitter Calculation</td>
      <td>
        <p>Animation processing and emitter matrix update processing occurs based on the emitter time.<br />These steps are run on the <strong>CPU</strong>.<br /><span class="status_macro_base status_macro_Blue">Related Links</span> For more information about emitter time, see <a href="../Pages/Page_92316100.html">Emitter Time and Particle Time</a>.</p>
      </td>
    </tr>
    <tr>
      <td>Particle Emission</td>
      <td>This process determines the amount of particles to emit from the emitter and initializes the emitted particles.<br />This process is run on the <strong>CPU</strong>.</td>
    </tr>
    <tr>
      <td>Particle Behavior</td>
      <td>Particle behavior calculations update the particle position and speed.<br />The calculations are performed either on the <strong>CPU</strong> or the <strong>GPU</strong>, depending on the emitter type.</td>
    </tr>
    <tr>
      <td>Stream Out</td>
      <td>
        <p>In this process, the results of particle behavior calculations performed by the GPU are written to memory. It is only run when using a GPU+SO emitter.</p>
        <p>GPU+SO emitters use two-pass rendering because the particles are rendered based on the data written to memory in this process.</p>
      </td>
    </tr>
    <tr>
      <td>Issuance of Draw Commands</td>
      <td>
        <p>Configures render state settings and texture settings, and renders particles.</p>
        <p>If particle sorting has been specified, sorts particles (in the CPU) and renders each individual particle.<br />This process is run on the CPU.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>The following diagram describes the processing flow for each emitter type. <u> </u></p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/83081264.png" class="embedded-image" />
  </span>
</p>
<p>
  <a name="Anchor_83955580_artist"></a>
</p>
<h1 id="Anchor_83955580_h1_2">Detailed Descriptions of Emitter Types<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/96637529.png" width="100" alt="DoNotOpenViewer ビジュアルアーティスト" title="DoNotOpenViewer ビジュアルアーティスト" class="embedded-image" /></span></h1>
<p>This description for designers provides more details about emitter types.</p>
<p>
  <a name="Anchor_83955580_cpu"></a>
</p>
<h2 id="Anchor_83955580_h2_4">CPU Emitter (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079867.png" class="embedded-image" /></span>)</h2>
<ul>
  <li>A CPU emitter uses the <strong>CPU</strong> to calculate the position and velocity of particles.</li>
  <li>The following diagram describes the elements calculated by the CPU and GPU.<br />The CPU calculates the particle position and speed. The GPU calculates the scale, rotation, and color elements.</li>
</ul>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/163773113.png" class="embedded-image" />
  </span>
</p>
<p>The emitter types have the following advantages and disadvantages.</p>
<h3 id="Anchor_83955580_h3_1">Advantages</h3>
<ul>
  <li>Complex particle behavior can be calculated.</li>
  <li>Position and velocity data can be both obtained from and customized by the game application because the particle position and velocity are calculated using the CPU.<br />For example, as described later in this document, you can use the particle positions to place lights in the game application.</li>
</ul>
<p>
  <u> <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83956195/173215025.png" class="embedded-image" /></span> <br /> </u>
</p>
<h3 id="Anchor_83955580_h3_2">Disadvantages</h3>
<ul>
  <li>Memory is consumed to enable internal calculations in the CPU.</li>
  <li>Large amounts of CPU time are consumed when there are a large number of particles.<br />For example, if you release the approximately 4000 particles as described later, and are using the field <strong>GPU Noise</strong>, there will be a discrepancy in CPU load between the CPU and GPU_SO.<br />Unless you want to get and customize data from the game application, we cannot recommend using this option.</li>
</ul>
<table class="table">
  <tbody>
    <tr>
      <td rowspan="2">
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955557/173217089.gif" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <u>
            <strong>CPU</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p> <strong><span style="color: rgb(255,0,0);">CPU: 9.8%</span></strong> </p>
        <p>GPU: 0.3%<u>  <br />  </u></p>
      </td>
    </tr>
    <tr>
      <td>
        <p>
          <u>
            <strong>GPU_SO</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p> <strong><span style="color: rgb(255,0,0);">CPU: 0.1%</span></strong> </p>
        <p>GPU: 3.3%<u>  <br />  </u></p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955580_gpu"></a>
</p>
<h2 id="Anchor_83955580_h2_5">GPU Emitter (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079866.png" class="embedded-image" /></span>)</h2>
<p>A GPU emitter calculates particle position and velocity using the <strong>GPU or vertex shader</strong>. The emitter types have the following advantages and disadvantages.</p>
<p>The following diagram describes the elements calculated by the CPU and GPU.<br />The GPU calculates all of the particle position and speed, scale, rotation, and color elements.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/163773116.png" class="embedded-image" />
  </span>
</p>
<p>The emitter types have the following advantages and disadvantages.</p>
<h3 id="Anchor_83955580_h3_3">Advantages</h3>
<ul>
  <li>Both the CPU and GPU options are fast because particle position and velocity are calculated from particle time.<br />For example, if you release the approximately 4000 particles as described later, there will be a discrepancy in processing load between the CPU and GPU.</li>
</ul>
<table class="table">
  <tbody>
    <tr>
      <td rowspan="2">
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955557/173217089.gif" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <u>
            <strong>CPU</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p>
          <strong>
            <span style="color: rgb(255,0,0);">CPU: 3.0%</span>
          </strong>
        </p>
        <p>GPU: 0.3%<u>  <br />  </u></p>
      </td>
    </tr>
    <tr>
      <td>
        <p>
          <u>
            <strong>GPU</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p>
          <strong>
            <span style="color: rgb(255,0,0);">CPU: 0.1%</span>
          </strong>
        </p>
        <p>GPU: 0.3%<u>  <br />  </u></p>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83955580_h3_4">Disadvantages</h3>
<ul>
  <li>You cannot use game applications to get or customize position and speed data.</li>
</ul>
<p>
  <a name="Anchor_83955580_gpu_so"></a>
</p>
<h2 id="Anchor_83955580_h2_6">GPU+SO Emitter (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079865.png" class="embedded-image" /></span>)</h2>
<p>A GPU+SO emitter calculates particle position and velocity are processed using the <strong>GPU or compute shader</strong>. The emitter types have the following advantages and disadvantages.</p>
<p>The following diagram describes the elements calculated by the CPU and GPU.<br />The GPU calculates all of the particle position and speed, scale, rotation, and color elements.<br />In addition, complicated calculations are possible because the particle position and speed is calculated using a specialized Compute Shader.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/163773117.png" class="embedded-image" />
  </span>
</p>
<h3 id="Anchor_83955580_h3_5">Advantages</h3>
<ul>
  <li>Fewer CPU resources are consumed.</li>
  <li>Complex particle behavior can be calculated when the compute shader is used.<br />For example, it is effective for calculating collision detection when the rock comes into contact with the ground in the following sample effect, <strong>RockBreak</strong>.</li>
</ul>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/83081213.gif" height="250" class="embedded-image" />
  </span>
</p>
<h3 id="Anchor_83955580_h3_6">Disadvantages</h3>
<ul>
  <li>More GPU processing resources are consumed because the GPU cycles twice for each emitter.<br />For example, in the field <strong>Simple Collision</strong> where determining collision with a virtual surface, the collision detection calculations will put load on the GPU.</li>
</ul>
<table class="table">
  <tbody>
    <tr>
      <td rowspan="2">
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955557/173217610.gif" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <u>
            <strong>CPU</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p>CPU: 1.6%</p>
        <p>
          <strong>
            <span style="color: rgb(255,0,0);">GPU: 0.5%</span>
          </strong>
          <u>  <br />  </u>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <p>
          <u>
            <strong>GPU_SO</strong>
          </u>
        </p>
        <p>
          <u>  <br />  </u>
        </p>
        <p>CPU: 0.1%</p>
        <p>
          <strong>
            <span style="color: rgb(255,0,0);">GPU: 4.4%</span>
          </strong>
          <u>  <br />  </u>
        </p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955580_developer"></a>
</p>
<h1 id="Anchor_83955580_h1_3">Detailed Descriptions of Emitter Types<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/96637546.png" width="100" class="embedded-image" /></span></h1>
<p>This description for developers provides more details about emitter types.</p>
<h2 id="Anchor_83955580_h2_7">CPU Emitter</h2>
<p>In a CPU emitter, the CPU is used to process the position and speed of particles. CPU emitters are selected automatically in EffectMaker when using custom actions to get particle information from the game program or customizing. When CPU emitters are used, particle behavior is processed by the CPU after emitter calculations and particle emission processing. For particle behavior processing, color and scale values to be referenced by the game application are calculated along with the position and velocity. However, actual particle rendering uses the values calculated by the vertex shader, and not these values. In addition, during particle behavior processing, the CPU handles processes in which particle velocity is added based on the provided particle position. Particle positions and particle velocity are multi-buffered so that the buffer being read by the GPU is not overwritten by the CPU.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/89073565.png" width="600" class="embedded-image" />
  </span>
</p>
<h2 id="Anchor_83955580_h2_8">GPU Emitter</h2>
<p>GPU emitters are selected when particle position and particle velocity can be calculated from particle time. Particle position and particle velocity are calculated based on the initial particle position and initial particle velocity in the vertex shader when the particles are rendered. Because particle position and particle velocity are calculated from particle time, there is not much flexibility in terms of controlling particle behavior based on the position and velocity in the previous frame or referencing the calculation results of the current frame from the next frame. Even so, this type of emitter has the lowest cost in terms of CPU/GPU speed.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/104736948.png" width="600" class="embedded-image" />
  </span>
</p>
<h2 id="Anchor_83955580_h2_9">GPU+SO Emitter</h2>
<p>If particle position and particle velocity cannot be calculated from particle time (due to fields or a simple collision), the emitter runs as a GPU+SO emitter. This emitter type uses a compute shader to calculate the behavior of each particle and then writes the result to memory, which is then used to render the particle. This results in two-pass rendering.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955580/104736947.png" width="600" class="embedded-image" />
  </span>
</p>
<p> </p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
