<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Model | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Model -->
<div class="pagetitle" id="PageId_187885235">Model</div>
<div class="text_separate">
<h1 id="Anchor_187885235_h1_1">Overview</h1>
<p>This page describes the features of NintendoWare 3D models.</p>
<h1 id="Anchor_187885235_h1_2">Compositional Elements of a Model</h1>
<p>Models as handled by the <code>g3d</code> library are comprised of three main elements. These three elements are <em>shape</em>, <em>material</em>, and <em>skeleton</em>.</p>
<h2 id="Anchor_187885235_h2_1">Shape</h2>
<p>This element represents a shape for the model. One model can have numerous elements of this type. One material is applied to each shape.</p>
<h2 id="Anchor_187885235_h2_2">Material</h2>
<p>This element represents a texture for the model. One model can have numerous elements of this type.</p>
<h2 id="Anchor_187885235_h2_3">Skeleton</h2>
<p>This element represents the bony framework for the model. One model can have only one element of this type.</p>
<h1 id="Anchor_187885235_h1_3">Model Binary Resources</h1>
<p>The model binary resources are stored in a BFRES file. This file is exported by the <a href="../Pages/Page_83955997.html">3D binary converter</a> based on the FMDA or FMDB intermediate files that have been entered in the tool. A BFRES file can contain multiple model binary resources. A single model binary resource corresponds to one instance of the <code><span class="ApiLink_nn__g3d__ResModel">nn::g3d::ResModel</span></code> class.</p>
<h2 id="Anchor_187885235_h2_4">Composition of a Model Binary Resource</h2>
<p>Broadly speaking, a model binary resource (an instance of <code><span class="ApiLink_nn__g3d__ResModel">nn::g3d::ResModel</span></code>) has the following composition. The following sections provide overviews of the various compositional elements. For more information, see the API function reference.</p>
<div class="plantuml-svg-inline">
  <img src="../Attachments/Attach_187885235/plantuml_1.svg" />
</div>
<p>
  <br />
</p>
<h3 id="Anchor_187885235_h3_1">Composition of the Model's Geometry Data</h3>
<p>The geometry data in the model binary resource is comprised of the following elements.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Name</th>
      <th>Data Type</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Shape</td>
      <td>
        <span class="ApiLink_nn__g3d__ResShape">nn::g3d::ResShape</span>
      </td>
      <td>Data representing a single shape.</td>
    </tr>
    <tr>
      <td>Mesh</td>
      <td>
        <span class="ApiLink_nn__g3d__ResMesh">nn::g3d::ResMesh</span>
      </td>
      <td>Data for handling <a href="../Pages/Page_106333688.html">LOD</a>. The shape has several LOD level meshes.</td>
    </tr>
    <tr>
      <td>Submesh</td>
      <td>
        <span class="ApiLink_nn__g3d__ResSubMesh">nn::g3d::ResSubMesh</span>
      </td>
      <td>
        <p>The smallest rendering unit, derived from dividing a mesh into even smaller units. Used primarily for <a href="../Pages/Page_106333662.html#Anchor_106333662_view_frustum_culling">view frustum culling</a>.</p>
        <p>A mesh will have smaller submeshes only if the intermediate file optimizer was run with the option for <a href="../Pages/Page_83955705.html#Anchor_83955705_divide_submesh">submesh division</a>. If submesh division was not performed, the single mesh will only have one submesh.</p>
      </td>
    </tr>
    <tr>
      <td>Vertex data</td>
      <td>
        <span class="ApiLink_nn__g3d__ResVertex">nn::g3d::ResVertex</span>
      </td>
      <td>Data dealing with vertex data.</td>
    </tr>
    <tr>
      <td>Vertex attribute information</td>
      <td>
        <span class="ApiLink_nn__g3d__ResVertexAttr">nn::g3d::ResVertexAttr</span>
      </td>
      <td>Data dealing with vertex attribute information. This data includes information like the name of the vertex attribute, the index of the target vertex buffer, the format of the vertex attribute, and the offset of the vertex attribute.</td>
    </tr>
  </tbody>
</table>
<p>As shown in the schematic, a typical model is comprised of multiple shapes, each shape has multiple meshes, and each mesh has multiple submeshes.</p>
<p>
  <br />
</p>
<div class="flowchart-svg-inline">
  <img src="../Attachments/Attach_187885235/flowchart_1.svg" />
</div>
<h3 id="Anchor_187885235_h3_2">Composition of the Model's Material Data</h3>
<p>The material data in the model binary resource is comprised of the following elements.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Name</th>
      <th>Data Type</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Material</td>
      <td>
        <span class="ApiLink_nn__g3d__ResMaterial">nn::g3d::ResMaterial</span>
      </td>
      <td>Data dealing with the material's information. A model can have numerous materials.</td>
    </tr>
    <tr>
      <td>Shader assignment information</td>
      <td>
        <span class="ApiLink_nn__g3d__ResShaderAssign">nn::g3d::ResShaderAssign</span>
      </td>
      <td>
        <p>Data dealing with information about the association between shaders and the model. This element has the following information.</p>
        <ul>
          <li>The names of the shader archive and shading model set for the material.</li>
          <li>The correspondence between the shader's vertex attributes and samplers with the shader attributes and the samplers in the model data.</li>
          <li>The string representing the shader's option variable values.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>Shader parameter information</td>
      <td>
        <span class="ApiLink_nn__g3d__ResShaderParam">nn::g3d::ResShaderParam</span>
      </td>
      <td>
        <p>Data dealing with information about the shader parameters. This element has information like the size and offset of each shader parameter.</p>
        <p>For more information, see <a href="../Pages/Page_106332818.html">Uniform Blocks</a> &gt; Material.</p>
      </td>
    </tr>
    <tr>
      <td>Sampler</td>
      <td>
        <span class="ApiLink_nn__gfx__TSampler">nn::gfx::Sampler</span>
      </td>
      <td>This is the sampler object.</td>
    </tr>
    <tr>
      <td>Sampler information</td>
      <td>
        <span class="ApiLink_nn__gfx__SamplerInfo">nn::gfx::SamperInfo</span>
      </td>
      <td>The sampler information.</td>
    </tr>
    <tr>
      <td>Rendering Information</td>
      <td>
        <span class="ApiLink_nn__g3d__ResRenderInfo">nn::g3d::ResRenderInfo</span>
      </td>
      <td>Data dealing with information about rendering. The user defines which information this element holds. Presumably it includes render state information.</td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_187885235_h3_3">Composition of the Model's Skeleton Data</h3>
<p>The skeleton data in the model binary resource is comprised of the following elements.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Name</th>
      <th>Data Type</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Skeleton</td>
      <td>
        <span class="ApiLink_nn__g3d__ResSkeleton">nn::g3d::ResSkeleton</span>
      </td>
      <td>Data dealing with information about the skeleton. This element has information for skinning and the like. The model has only one skeleton.</td>
    </tr>
    <tr>
      <td>Bone</td>
      <td>
        <span class="ApiLink_nn__g3d__ResBone">nn::g3d::ResBone</span>
      </td>
      <td>Data dealing with information about bones.</td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h1 id="Anchor_187885235_h1_4">Model Instance</h1>
<p>To handle a model, you must create an instance of the <code><span class="ApiLink_nn__g3d__ResModel">nn::g3d::ModelObj</span></code> class from the instance of the <code><span class="ApiLink_nn__g3d__ModelObj">nn::g3d::ResModel</span></code> class. The <code>g3d</code> library uses uniform blocks defined by the system for the model's shape, material, and skeleton elements. These are called the shape uniform block, the material uniform block, and the skeleton uniform block. The main job of the <code><span class="ApiLink_nn__g3d__ModelObj">nn::g3d::ModelObj</span></code> class is to update these uniform blocks. The system determines the type for the shape uniform block and the skeleton uniform block. The material uniform block can be freely defined by the user. For more information, see <a href="../Pages/Page_106332818.html">Uniform Blocks</a>.</p>
<h2 id="Anchor_187885235_h2_5">Composition of a Model Instance</h2>
<p>The model instance (<code><span class="ApiLink_nn__g3d__ModelObj">nn::g3d::ModelObj</span></code>)  has the following composition. The following sections provide overviews of the various compositional elements. For more information, see the API function reference.</p>
<p style="text-align: center;">
  <br />
</p>
<div class="flowchart-svg-inline">
  <img src="../Attachments/Attach_187885235/flowchart_2.svg" />
</div>
<h3 id="Anchor_187885235_h3_4">Compositional Elements of the Model Instance</h3>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Model object</td>
      <td>
        <span class="ApiLink_nn__g3d__ModelObj">nn::g3d::ModelObj</span>
      </td>
      <td>The instance of the model. Updates the various objects.</td>
    </tr>
    <tr>
      <td>Shape object</td>
      <td>
        <span class="ApiLink_nn__g3d__ShapeObj">nn::g3d::ShapeObj</span>
      </td>
      <td>The shape instance. Updates the shape uniform block, calculates bounding spheres, and the like.</td>
    </tr>
    <tr>
      <td>Material object</td>
      <td>
        <span class="ApiLink_nn__g3d__MaterialObj">nn::g3d::MaterialObj</span>
      </td>
      <td>The material instance. Edits shader parameters, updates the material uniform block, and the like.</td>
    </tr>
    <tr>
      <td>Skeleton object</td>
      <td>
        <span class="ApiLink_nn__g3d__SkeletonObj">nn::g3d::SkeletonObj</span>
      </td>
      <td>The skeleton instance. Calculates matrix palettes for skinning, updates the skeleton uniform block, and the like.</td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__g3d__ResModel', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_model.html' )
SetUrl( 'ApiLink_nn__g3d__ResShape', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shape.html' )
SetUrl( 'ApiLink_nn__g3d__ResMesh', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_mesh.html' )
SetUrl( 'ApiLink_nn__g3d__ResSubMesh', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_sub_mesh.html' )
SetUrl( 'ApiLink_nn__g3d__ResVertex', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_vertex.html' )
SetUrl( 'ApiLink_nn__g3d__ResVertexAttr', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_vertex_attr.html' )
SetUrl( 'ApiLink_nn__g3d__ResMaterial', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_material.html' )
SetUrl( 'ApiLink_nn__g3d__ResShaderAssign', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shader_assign.html' )
SetUrl( 'ApiLink_nn__g3d__ResShaderParam', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shader_param.html' )
SetUrl( 'ApiLink_nn__gfx__TSampler', '../../../Api/HtmlNX/classnn_1_1gfx_1_1_t_sampler.html' )
SetUrl( 'ApiLink_nn__gfx__SamplerInfo', '../../../Api/HtmlNX/classnn_1_1gfx_1_1_sampler_info.html' )
SetUrl( 'ApiLink_nn__g3d__ResRenderInfo', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_render_info.html' )
SetUrl( 'ApiLink_nn__g3d__ResSkeleton', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_skeleton.html' )
SetUrl( 'ApiLink_nn__g3d__ResBone', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_bone.html' )
SetUrl( 'ApiLink_nn__g3d__ModelObj', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_model_obj.html' )
SetUrl( 'ApiLink_nn__g3d__ShapeObj', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_shape_obj.html' )
SetUrl( 'ApiLink_nn__g3d__MaterialObj', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_material_obj.html' )
SetUrl( 'ApiLink_nn__g3d__SkeletonObj', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_skeleton_obj.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
