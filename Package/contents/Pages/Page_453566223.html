<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>BusyMutex Class | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- BusyMutex Class -->
<div class="pagetitle" id="PageId_453566223">BusyMutex Class</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_453566223_h1_1">BusyMutex Class</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_453566223_h2_1">Feature Overview</a>
      </li>
      <li>
        <a href="#Anchor_453566223_h2_2">Sample Uses for the BusyMutex Class</a>
      </li>
      <li>
        <a href="#Anchor_453566223_h2_3">Considerations When Using the BusyMutex Class</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_453566223_h1_1">BusyMutex Class</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Busy mutex functionality is available in NX Add-On 8.2 and later.</p>
  </div>
</div>
<h2 id="Anchor_453566223_h2_1">Feature Overview</h2>
<p>The <span class="ApiLink_nn__os__BusyMutex">nn::os::BusyMutex</span> class is a synchronization feature for the mutual exclusion of shared resources being used by multiple <a href="../Pages/Page_83955697.html">threads</a>.<br />This mechanism prevents certain areas within programs from being run simultaneously within multiple threads. It also prevents resources from being accessed by multiple threads simultaneously.</p>
<p>The <span class="ApiLink_nn__os__BusyMutex">nn::os::BusyMutex</span> class wraps the <a href="../Pages/Page_453565933.html">busy mutex functionality</a> that is using the <span class="ApiLink_nn__os__BusyMutexType">nn::os::BusyMutexType</span> object, and it contains the following member functions.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Notes</th>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_nn__os__BusyMutex__BusyMutex()_NN_NOEXCEPT">BusyMutex()</span>
      </td>
      <td>Constructor</td>
      <td>Performs an initialization process equivalent to <span class="ApiLink_nn__os__InitializeBusyMutex">nn::os::InitializeBusyMutex()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_nn__os__BusyMutex__~BusyMutex">~BusyMutex()</span>
      </td>
      <td>Destructor</td>
      <td>Performs a destruction process equivalent to <span class="ApiLink_void_nn__os__FinalizeBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT">nn::os::FinalizeBusyMutex()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nn__os__BusyMutex__Lock()_NN_NOEXCEPT">Lock()</span>
      </td>
      <td>Gets a lock</td>
      <td>Performs a lock operation equivalent to <span class="ApiLink_void_nn__os__LockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT">nn::os::LockBusyMutex()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_nn__os__BusyMutex__TryLock">TryLock()</span>
      </td>
      <td>Attempts to get a lock</td>
      <td>Tries a lock operation equivalent to <span class="ApiLink_bool_nn__os__TryLockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT">nn::os::TryLockBusyMutex()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nn__os__BusyMutex__Unlock()_NN_NOEXCEPT">Unlock()</span>
      </td>
      <td>Releases lock</td>
      <td>Performs an unlock operation equivalent to <span class="ApiLink_void_nn__os__UnlockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT">nn::os::UnlockBusyMutex()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nn__os__BusyMutex__lock()_NN_NOEXCEPT">lock()</span>
      </td>
      <td>Gets a lock</td>
      <td>Equivalent to <span class="ApiLink_void_nn__os__BusyMutex__Lock()_NN_NOEXCEPT">Lock()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_nn__os__BusyMutex__try_lock">try_lock()</span>
      </td>
      <td>Attempts to get a lock</td>
      <td>Equivalent to <span class="ApiLink_bool_nn__os__BusyMutex__TryLock()_NN_NOEXCEPT">TryLock()</span>.</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nn__os__BusyMutex__unlock()_NN_NOEXCEPT">unlock()</span>
      </td>
      <td>Releases lock</td>
      <td>Equivalent to <span class="ApiLink_void_nn__os__BusyMutex__Unlock()_NN_NOEXCEPT">Unlock()</span>.</td>
    </tr>
  </tbody>
</table>
<p>The <span class="ApiLink_nn__os__BusyMutex">nn::os::BusyMutex</span> class meets the standard C++ BasicLockable and Lockable requirements, so it can serve as a type parameter for class templates like <code>std::lock_guard</code> and <code>std::unique_lock</code>.</p>
<h2 id="Anchor_453566223_h2_2">Sample Uses for the BusyMutex Class</h2>
<p>The <span class="ApiLink_nn__os__BusyMutex">nn::os::BusyMutex</span> class is commonly used as a member variable of some class, as shown below. The next example's <code>Counter</code> class provides a thread-safe feature for incrementing and decrementing the counter.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="cp">#include &lt;mutex&gt;
#include &lt;nn/os.h&gt;
</span>
<span class="k">class</span> <span class="nc">Counter</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">int</span>               <span class="n">m_Counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::os::</span><span class="n">BusyMutex</span> <span class="n">m_Mutex</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">void</span> <span class="n">Increment</span><span class="p">()</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">std::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">m_Mutex</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span> <span class="n">m_Mutex</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">++</span><span class="n">m_Counter</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">void</span> <span class="n">Decrement</span><span class="p">()</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">std::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">m_Mutex</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span> <span class="n">m_Mutex</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">--</span><span class="n">m_Counter</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">int</span> <span class="n">Get</span><span class="p">()</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">std::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">m_Mutex</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span> <span class="n">m_Mutex</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">m_Counter</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
<span class="p">};</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>For all of the member functions within the <code>Counter</code> class in the preceding example, the <code>m_Counter</code> variable is referenced after getting the <code>m_Mutex</code> lock. As a result, calling these member functions simultaneously from multiple threads does not access the <code>m_Counter</code> variable.</p>
<h2 id="Anchor_453566223_h2_3">Considerations When Using the BusyMutex Class</h2>
<p>Also see the notes listed in <a href="../Pages/Page_453565933.html">Busy Mutex Functionality</a>.</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__os__BusyMutex', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html' )
SetUrl( 'ApiLink_nn__os__BusyMutexType', '../../../Api/HtmlNX/structnn_1_1os_1_1_busy_mutex_type.html' )
SetUrl( 'ApiLink_nn__os__BusyMutex__BusyMutex()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#ac09768bcdc7c71fb5d141e0079129591' )
SetUrl( 'ApiLink_nn__os__InitializeBusyMutex', '../../../Api/HtmlNX/namespacenn_1_1os.html#ae3c90ec0fd947f75d07e4411cbd4cfdb' )
SetUrl( 'ApiLink_nn__os__BusyMutex__~BusyMutex', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a0950691363ea5592dd080f9ddeeeb2b2' )
SetUrl( 'ApiLink_void_nn__os__FinalizeBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#acbc5df299ac9ed31c86d87108101dca1' )
SetUrl( 'ApiLink_void_nn__os__BusyMutex__Lock()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a9336bfa71d84a0cd31f10ebad5da0c1a' )
SetUrl( 'ApiLink_void_nn__os__LockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#ad902011901e60f940cb26ffb62989688' )
SetUrl( 'ApiLink_nn__os__BusyMutex__TryLock', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a0fd66d8bb20fd3bbf6a943ea05b84b68' )
SetUrl( 'ApiLink_bool_nn__os__TryLockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a13af259dc4589bac99195d45db41a1cb' )
SetUrl( 'ApiLink_void_nn__os__BusyMutex__Unlock()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a589b4ca55d071e395fa6e9e1bbd1db2e' )
SetUrl( 'ApiLink_void_nn__os__UnlockBusyMutex(BusyMutexType_*mutex)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a44d95eddeda268be15a448814cfaf2c8' )
SetUrl( 'ApiLink_void_nn__os__BusyMutex__lock()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a54662f4c19432ec011c051887076fa68' )
SetUrl( 'ApiLink_nn__os__BusyMutex__try_lock', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a3e0df4a5d53b81258e6887134c80eb28' )
SetUrl( 'ApiLink_bool_nn__os__BusyMutex__TryLock()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a0fd66d8bb20fd3bbf6a943ea05b84b68' )
SetUrl( 'ApiLink_void_nn__os__BusyMutex__unlock()_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1os_1_1_busy_mutex.html#a12d137c77b5e0a75a4aff37fbff04a6b' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
