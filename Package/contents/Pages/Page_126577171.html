<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Using Custom Shaders | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Using Custom Shaders -->
<div class="pagetitle" id="PageId_126577171">Using Custom Shaders</div>
<div class="text_separate">
<h1 id="Anchor_126577171_h1_1">Using Custom Shaders</h1>
<p>This page describes how to configure programmable shaders for game applications, using a sample custom shader as an example.<br />This sample custom shader creates smoke effects that are affected by lighting.<br /> </p>
<p>You can use the custom shader provided as a sample by setting the sample project file (<code>ProjConfig.xml</code>) in Project Settings in the <strong>Option</strong> settings (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93522162.png" class="embedded-image" /></span>).<br />You can use EffectViewer to see how normal maps and light maps affect primitive particle effects.<br /> </p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p> The sample project file and custom shader are in the following location.<br /> <strong><code>\Samples\Sources\Applications\VfxCustomShader\Resources\</code></strong></p>
  </div>
</div>
<h2 id="Anchor_126577171_h2_1">Setup</h2>
<p>Before beginning this task, start EffectMaker and EffectViewer.</p>
<p>
  <span class="status_macro_base status_macro_Blue">Related Links</span> For more information about starting EffectMaker and EffectViewer, see <a href="../Pages/Page_83956096.html">Workflow</a>.</p>
<h3 id="Anchor_126577171_h3_1">Registering the Custom Shaders</h3>
<p>Use the following procedure to register the project settings file prepared as a sample to EffectMaker.<br />Register the project settings file to use the associated sample custom shaders.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <th>1</th>
      <td>To open the <strong>Option Settings</strong> dialog box, from the EffectMaker main menu, select <strong>Tools</strong> &gt; <strong>Options</strong>.</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Select <strong>Project Settings</strong>.</td>
    </tr>
    <tr>
      <th>3.</th>
      <td>
        <div class="content-wrapper">
          <p>Register the sample project file (<code>ProjConfig.xml</code>) to the Project Setting File Path (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" class="embedded-image" /></span>).</p>
        </div>
      </td>
    </tr>
    <tr>
      <th>4</th>
      <td>To finalize the settings, click <strong>OK</strong>.</td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_126577171_h3_2">Loading the Emitter Set</h3>
<p>Use the following procedure to load the emitter set file prepared as a sample to EffectMaker.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <th>1</th>
      <td>
        <div class="content-wrapper">From the main menu, select <strong>File</strong> &gt; <strong>Open</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079802.png" class="embedded-image" /></span>).</div>
      </td>
    </tr>
    <tr>
      <th>2</th>
      <td>When a window opens, select and open the emitter set file (ESET file) from the following location.<br /> <strong>       \Samples\Sources\Resources\Vfx\Eset\Smoke_Template.eset</strong></td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_126577171_h3_3">Verifying in the Viewer</h3>
<p>Confirm that the loaded effect has been transferred to the viewer, as shown in the following image.<br />After transferring is complete, you can proceed with your work while checking the changes in the viewer.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <th style="text-align: center;">
        <div class="content-wrapper">
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955557/198955352.gif" class="embedded-image" />
          </span>
        </div>
      </th>
      <th style="text-align: center;">
        <div class="content-wrapper">
          <p>Primitive Model Used</p>
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_83956195/193057778.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </th>
    </tr>
    <tr>
      <td colspan="2">This smoke effect uses primitive particles.<br /> As the image on the right shows, a flat polygon with normals stretched using the DCC tool is registered.</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_126577171_h2_2">Setting Custom Shaders</h2>
<p>Set the custom shaders for the loaded emitter set.</p>
<h3 id="Anchor_126577171_h3_4">Selecting the Emitter Nodes</h3>
<p>In the workspace, select the <strong>Primitive</strong> node (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079866.png" class="embedded-image" /></span>) directly beneath <strong>Smoke_Template</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079868.png" class="embedded-image" /></span>).</p>
<h3 id="Anchor_126577171_h3_5">Selecting the Cstm Shader Tab</h3>
<p>Select the <strong>Cstm Shader</strong> tab (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520162.png" width="40" class="embedded-image" /></span>).</p>
<h3 id="Anchor_126577171_h3_6">Setting the Cstm Shader Type</h3>
<p>Verify that the<strong> Custom Shader Setting</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) for <strong>Custom Shader</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" width="16" class="embedded-image" /></span>) is <strong>Custom Shader Sample</strong>.<br /><strong>Custom Shader Sample</strong> is a custom shader that has been provided as a sample.<br />The <strong>Custom Shader Sample</strong> settings are displayed in the shader key (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" class="embedded-image" /></span>).</p>
<h3 id="Anchor_126577171_h3_7">Configuring the Lighting</h3>
<p>The lighting parameters can be configured using shader keys.</p>
<p>
  <strong>Shader Key</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" class="embedded-image" /></span>) includes a series of check boxes (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520244.png" class="embedded-image" /></span>) for the sample shaders.<br />Select the Sample Light (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) and SimleIbl (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) check boxes (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520239.png" class="embedded-image" /></span>).</p>
<p>In <strong>Parameters</strong>, change IBL Color 0 (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) to RGB = 1.0, 1.0, 1.0 (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83956195/198956525.png" width="24" class="embedded-image" /></span>), and change IBL Color 1 (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) to RGB = 0.7, 0.75, 1.0 (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83956195/198956524.png" width="24" class="embedded-image" /></span>).</p>
<p>The image shows the output results as seen in the viewer.<br />Although this image uses a plane as the primitive model, you can still see divisions in the polygons if you look closely.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/198956547.gif" class="embedded-image" />
  </span>  </p>
<div class="confluence-information-macro has-no-icon confluence-information-macro-information">
  <div class="confluence-information-macro-body">
    <p>This completed data is in the following location.<br /> <strong> \Samples\Sources\Resources\Vfx\Eset\Smoke.eset</strong></p>
  </div>
</div>
<h2 id="Anchor_126577171_h2_3">Configuring Lighting Using Normal Maps</h2>
<p>This example adds a normal map texture to the smoke effect created previously to create a more realistic effect.</p>
<h3 id="Anchor_126577171_h3_8">Selecting the Emitter Nodes</h3>
<p>In the workspace, select the <strong>Primitive</strong> node (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079866.png" class="embedded-image" /></span>) directly beneath <strong>Smoke</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079868.png" class="embedded-image" /></span>).</p>
<h3 id="Anchor_126577171_h3_9">Select the Texture Tab</h3>
<p>Select the <strong>Texture</strong> tab (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520162.png" width="40" class="embedded-image" /></span>), and add a normal map texture.<br /> Select the <strong>Texture 1</strong> sub-tab (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/94709233.png" width="40" class="embedded-image" /></span>) and then go to <strong>Specify File</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>), click the <strong>Load</strong> button (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83080046.png" class="embedded-image" /></span>), and select the following file.<br />   <strong>\Samples\Sources\Resources\Vfx\Eset\Textures\Smoke_Normal.ftxb</strong></p>
<h3 id="Anchor_126577171_h3_10">Selecting the Cstm Shader Tab</h3>
<p>Select the <strong>Cstm Shader</strong> tab (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520162.png" width="40" class="embedded-image" /></span>).</p>
<h3 id="Anchor_126577171_h3_11">Setting the Cstm Shader Type</h3>
<p>In <strong>Shader Keys</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" class="embedded-image" /></span>), clear the <strong>Sample Light</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) check box (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520244.png" class="embedded-image" /></span>).<br />Select the <strong>Normal Map</strong> (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520163.png" width="40" class="embedded-image" /></span>) check box (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520239.png" class="embedded-image" /></span>). </p>
<p>The image shows the output results as seen in the viewer.<br />The normal map adds various surface irregularities, so the divisions in the polygons are no longer prominent.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/198956568.gif" class="embedded-image" />
  </span>
</p>
<p>This completed data is in the following location.<br /> \Samples\Sources\Resources\Vfx\Eset\Smoke_NormalMap.eset</p>
<p>
  <span class="status_macro_base status_macro_Blue">Related Links</span> For more information, see the following pages. </p>
<table class="wrapped">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_92121400.html">Option Project Settings</a>
      </th>
      <td>Describes the settings in <strong>Project Settings</strong> that can be configured for each game project.</td>
      <td>
        <div class="content-wrapper">
          <span class="embedded-file-wrapper image-left-wrapper">
            <img src="../Attachments/Attach_83955555/96637529.png" width="100" alt="DoNotOpenViewer ビジュアルアーティスト" title="DoNotOpenViewer ビジュアルアーティスト" class="embedded-image image-left" />
          </span>
        </div>
      </td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_100908135.html">Custom Shader Settings</a>
      </th>
      <td>Describes the settings for programmable shaders, prepared for game applications.</td>
      <td>
        <div class="content-wrapper">
          <span class="embedded-file-wrapper image-left-wrapper">
            <img src="../Attachments/Attach_83955555/96637529.png" width="100" alt="DoNotOpenViewer ビジュアルアーティスト" title="DoNotOpenViewer ビジュアルアーティスト" class="embedded-image image-left" />
          </span>
        </div>
      </td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_83955731.html">Custom Shader Examples</a>
      </th>
      <td>This section introduces examples of implementations of various expressions using custom shaders.</td>
      <td>
        <div class="content-wrapper">
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955555/96637546.png" width="100" alt="DoNotOpenViewer プログラマ" title="DoNotOpenViewer プログラマ" class="embedded-image" />
          </span>
        </div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
