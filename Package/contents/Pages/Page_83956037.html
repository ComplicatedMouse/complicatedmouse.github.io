<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3D Shader Converter | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3D Shader Converter -->
<div class="pagetitle" id="PageId_83956037">3D Shader Converter</div>
<div class="text_separate">
<p>This section describes the usage and considerations for the 3D shader converter (<code>%NINTENDO_SDK_ROOT%\Tools\Graphics\3dTools\3dShaderConverter.exe</code>).</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83956037_h1_1">Overview</a>
    </li>
    <li>
      <a href="#Anchor_83956037_h1_2">Command-Line Options</a>
    </li>
    <li>
      <a href="#Anchor_83956037_h1_3">Specifications</a>
    </li>
    <li>
      <a href="#Anchor_83956037_h1_4">Limitations</a>
    </li>
    <li>
      <a href="#Anchor_83956037_h1_5">Example Use</a>
    </li>
  </ul>
</p>
<h1 id="Anchor_83956037_h1_1">Overview</h1>
<p>This tool performs the following conversion processes.</p>
<ul>
  <li>Creates a shader definition file (FSD file) from a shader configuration file (FSC file).</li>
  <li>Creates a shader archive file (BFSHA file) for use in the runtime from the shader definition file (FSD file).<ul><li>You can specify which variation to create by including a shader variation file (FSV file) at the same time.</li></ul></li>
  <li>Merges multiple shader archive files (BFSHA files) into a single shader archive file.</li>
</ul>
<h1 id="Anchor_83956037_h1_2">Command-Line Options</h1>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe [--args-file &quot;&quot;] [--version] [-h] [-s] [--verify]
[--root-config &quot;&quot;] [--root-definition &quot;&quot;] [--force-variation] [--dump-shader-source &quot;&quot;] [--define-macro] [--glsl-version] 
[--api-type &quot;&quot;] [--code-type &quot;&quot;] [--debug-info-directory &quot;&quot;] [--shader-cache-directory &quot;&quot;] [--debug-info-level &quot;&quot;] [--glsl-extension &quot;&quot;]
[--preprocess] [--jobs &quot;&quot;] [--output &quot;&quot;] [--gfx-shader-converter-options &quot;&quot;] [--skip-convert] [--variation-begin-ratio &quot;&quot;] [--variation-end-ratio &quot;&quot;]
[File]... </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <strong>Note:</strong> If an option that cannot be specified multiple times is specified more than once, the value that was specified last is applied for the option.</p>
<table class="wrapped relative-table" style="width: 94.6088%;">
  <colgroup>
    <col style="width: 14.3255%;" />
    <col style="width: 4.03338%;" />
    <col style="width: 9.94437%;" />
    <col style="width: 3.82476%;" />
    <col style="width: 6.46732%;" />
    <col style="width: 10.6398%;" />
    <col style="width: 4.52017%;" />
    <col style="width: 46.2448%;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Option</th>
      <th>Short Form</th>
      <th>Possible Values</th>
      <th>Multiple Specifications</th>
      <th>
        <p>FSC &rarr; FSDB</p>
        <p>Predictive Text</p>
      </th>
      <th>
        <p>FSDB &rarr; BFSHA</p>
        <p>Predictive Text</p>
      </th>
      <th>
        <p>BFSHA</p>
        <p>Merge</p>
      </th>
      <th>Description</th>
    </tr>
    <tr>
      <td>
        <strong>--args-file</strong>
      </td>
      <td>
        <br />
      </td>
      <td>File path</td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>〇</td>
      <td>Specifies the file.<br />You can use the contents in the parameter file to specify arguments. The parameter file allows you to specify each option over several lines.<br />Lines starting with a number sign (#) are treated as comments. Newline characters cannot be included in escape sequences used in option specifications that appear between quotation marks (&quot;).</td>
    </tr>
    <tr>
      <td>
        <strong>--version</strong>
      </td>
      <td>
        <strong>-v</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>〇</td>
      <td>Displays version information.</td>
    </tr>
    <tr>
      <td>
        <strong>--help</strong>
      </td>
      <td>
        <strong>-h</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>〇</td>
      <td>Displays Help.</td>
    </tr>
    <tr>
      <td>
        <strong>--silent</strong>
      </td>
      <td>
        <strong>-s</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>〇</td>
      <td>Suppresses the display of messages during processing.</td>
    </tr>
    <tr>
      <td>
        <strong>--verify</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Determines whether the intermediate file can be converted to binary.</td>
    </tr>
    <tr>
      <td>
        <strong>--output</strong>
      </td>
      <td>
        <strong>-o</strong>
      </td>
      <td>File path<br /></td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>Required</td>
      <td>Specifies the output filename.<br />Examples:  <code>--output &quot;output_dir\demo.bfsha&quot;</code> ,<code> -o &quot;output_dir\demo.bfsha&quot;</code>.</td>
    </tr>
    <tr>
      <td>
        <strong>Position arguments</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>YES</td>
      <td>〇</td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Specifies shader configuration files (FSC files), shader definition files (FSD files), and shader variation files (FSVA files).</td>
    </tr>
    <tr>
      <td>
        <strong>--unified-annotation</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>If annotations differ between stages like the vertex shader and fragment shader, overwrite annotations in the following order of precedence: compute shader &gt; fragment shader &gt; geometry shader &gt; vertex shader.<br /></td>
    </tr>
    <tr>
      <td>
        <strong>--root-config</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Folder path</td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>Sets the path to the folder containing the shader definition file as a relative path from a specified folder.<br />Example) If you specify: <code>--root-config &quot;D:\home&quot;</code>, <code>D:\home</code> is removed from the path for the shader definition file.<br />This option cannot be used when specifying the converter input path.</td>
    </tr>
    <tr>
      <td>
        <strong>--root-definition</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Folder path<br /></td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Sets the path to the binary files as a relative path from a specified folder.<br />Example: If you specify: <code>--root-definition &quot;D:\home&quot;</code>, <code>D:\home</code> is removed from the path for the binary file.<br />This option cannot be used when specifying the converter input path.</td>
    </tr>
    <tr>
      <td>
        <strong>--force-variation</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Forcibly treats the branch shader option as <code>false</code> and handles it as a variation.</td>
    </tr>
    <tr>
      <td>
        <strong>--dump-shader-source</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Folder path<br /></td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <p>Enables the output of compile time information and specifies a path to the output folder.</p>
        <p>For more information about the output data, also see <a href="../Pages/Page_95696747.html">Platform-Specific Information</a>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--glsl-version</strong>
      </td>
      <td>
        <br />
      </td>
      <td>The GLSL version.</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <p>Required</p>
      </td>
      <td>
        <br />
      </td>
      <td>Specifies the version string for the GLSL inserted at the beginning of the source code.</td>
    </tr>
    <tr>
      <td>
        <strong>--api-type</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Function</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>Required</td>
      <td>
        <br />
      </td>
      <td>Specifies the type of graphics API to use. The default value is <code>GL</code>.<br />Installing add-on packages adds values that can be specified for this command.</td>
    </tr>
    <tr>
      <td>
        <strong>--code-type</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <p>&quot;Source&quot;<br />&quot;Binary&quot;</p>
        <p>&quot;Binary_Source&quot; </p>
        <p>&quot;Binary_Ir&quot;</p>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>Required</td>
      <td>
        <br />
      </td>
      <td>Specifies the type of shader to output. The value set depends on <code>api-type</code>.</td>
    </tr>
    <tr>
      <td>
        <strong>--debug-info-directory</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Folder path<br /></td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Displays the debugging information from the GPU debugger.</td>
    </tr>
    <tr>
      <td>
        <strong>--shader-cache-directory</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Folder path<br /></td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <div class="content-wrapper">
          <p class="auto-cursor-target">Caches the shader compilation results to the specified directory.  The second conversion is faster. Caching does not occur with <code>--api-type GL</code>.<br />The cache is exported to a directory named <span style="color: rgb(23,43,77);"><code>(<em>shader archive name</em>)_(<em>shading model name</em>)_(<em>API name</em>)_(<em>code type name</em>)</code></span> which is located directly beneath the specified directory.</p>
          <!--Remove-->
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--remove-unused-shader-cache</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <div class="content-wrapper">
          <p>If <code>--shader-cache-directory</code> is specified, all cache except for read or written shader cache will be deleted when the conversion process ends.<br />By combining the FSV file that contains all variations with options like <code>--skip-convert</code> and <code>--force-variation</code>, you can delete the cache that is unnecessary for the current environment. This option is designed for use with the build machine, and not for individual PCs.</p>
          <!--Remove-->
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--skip-shader-cache-directory-check</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <div class="content-wrapper">
          <p>If the directory specified in <code>--shader-cache-directory</code> cannot be accessed, conversion is performed without using shader cache.</p>
          <div class="content-wrapper">If this option is not specified and the directory cannot be accessed, a conversion error occurs.</div>
          <!--Remove-->
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--debug-info-level</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <p>None</p>
        <p>Debug</p>
        <p>&quot;High&quot;<br />&quot;Full&quot; </p>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Specifies the debug information level to append.<br />For a list of values that can be used, see <a href="../Pages/Page_89982392.html">Shader Converter (EXE)</a>.</td>
    </tr>
    <tr>
      <td>
        <strong>--preprocess</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Compiles shaders that have already been preprocessed.</td>
    </tr>
    <tr>
      <td>
        <strong>--use-preprocessor-variation</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Uses the preprocessor definitions to generate variations.<br />When no definition is specified, any variation constants that are present will be used for the option variables.<br />Depending on the <code>api-type</code> value, the length of the shader code, the number of variations, and the number of variation constants, you can sometimes significantly increase conversion speed by using this option in conjunction with the <code>--jobs</code> option.<br /><br />For more information about preprocessor definitions and variation constants, see <a href="../Pages/Page_89981854.html">Shader Compiler</a>.</td>
    </tr>
    <tr>
      <td>
        <strong>--define-macro</strong>
      </td>
      <td>
        <br />
      </td>
      <td>String</td>
      <td>YES</td>
      <td>〇</td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <div class="content-wrapper">
          <p>Defines a preprocessor macro.<br />To specify a value, add a <code>=</code> after the macro name and specify the value.</p>
          <p>If only the macro name is specified without a <code>=</code>, the value of the macro will be <code>1</code>.<br />Examples: <code>--define-macro &quot;HOGE&quot;</code>, <code>--define-macro &quot;FOO=2&quot;</code><br />The preceding example would embed the following code in the shader code.</p>
          <table class="codeblock">
            <tbody>
              <tr>
                <td class="code">
                  <div class="codeblock"><pre><span class="cp">#define HOGE 1
#define FOO 2 
</span></pre></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--glsl-extension</strong>
      </td>
      <td>
        <br />
      </td>
      <td>The <code>.glsl</code> extension.</td>
      <td>YES</td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Embeds the GLSL extension in the shader code. <br />Writing an extension to the shader source code directly causes a compiling error.</td>
    </tr>
    <tr>
      <td>
        <strong>--jobs</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Unsigned integer</td>
      <td>YES</td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <p>Specifies the maximum number of threads for parallel processing.<br />Specifying <code>1</code> runs the conversion job using a single thread.</p>
        <p>
          <strong>Note:</strong> In most cases, increasing this value increases the conversion speed by an amount proportional to the number of cores on the host system, but for some <strong>api-type</strong> values it is not possible to accelerate conversion due to the low-level design of the compiler.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--gfx-shader-converter-options</strong>
      </td>
      <td>
        <br />
      </td>
      <td>Option string.</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>〇</td>
      <td>Specifies options for <a href="../Pages/Page_89982392.html">Shader Converter</a>.<br />When simultaneously specifying Shader Converter options such as <code>--jobs</code> and <code>--shader-cache-directory</code> that are also present in 3D Shader Converter, the value specified later is generally used, and for options that can be specified multiple times, all of the specified values are used.<br /><br />When necessary, use single quotation marks to escape the double quotation marks used for Shader Converter options.<br />Example: <code>--gfx-shader-converter-options &quot;--preprocessor-definition='TEST' &quot;</code></td>
    </tr>
    <tr>
      <td>
        <strong>--skip-convert</strong>
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>Performs processing up to compiling shaders, and skips all processing other than compile (such as serializing to the shader archive).<br />For this reason, a shader archive is not output, but the <code>--shader-cashe-directory</code> option can be used to output a compile cache because compile is executed.<br />This can be used efficiently in cases such as when the <a href="../Pages/Page_297036649.html">distributed compilation</a> system is used.</td>
    </tr>
    <tr>
      <td>
        <p>
          <strong>--variation-begin-ratio</strong>
        </p>
        <p>
          <strong>--variation-end-ratio<br /></strong>
        </p>
      </td>
      <td>
        <br />
      </td>
      <td>Numerical values in the range from <code>0.0</code> to <code>1.0</code>.</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>〇</td>
      <td>
        <br />
      </td>
      <td>
        <p>Specifies as a ratio the starting position or end position of the range of the shader variation that is generated when separating conversion of a single shader archive into multiple times.<br />Use these options in combination with <code>--shader-cashe-directory</code> to use the <a href="../Pages/Page_297036649.html">distributed compilation</a> system.<br />When the range of all generated shader variations is <code>[0.0, 1.0]</code>, compiles the shader variations within the range of <code>[variation-begin-ratio, variation-end-ratio]</code>.<br />Set values such that <code>0.0</code> &lt;= <code>variation-begin-ratio</code> &lt;= <code>variation-end-ratio</code> &lt;= <code>1.0</code>.<br />If <code>variation-begin-ratio</code> is not specified, the shader variations within the range of <code>[0.0, variation-end-ratio]</code> will be compiled.<br />If <code>variation-end-ratio</code> is not specified, the shader variations within the range of <code>[variation-begin-ratio, 1.0]</code> will be compiled.</p>
        <p>If the specified range is narrow relative to the total number of shader variations and the number of compiled shader variations is calculated to be 0, a shader archive that does not include a shading model is generated.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>--merge-shader-archive-file</strong>
      </td>
      <td>
        <br />
      </td>
      <td>File path<br /></td>
      <td>YES</td>
      <td>
        <br />
      </td>
      <td>
        <br />
      </td>
      <td>Required</td>
      <td>
        <p>Specifies a shader archive file (BFSHA file).</p>
        <p>Specify multiple shader archive files to merge shading models and shader programs, convert the files to a single shader archive file, and export that file.<br />This option is good for uses such as <a href="../Pages/Page_297036649.html">distributed compilation</a>.</p>
      </td>
    </tr>
  </tbody>
</table>
<!--Remove-->
<h2 id="Anchor_83956037_h2_1">Platform-Specific Options</h2>
<p>For more information about platform-specific options, see <a href="../Pages/Page_95696747.html">Platform-Specific Information</a>.</p>
<h1 id="Anchor_83956037_h1_3">Specifications</h1>
<p>This section describes the 3D Shader Converter specifications.</p>
<h2 id="Anchor_83956037_h2_2">Specifying the Character Code Set Used in Source Files</h2>
<p>Specify the code page representing the character code set for shader source code using the <code>code_page</code> attribute in the FSC file. Source files are interpreted according to local system settings if <code>code_page</code>=&quot;<code>0</code>&quot; is specified. If there is a discrepancy between the loaded shader source and the code page written in the FSC file, there may be glitches in the display when compiling errors occur.</p>
<h2 id="Anchor_83956037_h2_3">Automatically Defined Macros</h2>
<p>The following macros are automatically defined during shader conversion.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Macro Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_VERTEX_SHADER">NN_G3D_VERTEX_SHADER</span>
      </td>
      <td>1</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_GEOMETRY_SHADER">NN_G3D_GEOMETRY_SHADER</span>
      </td>
      <td>1</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_FRAGMENT_SHADER">NN_G3D_FRAGMENT_SHADER</span>
      </td>
      <td>1</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_COMPUTE_SHADER">NN_G3D_COMPUTE_SHADER</span>
      </td>
      <td>1</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_TESSELLATION_CONTROL_SHADER">NN_G3D_TESSELLATION_CONTROL_SHADER</span>
      </td>
      <td>1</td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_NN_G3D_TESSELLATION_EVALUATION_SHADER">NN_G3D_TESSELLATION_EVALUATION_SHADER</span>
      </td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_4">Automatically Defined Options</h2>
<p>The following options are automatically defined.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Option</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>system_id</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_5">Shader Converter Functionality When Shader Variations Are Omitted in the FSC File</h2>
<p>The shader converter works on the assumption that all options are scripted as variations in the FSC file.</p>
<p>When the scripting of variations is omitted, the shader converter works in the following way.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Attribute Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>choice</td>
      <td>Same as <code>default</code>.</td>
    </tr>
    <tr>
      <td>default</td>
      <td>(Empty)</td>
    </tr>
    <tr>
      <td>branch</td>
      <td>false</td>
    </tr>
  </tbody>
</table>
<p>For more information about each attribute, see &lt;variation&gt; in the intermediate file specifications.</p>
<h2 id="Anchor_83956037_h2_6">Shader Variation File (FSVA File) </h2>
<h3 id="Anchor_83956037_h3_1">Behavior When Options Are Omitted</h3>
<p>When the shader converter filters out variations based on the options in the FSV file, it uses the default value specifier for the <code>choice</code> attribute for any options that are omitted.</p>
<h3 id="Anchor_83956037_h3_2">Behavior of Uniform Variable Branching Options When choice Is Specified</h3>
<p>When the shader converter filters out variations based on the FSV file, any options variables for uniform variable branching that have been coded in the file are ignored.</p>
<h2 id="Anchor_83956037_h2_7">Merging Shader Archive File (BFSHA File)</h2>
<p>Use the <code>--merge-shader-archive-file</code> option to convert multiple shader archive files to a single shader archive file.</p>
<p>Merging is only possible for shader archive files that satisfy the following conditions.</p>
<ul>
  <li>The version of the shader archive file matches the latest binary version supported by the shader converter.</li>
  <li>All shader archive files being merged were created from the same shader definition file.<ul><li>They have the same <code>ResShaderArchive</code> name.</li><li>They have the same number of shader options.</li></ul></li>
</ul>
<h2 id="Anchor_83956037_h2_8">Exit Code</h2>
<p>Returns an exit code value of <code>0</code> when conversion succeeds or an exit code value of <code>1</code> or greater when conversion fails.<br />The specific values returned for conversion failures are currently private.</p>
<!--Remove-->
<h1 id="Anchor_83956037_h1_4">Limitations</h1>
<p>This section describes various limitations present in 3D Shader Converter.</p>
<h2 id="Anchor_83956037_h2_9">Restrictions on Filenames</h2>
<p>The names of input files and files specified for <code>--output</code> can only contain the following characters.</p>
<div class="panel" style="border-width: 1px;">
  <div class="panelContent">
    <p>[0-9A-Za-z-_]</p>
  </div>
</div>
<h2 id="Anchor_83956037_h2_10">Source Files Having the Same Name</h2>
<p>Source filenames must be unique. This utility does not run correctly if more than one file has the same name.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>./abc.glsl
./def/abc.glsl</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_11">include-path and File Location</h2>
<p>3D Shader Converter interprets <code>#include</code> lines based on the path from the FSC file and the relative path from <code>include-path</code>.</p>
<p>The following limitations apply when expanding all files in the workspace according to the coding in the FSC file and the source file.</p>
<ul>
  <li>Cannot contain <code>include-path</code>.<br /> You cannot define an <code>include-path</code> that contains an <code>include-path</code>. Conversion to FSD format fails if a path is specified in this way.</li>
  <li>Cannot register files with the same name.<br /> If both <code>include0/src/abc.glsl</code> and <code>include1/src/abc.glsl</code> have been registered as source files and both <code>include0</code> and <code>include1</code> have been specified in <code>include-path</code>, conversion will fail because both sources have the same relative path (<code>src/abc.glsl</code>).</li>
  <li>
    <p>Cannot specify directories above <code>include-path</code>.<br /> Files higher up in the directory tree, as shown in the following sample, cannot be referenced using relative paths.</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>#include &lt;../abc.glsl&gt;</pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>
<h2 id="Anchor_83956037_h2_12">Annotations</h2>
<p>For more information about annotations, see <a href="../Pages/Page_84052806.html">Shader Annotations</a>.</p>
<p>This section describes items that require special attention.</p>
<ul>
  <li>
    <p>
      <code>#include</code> cannot be used between the <code>#ifdef</code> and <code>#endif</code> directives of a macro specified by an option annotation. If you write code like the following example, the initial values of the macro might make it impossible to resolve <code>#include</code> or expand the files.<br /><br /> </p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>#define TEST // @@ id=&quot;option&quot; choice=&quot;bool&quot;

#ifdef TEST
&nbsp;&nbsp;&nbsp;&nbsp;#include &lt;abc.glsl&gt;
#else
&nbsp;&nbsp;&nbsp;&nbsp;#include &lt;def.glsl&gt;
#endif</pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>C-style comments cannot be used in the annotations after variables<br /> To attach annotation after variables, use C++ style comments. If the annotation spans multiple lines, we recommend C++ style annotation and C-style remote specification.<br /> </p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>&nbsp;// OK
uniform sampler2D albedo0;     // @@ id=&quot;albedo0&quot;
// NG
uniform sampler2D albedo1;     /* @@ id=&quot;albedo1&quot; */
// OK
/* @@

sampler_id=&quot;albedo0&quot; hint=&quot;_a0&quot;
label=&quot;albedo diffuse texture&quot;

*/</pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Do not write annotations in macro blocks with a value defined by the <code>define-macro</code> option.<br />Annotations inside macro blocks are ignored. In the following sample code, <code class="plain plain">enable_vertex_color</code> is not in the created FSDB file. Avoid this kind of code because it can cause unexpected behavior.</p>
    <div class="panel" style="border-width: 1px;">
      <div class="panelContent">
        <div class="container">
          <div class="line number1 index0 alt2">
            <code class="plain plain">#if defined( FIXED_MACRO_USE_VERTEX_COLOR )               // FIXED_MACRO_USE_VERTEX_COLOR is a macro with the value defined by the define-macro option.</code>
          </div>
          <div class="line number2 index1 alt1">
            <code class="plain plain">#define ENABLE_VERTEX_COLOR          ( 0 ) // @@ id=&quot;enable_vertex_color&quot; choice=&quot;0, 1&quot; type=&quot;dynamic&quot;</code>
          </div>
          <div class="line number3 index2 alt2">
            <code class="plain plain">#endif</code>
          </div>
        </div>
      </div>
    </div>
  </li>
</ul>
<h2 id="Anchor_83956037_h2_13">Text-Formatted Shader Definition Intermediate Files (FSDA Files)</h2>
<p>Text-formatted shader definition intermediate files (FSDA files) are not supported.</p>
<h1 id="Anchor_83956037_h1_5">Example Use</h1>
<p>This section describes how to use 3D Shader Converter.</p>
<h2 id="Anchor_83956037_h2_14">Creating a Shader Definition File (FSDB File) From a Shader Configuration File (FSC File)</h2>
<p>Process <code>shader.fsca</code> and create <code>output.fsdb</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe --output output.fsdb shader.fsca</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_15">Creating a Shader Archive File (BFSHA File) From a Shader Definition File (FSDB File)</h2>
<p>Convert <code>shader.fsdb</code> and save to <code>output.bfsha</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe --glsl-version 430 --api-type GL --code-type Binary_Source --output output.bfsha shader.fsdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Use the parameter file to convert <code>shader.fsdb</code> and save to <code>output.bfsha</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>convert.txt

--glsl-version 430
--api-type GL
--code-type Binary_Source
--output output.bfsha
shader.fsdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe --args-file convert.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_16">Limiting Shader Variations</h2>
<p>Usually all shader variations are generated when converting shader definition files. However, you can limit the variations generated by entering a shader variation file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe --glsl-version 430 --api-type GL --code-type Binary_Source --output output.bfsha shader.fsdb shader.fsva</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956037_h2_17">Merging Multiple Shader Archive Files (BFSHA Files)</h2>
<p>Merge the shader archive files <code>A.bfsha</code>, <code>B.bfsha</code>, and <code>C.bfsha</code> to create one file named <code>ABC.bfsha</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dShaderConverter.exe --merge-shader-archive-file=A.bfsha --merge-shader-archive-file=B.bfsha --merge-shader-archive-file=C.bfsha --output=ABC.bfsha</pre></div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
// ApiLink_NN_G3D_VERTEX_SHADER
// ApiLink_NN_G3D_GEOMETRY_SHADER
// ApiLink_NN_G3D_FRAGMENT_SHADER
// ApiLink_NN_G3D_COMPUTE_SHADER
// ApiLink_NN_G3D_TESSELLATION_CONTROL_SHADER
// ApiLink_NN_G3D_TESSELLATION_EVALUATION_SHADER

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
