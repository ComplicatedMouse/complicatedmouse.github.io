<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Certificate Store | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Certificate Store -->
<div class="pagetitle" id="PageId_288014097">Certificate Store</div>
<div class="text_separate">
<div class="layout-root">
  <div class="layout-base">
    <div class="layout-section two_right_sidebar">
      <div class="layout-cell">
        <h1 id="Anchor_288014097_h1_1">Built-in Certificate Store</h1>
        <p>The SSL library provides a built-in certificate store which comes with common commercial CA certificates.&nbsp;These certificates are used automatically when necessary to verify the server.</p>
        <p>Please refer to the following page&nbsp;for the list of certificates included in the built-in certificate store.</p>
        <ul>
          <li>
            <a href="../Pages/Page_170073986.html">Built-in Data</a>
          </li>
        </ul>
        <h1 id="Anchor_288014097_h1_2">Importing a CA certificate</h1>
        <p>In addition to built-in certstore, the SSL library provides a way to import a CA certificate. It can be imported by&nbsp;<span class="ApiLink_nn__Result_nn__ssl__Context__ImportServerPki(CertStoreId_*pOutCertId|_const_char_*pInCertData|_uint32_t_certDataSize|_CertificateFormat_certFormat)_NN_NOEXCEPT">ImportServerPki()</span>&nbsp;method in <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> class. It accepts CA certificate in one of the following formats.</p>
        <ul>
          <li>DER binary format</li>
          <li>PEM Base64 encoded ASCII format</li>
        </ul>
        <p>Each instance of <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is responsible to maintain imported certificates to be used for SSL communication. Imported certificates can be removed by&nbsp;<span class="ApiLink_nn__Result_nn__ssl__Context__RemovePki(CertStoreId_certId)_NN_NOEXCEPT">RemovePki()</span>&nbsp;method in <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> once it's not needed anymore. They will be automatically removed when corresponding <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is destroyed or the instance of <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is freed if it's not removed explicitly.</p>
        <p>Note that the imported CA certificates are volatile. As previously stated,&nbsp;certificates imported into <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> are removed once it is&nbsp;destroyed/freed. The SSL library does not maintain the certificates/keys in the permanent storage. The application must import any needed certificates every time the application requires them.</p>
      </div>
      <div class="layout-cell">
        <table class="wrapped">
          <colgroup>
            <col />
          </colgroup>
          <tbody>
            <tr>
              <th style="text-align: center;">Table of Contents</th>
            </tr>
            <tr>
              <td>
                <div class="content-wrapper">
                  <p>
                    <ul class="macro_toc">
                      <li>
                        <a href="#Anchor_288014097_h1_1">Built-in Certificate Store</a>
                      </li>
                      <li>
                        <a href="#Anchor_288014097_h1_2">Importing a CA certificate</a>
                      </li>
                      <li>
                        <a href="#Anchor_288014097_h1_3">Importing a client certificate and its private key</a>
                      </li>
                      <li>
                        <a href="#Anchor_288014097_h1_4">Device Client Certificate</a>
                      </li>
                      <ul>
                        <ul>
                          <li>
                            <a href="#Anchor_288014097_h3_1">Virtual Device Client Certificate</a>
                          </li>
                          <ul>
                            <li>
                              <a href="#Anchor_288014097_h4_1">Getting the virtual device client certificate</a>
                            </li>
                          </ul>
                        </ul>
                      </ul>
                      <li>
                        <a href="#Anchor_288014097_h1_5">Retrieve the bundled CA certificate data</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_288014097_h2_1">Limitations</a>
                        </li>
                        <li>
                          <a href="#Anchor_288014097_h2_2">Requirements</a>
                        </li>
                      </ul>
                    </ul>
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="layout-base">
    <div class="layout-section single">
      <div class="layout-cell">
        <h1 id="Anchor_288014097_h1_3">Importing a client certificate and its private key</h1>
        <p>The SSL library provides a way to import a client certificate and its private key used when client needs to be authenticated by the server.&nbsp;It can be imported by<span class="ApiLink_nn__Result_nn__ssl__Context__ImportClientPki(CertStoreId_*pOutCertId|_const_char_*pInP12Data|_const_char_*pInPwData|_uint32_t_p12DataSize|_uint32_t_pwDataSize)_NN_NOEXCEPT">&nbsp;ImportClientPki()&nbsp;</span>method in <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> class. It accepts a client PKI only in PKCS12 format. The password for PKCS12 data may also be passed&nbsp;along with PKCS12 data in ImportClientPki() method.</p>
        <p>Each instance of <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is responsible to maintain imported client PKI to be used for SSL communication. Unlike CA certificate import, <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> allows importing only one client PKI per the context.&nbsp;Imported client PKI can be removed by&nbsp;<span class="ApiLink_nn__Result_nn__ssl__Context__RemovePki(CertStoreId_certId)_NN_NOEXCEPT">RemovePki()</span>&nbsp;method in <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> once it's not needed anymore. It will be automatically removed when corresponding <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is destroyed or the instance of <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is freed if it's not removed explicitly.</p>
        <p>Note that the imported client PKI is also volatile. As previously stated, client PKI imported into <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> is removed once it is&nbsp;destroyed/freed. The SSL library does not maintain the client PKI in the permanent storage. The application must import any needed client PKIs every time the application requires them.</p>
        <h1 id="Anchor_288014097_h1_4">Device Client Certificate</h1>
        <p>The device client certificate is the client PKI stored in each device. It is required when using network services provided by Nintendo.</p>
        <p>Unlike importing client PKI, the device client certificate is not imported from outside the SSL library. Instead, the SSL library provides the way to tell the <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> to use the device unique client PKI when server requires client authentication. Please refer&nbsp;<span class="ApiLink_nn__Result_nn__ssl__Context__RegisterInternalPki(CertStoreId_*pOutCertId|_InternalPki_pkiType)_NN_NOEXCEPT">nn::ssl::Context::RegisterInternalPKI()</span> for details.</p>
        <p>Note that registering the device client certificate is counted as one client PKI import. This means only either a normal client PKI or the device client certificate can be used on the specific <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> object.</p>
        <p>
          <br />
        </p>
        <p>The sample code below shows how to register the device client certificate.</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre><span class="nn">nn::</span><span class="n">Result</span>       <span class="n">result</span><span class="p">;</span>
<span class="nn">nn::ssl::</span><span class="n">Context</span> <span class="n">sslContext</span><span class="p">;</span>
<span class="nn">ssl::</span><span class="n">CertStoreId</span> <span class="n">deviceCertId</span><span class="p">;</span>
 
<span class="n">result</span> <span class="o">=</span> <span class="n">sslContext</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="nn">ssl::Context::</span><span class="n">SslVersion_Auto</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsSuccess</span><span class="p">())</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">result</span> <span class="o">=</span> <span class="n">sslContext</span><span class="p">.</span><span class="n">RegisterInternalPki</span><span class="p">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">&amp;</span><span class="n">deviceCertId</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">ssl::Context::</span><span class="n">InternalPki_DeviceClientCertDefault</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsFailure</span><span class="p">())</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;Failed to register the device unique client certificate.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
<span class="p">}</span></pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(51,51,51);">This process is not required unless an application explicitly performs SSL/TLS or HTTPS with Nintendo servers. For example, the ACCOUNT library internally registers the device client certificate hence the application is not required to do that manually.</span>
        </p>
        <p>
          <span style="color: rgb(51,51,51);">Note that application developers are required to prepare the virtual&nbsp;device client certificate in the specific location in the environment where the device client certificate cannot be obtained from the actual device. Please refer&nbsp;<a href="#Anchor_288014097_h3_1">Virtual Device Client Certificate</a>&nbsp;section below for further details.</span>
        </p>
        <h3 id="Anchor_288014097_h3_1">Virtual Device Client Certificate<a name="Anchor_288014097_VirtualDeviceClientCertificate"></a></h3>
        <p>The SSL library obtains the device client certificate from the device when running on the actual hardware. In the environment where such the device client certificate is not available (e.g. an application is running on Windows), the SSL library attempts to obtain the virtual device client certificate from the specific location. To use this feature, application developers are required to prepare two files.</p>
        <ul>
          <li>device_cert.p12<ul><li>This is a client certificate in PKCS#12 format</li></ul></li>
          <li>device_cert.key<ul><li>This is a text file which contains the password ASCII string (no BOM, no line break) used to decrypt p12 file</li></ul></li>
        </ul>
        <p>On Windows, these files need to be placed in the folder named &quot;sdcard&quot;. This folder needs to be present in the same directory as where executable file exists.</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Application.exe
sdcard/
&nbsp;&nbsp;+- device_cert.p12
&nbsp;&nbsp;+- device_cert.key</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <!--Remove-->
        <p>
          <br />
        </p>
        <h4 id="Anchor_288014097_h4_1">Getting the virtual device client certificate</h4>
        <p>Note that the virtual&nbsp;device client certificate needs to be issued to the specific user. It is not allowed to share it between different users. To obtain it, please access&nbsp;<a href="https://tool.vdc.mng.nintendo.net/">https://tool.vdc.mng.nintendo.net/</a>&nbsp;and follow the instruction.</p>
        <p>
          <br />
        </p>
      </div>
    </div>
  </div>
  <div class="layout-base">
    <div class="layout-section single">
      <div class="layout-cell">
        <h1 id="Anchor_288014097_h1_5">Retrieve the bundled CA certificate data</h1>
        <div class="warn_new">
          <div class="warn_new_left">Warning</div>
          <div class="warn_new_right">
            <p>Before using this feature,&nbsp;it is&nbsp;<strong>HIGHLY</strong>&nbsp;recommended to consider if your requirement can be achieved with your own implementation without this feature.&nbsp;<span style="letter-spacing: 0.0px;">This feature is provided for the specific purpose.</span></p>
            <p>This feature may be used <strong>ONLY</strong> if below limitations are acceptable and requirements are satisfied.</p>
          </div>
        </div>
        <p>
          <span style="letter-spacing: 0.0px;">NintendoSDK provides the way to retrieve the bundled CA certificate data in DER format.&nbsp;The list of certificates can be found in <a href="../Pages/Page_170073986.html">this page</a> or&nbsp;</span>
          <span class="ApiLink_ssl_CaCertificateId.h">ssl_CaCertificateId.h</span>
          <span style="letter-spacing: 0.0px;">. Note that this feature is not included in the default SDK library, please explicitly link libnn_sslFixedBuiltInManager to utilize it.</span>
        </p>
        <p>Please refer the documentation of<span class="ApiLink_nn__ssl__FixedBuiltInManager"> nn::ssl::FixedBuiltInManager</span> for details.</p>
        <p>
          <br />
        </p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19<br />
20<br />
21<br />
22<br />
23<br />
24<br />
25<br />
26<br />
27<br />
28<br />
29<br />
30<br />
31<br />
32<br />
33<br />
34<br />
35<br />
36<br />
37<br />
38<br />
39<br />
40<br />
41<br />
42<br />
43<br />
44<br />
45<br />
46<br />
47<br />
48<br />
49<br />
50<br />
51<br />
52<br />
53<br />
54<br />
55<br />
56<br />
57<br />
58<br />
59<br />
60<br />
61<br />
62</td>
              <td class="code">
                <div class="codeblock"><pre><span class="kt">bool</span> <span class="nf">HandleCertificates</span><span class="p">()</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::</span><span class="n">Result</span> <span class="n">result</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">uint8_t</span><span class="o">*</span>   <span class="n">pBuf</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">bool</span>       <span class="n">isSuccess</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">do</span> <span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">uint32_t</span> <span class="n">bufSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::ssl::</span><span class="n">CaCertificateId</span> <span class="n">allId</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="nn">nn::ssl::</span><span class="n">CaCertificateId_All</span> <span class="p">};</span> <span class="c1">// Grab all CA certs
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">result</span> <span class="o">=</span> <span class="nn">nn::ssl::FixedBuiltInManager::</span><span class="n">GetBuiltInCertificateBufSize</span><span class="p">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">&amp;</span><span class="n">bufSize</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">allId</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">1</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsFailure</span><span class="p">())</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;GetBuiltInCertificateBufSize() failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">break</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;Need %u bytes</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">bufSize</span><span class="p">);</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">pBuf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint8_t</span><span class="p">[</span><span class="n">bufSize</span><span class="p">];</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="p">(</span><span class="n">pBuf</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;Memory allocation failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">break</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::ssl::FixedBuiltInManager::</span><span class="n">BuiltInCertificateInfo</span><span class="o">*</span> <span class="n">pCertInfoArray</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">result</span> <span class="o">=</span> <span class="nn">nn::ssl::FixedBuiltInManager::</span><span class="n">GetBuiltInCertificates</span><span class="p">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">&amp;</span><span class="n">pCertInfoArray</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">pBuf</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">bufSize</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">allId</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mi">1</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsFailure</span><span class="p">())</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;GetBuiltInCertificates() failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">break</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">uint32_t</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="p">(;</span> <span class="n">pCertInfoArray</span><span class="p">[</span><span class="n">total</span><span class="p">].</span><span class="n">id</span> <span class="o">!=</span> <span class="nn">nn::ssl::</span><span class="n">CaCertificateId_All</span><span class="p">;</span> <span class="n">total</span><span class="o">++</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">char</span><span class="o">*</span> <span class="n">pDerData</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span> <span class="o">*&gt;</span><span class="p">(</span><span class="n">pCertInfoArray</span><span class="p">[</span><span class="n">total</span><span class="p">].</span><span class="n">data</span><span class="p">.</span><span class="n">ptr</span><span class="p">.</span><span class="n">pCertificateDerData</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;[Certificate %02d] id %8.8X, status %8.8X, len %u, data %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">total</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pCertInfoArray</span><span class="p">[</span><span class="n">total</span><span class="p">].</span><span class="n">id</span><span class="p">),</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pCertInfoArray</span><span class="p">[</span><span class="n">total</span><span class="p">].</span><span class="n">status</span><span class="p">),</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">pCertInfoArray</span><span class="p">[</span><span class="n">total</span><span class="p">].</span><span class="n">certificateSize</span><span class="p">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">pDerData</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_LOG</span><span class="p">(</span><span class="s">&quot;[DONE] There are %d certificates.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">total</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">isSuccess</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">NN_STATIC_CONDITION</span><span class="p">(</span><span class="nb">false</span><span class="p">));</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="p">(</span><span class="n">pBuf</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">delete</span><span class="p">[]</span> <span class="n">pBuf</span><span class="p">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">isSuccess</span><span class="p">;</span>
<span class="p">}</span></pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <br />
        </p>
        <h2 id="Anchor_288014097_h2_1">Limitations</h2>
        <ul>
          <li>Certificates provided by&nbsp;<span class="ApiLink_nn__ssl__FixedBuiltInManager">nn::ssl::FixedBuiltInManager</span>&nbsp;<u>would&nbsp;<strong>NOT</strong>&nbsp;be updated by the system update</u></li>
          <li>The certificates are built-in to the library and not retrieved from the system OS, so certificates that can be obtained by this class is <strong style="letter-spacing: 0.0px;">FIXED</strong><span style="letter-spacing: 0.0px;"> at the build time</span></li>
          <li>The list of certificates may varies between different version of NintendoSDK packages<ul><li>Please refer&nbsp;<span class="ApiLink_ssl_CaCertificateId.h">ssl_CaCertificateId.h</span><span style="letter-spacing: 0.0px;">&nbsp;included in your NintendoSDK package for the list</span></li></ul></li>
          <li>If the time comes where you are required to deal with extra certificates that are not included in<span style="letter-spacing: 0.0px;">&nbsp;</span><span class="ApiLink_nn__ssl__FixedBuiltInManager">nn::ssl::FixedBuiltInManager</span><span style="letter-spacing: 0.0px;">&nbsp;in the future, it is required to handle it by yourself (e.g. preparing a certificate and supply it to your code)</span><ul><li>If it is necessary to obtain extra certificates via<span style="letter-spacing: 0.0px;">&nbsp;</span><span class="ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__GetBuiltInCertificates(BuiltInCertificateInfo_**pOutCertInfo|_uint8_t_*pOutBuffer|_uint32_t_bufSize|_CaCertificateId_*pInIds|_uint32_t_idCount)_NN_NOEXCEPT">GetBuiltInCertificates()</span><span style="letter-spacing: 0.0px;">, you can supply them to&nbsp;</span><span class="ApiLink_nn__ssl__FixedBuiltInManager">nn::ssl::FixedBuiltInManager</span><span style="letter-spacing: 0.0px;">&nbsp;by&nbsp;</span><span class="ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__AddTemporaryBuiltInCertificate(uint8_t_*pInDerCert|_uint32_t_certSize|_CaCertificateId_*pOutCertId)_NN_NOEXCEPT">AddTemporaryBuiltInCertificate()</span><span style="letter-spacing: 0.0px;">&nbsp;before calling&nbsp;</span><span class="ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__GetBuiltInCertificates(BuiltInCertificateInfo_**pOutCertInfo|_uint8_t_*pOutBuffer|_uint32_t_bufSize|_CaCertificateId_*pInIds|_uint32_t_idCount)_NN_NOEXCEPT">GetBuiltInCertificates()</span><ul><li>Supplied certificates can be obtained by<span style="letter-spacing: 0.0px;">&nbsp;</span><span class="ApiLink_nn__ssl__CaCertificateId">CaCertificateId</span><span style="letter-spacing: 0.0px;">&nbsp;returned from&nbsp;</span><span class="ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__AddTemporaryBuiltInCertificate(uint8_t_*pInDerCert|_uint32_t_certSize|_CaCertificateId_*pOutCertId)_NN_NOEXCEPT">AddTemporaryBuiltInCertificate()</span></li><li>If<span style="letter-spacing: 0.0px;">&nbsp;</span><span class="ApiLink_nn__ssl__CaCertificateId_All">CaCertificateId_All</span><span style="letter-spacing: 0.0px;">&nbsp;is used, that also returns supplied certificates in addition to all other bundled CA certificates in&nbsp;</span><span class="ApiLink_nn__ssl__FixedBuiltInManager">nn::ssl::FixedBuiltInManager</span></li></ul></li><li>When something is modified to deal with the situation, it is required to guarantee the operation of the application by yourself</li></ul></li>
        </ul>
        <h2 id="Anchor_288014097_h2_2">Requirements</h2>
        <p>For reasons explained above, it is required to get an approval by Nintendo to use features in this class in the product. Please contact Nintendo for further details.</p>
      </div>
    </div>
  </div>
</div>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__Result_nn__ssl__Context__ImportServerPki(CertStoreId_*pOutCertId|_const_char_*pInCertData|_uint32_t_certDataSize|_CertificateFormat_certFormat)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html#a43b4cf238b81ba8d166c65b92b2e4ef2' )
SetUrl( 'ApiLink_nn__ssl__Context', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html' )
SetUrl( 'ApiLink_nn__Result_nn__ssl__Context__RemovePki(CertStoreId_certId)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html#aa5e1409720e9f5d8273a59bda7593140' )
SetUrl( 'ApiLink_nn__Result_nn__ssl__Context__ImportClientPki(CertStoreId_*pOutCertId|_const_char_*pInP12Data|_const_char_*pInPwData|_uint32_t_p12DataSize|_uint32_t_pwDataSize)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html#a2a7677e363b3bad66086670dc0ec73ec' )
SetUrl( 'ApiLink_nn__Result_nn__ssl__Context__RegisterInternalPki(CertStoreId_*pOutCertId|_InternalPki_pkiType)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html#a3287af00bd1d6a4a4342d6f62a960294' )
SetUrl( 'ApiLink_ssl_CaCertificateId.h', '../../../Api/HtmlNX/ssl___ca_certificate_id_8h.html' )
SetUrl( 'ApiLink_nn__ssl__FixedBuiltInManager', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_fixed_built_in_manager.html' )
SetUrl( 'ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__GetBuiltInCertificates(BuiltInCertificateInfo_**pOutCertInfo|_uint8_t_*pOutBuffer|_uint32_t_bufSize|_CaCertificateId_*pInIds|_uint32_t_idCount)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_fixed_built_in_manager.html#aea1295af259caf4add1d3c1f0ef95932' )
SetUrl( 'ApiLink_static_nn__Result_nn__ssl__FixedBuiltInManager__AddTemporaryBuiltInCertificate(uint8_t_*pInDerCert|_uint32_t_certSize|_CaCertificateId_*pOutCertId)_NN_NOEXCEPT', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_fixed_built_in_manager.html#ab8c373eb1516e61053b0a1223eade90d' )
SetUrl( 'ApiLink_nn__ssl__CaCertificateId', '../../../Api/HtmlNX/namespacenn_1_1ssl.html#a72336b90776c09a7857b970d70b779fc' )
SetUrl( 'ApiLink_nn__ssl__CaCertificateId_All', '../../../Api/HtmlNX/namespacenn_1_1ssl.html#a72336b90776c09a7857b970d70b779fcada5111935bade39361df9e9f7c06ad1a' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
