<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Using the Export Plug-In | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Using the Export Plug-In -->
<div class="pagetitle" id="PageId_83955546">Using the Export Plug-In</div>
<div class="text_separate">
<h1 id="Anchor_83955546_h1_1">Using the Export Plug-In</h1>
<p>This section describes how to use the export plug-in.</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83955546_h2_1">Basic Features of the Export Plug-In</a>
    </li>
    <li>
      <a href="#Anchor_83955546_h2_2">Option Settings</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955546_h3_1">Preset Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_2">Output Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_3">General Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_4">Animation Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_5">Output File Selection</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_6">Optimization Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_7">Animation Bake Tolerance Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_8">Animation Quantization Tolerance Options</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_9">Script Options</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955546_h2_3">Managing Option Settings</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955546_h3_10">Saving Option Settings for a Scene</a>
      </li>
      <li>
        <a href="#Anchor_83955546_h3_11">Input/Output Option Settings Using FDES Files</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955546_h2_4">Config Files</a>
    </li>
    <li>
      <a href="#Anchor_83955546_h2_5">Related Links</a>
    </li>
  </ul>
</p>
<h2 id="Anchor_83955546_h2_1">Basic Features of the Export Plug-In</h2>
<p>To output specific nodes only, select the nodes to output in 3ds Max. <br />Even nodes below the selected node in the hierarchy are exported.</p>
<p>When you export the entire scene, it is not necessary to select nodes.</p>
<p>Select <strong>Nintendo</strong> &gt; <strong>Export with Setting...</strong> to display the <strong>Export</strong> option window. <br /> Specify the desired options and click <strong>Export</strong> or <strong>Apply</strong> to export the intermediate files.</p>
<p>Unlike the <strong>Export</strong> button, <strong>Apply</strong> does not close the option window after export.</p>
<p>3ds Max internally records option settings used at the time of output as its current options. <br />You can also save the option settings to a scene and the import/export option settings as <a href="../Pages/Page_83955854.html">3D DCC Plug-In Export Settings File</a>. (For more information, see <a href="#Anchor_83955546_manage_options">Managing Option Settings</a>.)</p>
<p>Select <strong>Nintendo</strong> &gt; <strong>Export</strong> to output the file using the current options without opening the Options window.</p>
<p>To save the option settings in 3ds Max without exporting an intermediate file, select <strong>Settings</strong> &gt; <strong>Save Settings</strong> in the Options window. (The settings are also saved for the scene if <strong>Save / Load Scene Settings</strong> is selected.) <br /> To restore option settings to their default values, select <strong>Settings</strong> &gt; <strong>Reset Settings</strong>.</p>
<p>To lock or unlock all options at the same time, in the Options window, on the <strong>Settings</strong> menu, select <strong>Lock All Settings</strong> or <strong>Unlock All Settings</strong> .</p>
<h2 id="Anchor_83955546_h2_2">Option Settings</h2>
<p>The options set in the export plug-in are as follows.</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>
        <a href="#Anchor_83955546_preset_options">Preset Options</a>
      </th>
      <td>These options are the preset options.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_output_options">Output Options</a>
      </th>
      <td>Options that relate to exporting intermediate files.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_general_options">General Options</a>
      </th>
      <td>General intermediate files options.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_animation_options">Animation Options</a>
      </th>
      <td>These options relate to animation.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_output_file_selection">Output File Selection</a>
      </th>
      <td>Select this option to specify the type of intermediate file to export.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_optimization_options">Optimization Options</a>
      </th>
      <td>You can optimize data by using the intermediate file optimizer when you export intermediate files from Maya. Use this setting to configure options for this optimization process.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_animation_bake_tolerance_options">Animation Bake Tolerance Options</a>
      </th>
      <td>Select this option to specify the tolerated margin for error when animation is baked and optimized.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_animation_quantization_tolerance_options">Animation Quantization Tolerance Options</a>
      </th>
      <td>Specifies the allowable range of errors when an animation is optimized.</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955546_script_options">Script Options</a>
      </th>
      <td>Specifies the scripts (Max Script) to execute before and after export. </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955546_preset_options"></a>
</p>
<h3 id="Anchor_83955546_h3_1">Preset Options</h3>
<p>These options are the preset options. <br />The term <em>preset</em> refers to a feature where a preset file (an FDES file set to <a href="#Anchor_83955546_lock_unlock"><code>edit locked status</code></a>) is used to set some or all option settings to a particular fixed value.</p>
<p>This option can be used for the following purposes.</p>
<ul>
  <li>To prevent option settings determined by the design lead from being carelessly changed by another designer.</li>
  <li>To prepare presets for characters and presets for geography, and to easily change between the option settings.</li>
</ul>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>The preset file is usually located in the <code>Tool\DccPlugin\3dsMaxPlugins\Config\Presets</code> folder. <br />If you want to place it in another folder, use the export plug-in with the <code>NINTENDO_3DSMAX_PRESETS</code> environment variable set to the desired folder path.</p>
  </div>
</div>
<p>To open the <code>Presets</code> folder in Windows Explorer, in the Options window, in the <strong>Settings</strong> menu, select <strong>Open Presets Folder</strong>. (Opening this folder simultaneously closes the Options window.)</p>
<p>Presets are evaluated when export is executed.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>If you are using the same presets for more than one scene, you can change the export options for all scenes by changing the contents of the preset file.</p>
  </div>
</div>
<p>Options under <strong>Preset Options</strong> cannot be locked.</p>
<p>
  <a name="Anchor_83955546_lock_unlock"></a>
</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Selecting <strong>Edit Preset</strong> displays a lock icon next to each option, allowing you to independently change the edit lock status of each option. <br /> Click the lock icon next to an option to lock it so it cannot be edited. Click the icon again to unlock the item. <br /> The edit lock status is saved in the scene and the FDES file. <br /> To lock or unlock all options at the same time, in the Options window, on the <strong>Settings</strong> menu, select <strong>Lock All Settings</strong> or <strong>Unlock All Settings</strong> .</p>
  </div>
</div>
<ul>
  <li>
    <strong>Preset</strong>
    <br />Specify the name of the preset to use. <br />The names of the FDES files located in the <code>Presets</code> folder are listed as the names of the presets in a menu. <br />If you are not using presets, select <strong>None</strong>. If you are using presets, select a preset name. <br />When the preset is switched, <strong>the options that are in an edit lock state in the preset file are overwritten with the preset value</strong>. Options that are not in an edit lock state in the preset file are not changed. <br />If a preset has been selected, you cannot release edit locking of an option that has been locked in the preset file. In addition, you cannot lock an option that is not edit locked. <br />If you click <strong>Save Preset</strong> without a preset being used, you can output the current option setting to the <code>Presets</code> folder as a preset. <br />To create a new preset, select <strong>New</strong> and enter a preset name. To overwrite an existing preset, select <strong>Overwrite</strong> and select a preset name.  When you click <strong>Save</strong>, a list of preset files appears and the output preset is selected for use. <br />If you click <strong>Delete Preset</strong> while using a preset, the preset file for the preset being used is deleted and the preset is put in unused status. <br />Perform the following steps to edit an existing preset value.<p> 1. Select the preset you want to edit with the <strong>Preset</strong> option.<br />2. Change the <strong>Preset</strong> option to <strong>None</strong>.<br />3. Change the various option values and the edit-lock status.<br />4. Overwrite and export the edited values by clicking <strong>Save Preset</strong>.</p></li>
  <li>
    <strong>Show Preset UI</strong>
    <br />
When using presets, select this setting to display a UI for options that are locked in the preset file. <br />Only a UI for options that can be edited is displayed if this option is cleared.</li>
</ul>
<p>
  <a name="Anchor_83955546_output_options"></a>
</p>
<h3 id="Anchor_83955546_h3_2">Output Options</h3>
<p>Options that relate to exporting intermediate files.</p>
<ul>
  <li>
    <strong>Export Target</strong>
    <br />Specifies the export target. <br />Select <strong>All</strong> to export all active nodes in the scene. <br />Select <strong>Selection</strong> to export only the selected nodes and the nodes below them in the hierarchy.</li>
  <li>
    <strong>Output File Name</strong>
    <br />Specify the name of the intermediate file. (Omit the filename extension.) <br />If left blank, the current scene name is used for the intermediate filename. <br />Click <strong>Scene</strong> on the right to set the current scene name. Click <strong>Node</strong> to set the name of the selected node (or the first node selected if there is more than one).</li>
  <li>
    <strong>Output Folder</strong>
    <br />
Specifies the output folder for the intermediate files. <br />The texture file is output to the <code>textures</code> folder located inside the folder specified using <strong>Output Folder</strong>. <br />If the specified folder is not in <strong>Output Folder</strong>, that folder is created and output.</li>
  <li>
    <strong>Merge fmd File</strong>
    <br />
Merges the specified FMD files if you select this option and specify an FMD file path. <br />If the FMD file path is left blank, the export file to be overwritten is merged. <br />If the specified FMD file path is not a full file path, it is treated as a relative path from the current project folder. <br />The intermediate file optimizer executes the process for merging FMD files. For more information about this merge process, see the <a href="../Pages/Page_83955705.html#Anchor_83955705_merge">Help documentation for the intermediate file optimizer</a>.</li>
  <li>
    <strong>Merge ftx File</strong>
    <br />Merges FTX files if this option is selected. <br />If you are also merging FMD files, files are merged using the same filename located in the <code>textures</code> folder inside the file folder specified under <strong>Merge FMD File</strong>. <br />If an FMD file is not being merged, files are merged using the same filename located in the <code>textures</code> folder inside the folder specified by <strong>Output Folder</strong>. <br />Also, if an FMD file is not being exported, files are merged using the same filename located in the <code>textures</code> folder inside the folder specified by <strong>Output Folder</strong>. <br />Note that if the FMD file and the FTX file are not merged at the same time, the mipmap filter of the FMD file may not correspond to the existence of mipmaps in the FTX file. <br />If the FMD file is not merged, the mipmap settings for the FTX file to merge are applied to the mipmap filter for the FMD file. <br />The 3D texture converter executes the process of merging FTX files. For more information about this merge process, see <a href="../Pages/Page_239574379.html#Anchor_239574379_tex_merge">Help for the 3D Texture Converter</a>.</li>
  <li>
    <strong>Merge Animation Folder</strong>
    <br />Merges the specified animation intermediate files if this option is selected and a folder containing animation intermediate files is specified. <br />If the folder specification is left blank, animation intermediate files located in the folder specified by <strong>Output Folder</strong> are merged. <br />In <strong>Merge Animation Name</strong>, specify the name (excluding the filename extension) of the animation intermediate file to merge.<br />If the <strong>Merge Animation Name</strong> field is left blank, the file having the name specified by <strong>Output File Name</strong> is merged. <br />The intermediate file optimizer executes the process for merging animation intermediate files.  For more information about this merge process, see the <a href="../Pages/Page_83955705.html#Anchor_83955705_merge">Help documentation for the intermediate file optimizer</a>.</li>
</ul>
<p>
  <a name="Anchor_83955546_general_options"></a>
  <br />
</p>
<h3 id="Anchor_83955546_h3_3">General Options</h3>
<p>General intermediate files options.</p>
<ul>
  <li>
    <strong>Magnify</strong>
    <br />Specifies the magnification ratio for the model's vertex coordinates and Translate value.</li>
  <li>
    <strong>Use FigureMode and SkinPose<br /></strong>The Physique and default skin pose are determined based on the Biped figure mode and bone skin pose.  Turning this option on can sometimes correctly export data for which skinning cannot otherwise be correctly exported. <br />When you use this option, you must set a skin pose for the bones that are used by the physique, the skin, and for all associated parents.  Even if biped and bone are combined, be absolutely sure to set a skin pose for bones.</li>
  <li>
    <strong>Comment</strong>
    <br />Specifies comments about editing the intermediate file.</li>
</ul>
<p>
  <a name="Anchor_83955546_animation_options"></a>
  <br />
</p>
<h3 id="Anchor_83955546_h3_4">Animation Options</h3>
<p>These options relate to animation.</p>
<ul>
  <li>
    <strong>Start / End Frame</strong>
    <br />
Specifies the range (start frame and end frame) of the animation to output. <br />Select <strong>All</strong> to output the full range of animation on 3ds Maya (Animation Start/End). <br />Select <strong>Range</strong> to specify the start frame and end frame by numeric value. <br />If attributes are animated, the value specified for the position of the start frame is output to the FMD file. <br />Make sure that you specify the same mode for the end frame of a loop animation as for the start frame.</li>
  <li>
    <strong>Loop</strong>
    <br />
Select this option to export the data as looped playback data. <br />If this option is cleared, the animation range is exported as one-time playback data</li>
  <li>
    <strong>Frame Precision</strong>
Specifies frame precision when animation curve data is automatically created from baked data.<br /><ul><li>If <strong>1.0</strong> is set, data is baked at the integer frame level.<br /></li><li>If <strong>0.5</strong> is set, data is baked at the 0.5 fractional frame level.<br /></li><li>If <strong>0.2</strong> is set, data is baked at the 0.2 fractional frame level.<br /></li><li>If <strong>0.1</strong> is set, data is baked at the 0.1 fractional frame level.<br /></li></ul>Increasing precision can more accurately reproduce animations that vary discontinuously at a fractional frame timing, but the amount of time required for output increases.</li>
</ul>
<p>
  <a name="Anchor_83955546_output_file_selection"></a>
  <br />
</p>
<h3 id="Anchor_83955546_h3_5">Output File Selection</h3>
<p>Select this option to specify the type of intermediate file to export.</p>
<p>Clicking the <strong>Search Model Animation</strong> button turns on only the intermediate files associated with animations that are set for the model being output.</p>
<p>In this case, if even a single key has been set or if a constraint or script controller is used, it is treated as if an animation is set, even if its value does not change. <br />If the <strong>Export Target</strong> is <strong>Selection</strong>, select the desired nodes and then click <strong>Search Model Animation</strong>.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Because scene animations are not searched for, make sure that you manually select on or off.</p>
  </div>
</div>
<p>
  <a name="Anchor_83955546_optimization_options"></a>
</p>
<h3 id="Anchor_83955546_h3_6">Optimization Options</h3>
<p>You can optimize data by using the intermediate file optimizer when you export intermediate files from 3ds Max. Options for this optimization process are set here.</p>
<ul>
  <li>
    <p>
      <strong>Compress Bone</strong>
      <br />
Specifies the bone compression mode to use for the entire model. To reduce the load due to the matrix computations and the amount of memory used, lower the number of bones. <br />Bones output to the intermediate file are compressed, but data saved in the DCC tool is not changed.</p>
    <table class="table">
      <thead>
        <tr>
          <th>Mode</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="nowrap">
            <strong>None</strong>
          </td>
          <td>Do not compress bones. Exports the hierarchical structure of the DCC tool as is.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>Cull</strong>
          </td>
          <td>Deletes the bones that are not required to display the model located at the end of the hierarchical structure, and then exports. <br />This mode is useful for models that use skinning. <br />Bones for which the no-compress flag has been set are not deleted.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>Merge</strong>
          </td>
          <td>In addition to the processing performed when <strong>Cull</strong> is specified, bones with matrices that can be merged are merged and output. <br />Generally, this reduces the number of bones even more than using <strong>Cull</strong>, but the following restriction applies: <strong>a non-uniform scale (where X, Y, and Z are not the same) must be set for bones that have children</strong>. <br />If bones that do not follow this restriction or children of such a bone are compressed, the model does not display correctly. <br />All frames must observe this restriction when the scale is being animated. <br />Bones for which the no-compress flag has been set are not deleted.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>Unite</strong>
          </td>
          <td>Bones for which the compress disable flag has been set are collected together into one.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>Unite All</strong>
          </td>
          <td>Collects all bones together into one regardless of the <strong>compress disable</strong> flag. <br />The root bone matrix is represented by a unit matrix. Model coordinate system values are used for the vertex coordinates, normal vector, tangent vector, and binormal vector of all shapes. <br />This option is used for single objects and for topographical data that does not require a hierarchical structure.</td>
        </tr>
      </tbody>
    </table>
    <p>The following files support compression: FMD, FSK, and FVB files.</p>
  </li>
  <li>
    <strong>Unite Child</strong>
    <br />If this option is selected, nodes that have shapes located at the end of hierarchical structure are gathered together into one node and output. <strong>Compress Node</strong> is useful at times when <strong>Unite</strong> is not specified. <br />All child bones of a bone for which the <strong>compress disable</strong> flag has been set are compressible and are compressed if skinning is not affected. <br />If the compress disable flag has not been set for any node, this option does nothing.</li>
  <li>
    <strong>Compress Material</strong>
    <br />
Compresses materials that have the same attributes and gathers them into one material for output if this option is selected. <br />Materials for which <strong>Compress</strong> has been set to <strong>Don&rsquo;t compress</strong> using the <a href="../Pages/Page_83955882.html">plug-in for setting material attributes</a> are not compressed.</li>
  <li>
    <strong>Compress Shape</strong>
    <br />
If there is more than one shape (<code>&lt;shape&gt;</code> element in an FMD file) having the same bones and materials, they are gathered into one and output if this option is selected. <br />If not selected, shapes are output individually even if they have the same bones and materials. <br />This option is effective when <code>Compress Bone</code> is not <code>None</code> or <code>Unite Child</code> and, as a result of grouping together bones, a single bone has multiple materials with the same shape. <br />This option is also effective when <strong>Compress Material</strong> is selected and multiple shapes with the same material exist on a single bone after bones have been grouped together.</li>
</ul>
<p>
  <a name="Anchor_83955546_animation_bake_tolerance_options"></a>
  <br />
</p>
<h3 id="Anchor_83955546_h3_7">Animation Bake Tolerance Options</h3>
<p>Select this option to specify the allowable range of errors when an animation is baked and optimized. <br />This setting specifies the maximum allowable difference between the start frame value and the value used for any other frame. If the difference remains less than this maximum, the animation is assumed to be fixed and is exported by using only the value for the start frame.</p>
<p>When animation curve data is created automatically from baked data, a key is created for each frame (in the units specified by <strong>Frame Precision</strong>), and the key for the <strong>below tolerance</strong> value is deleted by the <strong>maximum differential value when performing Hermite interpolation</strong>. <br />The smaller the allowable difference, the greater the animation precision. However, as the number of keys grows larger, the amount of animation curve data also increases.</p>
<ul>
  <li>
    <strong>Node Translate</strong>, <strong>Node Rotate</strong>, <strong>Node Scale</strong><br />
Specifies tolerance as an absolute value for the translation, rotation, and scaling of skeletal animations and scene animations. <br /><strong>Node Rotate</strong> is specified in units of degrees. <br /><strong>Node Translate</strong> is the tolerance <strong>before</strong> the value is multiplied by <strong>Magnify</strong>.</li>
  <li>
    <strong>Texture Translate</strong>, <strong>Texture Rotate</strong>, <strong>Texture Scale<br /></strong>
Specifies tolerance as an absolute value for the translation, rotation, and scaling of texture SRT animations. <br /><strong>Texture Rotate</strong> is specified in units of degrees.</li>
  <li>
    <strong>Color<br /></strong>
Specifies the allowable error for the translation, rotation, and scaling of color animations and scene animations as an absolute value.</li>
</ul>
<p>
  <a name="Anchor_83955546_animation_quantization_tolerance_options"></a>
  <br />
</p>
<h3 id="Anchor_83955546_h3_8">Animation Quantization Tolerance Options</h3>
<p>Specifies the allowable range of errors when an animation is optimized.</p>
<ul>
  <li>
    <strong>Node Translate</strong>, <strong>Node Rotate</strong>, <strong>Node Scale</strong><br />Specifies the tolerance for the translation, rotation, and scaling of skeletal animation. <br />For <strong>Node Translate</strong> and <strong>Node Scale</strong>, this setting is specified as a percent of the range of values of animation results. <br />For <strong>Node Rotate</strong>, this setting is specified as an absolute value in units of degrees.</li>
  <li>
    <strong>Texture Translate</strong>, <strong>Texture Rotate</strong>, <strong>Texture Scale<br /></strong>
Specifies the allowable error for the translation, rotation, and scaling of texture SRT animations. <br />For <strong>Texture Translate</strong> and <strong>Texture Scale</strong>, this setting is specified as a percent of the range of values of animation results. <br />For <strong>Texture Rotate</strong>, this setting is specified as an absolute value in units of degrees.</li>
  <li>
    <strong>Frame</strong>
    <br />Specifies the tolerance as an absolute value for each frame of animation.</li>
</ul>
<p> </p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>This option is not applied if an animation intermediate file is merged. The value of the intermediate file to merge is used.</p>
  </div>
</div>
<p>
  <a name="Anchor_83955546_script_options"></a>
</p>
<h3 id="Anchor_83955546_h3_9">Script Options</h3>
<p>Specifies the scripts (MAX Script) to execute before and after export.</p>
<ul>
  <li>
    <strong>Pre-Export Script</strong>
    <br />Specifies the MAX script to execute before export. (MAX script commands can be entered directly.) <br />No script is executed if this option is left blank.</li>
  <li>
    <strong>Post-Export Script</strong>
    <br />Specifies the MAX script to execute after  export. (MAX script commands can be entered directly.) <br />No script is executed if this option is left blank. <br />The specified MAX Script is executed even if an error occurs during export. You can get whether export succeeded using the following environment variables. <br />If merging of intermediate files is enabled, the specified MAX Script file is executed after merging.</li>
</ul>
<p>You can get information from the following environment variables by using the <code>systemTools.getEnvVariable</code> command in the MAX Script file specified as a pre-export or post-export script.</p>
<table class="table">
  <thead>
    <tr>
      <th>Environment variable name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_OUTPUT_FILE_NAME</td>
      <td>Intermediate filename (excluding the filename extension).</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_OUTPUT_FOLDER</td>
      <td>Output folder path. A slash (/) is added to the end of the path.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FTX_FOLDER</td>
      <td>Texture output folder path. A slash (/) is added to the end of the path.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FMD_FILE_PATH</td>
      <td>The full path of the FMD file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FSK_FILE_PATH</td>
      <td>The full path of the FSK file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FVB_FILE_PATH</td>
      <td>The full path of the FVB file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FCL_FILE_PATH</td>
      <td>The full path of the FCL file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FTS_FILE_PATH</td>
      <td>The full path of the FTS file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FTP_FILE_PATH</td>
      <td>The full path of the FTP file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FSH_FILE_PATH</td>
      <td>The full path of the FSH file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FSN_FILE_PATH</td>
      <td>The full path of the FSN file. This setting is not defined unless files are being exported.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FTX_ENABLED</td>
      <td>This setting contains <code>1</code> if FTX file output specification is enabled, or <code>0</code> if it is disabled.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_G3D_TOOL_FOLDER</td>
      <td>The folder path for G3D's 3dTools. <br /> A slash (/) is added to the end of the path.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_SUCCEEDED</td>
      <td>Stores <code>1</code> if export succeeds, or <code>0</code> if it fails. <br /> This environment variable can only be used in a post-export script.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_FTX_FILE_NAMES</td>
      <td>This string contains a list of FTX filenames (including extensions) that were exported.<br /> Each filename is separated by a space. This setting is not defined unless files are being exported. <br /> This environment variable can only be used in a post-export script.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_USED_FTX_FILE_NAMES</td>
      <td>This string contains a list of FTX filenames (including extensions) that were used by the model. Each filename is separated by a space. <br /> This setting is defined when exporting FMD or FTX files. <br /> (The value is the same as <code>NINTENDO_EXPORT_FTX_FILE_NAMES</code>, but it can be obtained even when the FTX file is not exported. <br /> This environment variable can only be used in a post-export script.</td>
    </tr>
    <tr>
      <td class="nowrap">NINTENDO_EXPORT_OPTION_<em>keyword</em></td>
      <td>Contains the values of each export option. <br />Keywords from the <a href="../Pages/Page_83955854.html">FDES file</a> are put in <em>keyword</em>. <br /> The values are also the same as in the FDES file. <br /> For example, in <code>NINTENDO_EXPORT_OPTION_export_target</code><br /> <code>all</code> or <code>selection</code> is stored. <br /> The following keywords are not supported. <br /> settings_version, date_time, show_preset_ui<br /> output_file_name, output_folder<br /> output_fmd/ftx/fsk/fvb/fcl/fts/ftp/fsh/fsn<br /> pre_export_script, post_export_script, lock_*</td>
    </tr>
  </tbody>
</table>
<p>To temporarily disable a script, comment it out by adding &quot;-&quot; to the beginning of each line.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>--select $Box001</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Use the <code>fileIn</code> command to execute MAX Script files.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>fileIn &quot;D:/data/post_export1.ms&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>To execute Windows batch files, use the <code>DOSCommand</code> or <code>hiddenDOSCommand</code> command.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>// When not displaying a command prompt.
hiddenDOSCommand &quot;D:/data/post_export1.bat&quot; 

// When displaying a command prompt.
DOSCommand &quot;D:/data/post_export1.bat&quot;

// When you do not want to wait for the batch file to exit.
DOSCommand &quot;start D:/data/post_export1.bat&quot;
hiddenDOSCommand &quot;start D:/data/post_export1.bat&quot; 
or
hiddenDOSCommand &quot;D:/data/post_export1.bat&quot; donotwait:true</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can also use the preceding environment variables in Windows batch files.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>This example uses the full path of each FTX file in a REM batch file.

for %%I in (%NINTENDO_EXPORT_FTX_FILE_NAMES%) do (
&nbsp;&nbsp;&nbsp;&nbsp;echo %NINTENDO_EXPORT_FTX_FOLDER%%%I
)</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955546_manage_options"></a>
</p>
<h2 id="Anchor_83955546_h2_3">Managing Option Settings</h2>
<p>To save option settings by scene or input/output option settings as <a href="../Pages/Page_83955854.html">3D DCC Plug-In Export Settings File</a>, use the item in the option window's <strong>Settings</strong> menu.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955546/94714594.png" class="embedded-image" />
  </span>
</p>
<h3 id="Anchor_83955546_h3_10">Saving Option Settings for a Scene</h3>
<ul>
  <li>
    <strong>Save / Load Scene Settings</strong> (selected by default)<br />When this option is selected, the option settings used the last time an intermediate file was output will be saved in the scene data when a scene is saved. When that scene is later opened, the option settings that were saved in the scene data are loaded as the current settings.  <br />The current option settings remain if option settings were not saved with the scene data.  Option settings load when a scene for which option settings have been saved is imported.</li>
  <li>If <strong>Save / Load Scene Settings</strong> is cleared, the option settings in the intermediate file that is ultimately exported are not saved in the scene data.  Option settings do not load when scene data is opened. <br />Regardless of whether <strong>Save / Load Scene Settings</strong> is selected, option settings at the time an intermediate file was last output are saved as a default settings file. <br />This default settings file loads at the time of the next startup. <br />The default settings file is saved under the name <code>NintendoExport.fdes</code> in the plug-in settings folder <code>C:\Users\[user_name]\Appdata\Local\Autodesk\3dsmax\[max_version]\[country_code]\[language_code]\plugcfg</code>.</li>
  <li>
    <strong>Delete Scene Settings</strong>
    <br />Use this to delete the option settings that were saved in the scene data.  <br />However, this only works if you clear <strong>Save / Load Scene Settings</strong> and then save the scene data. <br />Unless you save the scene data, the option settings are retained.</li>
  <li>
    <strong>Reset Settings</strong>
    <br /> Use this to restore the option settings to the default values.</li>
  <li>
    <strong>Save Settings</strong>
    <br />Use this to save the option settings in the default config file. If <strong>Save / Load Scene Settings</strong> has been selected, the option settings are also saved in the scene. <br />(Use this feature if you want to save option settings without exporting or applying them.)</li>
</ul>
<h3 id="Anchor_83955546_h3_11">Input/Output Option Settings Using FDES Files</h3>
<p>To export the option settings to a FDES file, click <strong>Save Settings to fdes File</strong>. <br />Specify a name for the output file in the file selection window and the settings will be exported. If the extension of the output file is something other than <code>.fdes</code>, <code>.fdes</code> is added automatically.</p>
<p>To import  the option settings from a FDES file, click <strong>Load Settings from fdes File</strong>. <br />Specify a name for the input file in the file selection window and the settings will be imported. Option settings are saved in the scene if <strong>Save / Load Scene Settings</strong> is selected on the <strong>Settings</strong> menu.</p>
<h2 id="Anchor_83955546_h2_4">Config Files</h2>
<p>You can customize the behavior of the export plug-in by editing the <code>Export.ini</code> file in <code>Tool\DccPlugin\3dsMaxPlugins\Config</code>.</p>
<p>If <code>Export.ini</code> does not exist when the export plug-in is started, the <code>Export_Sample.ini</code> file in the same folder is copied to <code>Export.ini</code> and loaded.</p>
<p>The lines in the config file describe keywords that correspond to customizable items. The values for those keywords and descriptions of the settings they configure are as follows.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Keyword = &quot;Value&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Lines that begin with the pound symbol (#) are comments and are ignored.</p>
<p>The following list describes the various keywords.</p>
<p>Defaults are used if there are no keywords.</p>
<ul>
  <li>
    <strong>display_profile<br /></strong>Specify <code>true</code> to show the duration of each process at export time in the listener window, or  <code>false</code> to hide display. The default is <code>false</code>.<br /></li>
  <li>
    <strong>project_root<br /></strong>Specify the root directory of the application's project file. (<strong>Note:</strong> This directory is not the 3ds Max project folder.)  <br />If this is specified, the relative path from the root folder will be output to <code>src_path</code> in <code>&lt;create&gt;</code> in the intermediate file. If this is the null character, the absolute path will be output. This path may include environment variables surrounded by percent signs (%).  </li>
  <li>
    <strong>max_vertex_skinning_count<br /></strong>Specify an integer number from 1 through 8 for the maximum number of nodes to which skinning weights can be distributed. <br />An error results if the weight is distributed over more nodes than the value specified. <br />Note, however, that if <code>8</code> has been specified, weights from highest to lowest are distributed up to eight nodes without an error even if distributing weights to more than eight nodes. <br />The default value is <code>8</code>.</li>
  <li>
    <strong>adjust_smooth_skinning</strong>
    <br />Specify <code>true</code> to determine the smooth skinning of shapes in the intermediate file in terms of units of nodes in 3ds Max, or <code>false</code> to determine in units of shapes (groups of polygons with the same material). The default is <code>false</code>. <br />If you notice missing dots caused by a calculation error between smooth skinning and rigid skinning, specify <code>true</code>.</li>
  <li>
    <p>
      <strong>optimize_primitive<br /></strong>Specifies the primitive optimization mode.</p>
    <table class="table">
      <thead>
        <tr>
          <th>Mode</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="nowrap">
            <strong>none</strong>
          </td>
          <td>Do not optimize primitives.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>default</strong>
          </td>
          <td>Use default primitive optimization.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>force</strong>
          </td>
          <td>Optimize primitives over time.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>brute_force</strong>
          </td>
          <td>Optimize primitives over an even longer time.</td>
        </tr>
        <tr>
          <td class="nowrap">
            <strong>forsyth</strong>
          </td>
          <td>Optimize primitives using the Forsyth algorithm.</td>
        </tr>
      </tbody>
    </table>
    <p>The default mode is <strong>default</strong>.</p>
  </li>
  <li>
    <strong>quantization_analysis<br /></strong>Specify <code>true</code> to enable quantization analysis, or <code>false</code> otherwise. The default is <code>true</code>.</li>
  <li>
    <strong>texture_hint<br /></strong>
    <br />Specifies gamma linear conversion for each texture hint. <br />To convert gamma from sRGB to linear, specify <code>1</code> for each RGBA component, in that order. To not convert a particular color component, specify <code>0</code> for that component. <br />For example, specifying <code>1110</code> converts the R, G, and B components, but not the A component. <br />The default is <code>1110</code> when the hint is <code>albedo</code>, <code>emission</code>, <code>specular</code>, or <code>reflection</code>; otherwise it is <code>0000</code> (no component is converted).</li>
  <li>
    <strong>use_srgb_fetch</strong>
    <br />If the gamma linear conversion specification for a texture is <code>1110</code> and it is not a grayscale image, specify <code>true</code> to use <code>srgb_*</code> format, or <code>false</code> to use <code>unorm_*</code> format. The default is <code>true</code>.</li>
  <li>
    <strong>enable_weighted_compress<br /></strong>Specify <code>true</code> to enable perceptual weighting for errors in RGB when compressing textures in bc1, bc2, bc3, and so on. Specify <code>false</code> to disable perceptual weighting. The default is <code>false</code>.<br /></li>
  <li>
    <strong>filter_mip<br /></strong>Specify point or linear for the mipmap filter when texture mipmapping is enabled. The default is <code>linear</code>.<br /></li>
  <li>
    <strong>use_fcl_fts_ftp<br /></strong>Specify <code>true</code> to export intermediate files with different extensions for each type of material animation. Specify <code>false</code> to export them all to FMA files. The default is <code>true</code>. <br />When <code>true</code>, the color animations are exported to an FCL file, the texture SRT animations to an FTS file, and the texture pattern animations to an FTP file.</li>
  <li>
    <strong>separate_material_anim</strong>
    <br />Specify <code>true</code> to export each type of material animation to separate FMA files. Specify <code>false</code> to export them all to a single FMA file. The default is <code>false</code>. <br />When <code>true</code>, a default suffix is added to the export file. That suffix and extension is <code>_fcl.fma</code> for color animations, <code>_fts.fma</code> for texture SRT animations, and <code>_ftp.fma</code> for texture pattern animations. <br />This keyword is ignored when <code>use_fcl_fts_ftp</code> is <code>true</code>. </li>
  <li>
    <strong>export_bone_visibility_all<br /></strong>Specify <code>true</code> to export bone visibility animations for all nodes to the binary file. Specify <code>false</code> to export only nodes set with visible animation. The default is <code>true</code>.</li>
  <li>
    <strong>warning_node_name_changed</strong>
    <br />Specify <code>true</code> to display a warning when a node name was changed for export, or <code>false</code> to not display a warning. The default is <code>true</code>.</li>
</ul>
<h2 id="Anchor_83955546_h2_5">Related Links</h2>
<p>
  <a href="../Pages/Page_83955545.html">Export Plug-In</a>
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
