<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Extended Sequence Commands | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Extended Sequence Commands -->
<div class="pagetitle" id="PageId_83955717">Extended Sequence Commands</div>
<div class="text_separate">
<h1 id="Anchor_83955717_h1_1">Contents</h1>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83955717_h2_1">Time Change Commands</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_1">Format</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_2">Time Change Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_3">Extensions to Time Change Commands</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955717_h2_2">Random Commands</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_4">Format</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_5">Random Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_6">Random Note Length Command</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955717_h2_3">Variable Commands</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_7">What Is a Variable?</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_8">Specifying Variables Using Character Strings</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_9">Variable Operation Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_10">Variable Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_11">Format</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_12">Variable Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_13">Note Length (Duration) Variable Note Command</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_14">Variable Operation Commands</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955717_h2_4">Conditional Commands</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_15">Comparison Command</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_16">Conditional Commands</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955717_h2_5">Combining Extended Sequence Commands</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_17">Extensions to Time Change Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_18">Combining Extended Sequence Commands</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83955717_h2_6">Communication With Programs</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955717_h3_19">Communication With MIDI Sequences</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_20">Combining With Conditional Commands</a>
      </li>
      <li>
        <a href="#Anchor_83955717_h3_21">Debugging the Output of the Value of the Variable</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_83955717_h1_2">Extended Sequence Commands</h1>
<p>The extended sequence commands are a group of commands that allow settings to be made with a greater degree of freedom than the sequence commands described up to this point.</p>
<p>Although using the usual sequence commands is enough when playing back conventional sequences, use of extended sequence commands allows more elaborate sequences and interactive sequence playback, among other enhancements.</p>
<h2 id="Anchor_83955717_h2_1">Time Change Commands</h2>
<p>It is possible to specify a time change for several of the sequence commands. Parameters are changed smoothly for the specified amount of time.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>volume_t 64, 48</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>In this example, the volume level is changed from the current value to a value of 64 for 48 ticks.</p>
<p>The same parameter value as the conventional command is manipulated when using a time change command. In other words, if <code>0</code> is specified for the time with a time change command, the result is the same as using the conventional command.</p>
<p>In addition, when using time change commands, the last command specified is always enabled. For example, if a new time change volume command is executed while varying the volume with another time change command, the new time change will start from the current value.</p>
<h3 id="Anchor_83955717_h3_1">Format</h3>
<p>The format of a time change command is as follows.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>(command)_t x, time </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>Where <em><code>x</code></em> is a command parameter, and <em>time</em> is the change time. <em>Time</em> is measured in Ticks as with the <code>note</code> and <code>wait</code> commands. The range of values that can be specified for time is from <code>0</code> to <code>32,767</code>.</p>
<h3 id="Anchor_83955717_h3_2">Time Change Commands</h3>
<p>Table 6-1. Time Change Commands</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <p>volume_t</p>
      </td>
      <td>
        <p>pan_t</p>
      </td>
      <td>
        <p>span_t</p>
      </td>
      <td>
        <p>pitchbend_t</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>volume2_t</p>
      </td>
      <td>
        <p>main_volume_t</p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h3 id="Anchor_83955717_h3_3">Extensions to Time Change Commands</h3>
<p>A random or variable value can be used for the specified time value. For more information, see Combining Extended Sequence Commands.</p>
<h2 id="Anchor_83955717_h2_2">Random Commands</h2>
<p>A random number can be set for the value of several sequence commands.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>pitchbend_r -12 , 12 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>In this example, a random value from <code>&ndash;12</code> through <code>+12</code> is used when the <code>pitchbend</code> command is executed. This allows the pitch to be changed slightly each time the sound is produced.</p>
<h3 id="Anchor_83955717_h3_4">Format</h3>
<p>The basic format of the random command is as follows.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>(command)_r min, max </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>A random number in the range between <code><em>min</em></code> and <code><em>max</em></code> is generated, and the command is executed using that value as its parameter.</p>
<h3 id="Anchor_83955717_h3_5">Random Commands</h3>
<p>Table 10. Random Commands</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <p>wait_r</p>
      </td>
      <td>
        <p>prg_r</p>
      </td>
      <td>
        <p>tempo_r</p>
      </td>
      <td>
        <p>volume_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>volume2_r</p>
      </td>
      <td>
        <p>main_volume_r</p>
      </td>
      <td>
        <p>pitchbend_r</p>
      </td>
      <td>
        <p>pan_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>transpose_r</p>
      </td>
      <td>
        <p>porta_time_r</p>
      </td>
      <td>
        <p>sweep_pitch_r</p>
      </td>
      <td>
        <p>mod_depth_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>mod_speed_r</p>
      </td>
      <td>
        <p>attack_r</p>
      </td>
      <td>
        <p>decay_r</p>
      </td>
      <td>
        <p>sustain_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>release_r</p>
      </td>
      <td>
        <p>mod_delay_r</p>
      </td>
      <td>
        <p>loop_start_r</p>
      </td>
      <td>
        <p>mute_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>bank_select_r</p>
      </td>
      <td>
        <p>mod_period_r</p>
      </td>
      <td>
        <p>mod_phase_r</p>
      </td>
      <td>
        <p>mod_curve_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>setvar_r</p>
      </td>
      <td>
        <p>addvar_r</p>
      </td>
      <td>
        <p>subvar_r</p>
      </td>
      <td>
        <p>mulvar_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>divvar_r</p>
      </td>
      <td>
        <p>shiftvar_r</p>
      </td>
      <td>
        <p>randvar_r</p>
      </td>
      <td>
        <p>andvar_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>orvar_r</p>
      </td>
      <td>
        <p>xorvar_r</p>
      </td>
      <td>
        <p>notvar_r</p>
      </td>
      <td>
        <p>modvar_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_eq_r</p>
      </td>
      <td>
        <p>cmp_ge_r</p>
      </td>
      <td>
        <p>cmp_gt_r</p>
      </td>
      <td>
        <p>cmp_le_r</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_lt_r</p>
      </td>
      <td>
        <p>cmp_ne_r</p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>For more information about <code>setvar_r</code> and subsequent commands in the table, see <strong>Variable Commands</strong> and <strong>Conditional Commands</strong>.</p>
<p>There are also <code>mod2</code>, <code>mod3</code>, and <code>mod4</code> versions of the <code>mod</code> commands.</p>
<p>To see how these commands correspond to regular sequence commands, see the <a href="../Pages/Page_83955585.html">List of All Sequence Commands</a> in the appendix of this document.</p>
<h3 id="Anchor_83955717_h3_6">Random Note Length Command</h3>
<p>A <code>note</code> command can be made to act like a random command by appending <code>_r</code> to the end. This command sets the note length to a random range of values.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>cn4_r velocity, min, max </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>To change the pitch of a sound randomly, use <code>transpose_r</code>. To change the velocity of a sound randomly, use <code>volume_r</code>, <code>volume2_r</code>, and so on.</p>
<h2 id="Anchor_83955717_h2_3">Variable Commands</h2>
<p>Variables can be used within a sequence.</p>
<h3 id="Anchor_83955717_h3_7">What Is a Variable?</h3>
<p>Variables are locations in memory that allow the storage of numeric values. Any value in the range of from &ndash;32,768 through 32,767 can be stored in a single variable.</p>
<p>Each sequence can make free use of 16 variables that are exclusive to that sequence for each sequence track.</p>
<p>Variables used within sequences are called local variables. Variables that are shared and can be freely used by all sequences are called global variables. Variables that only the sequence track can make free use of are called sequence track variables.</p>
<p>Figure 6-1. Local Variables and Global Variables</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956113/1084563861.gif" width="500" class="embedded-image" />
  </span>
</p>
<p>Each variable inside a sequence is specified by a number.</p>
<p>The numbers 0 to 15 indicate one of the 16 local variables.</p>
<p>The numbers 16 to 31 indicate one of the 16 global variables. The actual variable number is the value that results from subtracting 16 from this number. For example, numbers 16 to 31 actually represent the global variables 0 to 15.</p>
<p>Similarly, numbers 32 to 47 indicate the 16 sequence track variables. The actual variable number is the value that results from subtracting 32 from this number. For example, numbers 32 to 47 actually represent the sequence track variables 0 to 15.</p>
<p>The default value for the variables is <code>&ndash;1</code>. Global variables are initialized when the system starts. Local variables and sequence track variables are initialized when the sequence starts.</p>
<h3 id="Anchor_83955717_h3_8">Specifying Variables Using Character Strings</h3>
<p>Variable numbers can also be specified using macro strings. You can use these macros instead of <code>varNo</code> to specify variable numbers in the variable commands described in the following section.</p>
<p>The following table lists the macros for specifying variable numbers.</p>
<p>Table 6-3. Macros Specifying Variable Numbers</p>
<table class="wrapped">
  <thead>
    <tr>
      <th>
        <p>Macro</p>
      </th>
      <th>
        <p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <p>VAR_0, VAR_1 &hellip; VAR_15</p>
      </td>
      <td>
        <p>Corresponds to local variables 0 to 15</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>GVAR_0, GVAR_1 &hellip; GVAR_15</p>
      </td>
      <td>
        <p>Corresponds to global variables 0 to 15</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>TVAR_0, TVAR_1 &hellip; TVAR_15</p>
      </td>
      <td>
        <p>Corresponds to sequence track variables 0 to 15</p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h3 id="Anchor_83955717_h3_9">Variable Operation Commands</h3>
<p>Values can be set and four arithmetic operators and other operators can be used for each variable.</p>
<p>Table 6-4. Variable Operation Commands</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <thead>
    <tr>
      <th>
        <p>Command Name</p>
      </th>
      <th>
        <p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <p>setvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets the variable to value <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>addvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Adds <em>x</em> to the value of the variable.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>subvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Subtracts <em>x</em> from the value of the variable.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>mulvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Multiplies the value of the variable by <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>divvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Divides the value of the variable by <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>shiftvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Left-shifts the variable value by <em>x</em> bits (right-shifts if a negative value is used).</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>randvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets a random value in the range from <code>0</code> to <em>x</em> in the variable (or in the range from <em>x</em> to <code>0</code> if the value is negative).</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>andvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets the variable value and the bitwise AND of <em>x</em> as the variable.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>orvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets the variable value and the bitwise OR of <em>x</em> as the variable.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>xorvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets the variable value and the bitwise XOR of <em>x</em> as the variable.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>notvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Sets the bitwise NOT of <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>modvar <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>Remainder calculation for variable's value and <em>x</em>.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h3 id="Anchor_83955717_h3_10">Variable Commands</h3>
<p>Sequence commands can be executed using the variable set with the variable calculation commands described previously.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>pitchbend_v 0 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>In the preceding example, the <code>pitchbend</code> command is executed using the local variable 0.</p>
<h3 id="Anchor_83955717_h3_11">Format</h3>
<p>The basic format of a variable command is as follows.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>(command)_v varNo </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>Here, <code>command</code> is executed using the variable value specified by <code>varNo</code>.</p>
<p>A value range was set for the arguments for each sequence command, and operations cannot be assured when a variable is set to a value that is outside this range.</p>
<h3 id="Anchor_83955717_h3_12">Variable Commands</h3>
<p>All sequence commands that can be used as random commands can also be used as variable commands.</p>
<p>Table 6-5. Variable Commands</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <p>wait_v</p>
      </td>
      <td>
        <p>prg_v</p>
      </td>
      <td>
        <p>tempo_v</p>
      </td>
      <td>
        <p>volume_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>volume2_v</p>
      </td>
      <td>
        <p>main_volume_v</p>
      </td>
      <td>
        <p>pitchbend_v</p>
      </td>
      <td>
        <p>pan_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>transpose_v</p>
      </td>
      <td>
        <p>porta_time_v</p>
      </td>
      <td>
        <p>sweep_pitch_v</p>
      </td>
      <td>
        <p>mod_depth_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>mod_speed_v</p>
      </td>
      <td>
        <p>attack_v</p>
      </td>
      <td>
        <p>decay_v</p>
      </td>
      <td>
        <p>sustain_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>release_v</p>
      </td>
      <td>
        <p>mod_delay_v</p>
      </td>
      <td>
        <p>loop_start_v</p>
      </td>
      <td>
        <p>mute_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>setvar_v</p>
      </td>
      <td>
        <p>addvar_v</p>
      </td>
      <td>
        <p>subvar_v</p>
      </td>
      <td>
        <p>mulvar_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>divvar_v</p>
      </td>
      <td>
        <p>shiftvar_v</p>
      </td>
      <td>
        <p>randvar_v</p>
      </td>
      <td>
        <p>andvar_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>orvar_v</p>
      </td>
      <td>
        <p>xorvar_v</p>
      </td>
      <td>
        <p>notvar_v</p>
      </td>
      <td>
        <p>modvar_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>bank_select_v</p>
      </td>
      <td>
        <p>mod_period_v</p>
      </td>
      <td>
        <p>mod_curve_v</p>
      </td>
      <td>
        <p>mod_phase_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_eq_v</p>
      </td>
      <td>
        <p>cmp_ge_v</p>
      </td>
      <td>
        <p>cmp_gt_v</p>
      </td>
      <td>
        <p>cmp_le_v</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_lt_v</p>
      </td>
      <td>
        <p>cmp_ne_v</p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
      <td>
        <p>
          <br />
        </p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>Commands that start with <code>cmp_</code> are comparison commands. They are described in the Conditional Commands section later in this document.</p>
<p>There are also <code>mod2</code>, <code>mod3</code>, and <code>mod4</code> versions of the <code>mod</code> commands.</p>
<p>To see how these commands correspond to regular sequence commands, see the <a href="../Pages/Page_83955585.html">List of All Sequence Commands</a> in the appendix of this document.</p>
<h3 id="Anchor_83955717_h3_13">Note Length (Duration) Variable Note Command</h3>
<p>A <code>note</code> command can be made to act as a variable command by appending <code>_v</code> to the end. The duration is specified using a variable in this case.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>cn4_v velocity, varNo </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>Substitute <code>transpose_v</code> to specify the duration of a sound using a variable. Substitute <code>volume_v</code>, <code>volume2_v</code>, and so on to specify the velocity using a variable.</p>
<h3 id="Anchor_83955717_h3_14">Variable Operation Commands</h3>
<p>The variable calculation commands described previously can be used to add or subtract a value to or from a variable. Variable commands such as <code>setvar_v</code> can be used for variable substitution and when adding the value of one variable to another variable.</p>
<p>
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>setvar_v 0, 1 ; Assign the value of Variable 1 to Variable 0
addvar_v 2, 3 ; Add the value of Variable 2 and Variable 3 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h2 id="Anchor_83955717_h2_4">Conditional Commands</h2>
<p>A variable can be used to control whether a sequence command executes.</p>
<h3 id="Anchor_83955717_h3_15">Comparison Command</h3>
<p>A comparison command must execute before using conditional commands. The decision whether to execute the conditional command is based on the result of comparing two values using a comparison command.</p>
<p>The following table lists the available comparison commands.</p>
<p>Table 6-6. Comparison Commands</p>
<table class="wrapped">
  <thead>
    <tr>
      <th>
        <p>Command Name</p>
      </th>
      <th>
        <p>Format</p>
      </th>
      <th>
        <p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <p>cmp_eq <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) == x</p>
      </td>
      <td>
        <p>True if the variable value equals <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_ge <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) &gt;= x</p>
      </td>
      <td>
        <p>True if the variable value is greater than or equal to <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_gt <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) &gt; x</p>
      </td>
      <td>
        <p>True if the variable value is greater than <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_le <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) &lt;= x</p>
      </td>
      <td>
        <p>True if the variable value is less than or equal to <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_lt <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) &lt; x</p>
      </td>
      <td>
        <p>True if the variable value is less than <em>x</em>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>cmp_ne <em>varNo</em>, <em>x</em></p>
      </td>
      <td>
        <p>(variable) != x</p>
      </td>
      <td>
        <p>True if the variable value is not equal to <em>x</em>.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>If the result of a comparison is true, the following conditional command is executed. If false, the following conditional command is not executed.</p>
<h3 id="Anchor_83955717_h3_16">Conditional Commands</h3>
<p>Conditional commands exist for all sequence commands. Conditional commands use the same command name as the original function with <code>_if</code> appended to the end.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>pitchbend_if +48 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>In the following example, a sound is turned on and off based on a random number.</p>
<p>
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>randvar 0, 100 ; Sets a random value from 0 through 100
cmp_le 0, 80 ; True if the random value is 80 or lower
cn4 96, 12
dn4_if 96, 12 ; Sound is played only if true
en4 96, 12
fin </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h2 id="Anchor_83955717_h2_5">Combining Extended Sequence Commands</h2>
<p>The extended sequence commands described so far can be combined together for simultaneous use.</p>
<h3 id="Anchor_83955717_h3_17">Extensions to Time Change Commands</h3>
<p>In the case of commands that correspond to time change commands, you can extend the time change command and use a random or variable value for the change time value.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>(command)_tr x, timeMin, timeMax
(command)_tv x, timeVarNo </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>To use a random value for the time change, specify <code>_tr</code> in place of <code>_t</code>. To specify a variable value for the time change, specify <code>_tv</code> in place of <code>_t</code>.</p>
<h3 id="Anchor_83955717_h3_18">Combining Extended Sequence Commands</h3>
<p>Extended sequence commands can be combined according to a set rule. Only extensions supported by a command can be combined.</p>
<p class="Code">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>(command){_r,_v}{_t,_tr,_tv}{_if} </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>Specify <code>_r</code> for random commands and <code>_v</code> for variable commands first, followed by <code>_t</code> for a time change command. Specify the conditional command <code>_if</code> last. This specification order cannot be changed.</p>
<p>For example, you can specify a command such as the following.</p>
<p>
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>volume_r_tv_if min, max, timeVarNo </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>This command sets a random volume ranging between <code><em>min</em></code> and <code><em>max</em></code> for the time specified by the variable <code>timeVarNo</code> if the result of the comparison command is true.</p>
<h2 id="Anchor_83955717_h2_6">Communication With Programs</h2>
<p>Communication with programs can be performed using variables. Because variables can be read and written by programs, they can be used for passing information back and forth.</p>
<h3 id="Anchor_83955717_h3_19">Communication With MIDI Sequences</h3>
<p>Use variables to notify a program of information that is available from a MIDI sequence.</p>
<p>The eight Control Changes 16 through 19 and 80 through 83 are each converted by the <code>setvar</code> command. Control Change 16 is set to Local Variable 0. Similarly, Control Changes 17, 18, and 19 are set to Local Variables 1, 2, and 3, respectively. Control Change 80 is set to track Variable 0. Similarly, Control Changes 81, 82, and 83 are set to track Variables 1, 2, and 3, respectively.</p>
<p>For example, by setting these variables at the break between each block making up a track, the program can keep track of which block is currently being played.</p>
<h3 id="Anchor_83955717_h3_20">Combining With Conditional Commands</h3>
<p>It is possible to change sequences at a certain time in a program by combining conditional commands with the reading and writing of variables from the program.</p>
<p>
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>_loop:
&nbsp;&nbsp;&nbsp;&nbsp;cmp_eq 0, 1
&nbsp;&nbsp;&nbsp;&nbsp;jump_if _loop2 ; Jump only when Variable 0 is 1
&nbsp;&nbsp;&nbsp;&nbsp;cn4 96, 12
&nbsp;&nbsp;&nbsp;&nbsp;dn4 96, 12
&nbsp;&nbsp;&nbsp;&nbsp;jump _loop
_loop2:
&nbsp;&nbsp;&nbsp;&nbsp;cn4 96, 12
&nbsp;&nbsp;&nbsp;&nbsp;en4 96, 12
&nbsp;&nbsp;&nbsp;&nbsp;jump _loop2 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>In this example, the sequence of notes C, D, C, D&hellip; is played repeatedly as long as the program does nothing. However, this sequence changes to C, E, C, E&hellip; when a value of <code>1</code> is assigned to Local Variable 0 by the program.</p>
<h3 id="Anchor_83955717_h3_21">Debugging the Output of the Value of the Variable</h3>
<p>Sometimes operations are not performed as expected due to errors that occur when trying to handle complicated variable processing. In such a case, a sequence command is provided to determine whether the intended value is assigned to the used variable.</p>
<p>Table 6-7. Variable Debugging Commands</p>
<table class="wrapped">
  <thead>
    <tr>
      <th>
        <p>Command Name</p>
      </th>
      <th>
        <p>Description</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <p>printvar <em>varNo</em></p>
      </td>
      <td>
        <p>Debug output of the value of the variable.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>When this command is processed, the debug output looks like the following.</p>
<p>
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>#8077a450[1]: printvar GVAR_2(18) = -1 </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>The part, #8077a450[1], appearing before the colon indicates that the player identifier is 8077a450 and that the track number is 1. The numeric value of the player identifier itself does not have any important significance. The player identifier is merely used to show that output is from another sequence if the player identifier differs. The track number indicates the track from which the sequence was output.</p>
<p>The data stored by the variable appears following <code>printvar</code>. <code>VAR_</code> is displayed for local variables, <code>GVAR_</code> for global variables, and <code>TVAR_</code> for track variables, followed by the variable number. The value inside parentheses is the variable&rsquo;s serial number when used by sequence data. In the example, the information appearing after <code>printvar</code> indicates that the value of global variable 2 is <code>&ndash;1</code>.</p>
<p>Output from <code>printvar</code> is enabled for <code>AtkPlayer</code>. Because output from <code>printvar</code> is disabled by default for user programs, you must enable it using the <code>SoundSystem::EnableSeqPrintVar</code> function. For more information, see the API Reference.</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
