<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Shop Features | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Shop Features -->
<div class="pagetitle" id="PageId_424130890">Shop Features</div>
<div class="text_separate">
<p>Use the <code>shop</code> command to configure the primary console settings and the EC response simulation settings.</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_424130890_h1_1">Primary Console Settings</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424130890_h2_1">Configuring the First Connection to the Shop and Registering the Primary Console</a>
      </li>
      <li>
        <a href="#Anchor_424130890_h2_2">Registering Primary Consoles</a>
      </li>
      <li>
        <a href="#Anchor_424130890_h2_3">Unregistering Primary Consoles</a>
      </li>
      <li>
        <a href="#Anchor_424130890_h2_4">Checking Primary Console Registration Status</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424130890_h1_2">Feature to Delete Rights for Titles Purchased on eShop</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424130890_h2_5">Deleting All Rights for a Specified Account</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424130890_h1_3">Configuring the EC Response Simulation Feature</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424130890_h2_6">Disabling the EC Response Simulation Feature</a>
      </li>
      <li>
        <a href="#Anchor_424130890_h2_7">Registering a Response for EC Response Simulation</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424130890_h1_4">JSON Compatibility Check Feature Configuration</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424130890_h2_8">Configuring the Dummy Element Size in the JSON Compatibility Check Feature</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_424130890_h1_1">Primary Console Settings</h1>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop
usage: DevMenuCommand shop start &lt;user_account_index&gt;
       DevMenuCommand shop link-device &lt;user_account_index&gt;
       DevMenuCommand shop unlink-device &lt;user_account_index&gt;
       DevMenuCommand shop unlink-device-all
       DevMenuCommand shop device-link-status &lt;user_account_index&gt;</pre>
  </div>
</div>
<p>The options for each of these commands is presented in the following table.</p>
<table class="wrapped relative-table" style="width: 35.3264%;">
  <colgroup>
    <col style="width: 23.6392%;" />
    <col style="width: 76.3608%;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Option</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>user_account_index</td>
      <td>
        <p>The index number (0 to 7) for the user account.</p>
        <p>(You can find this number in the list of user accounts in DevMenu &gt; Accounts. Index numbers are assigned starting with 0 at the top and going down the list to 7.)</p>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_424130890_h2_1">Configuring the First Connection to the Shop and Registering the Primary Console</h2>
<p>Use the <code>shop start</code> command to execute the process that runs when you access the shop for the first time.<br />If you run the <code>shop start</code> command on a system with a user account linked to a Nintendo Account, that system is registered as the primary console.<br />To configure the necessary settings so that systems that are not registered as the primary console can use the shop the first time they access the shop, be sure to run the <code>shop start</code> command for one of the alternate systems.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop start 0
Registering as active console of the account user index 0 ...
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_2">Registering Primary Consoles</h2>
<p>You can register a primary console by running the <code>shop link-device</code> command on a system with a user account linked to a Nintendo Account.<br />The registration process fails if you specify a Nintendo Account for which another system already has been registered as the primary console.<br />To change the primary console, unregister the system that was registered as the primary console and then register the new system that you want to be the primary console.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop link-device 0
Registering as active console of the account user index 0 ...
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_3">Unregistering Primary Consoles</h2>
<p>Use the <code>shop unlink-device</code> command to unregister a primary console.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop unlink-device 0
Unregistering as active console of the account user index 0 ...
[SUCCESS]</pre>
  </div>
</div>
<p>Use the <code>shop unlink-device-all</code> command to unregister all primary consoles on that system.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop unlink-device-all
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_4">Checking Primary Console Registration Status</h2>
<p>Use the <code>shop device-link-status</code> command to check the primary console registration information.</p>
<p>
  <strong>If the system that runs the command is registered as a primary console for the specified account:</strong>
</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop device-link-status 0
This device is registered as an active device of the account user index 0
[SUCCESS]</pre>
  </div>
</div>
<p>
  <strong>If an alternate system is registered as the primary console for the specified account:</strong>
</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop device-link-status 0
Another device is registered as an active device of the account user index 0
[SUCCESS]</pre>
  </div>
</div>
<p>
  <strong>If no system is registered as the primary console for the specified account:</strong>
</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop device-link-status 0
Unregistered
[SUCCESS] </pre>
  </div>
</div>
<h1 id="Anchor_424130890_h1_2">
  <span style="color: rgb(117,117,117);">Feature to Delete Rights for Titles Purchased on eShop</span>
</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Available in the following versions.</p>
    <ul>
      <li>NintendoSDK Firmware for NX 9.1.0-2.0 and later</li>
    </ul>
  </div>
</div>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop
usage: DevMenuCommand shop delete-all-rights &lt;user_account_index&gt;</pre>
  </div>
</div>
<p>The options for each of these commands is presented in the following table.</p>
<table class="relative-table wrapped" style="width: 35.3264%;">
  <colgroup>
    <col style="width: 23.6392%;" />
    <col style="width: 76.3608%;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Option</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>user_account_index</td>
      <td>
        <p>The index number (0 to 7) for the user account.</p>
        <p>(You can find this number in the list of user accounts in DevMenu &gt; Accounts. Index numbers are assigned starting with 0 at the top and going down the list to 7.)</p>
      </td>
    </tr>
  </tbody>
</table>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>The feature to delete rights for titles purchased on eShop allows you to delete rights of applications and downloadable contents purchased on eShop.<br />Rights for consumable service items and subscription service items purchased on eShop cannot be deleted using this feature.</p>
  </div>
</div>
<h2 id="Anchor_424130890_h2_5">
  <br />
  <span style="color: rgb(117,117,117);">Deleting All Rights for a Specified Account</span>
</h2>
<p>You can use the <code>shop delete-all-rights</code> command to delete rights for all titles on a specific account.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop delete-all-rights 0
Deleting all rights of the account user index 0 ...
[SUCCESS]</pre>
  </div>
</div>
<h1 id="Anchor_424130890_h1_3">Configuring the EC Response Simulation Feature</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Available in the following versions.</p>
    <ul>
      <li>NintendoSDK Firmware for NX <span style="color: rgb(23,43,77);">6.2.0-1.0</span> and later</li>
      <li>NintendoSDK Firmware for NX <span style="color: rgb(23,43,77);">7.0.0-1.0</span> and later</li>
    </ul>
  </div>
</div>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop
usage: shop disable-response-of-ec-response-simulation
       shop register-response-of-ec-response-simulation --setting-file &lt;absolute_setting_path&gt;</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_6">Disabling the EC Response Simulation Feature</h2>
<p>Use the <code>shop disable-response-of-ec-response-simulation</code> command to disable the feature for simulating EC responses.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop disable-response-of-ec-response-simulation
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_7">Registering a Response for EC Response Simulation</h2>
<p>Use the <code>shop register-response-of-ec-response-simulation</code> command to register the response for EC response simulation.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop register-response-of-ec-response-simulation --setting-file C:\setting.json
[SUCCESS]</pre>
  </div>
</div>
<p>When you run this command, the EC response simulation feature is enabled automatically.</p>
<p>The content of the response to register is configured in the JSON file specified by the <code>--setting-file</code> option.</p>
<p>Configure the following items in the JSON file.</p>
<table class="relative-table wrapped" style="width: 79.9414%;">
  <colgroup>
    <col style="width: 16.9061%;" />
    <col style="width: 83.117%;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Item</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>server</td>
      <td>
        <p>Specifies the server type, for the shop service being connected to, with a request to determine whether to apply this dummy EC response.</p>
        <p>The following options are available.</p>
        <ul>
          <li>Catalog</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>url</td>
      <td>Specifies the URL path string specified with <code>ShopServiceAccessor::Request()</code> with a request to determine whether to apply this dummy EC response.</td>
    </tr>
    <tr>
      <td>response</td>
      <td>Specifies the response body data string returned for the target request to which this dummy EC response is applied.</td>
    </tr>
    <tr>
      <td>result</td>
      <td>Specifies the response <code>Result</code> value that can be obtained by the shop service access utility feature, returned for the target request to which this dummy EC response is applied.</td>
    </tr>
    <tr>
      <td>result-inner-value</td>
      <td>
        <p>Specifies the response <code>Result</code> value returned for the target request to which this dummy EC response is applied, with a value that can be obtained with <code>GetInnerValueForDebug()</code> of the <code>nn :: Result</code> class.</p>
        <p>You cannot specify <code>result</code> and <code>result-inner-value</code> at the same time.</p>
      </td>
    </tr>
    <tr>
      <td>rate</td>
      <td>
        <p>The rate at which this dummy EC response is applied. (A fraction of 10,000, where 10,000 is a 100% rate of occurrence.)</p>
      </td>
    </tr>
  </tbody>
</table>
<p>The following is a sample JSON file configuration.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>{
&nbsp;&nbsp;&nbsp;&nbsp;&quot;server&quot;: &quot;Catalog&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;url&quot;: &quot;/v1/applications/{applicationId}/consumables&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;response&quot;: &quot;{\&quot;lang\&quot;:\&quot;ja\&quot;,\&quot;consumables\&quot;:[{\&quot;consumable_id\&quot;:\&quot;b7eb25fe683dd99a\&quot;,\&quot;name\&quot;:\&quot;service name\&quot;,\&quot;description\&quot;:\&quot;service description\&quot;,\&quot;disclaimer\&quot;:\&quot;service disclaimer\&quot;}]}&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;result&quot;: &quot;ResultNetworkTimeUnavailable&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;rate&quot;: &quot;10000&quot;
}</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p class="auto-cursor-target">Multiple responses can be recorded by describing the configuration in an array.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>[
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;server&quot;: &quot;Catalog&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;url&quot;: &quot;/v1/applications/{applicationId}/consumables&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;response&quot;: &quot;{\&quot;lang\&quot;:\&quot;ja\&quot;,\&quot;consumables\&quot;:[{\&quot;consumable_id\&quot;:\&quot;123456789abcdef0\&quot;,\&quot;name\&quot;:\&quot;service name\&quot;,\&quot;description\&quot;:\&quot;service description\&quot;,\&quot;disclaimer\&quot;:\&quot;service disclaimer\&quot;}]}&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;result&quot;: &quot;ResultSuccess&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;rate&quot;: &quot;10000&quot;
&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;server&quot;: &quot;Catalog&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;url&quot;: &quot;/v1/applications/{applicationId}/titles/items&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;response&quot;: &quot;{\&quot;lang\&quot;:\&quot;ja\&quot;,\&quot;length\&quot;:1,\&quot;title_items\&quot;:[{\&quot;ns_uid\&quot;:70050000000002,\&quot;ns_uid_title\&quot;:70050000000001,\&quot;name\&quot;:\&quot;name\&quot;,\&quot;description\&quot;:\&quot;description\&quot;,\&quot;disclaimer\&quot;:\&quot;disclaimer\&quot;,\&quot;content_type\&quot;:\&quot;title\&quot;}]}&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;result&quot;: &quot;ResultSuccess&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;rate&quot;: &quot;10000&quot;
&nbsp;&nbsp;&nbsp;&nbsp;}
]</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_424130890_h1_4">
  <span style="color: rgb(117,117,117);">JSON Compatibility Check Feature Configuration</span>
  <br />
</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Available in the following versions.</p>
    <ul>
      <li>NintendoSDK Firmware for NX 10.0.0-4.0 and later</li>
    </ul>
  </div>
</div>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop
usage: shop set-json-dummy-element-of-ec-response --mode &lt;none|fixed|random&gt; [--addition-rate &lt;value&gt;]</pre>
  </div>
</div>
<h2 id="Anchor_424130890_h2_8">Configuring the Dummy Element Size in the JSON Compatibility Check Feature</h2>
<p>The development hardware adds dummy elements not existent in the original response to a response JSON obtained from the shop service server using the <code>ec</code> library.<br />The size of the dummy element to be added can be configured using <code>shop set-json-dummy-element-of-ec-response</code>.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- shop set-json-dummy-element-of-ec-response --mode fixed --addition-rate 50
[SUCCESS]</pre>
  </div>
</div>
<p>The size of the dummy element is determined by the shop service server response size and the mode/addition rate (%) set in <code>shop set-json-dummy-element-of-ec-response.</code><br />If the response size is 10 KB, the mode is <code>fixed</code>, and the addition rate is 50, a 5 KB dummy element is added and the response returned by the <code>ec</code> library is 15 KB.<br />If the response size is small and the dummy element to add is less than 1024 bytes, round up to 1024 bytes and add it to the total size.</p>
<p>The following modes can be set with the <code>--mode</code> option. The default setting for the development hardware is <code>--mode fixed --addition-rate 50</code>.</p>
<table class="relative-table wrapped" style="width: 79.9414%;">
  <colgroup>
    <col style="width: 16.9061%;" />
    <col style="width: 83.117%;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Mode Name</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>none</td>
      <td>Does not add a dummy element.</td>
    </tr>
    <tr>
      <td>fixed</td>
      <td>Adds a dummy element with a set addition rate to each response.<br />The addition rate can be set with the <code>--addition-rate</code> option. If the addition rate is omitted, <code>50</code> is applied.</td>
    </tr>
    <tr>
      <td>random</td>
      <td>
        <p>Adds a dummy element using a random addition rate for each response.</p>
      </td>
    </tr>
  </tbody>
</table>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Dummy elements can also be added to responses that were registered using the EC response simulation feature. If you want to check the response without adding a dummy element, select <strong>none</strong>.</p>
    <p>Added dummy elements to registered responses is a feature available in NintendoSDK Firmware for NX 12.0.0-1.0 and later. With earlier versions, dummy elements are not added when registered responses are returned.</p>
  </div>
</div>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
