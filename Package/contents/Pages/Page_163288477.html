<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>VfxViewerSimple Sample | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- VfxViewerSimple Sample -->
<div class="pagetitle" id="PageId_163288477">VfxViewerSimple Sample</div>
<div class="text_separate">
<h1 id="Anchor_163288477_h1_1">Introduction</h1>
<p>Describes the VfxViewerSimple sample that uses the Viewer runtime. For more information about the Viewer runtime, see the following link.</p>
<p>
  <span class="status_macro_base status_macro_Blue">Related Links</span> For more information, see the following pages. </p>
<table class="wrapped">
  <tbody>
    <tr>
      <td class="highlight-grey">
        <strong>
          <a href="../Pages/Page_162172952.html">In-Game Editing Workflow</a>
        </strong>
      </td>
      <td>Describes the in-game editing workflow that allows you to edit effects while directly verifying them in the game application.</td>
    </tr>
    <tr>
      <th>
        <span class="with-breadcrumbs">
          <a href="../Pages/Page_83955666.html">Runtime Embedding Tutorial</a>
        </span>
      </th>
      <td>A tutorial that covers how to embed the effect runtime in an application and start playing effects.</td>
    </tr>
  </tbody>
</table>
<h4 id="Anchor_163288477_h4_1">Running the Sample</h4>
<p>When the sample is run, the character model will be rendered and played using the fire effect and the <code>g3d</code> library.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <code>NintendoSDK\Samples\Sources\Applications\VfxViewerSimple</code>
      </td>
    </tr>
  </tbody>
</table>
<p>Start EffectMaker in this state, and configure the <strong>Platform</strong> and <strong>Target</strong> settings at the top of EffectMaker to match the sample that is running to connect the sample to EffectMaker.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <code>NintendoSDK\Tools\Graphics\EffectMaker\EffectMaker.exe</code>
      </td>
    </tr>
  </tbody>
</table>
<p>This document describes the following features of the Viewer runtime, using this sample as a virtual application that is in the process of being created.</p>
<ul>
  <li>Creating and editing effects in the application</li>
  <li>Editing effects incorporated in the application</li>
  <li>Linking models and effects in the application</li>
</ul>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>The Viewer runtime can only be connected to EffectMaker in the Debug or Develop version.</p>
  </div>
</div>
<h4 id="Anchor_163288477_h4_2">Creating and Editing Effects in the Application</h4>
<p>After the sample has been connected, if you create a new emitter set from EffectMaker, the emitter set created in EffectMaker will be played in the sample as shown in the following figure.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956195/177649189.png" height="250" class="embedded-image" />
  </span>
</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td class="highlight-grey">
        <strong>Blue Box</strong>
      </td>
      <td>The fire effect indicated by the blue box is loaded from the effect binary in the sample and played back.</td>
    </tr>
    <tr>
      <th>
        <span class="with-breadcrumbs">Red Box</span>
      </th>
      <td>The square particles indicated by the red box are effects played back by the Viewer runtime.<br />The effects played back by the Viewer runtime are binaries transferred through the connection between the sample and EffectMaker.</td>
    </tr>
    <tr>
      <td class="highlight-grey">
        <strong>Green Box</strong>
      </td>
      <td>The character model indicated by the green box is played back and rendered by loading the <code>g3d</code> model binary in the sample.</td>
    </tr>
  </tbody>
</table>
<h4 id="Anchor_163288477_h4_3">Editing Effects Incorporated in the Application</h4>
<p>Next, use EffectMaker to adjust the fire effect being played in the sample. First, in EffectMaker, open the Excel file for the fire effect (<code>TorchFire.eset</code>) being played back.</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>NintendoSDK\Samples\Sources\Applications\VfxViewerSimple\Resources\Eset\TorchFire.eset</td>
    </tr>
  </tbody>
</table>
<p>After the <code>TorchFire.eset</code> file being played back by the sample is open for editing, the Emitter Set icon (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079868.png" alt="エミッタセットノード" title="エミッタセットノード" class="embedded-image" /></span>) will have a chain icon (<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/163742086.png" class="embedded-image" /></span>) on it that indicates its status as being edited, as shown in the following figure.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956195/177649191.png" class="embedded-image" />
  </span>
</p>
<p>After it is open for editing, edit the color of the particles as shown in the following figure. The color of the torch fire being played back in the sample also changes.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956195/177649275.png" height="250" class="embedded-image" />
  </span>
</p>
<p>When a file is open for editing, the effects binary being played back by the application and the effects binary being transferred from EffectMaker are replaced, and the content of the edits in EffectMaker will be applied to the effects being played back in the application.</p>
<h4 id="Anchor_163288477_h4_4">Linking Models and Effects in the Application</h4>
<p>Finally, this section describes the link between the model in the application and the effects transferred from EffectMaker.</p>
<p>In the sample, information for the model currently being played back is transferred to EffectMaker using the <code><span class="ApiLink_nn__vfx__viewer__ViewerSystem__UpdateModelInfo">nn::vfx::viewer::ViewerSystem::UpdateModelInfo</span></code> member function. The transferred model information is enumerated in the <strong>Model to Constrain</strong> and <strong>Bone to Constrain</strong> UI in the <strong>SRT Transform</strong> tab of the preview node. Model information transferred from EffectMaker is rendered using the model and bone name matrices specified there.</p>
<p>
  <br />
</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956195/177649280.png" height="250" class="embedded-image" />
  </span>
</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__vfx__viewer__ViewerSystem__UpdateModelInfo', '../../../Api/HtmlNX/classnn_1_1vfx_1_1viewer_1_1_viewer_system.html#ad8588691e10fdab9c2206984686f655a' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
