<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3. Handling UV Distortion | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3. Handling UV Distortion -->
<div class="pagetitle" id="PageId_163283745">3. Handling UV Distortion</div>
<div class="text_separate">
<p>UV distortion can result if UV hard edges are not preserved or the UV coordinates are not taken into account. For this reason, you can resolve this problem by <span style="color: rgb(255,0,0);">considering the UV coordinates</span>. Preserving the UV hard edges will ensure that the UV shell does not collapse.</p>
<p>Change <code>--property-flag</code> of the <strong>default parameter</strong> to <code>Position|UV</code> and run the reduction. This change adds the flag for evaluating UV. This parameter is called <strong>Parameter B</strong>. For more information about the parameter settings, see <a href="../Pages/Page_162186377.html#Anchor_162186377_property-flag">Reduction Considering Properties</a>. <strong>Note:</strong> When there are multiple UV atlases (or UV shells in Maya), UV coordinates are considered even when polygon reduction is executed without the UV option. For models where multiple UV atlases are merged, for example, this option must be added explicitly.</p>
<p>
  <br />
</p>
<p>For more information about this parameter, see <a href="../Pages/Page_83955705.html#Anchor_83955705_poly-red-property">Intermediate File Optimizer</a>.</p>
<div class="panel" style="border-width: 1px;">
  <div class="panelHeader" style=" border-bottom-width: 1px;">
    <b>Parameter B</b>
  </div>
  <div class="panelContent">
    <span style="color: rgb(51,153,102);">&quot;--target-rate-lod-level1 0.5 --target-rate-lod-level2 0.25 --property-flag Position<span style="color: rgb(255,0,0);">|UV</span> --optimize-position-policy OptimalOnSpace&quot; </span>
  </div>
</div>
<p>
  <span class="nolink">Use the following batch file.</span>
</p>
<p>
  <span class="nolink">
    <code>%NINTENDO_SDK_ROOT%\Samples\Sources\Tools\3dTools\3dIntermediateFileOptimizer\PolygonReductionTutorial</code>
  </span>
  <code>\ExecuteParameterB.bat</code>
</p>
<p>
  <br />
</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
  </colgroup>
  <tbody>
    <tr>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270188404.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <p>Figure 4-1. Results with Parameter B (LOD level 2) (34,365 polygons)</p>
        <p>
          <br />
        </p>
        <p>There are multiple UV atlases, so the results are exactly the same as with the default settings.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>When polygon reduction is executed with Parameter B, there are no apparent changes in the Town model relative to when using the default settings (because the UV option is automatically added by default). However, simply adding the UV option alone sometimes still results in visible UV distortion in some areas, as shown in Figure 4-2. You can reduce this distortion by specifying additional parameters.</p>
<h3 id="Anchor_163283745_h3_1">Parameter Adjustments Taking UV Into Account</h3>
<p>UV interpolation occurs as an inherent part of the polygon reduction process, so in most cases the parameter adjustments will not reduce UV distortion. However, you can adjust the parameters to achieve a balance between changes in shape and changes in UV space. For more information about the techniques for reducing distortion due to the translation of UV hard edges, see <a href="../Pages/Page_163286320.html">this separate page</a>.</p>
<p>
  <br />
</p>
<h4 id="Anchor_163283745_h4_1">Effect of the UV Weight Parameter</h4>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189406.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189408.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189410.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189426.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189514.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189478.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <p>Figure 5.0. Portion of Town Model at LOD Level 0 (137,472 Polygons)</p>
        <p>(The upper image shows the UV shells as displayed in Maya.)</p>
      </td>
      <td>
        <p>Figure 5.1. Portion of Town Model at LOD Level 2 (34,366 Polygons), --uv-weight 0.0</p>
        <p>(The upper image shows the UV shells as displayed in Maya.)</p>
      </td>
      <td>
        <p>Figure 5.2. Portion of Town Model at LOD Level 2 (34,366 Polygons), --uv-weight 0.1</p>
        <p>(The upper image shows the UV shells as displayed in Maya.)</p>
      </td>
    </tr>
  </tbody>
</table>
<p>Figures 5.0 to 5.2 show a portion of the <strong>Town</strong> model and the corresponding UV shells as viewed in Maya. Changes in the <code>--uv-weight</code> option produce a visible change in the reduction results. These UV shells change in shape because UV hard edges are not being preserved, but you can use a separate option to preserve the shapes of UV shells. By changing <code>--uv-weight</code> you can adjust the balance between evaluations of UV coordinates and shape.  When <code>0.0</code> is specified, changes in UV coordinates are not considered, and overall shape is prioritized. This specification tends to result in significant changes such as changes in the UV shells, and changes in the UV coordinate values are also more pronounced. If set to <code>0.1</code>, changes in UV coordinates are weighted more heavily than when this option is set to <code>0.01</code>, and as a result, significant changes in UV values are suppressed in most cases. Setting this option to <code>1.0</code> makes it possible to obtain polygon reduction results where only UV values are considered, but in most cases this results in significant changes in shape because shape is not evaluated.</p>
<p>
  <br />
</p>
<p>For more information about this parameter, see <a href="../Pages/Page_83955705.html#Anchor_83955705_poly-red-uv-hard-edge">Intermediate File Optimizer</a>.</p>
<div class="panel" style="border-width: 1px;">
  <div class="panelHeader" style=" border-bottom-width: 1px;">
    <b>Parameter C</b>
  </div>
  <div class="panelContent">
    <code>3dIntermediateFileOptimizer.exe bg_WhiteTown.fmdb --polygon-reduction --polygon-reduction-options </code>
    <span style="color: rgb(51,153,102);">
      <code>&quot;<span style="color: rgb(51,153,102);">--target-rate-lod-level1 0.5 --target-rate-lod-level2 0.25 </span>--property-flag <span style="color: rgb(51,153,102);">Position|UV</span> --optimize-position-policy OptimalOnSpace <span style="color: rgb(255,0,0);">--uv-weight 0.1</span>&rdquo;</code>
    </span>
    <span style="color: rgb(51,153,102);"> </span>
  </div>
</div>
<p>
  <span class="nolink">Use the following batch file.</span>
</p>
<p>
  <span class="nolink">
    <code>%NINTENDO_SDK_ROOT%\Samples\Sources\Tools\3dTools\3dIntermediateFileOptimizer\PolygonReductionTutorial</code>
  </span>
  <code>\ExecuteParameterC.bat</code>
</p>
<p>
  <br />
</p>
<p>Add <code>--uv-weight 0.1</code> to <strong>Parameter B</strong> and run polygon reduction with the UV coordinates taken into account. This parameter is called <strong>Parameter C</strong>.</p>
<p>
  <br />For more information about the parameter effects, see <a href="../Pages/Page_162186377.html#Anchor_162186377_uv-wait">Parameter Settings: UV Weight</a>. As shown in Figure 5, using <strong>Parameter C</strong> for polygon reduction solves the problem of UV distortion.  <strong>Increasing the UV weight offers more UV protection. However, the shape may also break</strong>, so normally it is sufficient to try comparisons using <strong>0.01</strong>, <strong>0.05</strong>, and <strong>0.1</strong>.</p>
<p>
  <br />
</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
  </colgroup>
  <tbody>
    <tr>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_163283745/270189850.png" height="250" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <p>Figure 6. Changing the UV Weight to 0.5 (LOD Level 2) (34,366 Polygons)</p>
      </td>
    </tr>
  </tbody>
</table>
<p>When <code>--uv-weight</code> is set to <code>0.5</code>, it becomes harder to preserve shapes, and significant changes such as those shown in Figure 6 can occur.</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
