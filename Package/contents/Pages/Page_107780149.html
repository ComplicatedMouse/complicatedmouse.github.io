<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>init Library | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- init Library -->
<div class="pagetitle" id="PageId_107780149">init Library</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_107780149_h1_1">init Library</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107780149_h2_1">Introduction</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_107780149_h3_1">Intended Audience</a>
        </li>
        <li>
          <a href="#Anchor_107780149_h3_2">Related Documentation</a>
        </li>
      </ul>
      <li>
        <a href="#Anchor_107780149_h2_2">init Library Features</a>
      </li>
      <li>
        <a href="#Anchor_107780149_h2_3">How the init Library Is Provided</a>
      </li>
      <li>
        <a href="#Anchor_107780149_h2_4">Features Provided by the init Library</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_107780149_h3_3">Startup Initialization Routine</a>
        </li>
        <li>
          <a href="#Anchor_107780149_h3_4">Memory Allocator Initialization Functions</a>
        </li>
        <ul>
          <li>
            <a href="#Anchor_107780149_h4_1">Initializing a Memory Allocator With the Feature for Managing Virtual Address Memory Enabled</a>
          </li>
        </ul>
      </ul>
      <li>
        <a href="#Anchor_107780149_h2_5">Sample Programs for the init Library Features</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_107780149_h1_1">init Library</h1>
<h2 id="Anchor_107780149_h2_1">Introduction</h2>
<p>This section describes the initialization library (<code>init</code>) in NintendoSDK.</p>
<h3 id="Anchor_107780149_h3_1">Intended Audience</h3>
<p>This documentation is intended for people developing applications using NintendoSDK.</p>
<h3 id="Anchor_107780149_h3_2">Related Documentation</h3>
<p>Use this document in conjunction with the <span class="ApiLink_nn__init">nn::init namespace reference</span>.</p>
<h2 id="Anchor_107780149_h2_2">init Library Features</h2>
<p>The <code>init</code> library provides the required initialization features to implement when starting an application.</p>
<p>The library currently mostly provides the features needed to initialize memory heap settings and the memory allocator.</p>
<h2 id="Anchor_107780149_h2_3">How the init Library Is Provided</h2>
<p>The features of the <code>init</code> library are provided in the following two groups of files.</p>
<ul>
  <li>Header files</li>
  <li>Library Files</li>
</ul>
<p>The header files include the types, constants, function prototype declarations, and other resources required to use the <code>init</code> library. These header files can be included by writing the following from the application source code.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="cp">#include &lt;nn/init.h&gt;
</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<p>The library files include the compiled binary files for <code>init</code> library functions. The library is provided under the name <code>libnn_init</code>.</p>
<h2 id="Anchor_107780149_h2_4">Features Provided by the init Library</h2>
<p>The <code>init</code> library provides the following features. For more information about the functions, see the reference for each function.</p>
<h3 id="Anchor_107780149_h3_3">Startup Initialization Routine</h3>
<p>The following functions are provided.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th style="text-align: center;">Function Name</th>
      <th style="text-align: center;">Description</th>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nninitStartup(void)">nninitStartup()</span>
      </td>
      <td>
        <p>The routine for startup initialization. Defined by C-linkage.</p>
        <p>The default <code>nninitStartup()</code> function is defined within the <code>libnn_init</code> library.</p>
        <p>For more information, see <a href="../Pages/Page_92310396.html">Starting and Initializing Programs</a>.</p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h3 id="Anchor_107780149_h3_4">Memory Allocator Initialization Functions</h3>
<p>The following functions are provided.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th style="text-align: center;">Function Name</th>
      <th style="text-align: center;">Description</th>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_void_nn__init__InitializeAllocator(void_*address|_size_t_size)_NN_NOEXCEPT">nn::init::InitializeAllocator()</span>
      </td>
      <td>
        <p>Initializes the memory allocator.</p>
        <p>For more information, see <a href="../Pages/Page_92310396.html">Starting and Initializing Programs</a>.</p>
        <p>Returns without doing anything in the Windows environment.</p>
      </td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_nn__mem__StandardAllocator_*_nn__init__GetAllocator()_NN_NOEXCEPT">nn::init::GetAllocator()</span>
      </td>
      <td>
        <p>Gets the internal implementation class object of the memory allocator initialized by the preceding <span class="ApiLink_void_nn__init__InitializeAllocator(void_*address|_size_t_size)_NN_NOEXCEPT">nn::init::InitializeAllocator()</span> function.<br /></p>
        <p>Always returns <code>nullptr</code> in the Windows environment.</p>
      </td>
    </tr>
  </tbody>
</table>
<div class="platform_nx">
  <h4 id="Anchor_107780149_h4_1">Initializing a Memory Allocator With the Feature for Managing Virtual Address Memory Enabled</h4>
  <p>In the NX development hardware environment, you can choose whether to enable or disable the feature for managing virtual address memory when you initialize the memory allocator.</p>
  <p>To enable the feature for managing virtual address memory, specify <code>nullptr</code> for the <code><em>address</em></code> parameter of the <span class="ApiLink_void_nn__init__InitializeAllocator(void_*address|_size_t_size)_NN_NOEXCEPT"><code>nn::init::InitializeAllocator()</code></span> function.</p>
  <p>For example, you can initialize a memory allocator that uses 60 GiB of virtual address space by writing the following code.</p>
  <p>There is a limit to the amount of virtual address space that can be specified. For more information, see the API reference for the <span class="ApiLink_nn__Result_nn__os__AllocateAddressRegion(uintptr_t_*pOutAddress|_size_t_size)_NN_NOEXCEPT"><code>nn::os::AllocateAddressRegion()</code></span> function.</p>
  <table class="codeblock">
    <tbody>
      <tr>
        <td class="code">
          <div class="codeblock"><pre><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="kt">void</span> <span class="n">nninitStartup</span><span class="p">()</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">const</span> <span class="kt">size_t</span> <span class="n">VirtualAddressSpaceSize</span> <span class="o">=</span> <span class="mi">60ull</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">;</span> <span class="c1">// 60GiB
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">NN_ABORT_UNLESS</span><span class="p">(</span><span class="nn">nn::os::</span><span class="n">IsVirtualAddressMemoryEnabled</span><span class="p">());</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::init::</span><span class="n">InitializeAllocator</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="n">VirtualAddressSpaceSize</span><span class="p">);</span>
<span class="p">}</span></pre></div>
        </td>
      </tr>
    </tbody>
  </table>
  <p>You must configure the NMETA settings to use virtual address memory in the NX development hardware environment. For more information, see <a href="../Pages/Page_83956147.html">Memory Management</a>..</p>
  <p>Specifying a larger value for <code><em>size</em></code> increases the space for allocation, reducing the chance that allocation will fail because of memory fragmentation. However, in the NX development hardware environment, the operating system consumes that same large amount of space as a system resource. For more information, see <a href="../Pages/Page_83956147.html">Memory Management</a>.</p>
  <p>
    <br />
  </p>
</div>
<p>
  <br />
</p>
<h2 id="Anchor_107780149_h2_5">Sample Programs for the init Library Features</h2>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Sample name</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_PageSampleInitStartup">nninitStartup sample program 1</span>
      </td>
      <td>
        <p>Sample program for an application that defines its own <span class="ApiLink_void_nninitStartup(void)">nninitStartup()</span> function.</p>
      </td>
    </tr>
    <tr>
      <td>
        <span class="ApiLink_PageSampleInitStartupWithMalloc">nninitStartupWithMalloc sample program 2</span>
      </td>
      <td>Sample program for an application that defines its own <span class="ApiLink_void_nninitStartup(void)">nninitStartup()</span> function and also implements its own <code>malloc()</code>, <code>free()</code>, <code>calloc()</code>, <code>realloc()</code>, <code>aligned_alloc()</code>, and <code>malloc_usable_size()</code> functions.<br /><br /></td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__init', '../../../Api/HtmlNX/namespacenn_1_1init.html' )
SetUrl( 'ApiLink_void_nninitStartup(void)', '../../../Api/HtmlNX/init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f' )
SetUrl( 'ApiLink_void_nn__init__InitializeAllocator(void_*address|_size_t_size)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974' )
SetUrl( 'ApiLink_nn__mem__StandardAllocator_*_nn__init__GetAllocator()_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1init.html#a95c73ba643ccecff08a67b2940595dbd' )
SetUrl( 'ApiLink_nn__Result_nn__os__AllocateAddressRegion(uintptr_t_*pOutAddress|_size_t_size)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a11dca1988a4d23dc773f216847a56ecd' )
SetUrl( 'ApiLink_PageSampleInitStartup', '../../../Api/HtmlNX/_page_sample_init_startup.html' )
SetUrl( 'ApiLink_PageSampleInitStartupWithMalloc', '../../../Api/HtmlNX/_page_sample_init_startup_with_malloc.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
