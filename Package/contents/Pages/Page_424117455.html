<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Managing User Accounts | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Managing User Accounts -->
<div class="pagetitle" id="PageId_424117455">Managing User Accounts</div>
<div class="text_separate">
<p>Use the <code>account</code> command to manage user accounts.</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_424117455_h1_1">Creating User Accounts</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424117455_h2_1">Options</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424117455_h1_2">Listing User Accounts</a>
    </li>
    <li>
      <a href="#Anchor_424117455_h1_3">Deleting User Accounts</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424117455_h2_2">Unregistering Network Service Accounts</a>
      </li>
      <li>
        <a href="#Anchor_424117455_h2_3">Specifications for Nintendo SDK 1.x.x and Earlier</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424117455_h1_4">Account System Settings</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424117455_h2_4">Configurable Settings</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_424117455_h1_5">Account Specific Settings</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424117455_h2_5">Combinations of key and value</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_424117455_h3_1">(key) dbg:user_state</a>
        </li>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_424117455_h1_6">Synchronizing the User Account State With the Server</a>
    </li>
    <ul>
      <ul>
        <ul>
          <li>
            <a href="#Anchor_424117455_h4_1">Configurable Settings</a>
          </li>
        </ul>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_424117455_h1_7">Features Related to Whether There Are Restrictions on Each User Account</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_424117455_h2_6">Changing a User Account to Restricted Status</a>
      </li>
      <li>
        <a href="#Anchor_424117455_h2_7">Returning a User Account to Unrestricted Status</a>
      </li>
      <li>
        <a href="#Anchor_424117455_h2_8">Displaying a List of Unrestricted User Accounts</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_424117455_h1_1">Creating User Accounts</h1>
<p>Use the <code>add</code> subcommand.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account add
1 of 1
[SUCCESS]
 
$ RunOnTarget.exe DevMenuCommand.nsp -- account add --count 3
1 of 3
2 of 3
3 of 3
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424117455_h2_1">Options</h2>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Options</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>--register_nsa</td>
      <td>
        <br />
      </td>
      <td>Also registers a network service account for the user account that is being created.<br />The Internet connection settings must be configured beforehand. </td>
    </tr>
    <tr>
      <td>--count</td>
      <td>The number to create.</td>
      <td>Creates the number of user accounts specified for the parameter.</td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_424117455_h1_2">Listing User Accounts</h1>
<p>Use the <code>list</code> subcommand.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account list
1fe9e02a_d57598a3_ba987567_005386b8
1fe9e02a_d592dfc8_ba987567_38d186b8
1fe9e02c_6d5e0b31_ba98750f_978b86b8
1fe9e02c_6d80eec9_ba98750f_8eb986b8
[SUCCESS]</pre>
  </div>
</div>
<h1 id="Anchor_424117455_h1_3">Deleting User Accounts</h1>
<p>Use the <code>delete</code> subcommand or the <code>clear_all</code> subcommand.</p>
<p>The <code>clear_all</code> subcommand deletes a user account and all of the user account save data for that user account.<br />To skip the process of deleting the user account save data, specify the <code>--keep_savedata</code> option.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account clear_all [--keep_savedata]
1 of 4
2 of 4
3 of 4
4 of 4
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424117455_h2_2">Unregistering Network Service Accounts</h2>
<p>Use the <code>unregister_nsa</code> subcommand to unregister only the network service account without deleting the user account.<br />If you use this subcommand, the NSA becomes unregistered but the user account and the save data remain behind.</p>
<h2 id="Anchor_424117455_h2_3">Specifications for Nintendo SDK 1.x.x and Earlier</h2>
<p>The <code>clear_all</code> subcommand only deletes the user account and leaves the user account save data untouched.</p>
<h1 id="Anchor_424117455_h1_4">Account System Settings</h1>
<p>Use the <code>enable</code> and <code>disable</code> subcommands.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account disable fwdbg:require_na_for_nwservice
[SUCCESS]

$ RunOnTarget.exe DevMenuCommand.nsp -- account enable cfg:skip_selection_if_possible
[SUCCESS]</pre>
  </div>
</div>
<h2 id="Anchor_424117455_h2_4">Configurable Settings</h2>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Item</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>fwdbg:require_na_for_nwservice</td>
      <td>
        <p>You can change whether a linked Nintendo Account is needed to use network services.</p>
        <p>The same as <strong>Firmware settings &gt; Requires Nintendo Account for use of network service</strong> of <a href="../Pages/Page_107328771.html">DevMenu</a>.</p>
      </td>
    </tr>
    <tr>
      <td>fwdbg:na_license_verification_enabled</td>
      <td>You can change whether to verify credentials when signing in to a network-service account.<br />The same as <strong>Firmware settings</strong> &gt; <strong>Enable Nintendo Account license verification</strong> of <a href="../Pages/Page_107328771.html">DevMenu</a>.<br />(SDK 5.0.0 and later)</td>
    </tr>
    <tr>
      <td>cfg:skip_selection_if_possible</td>
      <td>
        <p>Specifies whether to skip the selection of a user account when the application starts.</p>
        <p>The same as <strong>Firmware settings</strong> &gt; <strong>Skip user account selection if possible</strong> for <a href="../Pages/Page_107328771.html">DevMenu</a>.</p>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_424117455_h1_5">Account Specific Settings</h1>
<p>Use the <code>set</code> subcommand.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account set --index &lt;index, 0..8&gt; &lt;key&gt;=&lt;value&gt;
[SUCCESS]</pre>
  </div>
</div>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <pre>This command rewrites only the local states of the development hardware. It does not affect states managed by the server.</pre>
  </div>
</div>
<h2 id="Anchor_424117455_h2_5">Combinations of key and value</h2>
<h3 id="Anchor_424117455_h3_1">(key) dbg:user_state</h3>
<p>Changes the state of the user account.<br />This works the same as <strong>[Debug] Set user state to invalid</strong> in the user account <strong>Account detail</strong> screen of DevMenu shown in <a href="../Pages/Page_107328771.html">DevMenu</a>. </p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>value</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>NetworkServiceAccount: &quot;CredentialBroken&quot;</td>
      <td>Abnormal NSA state: Invalid credentials.</td>
    </tr>
    <tr>
      <td>NetworkServiceAccount: Unmanaged</td>
      <td>Abnormal NSA state: Deleted.</td>
    </tr>
    <tr>
      <td>NetworkServiceAccount: Banned</td>
      <td>Abnormal NSA state: Banned</td>
    </tr>
    <tr>
      <td>NintendoAccount: LinkageBroken</td>
      <td>Abnormal NA state: Invalid linkage</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateDeleted</td>
      <td>Abnormal NA state: Deleted</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateBanned</td>
      <td>Abnormal NA state: Banned</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateSuspended</td>
      <td>Abnormal NA state: Use suspended</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateWithdrawn</td>
      <td>Abnormal NA state: Withdrawing</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateTermsAgreementRequired</td>
      <td>Abnormal NA state: EULA, PP reaffirmation required</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateReauthorizationRequired</td>
      <td>Abnormal NA state: Reauthorization required</td>
    </tr>
    <tr>
      <td>NintendoAccount: StateOtherButInteractionRequired</td>
      <td>Abnormal NA state: Re-login required</td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_424117455_h1_6">Synchronizing the User Account State With the Server</h1>
<p>Use the <code>refresh</code> subcommand.</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>$ RunOnTarget.exe DevMenuCommand.nsp -- account refresh --index &lt;index, 0..8&gt; &lt;key&gt;
[SUCCESS]</pre>
  </div>
</div>
<h4 id="Anchor_424117455_h4_1">Configurable Settings</h4>
<table class="wrapped" style="margin-left: 20.0px;">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Item</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>profile</td>
      <td>
        <p>Communicates with the server and synchronizes the user profile.</p>
        <p>This works the same as <strong>Sync user profile</strong> in the user account <strong>Account detail</strong> screen of <a href="../Pages/Page_107328771.html">DevMenu</a>.</p>
      </td>
    </tr>
    <tr>
      <td>na_info_cache</td>
      <td>
        <p>Communicates with the server and synchronizes the Nintendo Account state.</p>
        <p>This works the same as <strong>Update NA info cache</strong> in the user account <strong>Account detail</strong> screen of <a href="../Pages/Page_107328771.html">DevMenu</a>.</p>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_424117455_h1_7">Features Related to Whether There Are Restrictions on Each User Account</h1>
<p>The features described in this section are available with NX Add-On 14.1.0 and later and the 14 series of firmware.</p>
<p>While the development hardware treats all users as unrestricted (Qualified), there are features for development and debugging based on the assumption that there will be restricted (= not Qualified) users in the production environment. For more information about user restrictions, see <a href="../Pages/Page_356269580.html">User Account</a> as well.</p>
<p>Because it is often used when the application is running, we recommend adding the <code>--suppress-auto-kill</code> option to <code>RunOnTarget.exe</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account set-user-unqualified-for-test <span class="o">[</span>application_id<span class="o">]</span> --index &lt;0..7&gt;
$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account unset-user-unqualified-for-test <span class="o">[</span>application_id<span class="o">]</span> --index &lt;0..7&gt;
$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account list-qualified-users <span class="o">[</span>application_id<span class="o">]</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Each feature is described as follows.</p>
<h2 id="Anchor_424117455_h2_6">Changing a User Account to Restricted Status</h2>
<p>Use the <code>set-users-unqualified-for-test</code> subcommand to change a user account to restricted status.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account set-user-unqualified-for-test 0x01004b9000490000 --index 1
<span class="o">[</span>INFO<span class="o">]</span> User account index counld be in <span class="o">[</span>0,1<span class="o">]</span>.
<span class="nv">ApplicationId</span><span class="o">=</span>0x01004b9000490000
<span class="o">[</span>SUCCESS<span class="o">]</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<ul>
  <li>The user account specified by <code>--index</code> is forcibly changed to restricted status (not Qualified) for the application specified by <code>&lt;application_id&gt;</code>.<ul><li>You cannot change a user account that is in Open status to restricted status. Executing the command fails if the specified user account is Open.</li><li>You can use the command to make all user accounts restricted while the application is running, but note that this is not a situation that occurs in the production environment.</li><li>If some sort of application is running individually, you can omit the <code>&lt;application_id&gt;</code> part.</li></ul></li>
  <li>User settings remain the same for applications that are not specified.</li>
  <li>No matter what function is called by <code><span class="ApiLink_nn__account">nn::account</span></code>, the applicable user account does not return to an unrestricted state (this command remains in effect).</li>
  <li>The settings from this command are retained even when the application starts and ends. Before starting the application, reconfigure the settings as needed to get the desired initial state.</li>
  <li>The settings from this command are cleared when you restart the system. All user accounts are in an unrestricted (Qualified) state for all applications immediately after system startup.</li>
</ul>
<p>
  <br />
</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>In the production environment, the application is suspended until the specified user account becomes unrestricted if the <code><span class="ApiLink_nn__account__OpenUser">nn::account::OpenUser</span>()</code> function is called for a restricted user account. However, in the development environment, even if you call <code>account::OpenUser()</code> for user accounts restricted by the preceding <code>set-users-unqualified-for-test</code> subcommand, the application is not suspended.</p>
    <p>In the development hardware environment, the application aborts if you use this command to call <code><span class="ApiLink_nn__account__OpenUser">nn::account::OpenUser</span>()</code> for a restricted user account. For the official application sequence, make sure that the application verifies that the target user is included in the user list enumerated by <code><span class="ApiLink_nn__account__ListQualifiedUsers">nn::account::ListQualifiedUsers</span>()</code> before calling the <code><span class="ApiLink_nn__account__OpenUser">nn::account::OpenUser</span>()</code> to open that user account.</p>
  </div>
</div>
<h2 id="Anchor_424117455_h2_7">Returning a User Account to Unrestricted Status</h2>
<p>Use the <code>unset-users-unqualified-for-test</code> subcommand to cancel restricted status for a user account.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account unset-user-unqualified-for-test 0x01004b9000490000 --index 1
<span class="o">[</span>INFO<span class="o">]</span> User account index counld be in <span class="o">[</span>0,1<span class="o">]</span>.
<span class="nv">ApplicationId</span><span class="o">=</span>0x01004b9000490000
<span class="o">[</span>SUCCESS<span class="o">]</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<ul>
  <li>The user account specified by <code>--index</code> is changed to unrestricted status for the application specified by <code>&lt;application_id&gt;</code>.<ul><li>If some sort of application is running individually, you can omit the <code>&lt;application_id&gt;</code> part.</li></ul></li>
  <li>User settings remain the same for applications that are not specified.</li>
</ul>
<h2 id="Anchor_424117455_h2_8">Displaying a List of Unrestricted User Accounts</h2>
<p>Use the <code>list-qualified-users</code> subcommand to display a list of unrestricted user accounts.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$ RunOnTarget.exe --suppress-auto-kill DevMenuCommand.nsp -- account list-qualified-users 0x01004b9000490000
<span class="nv">ApplicationId</span><span class="o">=</span>0x01009ce000070000 <span class="nv">QualifiedUsersCount</span><span class="o">=</span>2
10000000_e71357e5_ed4210fd_31b163a6
10000002_0c81e67f_ed4210fd_31b163a6
<span class="o">[</span>SUCCESS</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<ul>
  <li>Enumerates the unrestricted user accounts for the application specified by <code>&lt;application_id&gt;</code>.<ul><li>If some sort of application is running individually, you can omit the <code>&lt;application_id&gt;</code> part.</li></ul></li>
  <li>This feature is equivalent to <code><span class="ApiLink_nn__account__ListQualifiedUsers">nn::account::ListQualifiedUsers</span>()</code>. No user accounts are enumerated when the application is not running.</li>
</ul>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__account', '../../../Api/HtmlNX/namespacenn_1_1account.html' )
SetUrl( 'ApiLink_nn__account__OpenUser', '../../../Api/HtmlNX/namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41' )
SetUrl( 'ApiLink_nn__account__ListQualifiedUsers', '../../../Api/HtmlNX/namespacenn_1_1account.html#a00ff6287a526dcdb7d596fa34b5a9d2b' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
