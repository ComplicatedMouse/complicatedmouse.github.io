<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Timeline Tab | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Timeline Tab -->
<div class="pagetitle" id="PageId_764970037">Timeline Tab</div>
<div class="text_separate">
<p>The&nbsp;<strong>Timeline</strong>&nbsp;tab graphically depicts selected functions, threads, counters, and instrumented functions/code blocks. Click on each item within their respective tabs to draw them in the&nbsp;<strong>Timeline</strong>.</p>
<p>Functions and threads each will be depicted as a rectangle starting at&nbsp;the time it was sampled and ending at the following sample. As sampling time can vary, the widths of these&nbsp;rectangles will also vary. Additionally, if the same function or thread is sampled multiple times in a row, it&nbsp;will appear as an elongated rectangle.</p>
<p>For instrumented functions and code blocks, the graphs depend on the type of data selected. However,&nbsp;since the recorded data is a constant value between the start and end a function or code block, each&nbsp;recorded chunk is drawn as a rectangle at the height of the value. The left edge of the rectangle is the time&nbsp;the function or code block was entered and the right edge of the rectangle is the time the function or code&nbsp;block was exited (thus making the width of the rectangle equal to the duration of the function call&nbsp;or code block). For example, when graphing&nbsp;<strong>Time per Call</strong>&nbsp;for an instrumented function, the height of the&nbsp;rectangle is the time spent in that function call (and all functions it calls) and the width of the rectangle is&nbsp;also the time spent in that function call. When graphing&nbsp;<strong>Thread State</strong>, rectangles are drawn to represent when a thread couldn't run. The height of the rectangle is always 1, and the width is the duration. The color represents why the thread was unable to run. When graphing&nbsp;<strong>Function Calls</strong>&nbsp;for an instrumented function, the&nbsp;height of the rectangle is always 1 (because it was called one time for a given function call) and the width&nbsp;is the duration. When graphing a performance counter, the height of the rectangle is equal to the counter&nbsp;value for the function call or code block and the width is the duration.</p>
<p>The&nbsp;<strong>Timeline</strong>&nbsp;tab is drawn using DirectX 11. If there is a problem initializing DirectX within the&nbsp;<strong>Timeline</strong>&nbsp;tab, an error message will be output to the screen containing details of the problem.</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>These notes point out differences in the <strong>Timeline</strong> tab when the <strong>Thread-Centric Data Views</strong> experimental feature is enabled. See&nbsp;<a href="../Pages/Page_962042331.html">Experimental Features Tab</a> for additional information.</p>
  </div>
</div>
<h1 id="Anchor_764970037_h1_1">Timeline Tab Toolbar</h1>
<p>The following controls are in the&nbsp;<strong>Timeline</strong>&nbsp;tab toolbar.</p>
<h2 id="Anchor_764970037_h2_1">Mouse Mode</h2>
<p>The left section in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar controls the mouse mode within the&nbsp;<strong>Timeline</strong>. There&nbsp;are four modes:</p>
<ol>
  <li>
    <p>
      <strong>Scroll Graph:</strong>&nbsp;In this mode, left-click-and-drag will scroll the graph up, down, left, and right.<br />Keyboard modifiers:</p>
    <ul>
      <li style="list-style-type: none; background-image: none;">
        <ul>
          <li style="list-style-type: none; background-image: none;">
            <ul>
              <li>Holding the&nbsp;<strong>Ctrl</strong>&nbsp;key will temporarily engage the&nbsp;<strong>Measure Time</strong>&nbsp;mouse mode until&nbsp;<strong>Ctrl</strong>&nbsp;is released.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>
      <strong>Select Frames:</strong>&nbsp;In this mode, left-click or left-click-and-drag will select heartbeat frames. To deselect&nbsp;frames, left-click or left-click-and-drag on an already selected frame.<br />Keyboard modifiers:</p>
    <ul>
      <li style="list-style-type: none; background-image: none;">
        <ul>
          <li style="list-style-type: none; background-image: none;">
            <ul>
              <li>Frames can also be deselected by holding the&nbsp;<strong>Alt</strong>&nbsp;key along with a left-click-and-drag.</li>
              <li>Holding the&nbsp;<strong>Ctrl</strong>&nbsp;key will temporarily engage the Scroll Graph mouse mode until&nbsp;<strong>Ctrl</strong>&nbsp;is released.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>
      <strong>Select Time:</strong>&nbsp;In this mode, left-click-and-drag to select regions of time. Note that times will be snapped&nbsp;to sample boundaries within the core that was initially clicked on. To deselect time, left click or left click&nbsp;and drag on an already selected time.<br />Keyboard modifiers:</p>
    <ul>
      <li style="list-style-type: none; background-image: none;">
        <ul>
          <li style="list-style-type: none; background-image: none;">
            <ul>
              <li>Time can also be deselected by holding the&nbsp;<strong>Alt</strong>&nbsp;key along with a left click and drag.</li>
              <li>Holding the&nbsp;<strong>Ctrl</strong>&nbsp;key will temporarily engage the&nbsp;<strong>Scroll Graph</strong>&nbsp;mouse mode until&nbsp;<strong>Ctrl</strong>&nbsp;is released.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>
      <strong>Measure Time:</strong>&nbsp;In this mode, left click and drag to measure regions of time. When the left mouse button&nbsp;is released, the region will disappear.<br />Keyboard modifiers:</p>
    <ul>
      <li style="list-style-type: none; background-image: none;">
        <ul>
          <li style="list-style-type: none; background-image: none;">
            <ul>
              <li>Holding the&nbsp;<strong>Ctrl</strong>&nbsp;key will temporarily engage the&nbsp;<strong>Scroll Graph</strong>&nbsp;mouse mode until&nbsp;<strong>Ctrl</strong>&nbsp;is released.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>
<p>In the&nbsp;<strong>Select Frames</strong>&nbsp;and&nbsp;<strong>Select Time</strong>&nbsp;modes, after selecting an area the&nbsp;<strong>Functions</strong>,&nbsp;<strong>Threads</strong>,&nbsp;<strong>Call Tree</strong>,&nbsp;and&nbsp;<strong>Counters</strong>&nbsp;tabs will recalculate based off of this selection.</p>
<p>
  <strong>Note:</strong>&nbsp;Some controls work in any mouse mode.</p>
<ul>
  <li>The left and right arrow keys can be used to page left or right and the up and down arrow keys&nbsp;to zoom in and out.</li>
  <li>A function can be double-clicked to expand its direct children. This option is also available in the&nbsp;right-click context menu.</li>
</ul>
<p>
  <strong>Caution:</strong>&nbsp;When selecting individual frames or times, the amount of statistical data is greatly&nbsp;reduced and the margin of error will dramatically rise. Double check the margin of error by enabling&nbsp;the&nbsp;<strong>Error</strong>&nbsp;button on the&nbsp;<strong>Home</strong>&nbsp;tab of the&nbsp;<strong>Ribbon Bar</strong>.</p>
<h2 id="Anchor_764970037_h2_2">Deselect All Frames Button</h2>
<p>To quickly deselect all selected frames or selected periods of time, click on the&nbsp;<strong>Deselect All Frames</strong>&nbsp;button.</p>
<h2 id="Anchor_764970037_h2_3">Icicle Graph</h2>
<p>The&nbsp;<strong>Icicle Graph</strong>&nbsp;is a visualization of the callstack at every recorded sample. To best view the graph,&nbsp;select at least one function on a core, zoom into a single frame or set of frames, and enable the&nbsp;<strong>Icicle&nbsp;Graph</strong>&nbsp;toggle button. It is recommended to zoom into a single frame or small set of frames since the graph&nbsp;is extremely detailed. The name&nbsp;<strong>Icicle Graph</strong>&nbsp;comes from the look of the graph, with root functions at the&nbsp;top and callstack leaves at the bottom tips.</p>
<p>As a visualization of the callstack, the&nbsp;<strong>Icicle Graph</strong>&nbsp;shows the calling behavior from the root function&nbsp;down to the leaf of each callstack. To see individual function names and statistics (depth, total, and self),&nbsp;use the mouse to hover over the segment you are interested in. The color of each function is based on&nbsp;the automatic system classification performed by the profiler, with the color key located above each core&nbsp;header label. The automatic system classification might be incorrect for some functions, but on average it&nbsp;performs well and is helpful in understanding which systems are executing.</p>
<p>
  <strong>Icicle Graph</strong>&nbsp;rendering for multiple cores can be slow and will make the profiler feel sluggish to zoom or&nbsp;scroll. To keep rendering fast, it is recommended that you only draw an&nbsp;<strong>Icicle Graph</strong>&nbsp;for one core at a time&nbsp;(by not selecting functions/threads/counters on multiple cores). Since the&nbsp;<strong>Icicle Graph</strong>&nbsp;only draws on cores&nbsp;where a function, thread, or counter are selected, just restrict selection to one core.</p>
<p>When looking at individual frames, it is often the case that the&nbsp;<strong>Load Graph</strong>&nbsp;is not helpful at this&nbsp;zoom level and should be turned off.</p>
<h2 id="Anchor_764970037_h2_4">Icicle Selected Graph</h2>
<p>The&nbsp;<strong>Icicle Selected</strong>&nbsp;graph is similar to the&nbsp;<strong>Icicle Graph</strong>. However, instead of displaying colors for every&nbsp;function, only the currently selected functions are colored in the&nbsp;<strong>Icicle Graph</strong>. This has the benefit of&nbsp;making it easy to see where in a callstack a specific function was called at a particular time.</p>
<h2 id="Anchor_764970037_h2_5">Stack Graph</h2>
<p>The&nbsp;<strong>Stack Graph</strong>&nbsp;tracks the depth of the stack for the active thread across a profile. The color&nbsp;of each bar is based on the leaf function's classification, with the color key located above each core header&nbsp;label.</p>
<p>If the profiler was unable to obtain the stack depth, the graph values will be fixed at 0.</p>
<h2 id="Anchor_764970037_h2_6">Load Graph</h2>
<p>The&nbsp;<strong>Load Graph</strong>&nbsp;displays the frame-by-frame time spent for each function selected. For example, if a function is sampled 10 times out of 100 samples that frame, the&nbsp;<strong>Load Graph</strong>&nbsp;would show 10% for this function in that frame.</p>
<p>In this view, the color highlighting on each data line is the margin of error.</p>
<h2 id="Anchor_764970037_h2_7">System Load</h2>
<p>The&nbsp;<strong>System Load</strong>&nbsp;displays the frame-by-frame time spent by each system (Physics, Graphics, AI, etc.). The&nbsp;<strong>System Load</strong>&nbsp;drop-down box allows you to select which systems will be shown in the graph.</p>
<p>Tip: Double-clicking a system's colored area on a particular frame will select all functions that contributed to that system on that frame.</p>
<h2 id="Anchor_764970037_h2_8">Mark Vsync</h2>
<p>
  <strong>Mark Vsync</strong>&nbsp;adds vertical line markers to the&nbsp;<strong>Timeline</strong>&nbsp;to show where vsync was recorded.</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>There may be some timing delays between when vsync occurred and when the event is recorded.</p>
  </div>
</div>
<h2 id="Anchor_764970037_h2_9">System Load Drop Down</h2>
<p>Since the&nbsp;<strong>System Load</strong>&nbsp;graph is a stacked graph of all systems, it can be difficult to judge the load of any one particular system over time. This drop down can restrict the&nbsp;<strong>System Load</strong>&nbsp;graph to only drawing one system, allowing you to exactly observe its load over time.</p>
<h2 id="Anchor_764970037_h2_10">Vertical Graph Scale Drop Down</h2>
<p>The vertical size or scale of graphs can be set using the&nbsp;<strong>Vertical Graph Scale</strong>&nbsp;drop-down in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar. All changes are saved in the settings for the next time the profiler is loaded.&nbsp;</p>
<p>Practical vertical scales will be in the range of&nbsp;<strong>1x</strong>&nbsp;to&nbsp;<strong>5x</strong>. Use the larger vertical scales to precisely measure&nbsp;a particular value, since the y-axis will contain more resolution and unit labels.</p>
<h2 id="Anchor_764970037_h2_11">Graph Cores Drop Down</h2>
<p>The&nbsp;<strong>Graph Cores</strong>&nbsp;drop-down box provides control over when complex graphs are displayed in the&nbsp;<strong>Timeline</strong>&nbsp;tab. When set to&nbsp;<strong>Graph Cores as Selected</strong>, graphs are only displayed for a particular core when&nbsp;a function or thread is selected on that core. In order to draw graphs for all cores regardless of function or&nbsp;thread selection, choose&nbsp;<strong>Graph All Cores</strong>&nbsp;from the drop-down box. Note that drawing graphs on all cores will reduce the drawing speed and can lead to laggy scrolling.</p>
<h2 id="Anchor_764970037_h2_12">Samples Drop Down</h2>
<p>&nbsp;This drop down selection only appears for&nbsp;<strong>Callstack</strong>&nbsp;profiles that contain callstack data. With this drop&nbsp;down you can select between graphing samples by&nbsp;<strong>Self Samples</strong>,&nbsp;<strong>Total Samples</strong>, or&nbsp;<strong>Mixed Samples</strong>.</p>
<ul>
  <li>Functions graphed as&nbsp;<strong>Self Samples</strong>&nbsp;will show a sample marker each time the function was sampled as&nbsp;a leaf function (when the program was stopped and sampled, execution was in that function).</li>
  <li>Functions graphed as&nbsp;<strong>Total Samples</strong>&nbsp;will show a sample marker each time the function was sampled&nbsp;as part of a callstack, regardless of whether it was a leaf function.</li>
  <li>Functions graphed as&nbsp;<strong>Mixed Samples</strong>&nbsp;will show the same samples as&nbsp;<strong>Total Samples</strong>, but function leaf&nbsp;samples (<strong>Self Samples</strong>) are drawn in a darker color.</li>
</ul>
<p>For example, the function main might have very few sample markers graphed when viewed with&nbsp;<strong>Self&nbsp;Samples</strong>, but it might have a very large number of sample markers graphed when viewed with&nbsp;<strong>Total&nbsp;Samples</strong>&nbsp;or&nbsp;<strong>Mixed Samples</strong>.</p>
<h2 id="Anchor_764970037_h2_13">Name Width Drop Down</h2>
<p>&nbsp;When a function or thread is graphed, its name appears on the left side of the&nbsp;<strong>Timeline</strong>. The&nbsp;<strong>Names Width</strong>&nbsp;drop-down in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar contains four settings that control how function name or thread&nbsp;name are displayed:</p>
<ul>
  <li>
    <strong>Hide Names:</strong>&nbsp;This setting will hide all function names and thread names by not drawing them.</li>
  <li>
    <strong>Short Names:</strong>&nbsp;This setting will display shortened function names (limiting each to 100 pixels wide). For&nbsp;thread names, only the thread's ID will be shown.</li>
  <li>
    <strong>Long Names:</strong>&nbsp;This setting will display the function name without arguments. Thread names will be&nbsp;shown in full (ID and name).</li>
  <li>
    <strong>Full Names:</strong>&nbsp;This setting will display the entire function name including arguments. Thread names will&nbsp;be shown in full (ID and name).</li>
</ul>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>When <strong>Thread-Centric Data Views</strong> is enabled, the <strong>Hide Names</strong> option is equivalent to <strong>Short Names</strong>.</p>
  </div>
</div>
<h2 id="Anchor_764970037_h2_14">Graph Tool Tips</h2>
<p>The&nbsp;<strong>Graph Tool Tips</strong>&nbsp;drop down allows you to specify the type of tool tips you want to see when hovering&nbsp;over a function row, thread row, or&nbsp;<strong>Icicle Graph</strong>&nbsp;function.</p>
<ul>
  <li>
    <strong>Hide Tool Tips:</strong>&nbsp;No tool tips are shown.</li>
  <li>
    <strong>Show Name Only:</strong>&nbsp;Only the name is shown.</li>
  <li>
    <strong>Show Brief Stats:</strong>&nbsp;The name, sample statistics, and frame number are shown.</li>
  <li>
    <strong>Show Full Stats:</strong>&nbsp;The name, thread, system classification, spike detection, periodicity, sample statistics,&nbsp;frame number, and exact time within the profile are shown.</li>
  <li>
    <strong>Show Fn at Time:</strong>&nbsp;The function or callstack will be shown at the exact time pointed at. This ignores the&nbsp;function or thread row and instead focuses on the horizontal position of the mouse within the duration of&nbsp;the profile.</li>
</ul>
<h2 id="Anchor_764970037_h2_15">Zoom and Scroll Timeline Buttons</h2>
<p>There are three zoom control buttons in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar:</p>
<ul>
  <li>
    <strong>Scroll Hard Left:</strong>&nbsp;Scroll the current view within the&nbsp;<strong>Timeline</strong>&nbsp;to the leftmost position.</li>
  <li>
    <strong>Scale to Fit:</strong>&nbsp;Zoom out so that all profile data can be seen in the&nbsp;<strong>Timeline</strong>.</li>
  <li>
    <strong>Scroll Hard Right:&nbsp;</strong>Scroll the current view within the&nbsp;<strong>Timeline</strong>&nbsp;to the leftmost position.</li>
</ul>
<p>The zoom (horizontal scale) can be controlled using the mouse wheel. The current level of zoom is&nbsp;displayed in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar. If you want to zoom all the way out, the easiest method is to click&nbsp;the&nbsp;<strong>Scale to Fit</strong>&nbsp;button in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar.</p>
<p>An alternative control for the zoom is the keyboard using the up and down arrow keys. This can be a good way to quickly zoom&nbsp;in and out of the graph.</p>
<h1 id="Anchor_764970037_h1_2">Selected Functions</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>This section is displayed only when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<p>This section allows you to see the total impact that a selected function has across all threads and cores. When one or more functions are selected this section displays sample data rectangles as described above for each function. The data is aggregated in a hierarchy. The Function rows at the root of the hierarchy aggregate all the data for the function and can be expanded to show Thread rows. The Thread rows show the function&rsquo;s data aggregated by thread and can be expanded to show Core rows. The Core rows show the function&rsquo;s data for the specific thread and core. The data shown here will be consistent with the rows selected in the left window&rsquo;s Functions Tab.</p>
<h1 id="Anchor_764970037_h1_3">Threads with Selected Functions</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>This section is displayed only when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<p>This is like the Selected Functions section, although it has Thread rows at the root so that you can see the total impact of the selected functions on each thread.</p>
<h1 id="Anchor_764970037_h1_4">Cores Overview</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>This section is displayed only when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<p>The Cores Overview section aggregates data by core for the entire profile. It displays a hierarchy of sample data rectangles as described above. The top level of the hierarchy are the Core rows. Under each Core row are the Thread rows representing the threads that have been observed on the core. The Core rows may be expanded and collapsed to show and hide the Thread rows.</p>
<h1 id="Anchor_764970037_h1_5">Threads Overview</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>This section is displayed only when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<p>The Threads Overview section aggregates data by thread for the entire profile. It displays a hierarchy of sample data rectangles as described above. The rows in the top level of the hierarchy are the Thread Rows. Under each Thread row are the Cores rows representing the cores that have been observed on the thread. The Thread rows may be expanded to show and hide the Core rows.</p>
<p>The Threads Overview contains two sections. The top section contains the selected threads, or if no threads are selected, all the application threads. All other threads are in the Other Threads section.</p>
<p>When one or more threads are selected and Load Graphs are enabled, the Thread Load graph will appear and display the loads for all selected threads.</p>
<h1 id="Anchor_764970037_h1_6">Timeline Overview</h1>
<p>At the bottom of the&nbsp;<strong>Timeline</strong>&nbsp;is the&nbsp;<strong>Timeline Overview</strong>. This shows the entire zoomed out profile as a frame&nbsp;rate graph. Overlaid on the&nbsp;<strong>Timeline Overview</strong>&nbsp;is a window representing your current zoomed view. You can click and drag the window on the timeline as if it was a scrollbar. Also, clicking once on&nbsp;either side of the window will move it one window width to the left or right. The mouse wheel also works&nbsp;within the Timeline area to zoom in and out.</p>
<p>If the frame rate graph is not being displayed in the&nbsp;<strong>Timeline Overview</strong>, it is because the game is not marked for&nbsp;frames properly. Alternatively, you can&nbsp;go to the&nbsp;<strong>Heartbeats</strong>&nbsp;tab and for a given heartbeat on a given core, you can choose&nbsp;<strong>Use as Frame Rate</strong>&nbsp;to have that heartbeat be drawn as the frame rate in the&nbsp;<strong>Timeline Overview</strong>.</p>
<h1 id="Anchor_764970037_h1_7">Thread State Data</h1>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>To view <strong>Thread State Data</strong>, threads must be selected on the <a href="../Pages/Page_758198910.html">Threads Tab</a>.</p>
  </div>
</div>
<p>When a thread is selected, information about the thread will display in the&nbsp;<strong>Thread State Data</strong>&nbsp;section at the top of the graph.</p>
<p>When&nbsp;<strong>Thread State</strong>&nbsp;data is recorded, it is graphed as two rows of rectangles.</p>
<p>The top row contains rectangles representing time where the thread was waiting or blocked. The color represents the detected reason why. When moving the mouse over the different rectangles, the highlighted boxes are ones that share a synchronization object in common.&nbsp;Double-clicking on one of the rectangles will open up a window with more details about the reason behind the thread being blocked. More data about this can be found at&nbsp;<a href="../Pages/Page_758198758.html">Thread State: System Call Details Window</a>. Moving the pointer over the migration display will show either the last sample before migration, or the system call that happened before migration.</p>
<p>The bottom row contains rectangles representing the core the thread was on at the time. A color is used to show which core the thread was seen on.</p>
<p>Even when&nbsp;<strong>Thread State</strong>&nbsp;data is not recorded, the bottom row will appear for each thread selected on the <strong>Threads</strong> tab.</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>Thread state data is always visible in the <strong>Threads Overview</strong> when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<h1 id="Anchor_764970037_h1_8">Code Block Hierarchy View</h1>
<p>When a block is selected on the&nbsp;<a href="../Pages/Page_758198879.html">Instrumented Profile Tab</a>, a&nbsp;<strong>Code Blocks for Thread</strong>&nbsp;icicle graph is shown in the graph that combines all blocks for that thread into a single hierarchy view. This view is best used with the new <span class="ApiLink_nn__profiler__PushCodeBlock">nn::profiler::PushCodeBlock</span>() and <span class="ApiLink_nn__profiler__PopCodeBlock">nn::profiler::PopCodeBlock</span>() functions, but can be used with <span class="ApiLink_nn__profiler__EnterCodeBlock">nn::profiler::EnterCodeBlock</span>() and <span class="ApiLink_nn__profiler__ExitCodeBlock">nn::profiler::ExitCodeBlock</span>() provided they are used like the Push/Pop functions.</p>
<p>The color of the code block is the color of the element first selected for the block. For example, if the&nbsp;<strong>Time per Block (average)</strong>&nbsp;was selected first, and then&nbsp;<strong>Blocks</strong>&nbsp;was selected, the color from&nbsp;<strong>Time per Block (average)</strong>&nbsp;would be used in the code block hierarchy view. If a block has no selected elements, it will be shown as a light gray.</p>
<p>If an&nbsp;<strong>Instrumented Profile</strong>&nbsp;was taken, it may also be selected to be shown in the code block hierarchy view.</p>
<p>Select or deselect blocks in the hierarchy view with a double-click.&nbsp;Hover over a block to see its name and duration in a tool tip. If a performance counter group was recorded with the profile, the tool tip will also show the CPU counter data for that specific block.</p>
<div class="warn_new">
  <div class="warn_new_left">Warning</div>
  <div class="warn_new_right">
    <p>If a thread migrates to another core at any point during a block, the numbers obtained for that block will not be accurate as the Performance Monitor Unit is unique per CPU core and not by thread. Since there is no way for the profiler to detect when a migration is about to occur, there is no way to also migrate the current counter values along with the thread when the thread moves to the other core.</p>
  </div>
</div>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>When a profile is taken, it is possible that it was started while in the middle of a code block. Due to the Push/Pop architecture, it is not possible for us to know the name of the code block. In this case, it will still be drawn in the code block hierarchy view and on the <strong>Instrumented Tab</strong>, but will have the name &quot;PopCodeBlock() call seen without matching PushCodeBlock()&quot;. This issue does not occur when using the Enter/Exit APIs as both Enter and Exit record the code block identifier.</p>
  </div>
</div>
<p>
  <br />
</p>
<h1 id="Anchor_764970037_h1_9">GPU</h1>
<p>If&nbsp;<strong>GPU Trace</strong>&nbsp;data has been collected during the profile, it will display in a&nbsp;<strong>GPU</strong>&nbsp;section, below all previously mentioned sections.</p>
<p>The&nbsp;<strong>GPU</strong>&nbsp;section contains the following:</p>
<ul>
  <li>
    <strong>Operations in flight</strong>: A line graph showing the number of operations actively being process by the GPU at a given time, including&nbsp;Draws, Compute Dispatches, Clears, and Copies. As each operation starts and ends on the GPU, a count is incremented and then decremented, with the line representing the total operations being processed.</li>
  <li>
    <strong>Frame</strong>: The bar shows when the period of time that the GPU was processing a frame. Multiple lines will be displayed if there would be any overlap if displayed on fewer lines. A frame is defined as the time between two calls to nvnQueuePresentTexture().</li>
  <li>
    <strong>Idle with work available</strong>: This shows time during a Submit where the GPU was not processing any operations. The Nintendo CPU Profiler cannot help track down the cause of this behavior, one of the GPU debugging tools should be used, instead.</li>
  <li>
    <strong>Idle</strong>: All periods of time when the GPU was idle. Idle is generally defined as times where the GPU is processing zero operations.</li>
  <li>
    <strong>Work</strong>: All operations active on the GPU, including Draws, Compute Dispatches, Clears, Copies, Barriers, and Waits. All of these operations are stacked together onto a single line, so they can and will overlap. Work items are layered based on the time that the GPU began processing it, with work items having a later begin time&nbsp;drawn on top of work items having an earlier begin time.</li>
  <li>
    <strong>PresentTexture calls</strong>: Displays the time the CPU spent inside the call to nvnQueuePresentTexture(). Because this is a CPU time instead of a GPU time, it can be disjointed from when the frame starts being processed.</li>
  <li>
    <strong>CPU Submit</strong>: Displays the time on the CPU when nvnQueueSubmitCommands() was called. Note that only the begin time is known for this value and the width of this bar is fixed at one microsecond for display purposes.</li>
  <li>
    <strong>Submit</strong>: The time that GPU spent working on commands submitted via nvnQueueSubmitCommands().</li>
</ul>
<h2 id="Anchor_764970037_h2_16">Associating Submissions and Frames</h2>
<p>Using the mouse on the <strong>Timeline</strong> tab, you can move the cursor over any block to get an overlay to show the associated frame and command submission for that block. The overlay draws on top of the original items in magenta and draws a line between the items to help make it clear which is being pointed at in the case where a <strong>CPU Submit</strong> may be much earlier than when the GPU processes the submission or if there are multiple submissions.</p>
<h2 id="Anchor_764970037_h2_17">Getting More Details</h2>
<p>More details are often available in a tool tip for each block. Commonly available items include:</p>
<ul>
  <li>
    <strong>Submission Time</strong>: The time that the CPU sent the command buffer associated with this work to the GPU.</li>
  <li>
    <strong>Duration</strong>: The duration for the block.</li>
  <li>
    <strong>Begin Time</strong>: Time time that the block started. If the block is a GPU-based item, the time is converted into the equivalent time on the CPU based on when the profile started.</li>
  <li>
    <strong>End Time</strong>: The time that the block ended. If the block is a GPU-based item, the time is converted into the equivalent time on the CPU based on when the profile started.</li>
  <li>
    <strong>Frame</strong>: The frame as defined by the currently selected GPU <strong>Heartbeat Selector</strong>.</li>
</ul>
<h1 id="Anchor_764970037_h1_10">Audio</h1>
<p>If <strong>Audio Trace</strong> data has been collected during the profile, it will display in an <strong>Audio</strong> section, below all previously mentioned sections.</p>
<p>The <strong>Audio</strong> section contains the following possible sub-sections.</p>
<h2 id="Anchor_764970037_h2_18">Process Load</h2>
<p>A stacked bar graph of four different load values. The combined height indicates the total processing load. This graph always draws in microseconds rather than using milliseconds like most other areas of the profiler.</p>
<ul>
  <li>
    <strong>Voice</strong>: The amount of time spent processing Voice objects.</li>
  <li>
    <strong>SubMix</strong>: The amount of time spent processing SubMix objects.</li>
  <li>
    <strong>FinalMix</strong>: The amount of time spent processing FinalMix objects.</li>
  <li>
    <strong>Sink</strong>: The amount of time spent processing Sink objects.</li>
</ul>
<p>There may be a horizontal red line shown on the graph. This line is the time limit as specified in the call to <span class="ApiLink_nn__profiler__SetAudioRendererTimeLimit">nn::profiler::SetAudioRendererTimeLimit</span>() and will only be rendered if it will appear on the graph. For example, if the maximum combined processing is 1500 microseconds, the time limit would need to be 37% or less for the red line to appear.</p>
<p>
  <br />
</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>It is possible that the time limit may be exceeded even if the combined processing load is less than set time limit. This is due to other overhead that cannot be collected currently.</p>
  </div>
</div>
<h2 id="Anchor_764970037_h2_19">Voice Count</h2>
<p>A bar graph showing the number of voices active during each audio frame.</p>
<h2 id="Anchor_764970037_h2_20">Drop Count</h2>
<p>A bar graph showing the number of voices that were dropped during each audio frame.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>This sub-section will only appear if there was at least one frame with a dropped voice.</p>
  </div>
</div>
<h2 id="Anchor_764970037_h2_21">
  <br />Rendering Time Limit Exceeded</h2>
<p>A graph showing which frames exceeded the time budget.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>This sub-section will only appear if the time limit was exceeded at least once.</p>
  </div>
</div>
<h1 id="Anchor_764970037_h1_11">
  <br />Right-Click Context Menu</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>These options are available only when <strong>Thread-Centric Data Views</strong> are not enabled.</p>
  </div>
</div>
<p>A right-click in the tab will bring up a context menu containing a variety of options.</p>
<p>When the menu is up, there will be a highlight placed on the current function (orange horizontal rectangle)&nbsp;and the current time (orange vertical line). Particular choices in the context menu will affect either the&nbsp;current function or current time, so these are marked for reference.</p>
<h2 id="Anchor_764970037_h2_22">Expand Direct Parents</h2>
<p>The&nbsp;<strong>Expand Direct Parents</strong>&nbsp;option will select the parents of the currently selected function and place&nbsp;them above the currently selected function. Since a function can be called from many different parents, all&nbsp;parents are selected.</p>
<h2 id="Anchor_764970037_h2_23">Expand Direct Children</h2>
<p>The&nbsp;<strong>Expand Direct Children</strong>&nbsp;option will select the children of the currently selected function and place&nbsp;them below the currently selected function. A quicker way to accomplish this is to simply double-click on&nbsp;any function in the&nbsp;<strong>Timeline</strong>.</p>
<h2 id="Anchor_764970037_h2_24">Deselect Direct Children</h2>
<p>The&nbsp;<strong>Deselect Direct Children</strong>&nbsp;option is like an undo for the&nbsp;<strong>Expand Direct Children</strong>&nbsp;option.</p>
<h2 id="Anchor_764970037_h2_25">Reorder</h2>
<p>There are several&nbsp;<strong>Reorder</strong>&nbsp;options:</p>
<ul>
  <li>
    <strong>Chronologically:</strong>&nbsp;Reorders all selected functions based on their first occurrence within the frame that is right-clicked. This is the same ordering used in the&nbsp;<strong>Story Analysis</strong>.</li>
  <li>
    <strong>By Magnitude:</strong>&nbsp;Reorders all selected functions based on how often each function was sampled. This is&nbsp;similar to the order in the&nbsp;<strong>Functions</strong>&nbsp;tab when it is sorted by&nbsp;<strong>Total</strong>.</li>
  <li>
    <strong>By Periodicity:</strong>&nbsp;Reorders all selected functions based on how periodic they are. Functions that are&nbsp;very periodic will be placed toward the top and functions that are sampled very irregularly will be placed&nbsp;toward the bottom.</li>
  <li>
    <strong>By Function Name:</strong>&nbsp;Reorders all selected functions alphabetically by function name. This might help to&nbsp;locate a particular function if you know the name and there are many functions displayed in the&nbsp;<strong>Timeline</strong>.</li>
</ul>
<h2 id="Anchor_764970037_h2_26">Deselect</h2>
<p>There are several&nbsp;<strong>Deselect</strong>&nbsp;options:</p>
<ul>
  <li>
    <strong>This Function:</strong>&nbsp;Deselects the currently highlighted function.</li>
  <li>
    <strong>All Other Functions:</strong>&nbsp;Deselects all functions other than the currently highlighted function.</li>
  <li>
    <strong>All Functions On This Core:</strong>&nbsp;Deselects all functions on the core of the currently highlighted function.</li>
  <li>
    <strong>All Functions On Other Cores:</strong>&nbsp;Deselects all functions on other cores of the currently highlighted&nbsp;function.</li>
  <li>
    <strong>Above This Function:</strong>&nbsp;Deselects all functions above the currently highlighted function.</li>
  <li>
    <strong>Below This Function:</strong>&nbsp;Deselects all functions below the currently highlighted function.</li>
</ul>
<h2 id="Anchor_764970037_h2_27">Move</h2>
<p>There are several&nbsp;<strong>Move</strong>&nbsp;options:</p>
<ul>
  <li>
    <strong>Move Function Up:</strong>&nbsp;Moves the currently highlighted function up one row.</li>
  <li>
    <strong>Move Function Down:</strong>&nbsp;Moves the currently highlighted function down one row.</li>
</ul>
<h2 id="Anchor_764970037_h2_28">Show Assembly</h2>
<p>The&nbsp;<strong>Show Assembly</strong>&nbsp;option will move focus to the&nbsp;<strong>Assembly Tab</strong>, showing the assembly of the clicked&nbsp;function.</p>
<h2 id="Anchor_764970037_h2_29">Show Details</h2>
<p>The&nbsp;<strong>Show Details</strong>&nbsp;option will open a new&nbsp;<strong>Function Details Window</strong>, showing the details of the clicked&nbsp;function. This is unless you are mousing over the&nbsp;<strong>Thread State</strong>&nbsp;viewer, in which case it will open up specific details for that blocking call. Note that you can double-click for the same effect in the&nbsp;<strong>Thread State</strong>&nbsp;viewer.</p>
<h2 id="Anchor_764970037_h2_30">This Core At This Time</h2>
<p>There are several&nbsp;<strong>This Core At This Time</strong>&nbsp;options:</p>
<ul>
  <li>
    <strong>Find Sampled Leaf Function:</strong>&nbsp;Selects the sampled leaf function on this core at the currently&nbsp;highlighted time. The function will be placed at the top of the currently shown functions.</li>
  <li>
    <strong>Find All Sampled Functions:</strong>&nbsp;Selects all sampled functions (the callstack) on this core at the currently&nbsp;highlighted time. The functions will be placed at the top of the currently shown functions.</li>
</ul>
<h2 id="Anchor_764970037_h2_31">All Cores At This Time</h2>
<p>There are several&nbsp;<strong>All Cores At This Time</strong>&nbsp;options:</p>
<ul>
  <li>
    <strong>Find Sampled Leaf Functions:</strong>&nbsp;Selects all sampled leaf functions on all cores at the currently&nbsp;highlighted time. The functions will be placed at the top of the currently shown functions.</li>
  <li>
    <strong>Find All Sampled Functions:</strong>&nbsp;Selects all sampled functions (the callstack) on all cores at the currently&nbsp;highlighted time. The functions will be placed at the top of the currently shown functions.</li>
</ul>
<h2 id="Anchor_764970037_h2_32">Select Only This Heartbeat Frame</h2>
<p>The&nbsp;<strong>Select Only This Heartbeat Frame</strong>&nbsp;option will deselect all frames/times and then select the current&nbsp;frame that is being hovered over with the mouse. This can be useful when you want to quickly focus&nbsp;on a specific frame for&nbsp;<strong>Story Analysis</strong>&nbsp;or&nbsp;<strong>Spike Detection</strong>&nbsp;(select the frame first and then activate the&nbsp;analysis).</p>
<p>If you want to select more than just one frame, change the mouse mode to&nbsp;<strong>Select Frames</strong>&nbsp;in the&nbsp;<strong>Timeline</strong>&nbsp;toolbar and use the left mouse button to select or deselect frames.</p>
<h1 id="Anchor_764970037_h1_12">Right-Click Context Menu</h1>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>These options are available only when <strong>Thread-Centric Data Views</strong> are enabled.</p>
  </div>
</div>
<p>Right-clicking on the Timeline highlights the current time with a vertical line and invokes a context menu. If a data row was clicked on, it will also be highlighted. The context menu items are listed below.</p>
<h2 id="Anchor_764970037_h2_33">Expand from Here</h2>
<p>Recursively expand all nodes from this point.</p>
<h2 id="Anchor_764970037_h2_34">Collapse to Here</h2>
<p>Recursively collapse all nodes to this point.</p>
<h2 id="Anchor_764970037_h2_35">Select</h2>
<p>Selects the currently highlighted thread.</p>
<h2 id="Anchor_764970037_h2_36">Deselect</h2>
<p>Deselect the currently highlighted selected thread or function.</p>
<h2 id="Anchor_764970037_h2_37">Deselect Other</h2>
<p>Deselect all currently selected threads (if the highlighted row is a thread) or functions (if the highlighted row is a function) except for the currently highlighted row.</p>
<h2 id="Anchor_764970037_h2_38">Copy Name to Clipboard</h2>
<p>Copy the thread or function name to the clipboard.</p>
<h2 id="Anchor_764970037_h2_39">Show Assembly</h2>
<p>Show the assembly of the highlighted function in the Assembly Tab.</p>
<h2 id="Anchor_764970037_h2_40">Show Details</h2>
<p>Show the details of the highlighted function in a new Function Details window.</p>
<h2 id="Anchor_764970037_h2_41">Select Stack Functions at This Time for All Cores</h2>
<p>Select all functions that were observed on the call stacks for all cores at the currently highlighted time.</p>
<h2 id="Anchor_764970037_h2_42">Select Stack Functions at This Time for This Core</h2>
<p>Select all functions that were observed on the call stacks for this core at the currently highlighted time.</p>
<h2 id="Anchor_764970037_h2_43">Select Leaf Functions at This Time for All Cores</h2>
<p>Select all functions that were observed on top of the call stacks for all cores at the currently highlighted time.</p>
<h2 id="Anchor_764970037_h2_44">Select Leaf Function at This Time for This Core</h2>
<p>Select the function that was observed on top of the call stack for this core at the currently highlighted time.</p>
<p>
  <br />
</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__profiler__PushCodeBlock', '../../../Api/HtmlNX/namespacenn_1_1profiler.html#ab089513cba1402e8d1b97c6732ba6188' )
SetUrl( 'ApiLink_nn__profiler__PopCodeBlock', '../../../Api/HtmlNX/namespacenn_1_1profiler.html#a924cdef2a315b52be1fcc90627be9c09' )
SetUrl( 'ApiLink_nn__profiler__EnterCodeBlock', '../../../Api/HtmlNX/namespacenn_1_1profiler.html#af2b1e434f5b815a86f8185b277df3d1e' )
SetUrl( 'ApiLink_nn__profiler__ExitCodeBlock', '../../../Api/HtmlNX/namespacenn_1_1profiler.html#a550d2f8bd7556acffb35b270cf708109' )
SetUrl( 'ApiLink_nn__profiler__SetAudioRendererTimeLimit', '../../../Api/HtmlNX/namespacenn_1_1profiler.html#a8eb1e473760f5461603df15a9d497ce4' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
