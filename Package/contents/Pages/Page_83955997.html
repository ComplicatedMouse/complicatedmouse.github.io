<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3D Binary Converter | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3D Binary Converter -->
<div class="pagetitle" id="PageId_83955997">3D Binary Converter</div>
<div class="text_separate">
<p>This section describes the usage and considerations for the 3D binary converter (<code>%NINTENDO_SDK_ROOT%\Tools\Graphics\3dTools\3dBinaryConverter.exe</code>).</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83955997_h1_1">Overview</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_2">Identity of Binary Resource Files</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_3">Command-Line Options</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_4">Specifications</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_5">Limitations</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_6">Usage Examples</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_7">Dump Information　</a>
    </li>
  </ul>
</p>
<h1 id="Anchor_83955997_h1_1">Overview</h1>
<p>This tool converts the intermediate files for models and animations into binary resource files (BFRES files) for use in the runtime.</p>
<h2 id="Anchor_83955997_h2_1">Intermediate File Formats</h2>
<p>The following table shows the types of files that the converter can take as input files. When multiple intermediate files are specified as the input, the converter merges them into a single resource binary file containing all of their content.<br />The tool can also convert intermediate files of different types into a single binary resource file.</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <thead>
    <tr>
      <th style="text-align: center;">Type</th>
      <th style="text-align: center;">Filename Extension</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right;">Model</td>
      <td style="text-align: center;">.fmda .fmdb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Skeletal Animation</td>
      <td style="text-align: center;">.fska .fskb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Material Animation</td>
      <td style="text-align: center;">.fmaa .fmab</td>
    </tr>
    <tr>
      <td style="text-align: right;">Bone Visibility Animation</td>
      <td style="text-align: center;">.fvba .fvbb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Shape Animation</td>
      <td style="text-align: center;">.fsha .fshb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Scene Animation</td>
      <td style="text-align: center;">.fsna .fsnb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Shader Parameter Animation (Not Recommended)</td>
      <td style="text-align: center;">.fspa .fspb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Color Animation (Not Recommended)</td>
      <td style="text-align: center;">.fcla .fclb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Texture SRT Animation (Not Recommended)</td>
      <td style="text-align: center;">.ftsa .ftsb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Texture Pattern Animation (Not Recommended)</td>
      <td style="text-align: center;">.ftpa .ftpb</td>
    </tr>
    <tr>
      <td style="text-align: right;">Material Visibility Animation (Not Recommended)</td>
      <td style="text-align: center;">.fvma .fvmb</td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83955997_h1_2">Identity of Binary Resource Files</h1>
<p>The resource files generated by the 3D binary converter and the 3D shader converter differ depending on whether they are the 32-bit version or the 64-bit version.</p>
<p>This difference is due to an error in floating point arithmetic. We recommend you use the 64-bit version.</p>
<h1 id="Anchor_83955997_h1_3">Command-Line Options</h1>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe [--args-file &quot;&quot;] [--version] [-h] [-s] [-i] [--verify] [-r &quot;&quot;] [-o &quot;&quot;] [file] [--external-file &quot;[file] [--external-file-alignment '']&quot;]...</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Converts intermediate files to runtime-use binary resource files (BFRES files).</p>
<p>
  <strong>--args-file &quot;&quot;</strong>
</p>
<p>Specifies the file.<br />You can use the contents in the parameter file to specify arguments. <br />The parameter file allows you to specify each option over several lines. <br />Lines starting with a number sign (#) are treated as comments. <br />Newline characters cannot be included in escape sequences used in option specifications that appear between quotation marks (&quot;).</p>
<p>
  <strong>-v --version</strong>
</p>
<p>Displays version information.</p>
<p>
  <strong>-h --help</strong>
</p>
<p>Displays Help.</p>
<p>
  <strong>-s --silent</strong>
</p>
<p>Suppresses the display of messages during processing.</p>
<p>
  <strong>-i --ignore-assign</strong>
</p>
<p>Although data is not usually converted if <code>shape_shader_assign</code> or <code>material_shader_assign</code> is not included, conversion is performed without checking for these elements when this option is specified.</p>
<p>
  <strong>-ve --verify</strong>
</p>
<p>Determines whether the intermediate file can be converted to binary.</p>
<p>
  <strong>-r &quot;&quot; --root-path &quot;&quot;</strong>
</p>
<p>Sets the path to the folder containing the binary resource file as a relative path from a specified folder.<br />Example: If you specify: <code>-r=&quot;D:\home&quot;</code>, <code>D:\home </code> will be removed from the path for the binary resource file.<br />This option cannot be used when specifying the converter input path.</p>
<p>
  <strong>-o &quot;&quot; --output &quot;&quot;</strong>
</p>
<p>Specifies the output file.<br />This option can be omitted when there is only one input file.</p>
<p>
  <strong>File</strong>
</p>
<p>Specifies the file to convert to a binary resource file. For a list of supported file formats, see the Intermediate File Formats section on this page.</p>
<p>
  <strong>-ef --external-file &quot;&quot;</strong>
</p>
<p>Adds the specified external file to the targets for serialization.<br />As sub-options, you can use <code>-efa</code> and <code>--external-file-alignment</code> to specify the alignment for external files.<br />If nothing is specified, the file is aligned to 256 bytes by default.<br />For external files, the file content is placed without modification into the binary resource file.</p>
<p>Example 1: Adding multiple external files to the targets for serialization.<br />3dBinaryConverter.exe human.fmdb --external-file &quot;a.bfsha&quot; --external-file &quot;b.bfsha&quot;</p>
<p>Example 2: Using the <code>--external-file-alignment</code> sub-option to align <code>human.bfsha</code> to 512 bytes. <br />3dBinaryConverter.exe human.fmdb -o human.bfres  --external-file &quot;human.bfsha --external-file-alignment 512&quot; </p>
<p>
  <strong>--dump-binary-info &quot;&quot;</strong>
</p>
<!--Remove-->
<p>Saves conversion result binary resource file size information to the directory specified in the XML file.<br />You can only specify the binary resource (BFRES) file to the entered file when this option is specified. In that case, it only saves XML files without conversion processing.<br />For more information, see <a href="#Anchor_83955997_dumpBinaryInfo">Dump Information</a> later in this document.</p>
<p>
  <strong>--precise-bounding-sphere</strong>
</p>
<!--Remove-->
<p>Precisely calculates the shape of the bounding sphere corresponding to each <code>ResMesh</code> contained in the binary resource.<br />On the other hand, only an approximate calculation is made of the shape of the AABB bounding box corresponding to each <code>ResMesh</code> contained in the binary resource.<br />Specify this option to get accurate shapes of bounding spheres using the <code><span class="ApiLink_nn__g3d__ModelObj__GetBounding">nn::g3d::ModelObj::GetBounding</span>()</code> and <code><span class="ApiLink_nn__g3d__ShapeObj__GetBounding">nn::g3d::ShapeObj::GetBounding</span>()</code> functions.<br />However, the <code><span class="ApiLink_nn__g3d__ResShape__GetBounding">nn::g3d::ResShape::GetBounding</span>()</code> function can only get an approximation of the AABB of <code>Mesh</code>.<br />If you are using the bounding spheres of <code>ModelObj</code> and <code>ShapeObj</code> and not using the AABB of <code>ResShape</code>, there might be an improvement in the bounding shapes if you specify this option.<br />This option does not affect the submesh AABB one way or the other.</p>
<p>
  <strong>
    <span style="color: rgb(23,43,77);">--share-duplicated-mesh-array</span>
  </strong>
</p>
<!--Remove-->
<p>
  <span style="color: rgb(23,43,77);">When converting an intermediate model (FMD) file with multiple <code>&lt;shape&gt;</code> elements that have the same <code>&lt;mesh_array&gt;</code> content, the <code><span class="ApiLink_nn__g3d__ResMesh">nn::g3d::ResMesh</span></code> array in the output binary resource file is shared among multiple <code><span class="ApiLink_nn__g3d__ResShape">nn::g3d::ResShape</span></code>.</span>
  <br />
  <br />
  <span style="color: rgb(23,43,77);">Because <code><span class="ApiLink_nn__g3d__ResMesh">nn::g3d::ResMesh</span></code> stores index buffers, index buffers are also shared.</span>
  <br />
  <span style="color: rgb(23,43,77);">Shapes that reference the same <code><span class="ApiLink_nn__g3d__ResMesh">nn::g3d::ResMesh</span></code> array have the same <code><span class="ApiLink_nn__g3d__ResShapeData__pMeshArray">nn::g3d::ResShapeData::pMeshArray</span></code> value.</span>
  <br />
  <span style="color: rgb(23,43,77);">This feature is expected to result in smaller binary sizes.</span>
</p>
<p>
  <strong>--extract-external-files &quot;&quot;<br /></strong>
</p>
<!--Remove-->
<p>Exports the external files of the binary resource (BFRES) file to the specified directory.<br />Does not perform intermediate file conversion. Specify a binary resource file as the input file.</p>
<p>
  <br />
</p>
<!--Remove-->
<h1 id="Anchor_83955997_h1_4">Specifications</h1>
<h2 id="Anchor_83955997_h2_2">Exit Code</h2>
<p>Returns an exit code value of <code>0</code> when conversion succeeds or an exit code value of <code>1</code> or greater when conversion fails.<br />The specific values returned for conversion failures are currently private.</p>
<!--Remove-->
<h1 id="Anchor_83955997_h1_5">Limitations</h1>
<p>This section describes restrictions of the 3D binary converter.</p>
<h2 id="Anchor_83955997_h2_3">Restrictions on Filenames</h2>
<p>The names of input files and files specified for <code>--output</code> can only contain the following characters.</p>
<div class="panel" style="border-width: 1px;">
  <div class="panelContent">
    <p>[0-9A-Za-z-_]</p>
  </div>
</div>
<h2 id="Anchor_83955997_h2_4">Restriction on Animation Intermediate Files With the Same Name</h2>
<p>The following kinds of animation intermediate files cannot have the same name, even if the extension is different.</p>
<ul>
  <li>Shader parameter animation (FSP file)</li>
  <li>Texture pattern animation (FTP file)</li>
  <li>Texture SRT animation (FTS file)</li>
  <li>Material visibility animation (FVM file)</li>
  <li>Color animation (FCL file)</li>
</ul>
<h2 id="Anchor_83955997_h2_5">Restriction on Animation Intermediate Files Output From the DCC Tool Plug-In</h2>
<p>The following animations output from the DCC tool plug-in do not have animation curves immediately after being output, so they cannot be converted as is.</p>
<ul style="list-style-type: square;">
  <li>Texture pattern animation (FTP file)</li>
  <li>Texture SRT animation (FTS file)</li>
  <li>Color animation (FCL file)</li>
</ul>
<p>Generate an animation curve either with the assign utility or by binding the animation to a model in 3DEditor.</p>
<h1 id="Anchor_83955997_h1_6">Usage Examples</h1>
<p>This section describes how to use the 3D binary converter.</p>
<h2 id="Anchor_83955997_h2_6">Converting Intermediate Files</h2>
<p>The following example converts the <code>model.fmdb</code> and <code>animation.fskb</code> files and saves the results to a file named <code>output.bfres</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe -o output.bfres model.fmdb animation.fskb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Batch conversion is possible using a parameter file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>convert.txt

-o output.bfres
model.fmdb

animation.fskb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe --args-file convert.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83955997_h1_7">
  <a name="Anchor_83955997_dumpBinaryInfo"></a>Dump Information　</h1>
<p>This section describes the dump file that results when the <code>--dump-binary-info</code> option is entered.</p>
<p>The dump file is saved as <code><em>&lt;ResFile_name&gt;</em>_size_info.xml</code> in the specified directory.<br />This allows you to find where size bottlenecks are occurring when the binary size is bigger than expected.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe -o output.bfres model.fmdb animation.fskb --dump-binary-info=&quot;result&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can also make it so that binary resource files are entered. In that case, it only saves a dump file without conversion processing.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe output.bfres --dump-binary-info=&quot;result&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955997_h2_7">Structure of XML Files</h2>
<p>The root element is <code>&lt;BinaryResourceFileInformation&gt;</code>.<br />The child elements contain the <code>&lt;FileSizeDetails&gt;</code> element, which displays the Res architecture within a file, the <code>&lt;StreamSizeDetails&gt;</code> element, which displays the vertex stream and index stream architectures, and the <code>EstimatedLodRemovedFileSize</code> element, which displays the estimated size of the file without the Lod element.</p>
<h3 id="Anchor_83955997_h3_1">&lt;FileSizeDetails&gt; Elements</h3>
<p>
  <code>&lt;FileSizeDetails&gt;</code> displays binary resource files as a <code>Res</code> architecture. The &quot;structure name&quot; and &quot;structure pointer member variable name with the prefix p removed&quot; appear alternately.<br />In addition, the <code>RelocatinTable</code> element, a special element that is neither a structure nor a pointer member variable, exists as a child element of <code>&lt;ResFileData&gt;</code>.</p>
<table class="wrapped relative-table">
  <colgroup>
    <col style="width: 138.0px;" />
    <col style="width: 767.0px;" />
  </colgroup>
  <tbody>
    <tr>
      <th>Attribute Name</th>
      <th>Description</th>
    </tr>
    <tr>
      <th colspan="2">Elements indicating structure</th>
    </tr>
    <tr>
      <th>TotalSize</th>
      <td>The total of <code>TotalSize</code> of subordinate elements + <code>StructSize</code> of the local structure.</td>
    </tr>
    <tr>
      <th>StructSize</th>
      <td>sizeof (local structure).</td>
    </tr>
    <tr>
      <th>Name</th>
      <td>The string indicated by the <code>pName</code> member of the local structure.</td>
    </tr>
    <tr>
      <th>Index</th>
      <td>The index of the local structure within the array indicated by the parent element.</td>
    </tr>
    <tr>
      <th colspan="2">Elements indicating structure pointer member variables.</th>
    </tr>
    <tr>
      <th>TotalSize</th>
      <td>The total of <code>TotalSize</code> of subordinate elements (the data size of the pointer reference destination if there is no subordinate element).</td>
    </tr>
    <tr>
      <th>Length</th>
      <td>Number of subordinate elements.</td>
    </tr>
    <tr>
      <th colspan="2">Special attributes</th>
    </tr>
    <tr>
      <th>PrePaddingSize</th>
      <td>The padding size before the data. There are <code>&lt;Memory&gt;</code> and <code>&lt;ExternalFileData&gt;/&lt;Data&gt;</code> elements.</td>
    </tr>
    <tr>
      <th>PostPaddingSize</th>
      <td>The padding size after the data. There are <code>&lt;Memory&gt;</code> and <code>&lt;ExternalFileData&gt;/&lt;Data&gt;</code> elements.</td>
    </tr>
  </tbody>
</table>
<p>The following example displays everything up to the child elements of <code>&lt;BinaryResourceFile&gt;</code>.<br />Binary resource files (BFRES files) are generated from <code><span class="ApiLink_nn__g3d__ResFileData">nn::g3d::ResFileData</span></code> and relocation tables, so they have <code>&lt;ResFileData&gt;</code> and <code>&lt;RelocationTable&gt;</code> child elements.<br />The binary resource file size is indicated by the <code>TotalSize</code> attribute of <code>&lt;BinaryResourceFile&gt;</code>. This matches the value obtained by adding the <code>TotalSize</code> of the <code>&lt;ResFileData&gt;</code> child element and the <code>TotalSize</code> of <code>&lt;RelocationTable&gt;</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nt">&lt;BinaryResourceFileInformation&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;FileSizeDetails&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;BinaryResourceFile</span> <span class="na">Name=</span><span class="s">&quot;SkeletalAnimDemo&quot;</span> <span class="na">TotalSize=</span><span class="s">&quot;3213376&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ResFileData</span> <span class="na">Name=</span><span class="s">&quot;SkeletalAnimDemo&quot;</span> <span class="na">TotalSize=</span><span class="s">&quot;3200408&quot;</span>  <span class="na">StructSize=</span><span class="s">&quot;208&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/ResFileData&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;RelocationTable</span> <span class="na">TotalSize=</span><span class="s">&quot;2112&quot;</span><span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/BinaryResourceFile&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/FileSizeDetails&gt;</span>
<span class="nt">&lt;/BinaryResourceFileInformation&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following example shows <code>&lt;ResFileData&gt;</code> and its child elements.<br /><code>&lt;ResFileData&gt;</code> indicates a <code><span class="ApiLink_nn__g3d__ResFileData">nn::g3d::ResFileData</span></code> structure, and there are elements in the child elements that correspond to the pointer member variables.<br />The <code>TotalSize</code> attribute of <code>&lt;ResFileData&gt;</code> matches the sum of the <code>TotalSize</code> attributes of all child elements and the <code>StructSize</code> attribute of the local structure size.<br />The vertex and index stream size indicates the <code>TotalSize</code> attribute of the <code>&lt;Memory&gt;</code> elements in <code>&lt;BufferMemoryPoolInfo&gt;</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nt">&lt;ResFileData</span> <span class="na">Name=</span><span class="s">&quot;SkeletalAnimDemo&quot;</span> <span class="na">TotalSize=</span><span class="s">&quot;3200408&quot;</span>  <span class="na">StructSize=</span><span class="s">&quot;208&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ModelArray</span> <span class="na">TotalSize=</span><span class="s">&quot;22376&quot;</span> <span class="na">Length=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ModelDic</span> <span class="na">TotalSize=</span><span class="s">&quot;56&quot;</span><span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;SkeletalAnimArray</span> <span class="na">TotalSize=</span><span class="s">&quot;76384&quot;</span> <span class="na">Length=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;SkeletalAnimDic</span> <span class="na">TotalSize=</span><span class="s">&quot;120&quot;</span><span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;BufferMemoryPool</span> <span class="na">TotalSize=</span><span class="s">&quot;288&quot;</span><span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;BufferMemoryPoolInfo</span> <span class="na">TotalSize=</span><span class="s">&quot;420840&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;MemoryPoolInfoData</span> <span class="na">TotalSize=</span><span class="s">&quot;420840&quot;</span> <span class="na">StructSize=</span><span class="s">&quot;32&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Memory</span> <span class="na">TotalSize=</span><span class="s">&quot;420808&quot;</span> <span class="na">PostPaddingSize=</span><span class="s">&quot;3704&quot;</span> <span class="na">PrePaddingSize=</span><span class="s">&quot;816&quot;</span><span class="nt">/&gt;</span> // Memory indicates the vertex or index stream size.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/MemoryPoolInfoData&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/BufferMemoryPoolInfo&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ExternalFileArray</span> <span class="na">TotalSize=</span><span class="s">&quot;2678984&quot;</span> <span class="na">Length=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span> // Indicates the total size of external files.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ExternalFileDic</span> <span class="na">TotalSize=</span><span class="s">&quot;40&quot;</span><span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;StringPool</span> <span class="na">TotalSize=</span><span class="s">&quot;1112&quot;</span><span class="nt">/&gt;</span> // Indicates the string pool size.
<span class="nt">&lt;/ResFileData&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83955997_h3_2"> &lt;StreamSizeDetails&gt; Elements</h3>
<p>A detailed breakdown of the sizes of the vertex stream data and index stream data for models in the binary resource file is expressed for each model, shape, mesh, and vertex buffer.<br />It can also be said to be a breakdown of the <code>TotalSize</code> of the <code>&lt;BinaryResourceFile&gt;</code>/<code>&lt;ResFileData&gt;</code>/<code>&lt;BufferMemoryPoolInfo&gt;</code>/<code>&lt;MemoryPoolInfoData&gt;</code>/<code>&lt;Memory&gt;</code> attributes in <code>&lt;FileSizeDetails&gt;</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nt">&lt;BinaryResourceFileInformation&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;StreamSizeDetails&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Stream</span> <span class="na">TotalSize=</span><span class="s">&quot;420808&quot;</span><span class="nt">&gt;</span> // Total stream size including padding.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ModelData</span> <span class="na">Name=</span><span class="s">&quot;Pierrot&quot;</span> <span class="na">TotalSize=</span><span class="s">&quot;89808&quot;</span> <span class="na">Index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span> // Total size of the model Pierrot stream.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;IndexStream</span> <span class="na">TotalSize=</span><span class="s">&quot;13456&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/IndexStream&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;VertexStream</span> <span class="na">TotalSize=</span><span class="s">&quot;76352&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/VertexStream&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/ModelData&gt;</span>
　　<span class="nt">&lt;PrePadding</span> <span class="na">TotalSize=</span><span class="s">&quot;2256&quot;</span><span class="nt">/&gt;</span> // Padding size that exists before data in address alignment restrictions.
　　<span class="nt">&lt;PostPadding</span> <span class="na">TotalSize=</span><span class="s">&quot;304&quot;</span><span class="nt">/&gt;</span> // Padding size that exists after data in size alignment restrictions.
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/Stream&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;/StreamSizeDetails&gt;</span>
<span class="nt">&lt;/BinaryResourceFileInformation&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83955997_h3_3">&lt;EstimatedLodRemovedFileSize&gt; element</h3>
<p>Indicates the estimated file size with the LOD element in the binary source file omitted.<br />This is intended to be used to estimate the size when a designer creates models.<br />This element is an experimental feature. It may change in a future release.<br /><br /></p>
<!--Remove-->
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;EstimatedLodRemovedFileSize&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;BinaryResourceFile</span> <span class="na">TotalSize=</span><span class="s">&quot;135816&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Others</span> <span class="na">TotalSize=</span><span class="s">&quot;13432&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Stream</span> <span class="na">TotalSize=</span><span class="s">&quot;122384&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/BinaryResourceFile&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/EstimatedLodRemovedFileSize&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955997_h2_8">Analysis</h2>
<p>You can use scripts to tabulate information such as the ratios of specific elements.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">elementTree</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">elementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;sample_size_info.xml&quot;</span><span class="p">)</span>
<span class="n">binaryResourceFileRoot</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;FileSizeDetails/BinaryResourceFile&quot;</span><span class="p">)</span>

<span class="c"># File size.</span>
<span class="n">fileSize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">binaryResourceFileRoot</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;TotalSize&quot;</span><span class="p">))</span>

<span class="c"># Tabulate the data size referenced by ResMaterialData in the file.</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">binaryResourceFileRoot</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="s2">&quot;ResMaterialData&quot;</span><span class="p">):</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">size</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;TotalSize&quot;</span><span class="p">))</span>

<span class="c"># In the log, display the ratio of the file size for ResMaterialData.</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{} ({}%)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">fileSize</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)))</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <span style="color: rgb(0,51,102);">Python script samples for analysis and the batch files to execute these scripts are available in %NINTENDO_SDK_ROOT%/Samples</span>
  <span class="sep">
    <span style="color: rgb(0,51,102);">/</span>
  </span>
  <span style="color: rgb(0,51,102);">Sources</span>
  <span class="sep">
    <span style="color: rgb(0,51,102);">/</span>
  </span>
  <span style="color: rgb(0,51,102);">Tools</span>
  <span class="sep">
    <span style="color: rgb(0,51,102);">/</span>
  </span>
  <span style="color: rgb(0,51,102);">3dTools</span>
  <span class="sep">
    <span style="color: rgb(0,51,102);">/</span>
  </span>
  <span style="color: rgb(0,51,102);">3dBinaryConverter</span>
  <span class="sep">
    <span style="color: rgb(0,51,102);">/</span>
  </span>
  <span style="color: rgb(0,51,102);">DumpBinaryInfo.</span>
  <br />
  <span style="color: rgb(0,51,102);">To execute the batch files, you must through the path in Python.</span>
</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Batch Filename</th>
      <th>Process Description</th>
    </tr>
    <tr>
      <td>DumpBinaryInfo.bat</td>
      <td>
        <p>After exporting the size information (as XML) of the binary resource file (BFRES file) that was dragged to the <code>Outputs</code> folder, it uses all sample scripts in the same directory to analyze the size information (XML) file.</p>
        <p />
      </td>
    </tr>
    <tr>
      <td>Analysis.bat</td>
      <td>Uses all sample scripts in the same directory to analyze the dragged size information (XML) file.</td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__g3d__ModelObj__GetBounding', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_model_obj.html#a27842ce94493d5891b1cffd92233a73a' )
SetUrl( 'ApiLink_nn__g3d__ShapeObj__GetBounding', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_shape_obj.html#a311a863e4d0810ddffa988344af47974' )
SetUrl( 'ApiLink_nn__g3d__ResShape__GetBounding', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shape.html#a68af8d0f9d2f96752ce09fa8b536155d' )
SetUrl( 'ApiLink_nn__g3d__ResMesh', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_mesh.html' )
SetUrl( 'ApiLink_nn__g3d__ResShape', '../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shape.html' )
SetUrl( 'ApiLink_nn__g3d__ResShapeData__pMeshArray', '../../../Api/HtmlNX/structnn_1_1g3d_1_1_res_shape_data.html#ab840e36315ffaa03e8d3706a49010f1d' )
SetUrl( 'ApiLink_nn__g3d__ResFileData', '../../../Api/HtmlNX/structnn_1_1g3d_1_1_res_file_data.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
