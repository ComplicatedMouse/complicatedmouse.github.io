<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Assign Utility | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Assign Utility -->
<div class="pagetitle" id="PageId_83956043">Assign Utility</div>
<div class="text_separate">
<p>This section describes the usage and important considerations for the assign utility (<code>%NINTENDO_SDK_ROOT%\Tools\Graphics\3dTools\3dIntermediateFileAssignUtility.exe</code>).</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83956043_h1_1">Overview</a>
    </li>
    <li>
      <a href="#Anchor_83956043_h1_2">Command-Line Options</a>
    </li>
    <li>
      <a href="#Anchor_83956043_h1_3">Assigning Shaders to Models</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_1">Usage Examples</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_4">Generating Animation Curves Based on Original Material Animations</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_2">Usage Example</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_5">Assigning Additional Reference Paths for Individual Models, Texture Pattern Animations, and Material Animations</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_3">Usage Example</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_6">Assigning Parent Materials</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_4">Specification Format</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_5">Sub-Options</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_6">Usage Example</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_7">Applying a Parent Material</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_7">Usage Example</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_8">Assigning Behavior During Material Referencing</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_8">Specification Format</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_9">Sub-Options</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_10">Usage Examples</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_9">Assigning Original Curves to Shader Parameter Animations</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_11">Specification Format</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_12">Sub-Options</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_13">Usage Examples</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_10">Running Processes in Parallel</a>
    </li>
    <li>
      <a href="#Anchor_83956043_h1_11">Restrictions</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_14">Text-Formatted Shader Definition Intermediate Files (FSDA Files)</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_83956043_h1_1">Overview</h1>
<p>The assign utility is a way to assign various properties to intermediate files from the command line.</p>
<ul>
  <li>It can be used to assign shaders from the shader definition file (FSDB file) to model intermediate files (FMDA and FMDB files).</li>
  <li>It can be used to generate animation curves from shader parameter animations and other original material animations.</li>
  <li>It can be used to assign additional reference paths for individual models, texture pattern animations, material animations, and the like.</li>
</ul>
<h1 id="Anchor_83956043_h1_2">Command-Line Options</h1>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe [--version] [-h] [-s] [-j &quot;&quot;] [--job-list &quot;&quot;] [--args-file &quot;&quot;] [--error-detail-output &quot;&quot;]
[assign [--shader &quot;&quot;] [[--shading-model &quot;&quot;] | [--shading-model-index &quot;&quot;]]  [--material &quot;&quot;] [-f] [--keep-existing-values] [intermediate file (.fmd .fma .fsp .fcl .fts)] [-o &quot;&quot;] [--disable-file-info]]  | 
[update-model [--shader-path &quot;&quot;] [-t] [model intermediate file(.fmd)] [-o &quot;&quot;] [--disable-file-info]]  | 
[update-material [--shader-path &quot;&quot;] [-t] [material intermediate file(.fmt)] [-o &quot;&quot;] [--disable-file-info]]  | 
[update-animation [--shader &quot;&quot;] [--shading-model &quot;&quot;] [-t] [Shader parameter animation intermediate file (.fma .fsp .fcl .fts)] [-o &quot;&quot;] [--disable-file-info]]  | 
[assign-search-path [--search-path &quot;&quot;] [--type &quot;&quot;] ... [-r] [intermediate file(.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[assign-parent-material [--parent-material-assign &quot;&quot;] [--update-materials] [--parent-material-path &quot;&quot;] [--reset-values-by-parent] ... [intermediate file (.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[apply-parent-material [--shader-path &quot;&quot;] [--update-materials] [--parent-material-path &quot;&quot;] [--apply-external-materials] ... [intermediate file (.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[assign-material-reference-behavior [--shader-path &quot;&quot;] [--material-reference-behavior-assign &quot;&quot;] [--material-reference-sampler-behavior-assign &quot;&quot;] [--material-reference-behavior-remove &quot;&quot;] [--material-reference-sampler-behavior-remove &quot;&quot;] ... [intermediate file (.fmd)] [-o &quot;&quot;] [--disable-file-info]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--args-file &quot;&quot;</strong>
</p>
<p>Specifies the file.<br />You can use the contents in the parameter file to specify arguments. <br />The parameter file allows you to specify each option over several lines. <br />Lines starting with a number sign (#) are treated as comments. <br />Newline characters cannot be included in escape sequences used in option specifications that appear between quotation marks (&quot;).</p>
<p>
  <strong>--job-list &quot;&quot;</strong>
</p>
<p>Specifies the job list file.<br />Using the job list allows you to execute one or more processes.<br />The content written in each line of the job list file is specified as an argument for each process. <br />Lines starting with a number sign (#) are treated as comments. <br /><code>--silent</code> and <code>--jobs</code> cannot be specified in the job list.</p>
<p>
  <strong>--version</strong>
</p>
<p>Displays version information.</p>
<p>
  <strong> -h --help</strong>
</p>
<p>Displays Help.</p>
<p>
  <strong> -s --silent</strong> 　</p>
<p>Suppresses the display of messages during processing.</p>
<p>
  <strong>-j &quot;&quot; --jobs &quot;&quot;</strong>
</p>
<p>Specifies the number of jobs. When unspecified, the processor count is assigned.</p>
<p>
  <strong> <span style="color: rgb(23,43,77);">--disable-xsd-check</span> </strong>
</p>
<p>Disables format checking of intermediate files using schemas (XSD files).<br />Only the latest version intermediate files can be processed when this option is enabled.</p>
<p>
  <strong>--disable-file-info</strong>
</p>
<p>
  <code>&lt;file_info&gt;</code> is not updated when updating intermediate files. </p>
<p>
  <strong>--error-detail-output</strong>
</p>
<p>Specifies a folder for saving detailed information when an error occurs. If not specified, this information is written to the default folder.</p>
<p>
  <strong>assign</strong> </p>
<p>This subcommand assigns shaders to models and shader parameter animations.<br />Supported intermediate files: FMD, FMA, FSP, FCL, FTS</p>
<p>
  <strong>--shader &quot;&quot;</strong> 　</p>
<p>Specifies the shader definition file to use when assigning shaders.</p>
<p>
  <strong>--shading-model &quot;&quot;</strong> 　</p>
<p>Specifies the shading model to use when assigning shaders.</p>
<p>
  <strong>--shading-model-index &quot;&quot;</strong> 　</p>
<p>Specifies the index of the shading model when assigning shaders.</p>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>This option is available in NintendoSDK 4.0.0 and later.</p>
  </div>
</div>
<p>Specifies the name of the material to assign as the shader. Wildcard characters can be used. Nothing happens if there is no applicable material. When this option is omitted, the shader is assigned to all materials.</p>
<p>Supported intermediate files: FMD</p>
<p>
  <strong>-f --force</strong> 　</p>
<p>Enables forced reassignment of shaders that have already been assigned when assigning shaders.</p>
<p>
  <strong>--keep-existing-values</strong>
</p>
<!--Remove-->
<p>
  <br />
</p>
<p>The ID and type in the input file keep the same shader parameter values when the shader is assigned.</p>
<p>
  <strong>update-model</strong>
</p>
<p>A subcommand that updates the shader assignments for models</p>
<p>Supported intermediate files: FMD</p>
<p>
  <strong>update-material</strong>
</p>
<p>A subcommand that updates the shader assignments for materials.</p>
<p>Supported intermediate files: FMT</p>
<p>
  <strong>update-animation</strong>
</p>
<p>A subcommand that tries to rectify the shape of the curve according to the shader definitions for the animation.<br />Supported intermediate files: FMA, FSP, FCL, FTS</p>
<p>
  <strong>--shader-path &quot;&quot;</strong> 　</p>
<p>Specifies the folder storing the shader definition file.</p>
<p>
  <strong> -t --test</strong> 　</p>
<p>Tests the shader assignment updates.</p>
<p>
  <strong>assign-search-path</strong> 　</p>
<p>A subcommand that assigns additional reference paths for the individual models, texture pattern animations, and material animations that will be used by 3DEditor.</p>
<p>
  <strong>--type &quot;&quot;</strong>
</p>
<!--Remove-->
<p>Specifies the type of the additional reference path to assign. Valid values are <code>Texture</code> and <code>Material</code>.</p>
<p>
  <strong>--search-path &quot;&quot;</strong>
</p>
<p>Specifies additional reference paths for the individual models, texture pattern animations, and material animations that will be used by 3DEditor.<br />You can specify options multiple times.<br />When no options are specified, additional reference paths are deleted.<br />Backslashes (\) in paths are replaced with forward slashes (/).</p>
<p>
  <strong>--search-paths &quot;&quot;</strong>
</p>
<p>An alias for <code>--search-path</code>.<br />Planned to be deprecated.<br />You cannot specify this at the same time as <code>--search-path</code>.</p>
<p>
  <strong>--parent-material-path &quot;&quot;</strong>
</p>
<p>Specifies the path to the parent material reference folder. Subfolders under the specified folder are included in the search path. You can use semicolons as delimiters to specify multiple paths. You can also specify multiple paths by specifying this option multiple times.</p>
<p>
  <strong> -r --recursive</strong> 　</p>
<p>Specifies to also search subfolders below the additional reference path when 3DEditor searches for a reference file.</p>
<p>
  <strong> -o &quot;&quot; --output &quot;&quot;</strong>
</p>
<p>Specifies the file to output. If not specified, the file being processed is overwritten. When <code>apply-parent-material</code> is being used, you can also specify the path to the output folder. If you specify this option, a file with the same name as the input file is output to the output folder.</p>
<p>
  <strong>assign-parent-material</strong>
</p>
<p>A subcommand that assigns the parent material to use for material referencing.</p>
<p>Supported intermediate files: FMD</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>The <code>assign-parent-material</code> subcommand is a feature still in testing. The specifications and operations may change without notice.</p>
  </div>
</div>
<p>
  <strong>--parent-material-assign &quot;&quot;</strong>
</p>
<p>Specifies both the parent material to assign and where to assign it. This option includes several configurable suboptions.</p>
<p>For more information about these sub-options, see <a href="#Anchor_83956043_AssignParentMaterial">Assigning Parent Materials</a>. </p>
<p>
  <strong> <span style="color: rgb(23,43,77);">--reset-values-by-parent</span> </strong>
</p>
<!--Remove-->
<p>If you specify this option when assigning a parent material, the parameters of child materials that are treated as forced-override parameters because of the child material restrictions are initialized to the values of the parent material that specified the forced override.</p>
<p>
  <strong>
    <span style="color: rgb(23,43,77);">--assign-parent-material-shading-model</span>
  </strong>
</p>
<p>If you specify this option when you assign a parent material, the shading model assigned to the parent material is also assigned to the material to which this parent material is being assigned.</p>
<p>
  <strong>apply-parent-material</strong>
</p>
<p>A subcommand that resolves the material referencing information and applies the settings of the parent material to another material.</p>
<p>Supported intermediate files: FMD</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>The <code>apply-parent-material</code> subcommand is a feature still in testing. The specifications and operations may change without notice.</p>
  </div>
</div>
<p>
  <strong>assign-material-reference-behavior</strong>
</p>
<p>The subcommand to assign and delete behavior for each shader parameter during material referencing.</p>
<p>Supported intermediate files: FMD</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>
      <code>assign-material-reference-behavior</code> is a provisional feature. The specifications and operations may change without notice.</p>
  </div>
</div>
<p>
  <strong>--material-reference-behavior-assign &quot;&quot;</strong>
</p>
<p>Specifies the behavior of the assigned target material and during material referencing.</p>
<p>For more information about these sub-options, see <a href="#Anchor_83956043_AssignMaterialReferenceBehavior">Assigning Behavior During Material Referencing</a>.</p>
<p>
  <strong>--material-reference-sampler-behavior-assign &quot;&quot;</strong>
</p>
<p>Specifies the behavior of the assigned target material and the behavior of the sampler during material referencing.</p>
<p>For more information about these sub-options, see <a href="#Anchor_83956043_AssignMaterialReferenceBehavior">Assigning Behavior During Material Referencing</a>.</p>
<p>
  <strong>--material-reference-behavior-remove &quot;&quot;</strong>
</p>
<p>Deletes the behavior when referencing the assigned target material.</p>
<p>For more information about these sub-options, see <a href="#Anchor_83956043_AssignMaterialReferenceBehavior">Assigning Behavior During Material Referencing</a>.</p>
<p>
  <strong>--material-reference-sampler-behavior-remove &quot;&quot;</strong>
</p>
<p>Deletes the behavior of the assigned target material and the behavior of the sampler during material referencing.</p>
<p>For more information about these sub-options, see <a href="#Anchor_83956043_AssignMaterialReferenceBehavior">Assigning Behavior During Material Referencing</a>.</p>
<!--Remove-->
<p>
  <strong>--update-materials</strong>
</p>
<!--Remove-->
<p>Before applying the parent material (running the <code>apply-parent-material</code> subcommand) or assigning the parent material (running the <code>assign-parent-material</code> subcommand), perform shader update processing (processing equivalent to the <code>update-material</code> subcommand) for the material of the input file and the parent material being referenced or assigned.</p>
<p>
  <strong>--apply-external-materials</strong>
</p>
<!--Remove-->
<p>After executing the <code>apply-parent-material</code> subcommand, the material intermediate files of external materials are merged with the model intermediate file for output. If this option is not specified, the external materials are written to the output destination folder as material intermediate files.</p>
<p>
  <br />
</p>
<!--Remove-->
<p>
  <strong> <span style="color: rgb(23,43,77);">--ignore-unfound-shader</span> </strong>
</p>
<!--Remove-->
<p>In the <code>update-model</code> and <code>update-material</code> subcommands, processing is skipped for materials for which shader definitions cannot be found.</p>
<p>
  <strong> <span style="color: rgb(23,43,77);">assign-original-curve </span> </strong>
</p>
<p>
  <br />
</p>
<!--Remove-->
<p>
  <span style="color: rgb(23,43,77);">Assigns a specific original curve to the shader parameter animation of the intermediate file of the material animation. For more information about sub-options, see </span>
  <a href="#Anchor_83956043_AssignOriginalCurve">Assign Utility</a>.<br /></p>
<p>
  <strong>
    <span style="color: rgb(23,43,77);">--bound-model-path</span>
  </strong>
</p>
<!--Remove-->
<p>
  <span style="letter-spacing: 0.0px;">Specifies the path of the model intermediate file to bind to the material animation intermediate file. Specifying this option causes the shading model assigned to the corresponding material in the specified model intermediate file to be used when assigning an original curve to a material animation intermediate file.</span>
</p>
<h1 id="Anchor_83956043_h1_3">Assigning Shaders to Models</h1>
<!--Remove-->
<p>The <code>assign</code> subcommand assigns shaders to model intermediate files (FMDA, FMDB) by referencing a shader definition file (FSDB).</p>
<ul>
  <li>If the <code>&lt;shader_assign&gt;</code> element is missing from the material in a model intermediate file, the shaders are assigned based on information in the shader definition file.<ul><li><code>&lt;sampler_assign&gt;</code> is assigned the <code>&lt;sampler&gt;</code> element for which <code>hint</code> matches <code>&lt;sampler_var&gt;</code> in the shader definition.</li><li><code>&lt;attrib_assign&gt;</code> is assigned the <code>&lt;vtx_attrib&gt;</code> element for which <code>hint</code> matches the <code>&lt;attrib_var&gt;</code> in the shader definition.</li><li><code>&lt;shader_param&gt;</code> is assigned <code>&lt;original_color&gt;</code> and <code>&lt;original_texsrt&gt;</code> for which <code>hint</code> matches the <code>&lt;uniform_var&gt;</code> in the shader definition.</li></ul></li>
  <li>The <code>&lt;vtx_buffer_array&gt;</code> element for the vertex data in the model intermediate file is revised according to <code>&lt;interleave_array&gt;</code> in the shader definition file.</li>
  <li>Nothing is done to models that have been assigned. Use the <code>--force (-f)</code> option to forcibly assign shader definitions or shading models.</li>
</ul>
<p>The <code>update-model</code> subcommand updates the shader assignments for a model.</p>
<ul>
  <li>If vertex information in the model intermediate file is added or deleted, the vertex assignments are automatically revised when the shader assignments are updated.</li>
  <li>If a shader parameter type has been changed, the previous values are inherited if the change is to the same kind of type.</li>
  <li>When the <code>revision</code> of <code>&lt;shading_model&gt;</code> is not <code>0</code>, the update is skipped if the <code>revision</code> of the material's <code>&lt;shader_assign&gt;</code> matches the <code>revision</code> of <code>&lt;shading_model&gt;</code>.</li>
</ul>
<p>When updating the shader assignment to a material intermediate FMTA or FMTB file, use the <code>update-material</code> subcommand.</p>
<h2 id="Anchor_83956043_h2_1">
  <a name="Anchor_83956043_AssignModelShaderExample"></a>Usage Examples</h2>
<h3 id="Anchor_83956043_h3_1">Assigning Shaders to Model Intermediate Files</h3>
<p>This sample code takes as input the model intermediate file <code>input.fmdb</code>, which does not have any shader assignments, and creates the file <code>output.fmdb</code> file, to which the shading model <code>simple</code> defined in <code>shader.fsdb</code> is assigned.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>Prepare the <code>args.txt</code> file as follows for use as a parameter file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign
--shader shader.fsdb
--shading-model simple
input.fmdb
-o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>By entering the following information, you can execute the command using the argument file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe --args-file args.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can assign parent shaders to only a particular material of a model by using the <code>--material</code> option. For example, executing the following command generates an <code>output.fmdb</code> file that assigns the <code>simple</code> shading model, defined in the <code>shader.fsdb</code> file, to material with the prefix <code>A_</code> in <code>input.fmdb</code>, which does not make any shader assignments.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fmdb --material &quot;A_*&quot; -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83956043_h3_2">Updating Shaders Assigned to Model Intermediate Files</h3>
<p>The following sample code uses the shader definition file in the shader folder to update the shader assignments for <code>input.fmdb</code> and create the <code>output.fmdb</code> file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe update-model --shader-path shader input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83956043_h3_3">Updating Shaders Assigned to Material Intermediate Files</h3>
<p>The following sample code uses the shader definition file in the shader folder to update the shader assignments for <code>input.fmtb</code> and create the <code>output.fmtb</code> file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe update-material --shader-path shader input.fmtb -o output.fmtb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_4">Generating Animation Curves Based on Original Material Animations</h1>
<p>For shader parameter animations (including color animations and texture SRT animations), an animation curve is generated by referencing the shader definition file (FSDB file) from the original data for color animation and texture SRT animation exported by the DCC tool.</p>
<ul>
  <li>Animation curves are generated based on original animations if no animation curve has already been generated.</li>
  <li>Use the <code>--force (-f)</code> option to forcibly assign animation curves. Use of this option deletes any existing animation curves.</li>
  <li>If the type of the <code>Uniform</code> variable in the shader definition is different from the type of the corresponding animation curve but they are the same kind of type, the <code>update-animation</code> subcommand will revise the type of the curve.</li>
</ul>
<h2 id="Anchor_83956043_h2_2">Usage Example</h2>
<p>The following command generates an animation curve based on the <code>simple</code> shading model included in <code>shader.fsdb</code> based on the original material animation included in <code>input.fclb</code> to generate the <code>output.fclb</code> file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fclb -o output.fclb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_5">Assigning Additional Reference Paths for Individual Models, Texture Pattern Animations, and Material Animations</h1>
<p>The <code>assign-search-path</code> subcommand assigns <a href="../Pages/Page_83955519.html">additional reference paths</a> for the individual models, texture pattern animations, and material animations that will be used by 3DEditor.</p>
<p>Specify the <code>--recursive (-r)</code> option to include subfolders in the additional reference path when searching for reference files in 3DEditor.</p>
<h2 id="Anchor_83956043_h2_3">Usage Example</h2>
<p>For <code>input.fmdb</code>, specify the relative paths <code>&quot;..\textures&quot;</code> and <code>&quot;..\..\textures&quot;</code> to include the additional reference paths for each model, and then create the <code>output.fmdb</code> file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-search-path --search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83956043_AssignParentMaterial"></a>
</p>
<h1 id="Anchor_83956043_h1_6">Assigning Parent Materials</h1>
<p>The <code>assign-parent-material</code> subcommand assigns the parent material to use for material referencing.</p>
<h2 id="Anchor_83956043_h2_4">Specification Format</h2>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign-parent-material [--parent-material-assign &quot;[--material &lt;material-name&gt;] --parent-material &lt;material-name&gt; [--parent-model &lt;file-path&gt;] [--reset-values-by-parent]&quot;] ... [intermediate file (.fmdb or .fmtb)] [-o &quot;&quot;] [--parent-material-path &lt;path&gt;] [--disable-file-info] [--reset-values-by-parent]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <code>--parent-material-assign</code> can be specified multiple times.</p>
<h2 id="Anchor_83956043_h2_5">Sub-Options</h2>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<p>Specifies the name of the material to assign as the parent material. If this option is omitted, all materials are assigned as the parent material. This specification is unnecessary if you are entering a material intermediate file.</p>
<p>
  <strong>--parent-model &quot;&quot;</strong>
</p>
<div class="note_new">
  <div class="note_new_left">Note</div>
  <div class="note_new_right">
    <p>The feature for handling model intermediate files as parent materials has been deprecated. Use material intermediate files for parent materials and do not use this option.</p>
  </div>
</div>
<p>
  <span style="letter-spacing: 0.0px;">Specifies the path to the model intermediate file with the assigned parent material. If this option is omitted, the input file is used.</span>
</p>
<p>
  <strong>--parent-material &quot;&quot;</strong>
</p>
<p>Specifies the name of the parent material to assign, or the path to the material intermediate file. If a null character is specified, all parent materials set to materials are removed. If the path to a material intermediate file is specified, the <code>--parent-model</code> option is not needed and is ignored.</p>
<p>
  <strong>--reset-values-by-parent</strong>
</p>
<p>The parameters of child materials that are treated as forcible override parameters because of the child material restrictions are initialized to the values of the parent material that specified the forcible override. <br /></p>
<h2 id="Anchor_83956043_h2_6">
  <a name="Anchor_83956043_AssignParentMaterialExample"></a>Usage Example</h2>
<p>The following command takes the material intermediate file named <code>parent_mat</code> located in the <code>./ParentMaterials</code> folder and assigns it as a parent material to the material named <code>mat_a</code> in <code>input.fmdb</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--material mat_a --parent-material parent_mat&quot; --parent-material-path &quot;./ParentMaterials&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following command unassigns all parent materials set to the <code>mat_a</code> materials in <code>input.fmdb</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--material mat_a --parent-material ''&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following command unassigns all parent materials set to all materials in <code>input.fmdb</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--parent-material ''&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_7">Applying a Parent Material</h1>
<p>Use the <code>apply-parent-material</code> subcommand to resolve the material reference information and apply the settings of the parent material to the specified material. For more information about the specification for resolving references when applying a parent material, see <a href="../Pages/Page_193043301.html#Anchor_193043301_ApplyParentMaterial">Applying a Parent Material and Multiple Material References</a>.</p>
<p>This material reference information is not retained in the binary resource that ultimately is referenced by the game application, so you must use this feature to apply the material referencing information before you convert the binary resource using the <a href="../Pages/Page_83955997.html">3D binary converter</a> tool.</p>
<h2 id="Anchor_83956043_h2_7">
  <a name="Anchor_83956043_ApplyParentMaterialExample"></a>Usage Example</h2>
<p>This code uses the shader definition file in the <code>shader</code> folder and the parent material in the <code>../../ParentMaterials</code> folder to resolve the material reference information for <code>target.fmdb</code>, and stores the result of applying the parent material's settings in the file <code>tmp/target.fmdb</code>.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe apply-parent-material target.fmdb --shader-path shader -o tmp/target.fmdb --parent-material-path ../../ParentMaterials</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_8">
  <a name="Anchor_83956043_AssignMaterialReferenceBehavior"></a>Assigning Behavior During Material Referencing</h1>
<p>Use the <code>assign-material-reference-behavior</code> subcommand to assign behavior for each shader parameter during material referencing.</p>
<h2 id="Anchor_83956043_h2_8">Specification Format</h2>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign-material-reference-behavior 
[--material-reference-behavior-assign &quot;--material &lt;material-name&gt; --type &lt;type-name&gt; --id &lt;id-name&gt; --sampler &lt;sampler-name&gt; --child-restriction &lt;restriction&gt; --value &lt;value&gt; --unassigned-param-only&quot;] 
[--material-reference-sampler-behavior-assign &quot;--material &lt;material-name&gt; --sampler &lt;sampler-name&gt; --is-sampler-required &lt;is-required&gt; --sampler-structure-restriction &lt;sampler-structure-restriction&gt; --unassigned-param-only&quot;]
[--material-reference-behavior-remove &quot;--material &lt;material-name&gt; --sampler &lt;sampler-name&gt; --type &lt;type-name&gt; --id &lt;id-name&gt; --initial-value-only&quot;]
[--material-reference-sampler-behavior-remove &quot;--material &lt;material-name&gt; --sampler &lt;sampler-name&gt; --initial-value-only&quot;]
&nbsp;... [--shader-path &quot;&quot;] [intermediate file(.fmd)] [-o &quot;&quot;] [--disable-file-info]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<!--Remove-->
<h2 id="Anchor_83956043_h2_9">Sub-Options</h2>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<p>Specifies the name of the material that is the settings target. When this option is omitted, all materials become the target.</p>
<p>
  <strong>--type &quot;&quot;</strong>
</p>
<p>Specifies the type of model intermediate file attribute that is the settings target. When this option is omitted, all attributes with matching <code>--id </code> and <code>--sampler</code> are settings targets, regardless of the type.</p>
<p>The following values can be specified.</p>
<table class="wrapped">
  <colgroup> <col /> <col /> </colgroup>
  <tbody>
    <tr>
      <th>Value</th>
      <th>Model Intermediate File Attribute That Is Settings Target</th>
    </tr>
    <tr>
      <td>AttribAssign</td>
      <td>&lt;attrib_assign&gt;</td>
    </tr>
    <tr>
      <td>RenderInfo</td>
      <td>&lt;render_info&gt;</td>
    </tr>
    <tr>
      <td>SamplerAssign</td>
      <td>&lt;sampler_assign&gt;</td>
    </tr>
    <tr>
      <td>ShaderOption</td>
      <td>&lt;shader_option&gt;</td>
    </tr>
    <tr>
      <td>ShaderParam</td>
      <td>&lt;shader_param&gt;</td>
    </tr>
    <tr>
      <td>Sampler</td>
      <td>&lt;sampler&gt;</td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--id &quot;&quot;</strong>
</p>
<p>Specifies the ID of the attribute that is the settings target. When this option is omitted, the settings are applied to all attributes. Use commas as delimiters to specify multiple IDs.</p>
<p>
  <strong>--sampler &quot;&quot;</strong>
</p>
<p>Specifies the name of the sampler that is the settings target. If omitted, all samplers are settings targets.</p>
<p>
  <strong>--child-restriction &quot;&quot;</strong>
</p>
<p>Specifies restrictions on child materials. Specify <code>DisallowRefer</code> to forcibly use either parameter values specified by the child material itself, or the default values. Specify <code>ValuePolicyToRefer</code> to forcibly reference the parent material parameters for the child material. Specify <code>ForceRefer</code> to forcibly use the target material's parameters for the child material. Specify <code>None</code> for no forcible use.</p>
<p>
  <strong> --child-value-restriction &quot;&quot; </strong>
</p>
<p>Sets restrictions on the values that can be set for child materials. This setting can only be specified for shader options or rendering information (<code>--type</code> is <code>ShaderOption</code>, <code>RenderInfo</code> parameter). For option variables, you can specify the scope of values in the same format as the <code>choice</code> option in <a href="../Pages/Page_84052806.html#Anchor_84052806_optionvalue">Rendering Information for Shader Annotations</a>. For rendering information, you can specify the scope of values in the same format as the <code>choice</code> option in <a href="../Pages/Page_84052806.html#Anchor_84052806_renderinfo">Rendering Information for Shader Annotations</a>.</p>
<p>
  <strong>--value &quot;&quot;</strong>
</p>
<p>Specify <code>Override</code> to use the shader parameter values specified by the target material itself. Specify <code>Refer</code> to use the parent material shader parameter values for the target material. Specify <code>Default</code> to use the default values in the shader definition for the target material.</p>
<p>
  <strong>--is-sampler-required &quot;&quot;</strong>
</p>
<p>Specify <code>true</code> to set the sampler as a sampler required for child materials, or <code>false</code> to set the sampler as one that is not required.</p>
<p>
  <strong>--sampler-structure-restriction &quot;&quot;</strong>
</p>
<p>Sets restrictions on the sampler structure for child materials. The following values can be set for this option.</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup> <col /> <col /> </colgroup>
  <tbody>
    <tr>
      <th>Value</th>
      <th>Restrictions on the Child Material Sampler Structure</th>
    </tr>
    <tr>
      <td>None</td>
      <td>No restrictions.</td>
    </tr>
    <tr>
      <td>DisallowAddOwnSampler</td>
      <td>Addition of own samplers is not allowed for child materials.</td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--unassigned-param-only</strong>
</p>
<!--Remove-->
<p>Specify to target only unassigned parameters for an operation when browsing materials. </p>
<p>
  <strong>--initial-value-only</strong>
</p>
<!--Remove-->
<p>Deletes only the default settings.</p>
<h2 id="Anchor_83956043_h2_10">Usage Examples</h2>
<p>The following command rewrites the <code>_p0</code> vertex attribute for all materials in <code>input.fmdb</code> with the forced override settings.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-material-reference-behavior input.fmdb --material-reference-behavior-assign &quot;--type AttribAssign --id _p0 --child-restriction ForceOverride&quot; --shader-path shader</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following command rewrites all <code>wrap_u</code> in the <code>sampler0</code> sampler for all materials in <code>input.fmdb</code> with the forced override settings.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-material-reference-behavior input.fmdb --material-reference-behavior-assign &quot;--type Sampler --id wrap_u --sampler &quot;sampler0&quot; --child-restriction ForceOverride&quot; --shader-path shader</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following command rewrites settings so that the samplers for all materials in <code>input.fmdb</code> are required and new samplers cannot be added to child materials.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-material-reference-behavior input.fmdb --material-reference-sampler-behavior-assign &quot;--is-sampler-required=true --sampler-structure-restriction DisallowAddOwnSampler&quot; --shader-path shader</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<!--Remove-->
<h1 id="Anchor_83956043_h1_9">
  <a name="Anchor_83956043_AssignOriginalCurve"></a>
  <span style="color: rgb(117,117,117);">Assigning Original Curves to Shader Parameter Animations</span>
</h1>
<!--Remove-->
<p>You can use the <code>assign-original-curve</code> subcommand to assign original curves in the material animation intermediate file to the specified shader parameter.</p>
<h2 id="Anchor_83956043_h2_11">Specification Format</h2>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign-original-curve [--original-curve-assign &quot;[--original-material &lt;material-name&gt;] --original-hint &lt;hint-name&gt; [--original-target &lt;target-name&gt;] [--target-material &lt;material-name&gt;] --target-param &lt;param-id&gt; [--target-component-index &lt;index&gt;]&quot;] ... [intermediate file (.fmab)] [-o &quot;&quot;] --shader &lt;fsdb-path&gt; [--shading-model &lt;shading-model-name&gt;] [--shading-model-index &lt;index&gt;]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can specify <code>--original-curve-assign</code> multiple times.</p>
<h2 id="Anchor_83956043_h2_12">Sub-Options</h2>
<p>
  <strong>--original-material &quot;&quot;</strong>
</p>
<p>Specifies the material name of the original curve to assign. If omitted, it uses the value specified by <code>--material</code> as the name. You cannot omit both.</p>
<p>
  <strong>--original-hint &quot;&quot;</strong>
</p>
<p>Specifies the hint for the original curve to assign.</p>
<p>
  <strong>--original-target &quot;&quot;</strong>
</p>
<p>Specifies the target name of the original curve to assign. You can specify any value available as the <code>target</code> attribute in <code>&lt;original_color_anim_target&gt;</code> and <code>&lt;original_texsrt_anim_target&gt;</code> in the material animation intermediate file. For more information, see the Intermediate File Specification Manual. If omitted, the assignment applies to all targets.</p>
<p>
  <strong>--target-material</strong>
</p>
<p>Specifies the material name for which to assign the original curve. If omitted, it uses the value specified by <code>--original-material</code> as the name. You cannot omit both.</p>
<p>
  <strong>--target-param</strong>
</p>
<p>Specifies the ID of the shader parameter for which to assign the original curve.</p>
<p>
  <strong>--target-component-index</strong>
</p>
<p>Specifies the component index of the shader parameter for which to assign the original curve. For example, set 0 for R, 1 for G, and 2 for B for shader parameter-indicated RGB colors. For texture SRT, set 1 for X scale, 2 for Y scale, 3 for rotation, 4 for X translation, and 5 for Y translation. If omitted, the component corresponding to the target name specified by <code>--original-target</code> is specified.</p>
<h2 id="Anchor_83956043_h2_13">Usage Examples</h2>
<p>The following example shows a curve with original color R and a hint of diffuse in the lamber1 material being assigned to the shader parameter with the ID spec_int in the lambert1 material.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-original-curve input.fmab --original-curve-assign &quot;--original-hint diffuse --original-target color_r --target-material lambert1 --target-param spec_int&quot; --shader ./demo.fsdb --shading-model basic </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The following example shows a curve with all original texture SRT elements and hint of opacity0 in the lambert1 material being assigned to the shader parameter with the ID texsrt0 in the lambert1 material.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-original-curve input.fmab --original-curve-assign &quot;--original-hint opacity0 --target-material lambert1 --target-param texsrt0&quot; --shader ./demo.fsdb --shading-model basic </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_10">Running Processes in Parallel</h1>
<p> By using the <code>--job-list</code> option, you can run processes for multiple targets in parallel.</p>
<p>If you want to assign an additional reference path to multiple models, you can perform processes on multiple models in parallel internally as follows.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-search-path --job-list=JobList.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputA.fmdb -o outputA.fmdb
--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputB.fmdb -o outputB.fmdb
--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputC.fmdb -o outputC.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_11">Restrictions</h1>
<p>This section describes the restrictions that apply when using the assign utility.</p>
<h2 id="Anchor_83956043_h2_14">Text-Formatted Shader Definition Intermediate Files (FSDA Files)</h2>
<p>Text-formatted shader definition intermediate files (FSDA files) are not supported.</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
