<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Barriers | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Barriers -->
<div class="pagetitle" id="PageId_83955702">Barriers</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83955702_h1_1">Barriers</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83955702_h2_1">Feature Overview</a>
      </li>
      <li>
        <a href="#Anchor_83955702_h2_2">Using Barriers</a>
      </li>
      <li>
        <a href="#Anchor_83955702_h2_3">Example of Using Barriers</a>
      </li>
      <li>
        <a href="#Anchor_83955702_h2_4">Barrier API References</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_83955702_h1_1">Barriers</h1>
<h2 id="Anchor_83955702_h2_1">Feature Overview</h2>
<p style="color: rgb(51,51,51);">A barrier is a synchronization object used to make <a href="../Pages/Page_83955697.html">threads</a> wait for each other.  </p>
<p style="color: rgb(51,51,51);">When the predetermined number of threads reaches a particular stage, all of the waiting threads are released and resume execution. Only that number of threads are synchronized, so the operating system library cannot determine which threads are waiting to meet up.</p>
<p> </p>
<h2 id="Anchor_83955702_h2_2">Using Barriers</h2>
<p>To use a barrier, make use of a <code><span class="ApiLink_nn__os__BarrierType">nn::os::BarrierType</span></code> structure object as follows.<br />There are no restrictions on where the object can be defined.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="cp">#include &lt;nn/os.h&gt;
</span>
<span class="nn">nn::os::</span><span class="n">BarrierType</span>     <span class="n">g_Barrier</span><span class="p">;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p> </p>
<p>Threads that are waiting at a barrier are used with the following procedure.</p>
<ol>
  <li>
    <p>First, initialize a barrier object on one of the threads.<br />At this time, also specify the total number of threads that will wait to meet together at the barrier.</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre><span class="nn">nn::os::</span><span class="n">InitializeBarrier</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">g_Barrier</span><span class="p">,</span> <span class="mi">5</span> <span class="p">);</span></pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>The threads meeting up at the barrier issue the following API function calls and enter the wait state at different times as follows.<br />When the last of the threads meeting at the barrier calls the <span class="ApiLink_void_nn__os__AwaitBarrier(BarrierType_*barrier)_NN_NOEXCEPT">AwaitBarrier</span> function, all of the other threads that were waiting up until that time wake up and resume execution.</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre><span class="nn">nn::os::</span><span class="n">AwaitBarrier</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">g_Barrier</span> <span class="p">);</span></pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>
<p> </p>
<h2 id="Anchor_83955702_h2_3">Example of Using Barriers</h2>
<p>For an actual example of using barriers, see the <span class="ApiLink_PageSampleOsBarrier">Barrier Feature Sample Program</span>.</p>
<p> </p>
<h2 id="Anchor_83955702_h2_4">Barrier API References</h2>
<p>For more information, see the following links.</p>
<ul>
  <li>
    <span class="ApiLink_void_nn__os__InitializeBarrier(BarrierType_*barrier|_int_numThreads)_NN_NOEXCEPT">nn::os::InitializeBarrier</span>
  </li>
  <li>
    <span class="ApiLink_void_nn__os__FinalizeBarrier(BarrierType_*barrier)_NN_NOEXCEPT">nn::os::FinalizeBarrier</span>
  </li>
  <li>
    <span class="ApiLink_void_nn__os__AwaitBarrier(BarrierType_*barrier)_NN_NOEXCEPT">nn::os::AwaitBarrier</span>
  </li>
</ul>
<p> </p>
<p> </p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__os__BarrierType', '../../../Api/HtmlNX/structnn_1_1os_1_1_barrier_type.html' )
SetUrl( 'ApiLink_void_nn__os__AwaitBarrier(BarrierType_*barrier)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a41fc159f1fb100df1371bbaf63e1ba14' )
SetUrl( 'ApiLink_PageSampleOsBarrier', '../../../Api/HtmlNX/_page_sample_os_barrier.html' )
SetUrl( 'ApiLink_void_nn__os__InitializeBarrier(BarrierType_*barrier|_int_numThreads)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a063c2e1620b936cdc599de617a458516' )
SetUrl( 'ApiLink_void_nn__os__FinalizeBarrier(BarrierType_*barrier)_NN_NOEXCEPT', '../../../Api/HtmlNX/namespacenn_1_1os.html#a062ceb897c5cd9b7bd4d779bf5e17c0b' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
