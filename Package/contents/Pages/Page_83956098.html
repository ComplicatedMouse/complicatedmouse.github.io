<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Texture Export Plug-In | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Texture Export Plug-In -->
<div class="pagetitle" id="PageId_83956098">Texture Export Plug-In</div>
<div class="text_separate">
<h1 id="Anchor_83956098_h1_1">Texture Export Plug-In</h1>
<p>This section describes the use and features of the Texture Export plug-in.</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83956098_h2_1">How to Use</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_2">Option Settings</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_3">Config Files</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_4">Notes</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956098_h3_1">Image Mode</a>
      </li>
      <li>
        <a href="#Anchor_83956098_h3_2">Alpha Channel</a>
      </li>
      <li>
        <a href="#Anchor_83956098_h3_3">Layers</a>
      </li>
      <li>
        <a href="#Anchor_83956098_h3_4">Layer Comps</a>
      </li>
      <li>
        <a href="#Anchor_83956098_h3_5">Color Settings</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956098_h2_5">Exporting by Batch File</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_6">Using Plug-Ins From Scripts</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_7">User Custom UI</a>
    </li>
    <li>
      <a href="#Anchor_83956098_h2_8">Related Links</a>
    </li>
  </ul>
</p>
<h2 id="Anchor_83956098_h2_1">How to Use</h2>
<ul>
  <li>First, open the PSD, PSB, or cloud document PSDC file that will be used for exporting FTXB texture intermediate files and TGA, PNG, DDS, and EXR files. (PSB files are supported in NintendoSDK 12.0.0 and later.)<br />In the following description, intermediate texture files and TGA, PNG, DDS, and EXR files are called <em>texture files</em>. In addition, PSD, PSB, and PSDC files are collectively referred to as &quot;PSD files.&quot;</li>
  <li>To save the texture export option settings in the PSD file, select <strong>File</strong> &gt; <strong>Automate</strong> &gt; <strong>Nintendo Export Texture Settings</strong>.<br />Set the various options in the <strong>Options</strong> dialog box and click <strong>OK</strong> to save the texture export option settings.<br />To close the dialog box without saving the option settings, click <strong>Cancel</strong>.<br />Although the export texture settings are saved under <strong>Keywords</strong> in file information by default, you can also change the save destination in the <a href="#Anchor_83956098_tex_config">config file</a>.<br />Click <strong>Export</strong> to export the texture files with the current settings. The texture export options settings are not saved at this time.<br />Click <strong>Export Selected Layer Comp</strong> to export texture files with the current settings for only the selected layer comp in the list. The texture export options settings are not saved at this time.<br /><strong>Data Size</strong> displays the texture's raw data size, height, width, and number of mipmap levels for the current export option settings. Data is tiled during binary conversion depending on the target platform, so the data size in the texture binary file may be larger than this value.<br /><strong>Linear</strong> displays information if there are RGBA components that have undergone conversion from sRGB to linear gamma. (The information displayed cannot be changed.)<br />Linear conversion is set for the format selection preset in the <a href="#Anchor_83956098_tex_config">config file</a>.</li>
  <li>To export to a texture file according to export options saved in the PSD file, select <strong>File</strong> &gt; <strong>Automate</strong> &gt; <strong>Nintendo Export Texture</strong>.<br />Even if you run <strong>Nintendo Export Texture</strong> this way, the <strong>Options</strong> dialog box will appear if export option settings have not been saved or if the texture files cannot be exported with the saved export option settings. Click <strong>OK</strong> to save the export option settings and export the texture files.</li>
  <li>Use <strong>File</strong> &gt; <strong>Automate</strong> &gt; <strong>Nintendo Export Selected Texture</strong> to export texture files according to the export settings saved in the PSD file only for the layer comps that have been selected in the <strong>Layer Comps</strong> panel. If more than one layer comp is selected, the output contains all of the selected layer comps. Only the selected layer comps are exported, rather than the applied layer comps.<br />If export texture settings have not been saved or if the texture files cannot be exported with the saved export texture settings, the functionality is the same as when using <strong>Nintendo Export Texture</strong>.</li>
  <li>To delete the texture export option settings saved in the PSD file and restore the default state, select <strong>File</strong> &gt; <strong>File Info</strong> and delete the content under <strong>Keywords</strong> or <strong>Supplemental Categories</strong>. (Delete the settings from the save destination selected in the <a href="#Anchor_83956098_tex_config">config file</a>.)</li>
</ul>
<h2 id="Anchor_83956098_h2_2">Option Settings</h2>
<p>
  <a name="Anchor_83956098_config"></a>
</p>
<ul>
  <li>
    <strong>Config</strong> <br />If there are multiple <a href="#Anchor_83956098_tex_config">config files</a>, this option specifies the name of the config file to use.<br />If you change this option, the following output option settings are overwritten by the config file settings (and other config settings are also applied).<ul><li><strong>Output ftx</strong></li><li><strong>Output TGA / PNG / DDS / EXR</strong></li><li><strong>Output Folder</strong></li><li><strong>Merge</strong></li><li><strong>Format</strong></li><li><strong>Component Selection</strong></li><li><strong>Hint</strong></li><li><strong>TGA / PNG / DDS / EXR Folder</strong></li></ul><p>Click <strong>OK</strong> in the dialog box to register the selected config name in Photoshop. The config name registered with Photoshop is selected by default when the texture export plug-in is executed on a PSD file for which no export texture settings have been saved.</p></li>
  <li>
    <strong>Layer Comp Export</strong> <br />Select to export texture files for each layer comp.<br />If cleared, one texture file will be exported for the current layer.<br />If there are no layer comps, this check box cannot be selected.<br />The following options <strong>can be set separately for each layer comp</strong>.<br />Select the layer comp you want to configure from the list and set each option.<ul><li><strong>Enable</strong></li><li><strong>Target Slice</strong></li><li><strong>Resize</strong></li><li><strong>Use Layer Mask for Alpha</strong></li><li>The filename if <strong>Output File Name</strong> is <strong>&lt;Input&gt;</strong></li><li><strong>Merge</strong></li><li><strong>Format</strong> (All Format)</li><li><strong>Weighted Compress</strong></li><li><strong>Dimension</strong></li><li><strong>Mipmap</strong></li><li><strong>Mip Gen Filter</strong></li><li><strong>Component Selection</strong></li><li><strong>Hint</strong></li><li><strong>Comment</strong></li></ul></li>
  <li>
    <strong>Enable</strong> <br />Select this option to export the layer comp selected in the <strong>Layer Comp Export</strong> list.<br />Layer comps that will not be exported are labeled with &lt;OFF&gt; in the list.<br /><strong>Enable Multi</strong> Click this button to display the dialog box that shows a list of layer comps and settings for export flags.<br />In the dialog box, you can change the export flag for each layer comp by selecting or clearing the check box.<br />Clicking the <strong>Enable Specified</strong> button enables only the layer comps whose names contain the entered string (regular expression) and these are case sensitive. For example, if you want to enable items that contain Alb or Nrm, enter <strong>Alb|Nrm</strong>.<br />Click <strong>OK</strong> to confirm the layer comps to export.</li>
  <li>
    <p>
      <strong>Slice Export</strong> <br />Select to export texture files for each slice.<br />The slice name is added to the name of the texture file.<br />If a name is not set in the slice option, the slice name becomes a number such as &quot;01&quot; or &quot;02.&quot;<br />Slices are not exported if the <strong>Slice Type</strong> is set to <strong>No Image</strong> in <strong>Slice Options</strong>.<br />In the list of slices to be exported, sequence of slices with default names are consolidated and displayed as a single row.<br /><br /><strong>Target Slice</strong> Click <strong>Target Slice</strong> to display a dialog box for selecting slices to export.<br />Select <strong>All</strong> to export all slices, <strong>User</strong> to export all user defined slices, and <strong>Selection</strong> to export specified slices. When <strong>Selection</strong> is selected, the slices to export are specified with check boxes. Clicking the <strong>Enable Specified</strong> button at this time enables only the slices whose names contain the entered string (regular expression).<br />Clicking the <strong>Search</strong> button or pressing ENTER in the text box displays slices whose names contain the entered string (regular expression) in a different color. This feature is for NintendoSDK 10.2.0 and later.<br />Click <strong>OK</strong> to confirm the slices to export.<br />The default value for the target slice to export can also be specified in the <a href="#Anchor_83956098_tex_config">config file</a> (available in NintendoSDK 10.2.0 and later.)</p>
  </li>
  <li>
    <strong>Zero-Based Index</strong> <br />Select to use zero-based indexing where the number in the slice name used in the texture filename is reduced by one.<br />If this option is selected, numbering is used for slice names (such as <code>00</code>, <code>01</code>, and so on) even if names have been set with the slice options.</li>
  <li>
    <strong>Resize</strong> <br />Specifies a change in the size of the texture height or width.<br />Select <strong>1/1</strong> to export at the same size as the PSD file, <strong>1/2</strong> to export at half the height and width, and <strong>1/4</strong> to export at one quarter the height and width.<br /><br /><br />To specify as a percentage, select <strong>percent</strong> and enter a percentage for the width and height.<br />To specify the number of pixels directly, select <strong>pixel</strong> and enter the number of pixels for the width and height. When <strong>Slice Export</strong> is selected, the number of pixels is for the entire image before splitting, not the number of pixels for each slice.<br />You can add more resize presets (fractions or real numbers) in the <a href="#Anchor_83956098_tex_config">config file</a>.<br />The width and height of the resized image are shown to the right of this option. When <strong>Slice Export</strong> is selected, the width and height of the entire (unsplit) image are shown.</li>
  <li>
    <strong>Resize Filter</strong> <br />Specify the filter when changing the size.<br />Select <strong>point</strong> for point sampling, <strong>linear</strong> for linear interpolation, <strong>cubic</strong> for standard cubic interpolation, <strong>cubic_smooth</strong> for smooth cubic interpolation, and <strong>cubic_sharp</strong> for sharp cubic interpolation.</li>
  <li>
    <strong>
      <a name="Anchor_83956098_Use_Layer_Mask_for_Alpha"></a>Use Layer Mask for Alpha</strong> <br />Select this option to export the layer mask as the alpha if the bottom-most visible layer (group) has a layer mask.<br />If selected, the RGB of pixels made transparent by the layer mask are exported as is, but with the following restrictions.<ul><li>Pixels in the bottom-most layer made transparent by other means, such as using the eraser tool, will not be transparent in the exported image.</li><li>Pixel opacity is not applied in the exported image if there are layers other than the bottom-most layer and the pixels on the other layers are outside the range of the layer mask for the lowermost layer.</li></ul><p>If this option is cleared and there is no alpha channel, after visible layers are merged, the pixel opacity is exported as an alpha value. However, the RGB components of pixels made transparent using a layer mask may become white.<br />If there already is an alpha channel, the layer mask is disabled and the existing alpha channel is exported even if this option has been selected.<br />If the lower-most layer (group) does not have a layer mask, the behavior is the same whether or not this option is selected.<br />The following examples show how to export the layer mask as the alpha:</p><table class="codeblock"><tbody><tr><td class="code"><div class="codeblock"><pre>[When the lowest layer has a layer mask]
Group 1 (layer mask)
&nbsp;&nbsp;+ Layer 0 (layer mask) ← Export as the alpha.
&nbsp;
[When the lowest layer does not have a layer mask, and the lower group has a layer mask]
+ Group 1 (layer mask) ← Export as the alpha.
&nbsp;&nbsp;+ Layer 1 (layer mask)
&nbsp;&nbsp;+ Layer 1
&nbsp;
[When neither the lowest layer nor the lowest group has a layer mask]
Group 1
&nbsp;&nbsp;+ Layer 1 (layer mask)
&nbsp;&nbsp;+ Layer 1
(The layer mask of Layer 0 is not exported as the alpha.)</pre></div></td></tr></tbody></table></li>
  <li>
    <strong>Unify Image Options</strong> <br />If enabled and an image-processing option (size or layer mask setting) is changed, the image processing option settings for the layer comp currently selected for <strong>Layer Comp Export</strong> are automatically copied to all other layer comps.<br />If switched from disabled to enabled, a confirmation dialog box appears. Image processing option settings are also copied if you click <strong>Yes</strong> in the confirmation dialog box.</li>
  <li>
    <p>
      <strong>Output File Name</strong> <br />Specify the name of the texture file. (Omit the filename extension.)<br />Non-ASCII characters (double-width characters and single-width katakana characters) cannot be used.<br />Directly enter the name to the right if <strong>&lt;Input&gt;</strong> is selected from the list. If left blank, export uses the name of the PSD/PSB/PSDC file or the layer comp (when Layer Comp Export is selected). If <strong>Slice Export</strong> is selected, &quot;<code>_Slice Name</code>&quot; is appended after the specified name.<br />If an element other than <strong>&lt;Input&gt;</strong> is selected, the PSD/PSB/PSDC filename is inserted in <strong>&lt;PSD&gt;</strong>, the layer comp name is inserted in <strong>&lt;LayerComp&gt;</strong>, and the slice name is inserted in <strong>&lt;Slice&gt;</strong>.</p>
    <div class="info_new">
      <div class="info_new_left">Info</div>
      <div class="info_new_right">
        <p>When <strong>&lt;Input&gt;</strong> is selected in the list, you can enter a string containing <strong>&lt;PSD&gt;</strong>, <strong>&lt;LayerComp&gt;</strong>, and <strong>&lt;Slice&gt;</strong> on the right. The PSD/PSB/PSDC filename, layer comp name, and slice name will be replaced for each.<br />In this case, &quot;<code>_Slice Name&quot;</code> is not automatically appended to the filename, even if <strong>Slice Export</strong> is selected.<br />When multiple slices exists that are export targets, note that if you do not specify a string containing <strong>&lt;Slice&gt;</strong>, they are overwritten by the last exported file.</p>
      </div>
    </div>
  </li>
  <li>
    <strong>Output ftx</strong> <br />Select this option to export intermediate files.</li>
  <li>
    <strong>Output TGA (Output PNG( (Output DDS) (Output EXR)</strong> <br />Select this option to export TGA, PNG, DDS, and EXR files.<br />The same name as the intermediate file is used as the TGA, PNG, DDS, and EXR filename.<br />If the image uses 8 bits per channel, it can be exported as a TGA or PNG file. (To specify the format, set <strong>ldr_image_file_type</strong> in <a href="#Anchor_83956098_tex_config">Config Files</a>.)<br />If the image uses 32 bits per channel, it can be exported as a DDS or EXR file. (To specify the format, set <strong>hdr_image_file_type</strong> in <a href="#Anchor_83956098_tex_config">Config Files</a>.)<br />By default TGA files are RLE-compressed before being exported, but you can also configure the plug-in to skip compression in the <a href="#Anchor_83956098_tex_config">config file</a>.<br />For DDS and EXR files, each RGB (A) component exports in 32 bit float format. (Mipmaps are not exported.) <br />If you only export TGA, PNG, DDS, or EXR files without exporting intermediate files, there are no restrictions on the width and height of images.</li>
  <li>
    <strong>Output Folder</strong> <br />Specify the output folder for intermediate files.<br />If an absolute path is not specified, the value is treated as a relative path from the folder containing the PSD file.<br />(If left blank, the files are exported to the folder containing the PSD file.) .<br />An environment variable can be used for the path. Environment variables are written as <strong>%NAME%</strong>.</li>
  <li>
    <strong>Merge</strong> <br />Select this option to merge files when existing intermediate files that have the same name are found in the folder specified for <strong>Output Folder</strong>.<br />When merged, textures are exported using the settings configured in the existing intermediate file (the settings for format, dimensions, with or without mipmap, mipmap generation filters, component selection, hints, linear conversion, and editing comments).<br />Existing intermediate file settings are displayed to the right of this option.<br />Select this option to change the format or other settings using 3DEditor or other tool.<br />If this option is selected and an existing intermediate file is not found, one will be exported under the settings specified in the <strong>Options</strong> dialog box.<br />Editing comments are merged only when the <strong>Comment</strong> option is empty.</li>
  <li>
    <strong>Format</strong> <br />Specifies the format.<br />The formats that can be selected can be set in the <a href="#Anchor_83956098_tex_config">config file</a>.<br />To select from among all formats supported by the current image, select <strong>All Format</strong>.<br />In the <code>unorm_4_4</code>, <code>unorm_8_8</code>, <code>unorm_bc5</code> or <code>unorm_eac_11_11</code> formats, if the hint information is anything other than <code>normal</code> and there is an alpha channel, the alpha channel is applied to the texture's G component.<br />For more information about the SNORM and SINT formats, see <a href="#Anchor_83956098_h3_1">Image Mode Considerations</a>.</li>
</ul>
<ul>
  <li>
    <a name="Anchor_83956098_weighted_compress"></a>
    <strong>Weighted Compress</strong> <br />Select to use perceptual weighting for RGB errors when compressing using bc1, bc2, bc3, etc1, or etc2.</li>
  <li>
    <strong>Dimension</strong> <br />Specifies the dimension.<br />Select <strong>1d</strong> for a one-dimensional texture, <strong>2d</strong> for a two-dimensional texture, and <strong>cube</strong> for a three-dimensional texture.<br /><strong>cube</strong> can only be selected when a <a href="../Pages/Page_239574379.html#Anchor_239574379_horizontal_cross">horizontal or vertical cross cube map</a> has been set.</li>
  <li>
    <strong>Mipmap</strong> <br />Select this check box if you are creating mipmaps.<br />Mipmaps are created up to the level where the height and width are 1.</li>
  <li>
    <strong>Mip Gen Filter</strong> <br />Specify the filter to use when creating mipmaps.<br />Select <strong>point</strong> for point sampling, <strong>linear</strong> for linear interpolation, <strong>cubic</strong> for standard cubic interpolation, or <strong>cubic_sharp</strong> for sharp cubic interpolation. (The <strong>cubic_sharp</strong> filter is available in NintendoSDK 9.0.0 and later.)<br />Depending on the image, the <code>cubic</code> value may yield sharper results than the <code>cubic_sharp</code> value.</li>
  <li>
    <strong>Component Selection</strong> <br />Select the color component corresponding to each RGBA channel from the list. (Specified in RGBA order, from the left.)<br />When <strong>All Format</strong> is set to OFF, this option is disabled and the preset component selection configured in the <a href="#Anchor_83956098_tex_config">config file</a> is applied.<br />If <strong>All Format</strong> is selected, the <a href="../Pages/Page_239574379.html#Anchor_239574379_comp_sel">default component selections for each format</a> are automatically applied when the format is modified. If you specify your own component selection, determine the format first and then change this option.</li>
  <li>
    <strong>Hint</strong> <br />Specifies hint information.<br />The hints that can be selected can be set in the <a href="#Anchor_83956098_tex_config">config file</a>.<br />You cannot change this option if hint information is specified in the config file for a preset format selection.<br />Hints specified in the config file are applied when a preset format is selected.<br />If the hint information is <code>normal</code> and the image is 8 bits per channel, the texture data for export is modified so that the z-component of the normal is equal to or greater than zero and has a length of 1.0. (The raw image data in the intermediate file itself remains unchanged.)<br />If <strong>All Format</strong> is selected and the ASTC format is specified, the <a href="../Pages/Page_239574379.html#Anchor_239574379_comp_sel">default component selections for each format</a> are applied automatically when the bit information is modified.</li>
  <li>
    <strong>Comment</strong> <br />Include comments about editing the intermediate file.<br />Quotation marks (&quot;) cannot be used.</li>
  <li>
    <strong>Unify Converter Options</strong> <br />If enabled and an option for the 3D texture converter is changed, the converter option settings for the layer comp currently selected for <strong>Layer Comp Export</strong> are automatically copied to all other layer comps.<br />If switched from disabled to enabled, a confirmation dialog box appears. 3DTextureConverter options are also copied if you click <strong>Yes</strong> in the confirmation message.</li>
  <li>
    <strong>TGA Folder (PNG Folder) (DDS Folder) (EXR Folder)</strong> <br />Specifies the output folder for TGA, PNG, DDS, and EXR files.<br />If the folder is not specified as an absolute path, the value is treated as a relative path from the folder containing the PSD file.<br />(If left blank, the files are exported to the folder containing the PSD file.)<br />An environment variable can be used for the path. Environment variables are written as <strong>%NAME%</strong>.</li>
  <li>
    <strong>Pre-Export Script</strong> <br />Specifies a script file to execute before export. (JavaScript can be entered directly.)<br />No script is executed if this option is left blank.<br />If an environment variable is used with the <strong>Output Folder</strong> or <strong>TGA, PNG, DDS, or EXR Folder</strong> option, this option applies the value in the environment variable. When setting the environment variable, use <code>SetEnv(name, value)</code> rather than <code>$.setenv(name, value)</code>.<br />For an example script, see the description under Post-Export Script.</li>
  <li>
    <p>
      <strong>
        <a name="Anchor_83956098_Post-Export_Script"></a>Post-Export Script</strong> <br />Specifies a script file to execute after export. (JavaScript can be entered directly.)<br />No script is executed if this option is left blank.<br />The script is not executed if an error occurs during export.<br /><br />By default, the script is executed after the texture file has been exported to the folders specified by the <strong>Output Folder</strong> and <strong>TGA, PNG, DDS, or EXR Folder</strong> options.<br />When <code>use_temp_folder_for_script</code> is set to <code>true</code> in the <a href="#Anchor_83956098_tex_config">config file</a>, the script can also be executed with the texture file exported to a temporary folder, and then the texture file moved to the original output folder. In this case, the texture file is not moved if the script generates an error. If it does not need to be moved to the original output folder, the texture file in the temporary folder can also be deleted by the script.<br /><br />Use the following command to call a Windows batch file.</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>CallBatFile(&quot;&lt;batch_file_path&gt;&quot;)</pre></div>
          </td>
        </tr>
      </tbody>
    </table>
    <p>Use a slash mark (/) or two backslashes (\\) as the delimiter between folders. If a full path is not used, a relative path from the folder containing the PSD file is used.<br />The following sample shows how to specify batch file arguments.</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>CallBatFile(&quot;convert_to_array.bat&quot;, &quot;arg1 arg2&quot;)</pre></div>
          </td>
        </tr>
      </tbody>
    </table>
    <p>If you use <code>CallBatFileMin</code> instead of <code>CallBatFile</code>, the Command Prompt window is minimized while the batch file executes. If you use <code>CallBatFileHide</code>, the Command Prompt window is hidden while the batch file executes.<br />You can get information from the following environment variables in the JavaScript specified in <strong>Pre-Export Script</strong> or <strong>Post-Export Script</strong> and in the called batch file.</p>
    <table class="wrapped">
      <colgroup> <col /> <col /> </colgroup>
      <thead>
        <tr>
          <th>Environment Variable Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_CONFIG</td>
          <td>Name of the config file to use.<br />Not defined if <code>&lt;Standard&gt;</code>.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_PSD_FILE_PATH</td>
          <td>The PSD/PSB/PSDC file path.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_LAYER_COMP_NAMES</td>
          <td>A space-delimited list of the layer comp names to export.<br />This cannot be defined when texture files are not exported for each layer comp.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_FILE_LAYER_COMP_NAMES</td>
          <td>
            <p>Character string listing layer comp names corresponding to each export file where the names are separated by a single-byte space.<br />The order corresponds with <code>NINTENDO_EXPORT_FTX_FILE_NAMES</code> and <code>NINTENDO_EXPORT_TGA_FILE_NAMES</code>.<br />This cannot be defined when texture files are not exported for each layer comp.</p>
          </td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_FTX_FOLDER</td>
          <td>The FTX file export folder path. A slash (/) is added to the end of the path.<br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TGA_FOLDER</td>
          <td>The TGA file export folder path. A slash (/) is added to the end of the path.<br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_PNG_FOLDER</td>
          <td> The PNG file export folder path. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_DDS_FOLDER</td>
          <td> The DDS file export folder path. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_EXR_FOLDER</td>
          <td> The EXR file export folder path. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TEMP_FTX_FOLDER</td>
          <td>
            <p>The path of the temporary FTX file output folder. A slash (/) is added to the end of the path.<br />This setting is not defined unless files are being exported.</p>
          </td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TEMP_TGA_FOLDER</td>
          <td>
            <p>The path of the temporary TGA file output folder. A slash (/) is added to the end of the path.<br />This setting is not defined unless files are being exported.</p>
          </td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TEMP_PNG_FOLDER</td>
          <td>The path of the temporary PNG file output folder. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TEMP_DDS_FOLDER</td>
          <td>The path of the temporary DDS file output folder. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TEMP_EXR_FOLDER</td>
          <td>The path of the temporary EXR file output folder. A slash (/) is added to the end of the path. <br />This setting is not defined unless files are being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_FTX_FILE_NAMES</td>
          <td>Represents a list of FTX filenames (including extensions) being exported. Each filename is separated by a space.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_FTX_FILE_COUNT</td>
          <td>The number of FTX files being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TGA_FILE_NAMES</td>
          <td>A string of the names of the TGA files (including the filename extensions) being exported, separated by spaces.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_TGA_FILE_COUNT</td>
          <td>The number of TGA files being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_PNG_FILE_NAMES</td>
          <td>A string of the names of the PNG files (including the filename extensions) being exported, separated by spaces.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_PNG_FILE_COUNT</td>
          <td>The number of PNG files being exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_DDS_FILE_NAMES</td>
          <td>A string of the names of the DDS files (including the filename extensions) being exported, separated by spaces.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_DDS_FILE_COUNT</td>
          <td>The number of DDS files to be exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_EXR_FILE_NAMES</td>
          <td>A string of the names of the EXR files (including the filename extensions) to be exported, separated by spaces.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_EXR_FILE_COUNT</td>
          <td>The number of EXR files to be exported.</td>
        </tr>
        <tr>
          <td class="nowrap">NINTENDO_EXPORT_IMAGE_FILE_EXTENSION</td>
          <td>The filename extension of the image files that can be exported with the current settings, excluding the dot (tga, png, dds, and exr). (Available in NintendoSDK 11.3.0 and later.)<br />Defined even when the export of image files is disabled.</td>
        </tr>
      </tbody>
    </table>
    <div class="info_new">
      <div class="info_new_left">Info</div>
      <div class="info_new_right">
        <p>Depending on the settings in the <a href="#Anchor_83956098_tex_config">config file</a>, the <strong>NINTENDO_EXPORT_TEMP_*</strong> environment variables may only be defined if the Post-Export Script is run after the files are exported to the temporary folder.</p>
      </div>
    </div>
    <div class="info_new">
      <div class="info_new_left">Info</div>
      <div class="info_new_right">
        <p>
          <strong>Pre-Export Script</strong> and <strong>Post-Export Script</strong> can get the currently active export option settings using the <code>GetActiveExportOptions()</code> function.<br />Normally we recommend using only information that can be obtained from the environment variables. But if you understand the details of the texture export plug-in, you can directly access the members of the output option settings.</p>
      </div>
    </div>
    <p>
      <br />
      <a name="Anchor_83956098_tex_config"></a>
    </p>
  </li>
</ul>
<h2 id="Anchor_83956098_h2_3">Config Files</h2>
<p>You can customize the following settings in the <code>ExportTexture.jsxinc</code> config file in the <code>%NINTENDO_SDK_ROOT%\Tools\Graphics\PhotoshopPlugins\Config</code> folder.</p>
<ul>
  <li>Root folder of the application project (<code>project_root</code>)</li>
  <li>Whether the intermediate texture file contains the pre-encoded original image data (<code>disable_original_image</code>)</li>
  <li>Whether to overwrite and save the PSD/PSB/PSDC file at time of export (<code>save_psd</code>)</li>
  <li>Whether to run Post-Export Script before overwriting the PSD/PSB/PSDC file (<code>execute_script_before_saving_psd</code>)<br />(Feature for NintendoSDK 11.3.0 and later)</li>
  <li>The output target slice when no output is set (<code>default_target_slice</code>)<br />(If no user defined slices exist, automatic slices become output targets.)</li>
  <li>The default universal option settings when there are no output option settings (<code>default_unify_image_options</code>, <code>default_unify_converter_options</code>)</li>
  <li>Default output option settings (<code>default_output_ftx</code>, <code>default_output_folder</code>, <code>default_merge</code>, and so on)</li>
  <li>Resizing selection presets (<code>resize_presets</code>)</li>
  <li>Default resizing when there are no output option settings (<code>default_resizes</code>)</li>
  <li>Flag for resize calculations in linear space (<code>resize_gamma</code>)</li>
  <li>Format selection presets (<code>format_presets</code>)</li>
  <li>Default format (and layer comp export flag) when there are no output option settings, because they are not valid (<code>default_formats</code>)</li>
  <li>Hint info selection presets (<code>hint_presets</code>)</li>
  <li>Enable or disable the <a href="#Anchor_83956098_weighted_compress">Weighted Compress</a> option (<code>enable_weighted_compress</code>)</li>
  <li>Enable or disable GPU encoding (<code>gpu_encoding</code>)</li>
  <li>Additional options to pass to 3D Texture Converter (<code>texture_converter_options</code>)<br />(Specified in the following kind of way: <code>--resize-single-color 4 --comment 'string with space'</code>.)<br />(Specified options take priority over the options that are passed by the Texture Export plug-in by default.)<br />(This feature is available in NintendoSDK 12.1.0 and later.)</li>
  <li>File type of the LDR image file (<code>ldr_image_file_type</code>)</li>
  <li>File type of the HDR image file (<code>hdr_image_file_type</code>)</li>
  <li>TGA file compression enabled or disabled (<code>tga_rle</code>)</li>
  <li>Specify script to execute before and after exporting (<code>pre_export_script</code>, <code>post_export_script</code>)</li>
  <li>Whether to execute Post-Export Script after files have been exported to the temporary folder (<code>use_temp_folder_for_script</code>)</li>
  <li>Error suppression (<code>error_wrong_file_name</code>)</li>
  <li>Where to save the option settings (<code>settings_storage</code>)</li>
  <li>The edit lock flag for option settings (<code>lock_*</code>)</li>
</ul>
<p>If <code>ExportTexture.jsxinc</code> does not exist when the Texture Export plug-in is executed or when data is saved by the FTX File Format plug-in, <code>%NINTENDO_SDK_ROOT%\Tools\Graphics\PhotoshopPlugins\Config\ExportTexture_Sample.jsxinc</code> is copied to <code>ExportTexture.jsxinc</code> and loaded.</p>
<p>For an example of the settings, see the comments inside <code>ExportTexture_Sample.jsxinc</code>.</p>
<p>If you want to use a config file in another folder, specify the path of that folder for the <strong>NINTENDO_PHOTOSHOP_CONFIG</strong> environment variable before using the plug-in.</p>
<p>You can also prepare multiple config files and use the <a href="#Anchor_83956098_config">Config</a> option to select which one to use.<br />Place config files, other than the standard <code>ExportTexture.jsxinc</code> file, in the same folder as <code>ExportTexture.jsxinc</code> with the filename formatted as <strong>ExportTexture_&lt;ConfigName&gt;.jsxinc</strong>.<br />If, for example, you have two config files named <code>ExportTexture.jsxinc</code> and <code>ExportTexture_Effect.jsxinc</code> and select <code>&lt;Standard&gt;</code> using the <strong>Config</strong> option, the settings in the file <code>ExportTexture.jsxinc</code> are applied. If you select <code>Effect</code>, the settings in the file <code>ExportTexture_Effect.jsxinc</code> are applied.<br />Non-ASCII characters (double-width characters or single-width katakana characters) cannot be used in config names. Config files with non-ASCII characters in the filename are ignored.</p>
<h2 id="Anchor_83956098_h2_4">Notes</h2>
<p>These notes pertain to using the Texture Export plug-in.</p>
<h3 id="Anchor_83956098_h3_1">Image Mode</h3>
<p>Files that have an image mode other than grayscale, index color, or RGB color, and files that use 16 bits per channel cannot be exported.<br />When an 8 bit/channel file is exported in SNORM or SINT format, the value of the number of 8 bit pixels (0 to 255) minus 128 is encoded (If the pixel count is 0, <code>-127</code> is encoded). This special treatment represents negative values using unsigned 8 bits.<br />When saving 32 bit-per-channel files in ASTC format, pixel values converted to real number types outside of the [0,1] range are clamped. </p>
<h3 id="Anchor_83956098_h3_2">Alpha Channel</h3>
<p>If there is more than one alpha channel, only the top-most alpha channel in the channel window is exported.</p>
<h3 id="Anchor_83956098_h3_3">Layers</h3>
<p>For images (or layer comps) that have only layers and no visible background, the opacity of pixels when all layers are combined is output as the alpha if there is no alpha channel. In such cases, the RGB components of transparent pixels (opacity of 0) are set with the average of the RGB components of adjacent non-transparent pixels (opacity greater than 0). (This same processing is used in <a href="../Pages/Page_239574379.html">3D Texture Converter</a> when <code>--adjust-transparent-rgb</code> is <code>true</code>.)<br />If an alpha channel exists, pixel opacity for the layer is not output as the alpha.</p>
<p>If you are using a layer mask, see the description for the <a href="#Anchor_83956098_Use_Layer_Mask_for_Alpha">Use Layer Mask for Alpha</a> option.</p>
<h3 id="Anchor_83956098_h3_4">Layer Comps</h3>
<p>Do not reuse layer comp names. If more than one layer comp has the same name, they will not work correctly.</p>
<h3 id="Anchor_83956098_h3_5">Color Settings</h3>
<p>In Photoshop, the brightness of the grayscale and alpha channel varies depending on the Photoshop color settings, but with the Texture Export plug-in, the K value is applied to the intensity (the alpha) regardless of the color settings.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>For an 8-bit channel, the intensity (alpha) is <strong>255</strong> if K = 0%, <strong>128</strong> if K = 50%, and <strong>0</strong> if K = 100%.</p>
  </div>
</div>
<p>Color setting information is not saved in texture intermediate files.<br />If the color settings are configured as follows, the brightness of the grayscale and alpha channel in Photoshop is almost directly proportional to the K value.</p>
<p>Workspace &gt; <strong>RGB</strong>: <strong>sRGB IEC61966-2.1</strong><br />Workspace &gt; <strong>Gray</strong>: <strong>sGray</strong><br />Conversion Options &gt; <strong>Use Dither</strong>: Clear the check box.</p>
<h2 id="Anchor_83956098_h2_5">Exporting by Batch File</h2>
<p>You can export texture intermediate files and TGA, PNG, DDS, and EXR files from the specified PSD/DDS/EXR file by using a Windows batch file.<br />In the following description, PSD and PSB files are collectively referred to as &quot;PSD files.&quot;</p>
<p>To export by a batch file, use <code>NintendoBatchExportTexture.bat</code> in <code>%NINTENDO_SDK_ROOT%\Tools\Graphics\PhotoshopPlugins\Batch</code>.</p>
<p>To convert PSD files to texture intermediate files (TGA, PNG, DDS, and EXR files), drag the PSD files or a folder that contains the PSD files to <code>NintendoBatchExportTexture.bat</code>, or to a shortcut to the batch file.<br />Nothing is exported if export texture settings have not been saved in the PSD file. (A warning message is displayed.) <br />To convert all PSD files contained in the folder and its subfolders, drag the folder.<br />To use this feature, register a shortcut to <code>NintendoBatchExportTexture.bat</code> to the Windows <strong>Send to</strong> menu.</p>
<p>This section describes how to use <code>NintendoBatchExportTexture.bat</code> from a user-written batch file.</p>
<p>Write the batch file using the following format when exporting from a specified PSD file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>call NintendoBatchExportTexture.bat &quot;PSDFilePath&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can specify numerous PSD file paths by separating them using spaces.</p>
<p>Write the batch file using the following format. Perform this when exporting from all the PSD files in a specified folder and its subfolders.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>call NintendoBatchExportTexture.bat &quot;folder_path&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>You can specify multiple folder paths by separating them by using spaces.</p>
<p>You can also do this by creating a text file that lists the paths to the PSD files, as in the following sample.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre># Files located in the text file folder
image1.psd
image2.psd
# File located in a subfolder of the text file folder
sub\image3.psd
# Absolute path specification
C:\data\image4.psd</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>List one path per line.<br />If the path is not an absolute path, it is treated as a relative path from the folder containing the text file.<br /># Lines that start with the number sign (#) are comments.</p>
<p>Code batch files in the following format when exporting from PSD files listed in a text file.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>call NintendoBatchExportTexture.bat &quot;@TextFilePath&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>If more than one version of Photoshop is installed on the PC, the latest version of Photoshop is used by default for exporting files.<br />If you want to specify the version of Photoshop to use, set the <code>NINTENDO_PHOTOSHOP_APP_VER</code> environment variable to the name of the version to use (CC2018, CC2019, 2020, 2021, or 2022), and then run <code>NintendoBatchExportTexture.bat</code>.<br />If Photoshop is already running when you call <code>NintendoBatchExportTexture.bat</code>, the files are exported by that running version of Photoshop.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>set NINTENDO_PHOTOSHOP_APP_VER=2020
call NintendoBatchExportTexture.bat &quot;PSDFilePath&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956098_h2_6">Using Plug-Ins From Scripts</h2>
<p>You can use the texture export plug-in from within a script by creating a JSX file as in the following sample.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$.evalFile(File($.getenv(&quot;NINTENDO_SDK_ROOT&quot;) + &quot;/Tools/Graphics/PhotoshopPlugins/NintendoPhotoshopScripts/NintendoExportTextureFunc.jsxinc&quot;));
var opts = GetExportOptions(); // Get export option settings.
if (opts)
{
&nbsp;&nbsp;&nbsp;&nbsp;//
&nbsp;&nbsp;&nbsp;&nbsp;// If you have pre-export processing you want to perform, include it here.
&nbsp;&nbsp;&nbsp;&nbsp;//
&nbsp;&nbsp;&nbsp;&nbsp;if (ExportTextureDirect(opts)) // Exports textures.
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;//
&nbsp;&nbsp;&nbsp;&nbsp;// If you have post-export process you want to perform, include it here.
&nbsp;&nbsp;&nbsp;&nbsp;//
&nbsp;&nbsp;&nbsp;&nbsp;}
}</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>The <strong>GetExportOptions()</strong> function gets the export option settings from the active PSD/PSB/PSDC file. The function returns <code>null</code> if there are no export option settings.</p>
<p>The <code>ExportTextureDirect()</code> function exports texture intermediate files and TGA, PNG, DDS, and EXR files from the active PSD/PSB/PSDC file. The function returns <code>true</code> if export succeeds.</p>
<p>After you have called the <code>GetExportOptions()</code> function or the <code>ExportTextureDirect()</code> function, you can get information from any of the described environment variables using the <a href="#Anchor_83956098_Post-Export_Script">Post-Export Script</a>. After you have called the <code>ExportTextureDirect()</code> function, the environment variable  <code>NINTENDO_EXPORT_SUCCEEDED</code> stores <code>1</code> if export was successful, or <code>0</code> if it failed.</p>
<p>Do not call the <code>GetExportOptions()</code> and <code>ExportTextureDirect()</code> functions from inside the scripts specified for Pre-Export Script and Post-Export Script.</p>
<h2 id="Anchor_83956098_h2_7">User Custom UI</h2>
<p>To add a user custom UI to the options dialog box, place a file named <code>UserCustomExportUi.jsxinc</code> in the config folder. (This feature is available in NintendoSDK 11.3.0 and later.)<br />For more information about user custom UIs, see <a href="../Pages/Page_953605606.html">here</a>.</p>
<h2 id="Anchor_83956098_h2_8">Related Links</h2>
<p>
  <a href="../Pages/Page_83956012.html">Photoshop Plug-In</a>
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
</body>
</html>
