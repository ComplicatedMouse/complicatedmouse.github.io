<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Manual | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Manual -->
<div class="pagetitle" id="PageId_107342563">Manual</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_107342563_h1_1">Overview</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107342563_h2_1">Packages</a>
      </li>
      <li>
        <a href="#Anchor_107342563_h2_2">Supported Platforms</a>
      </li>
      <li>
        <a href="#Anchor_107342563_h2_3">Related Items</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107342563_h1_2">Debugger Features</a>
    </li>
    <ul>
      <ul>
        <li>
          <a href="#Anchor_107342563_h3_1">Features Associated With NX-Specific Behavior</a>
        </li>
        <ul>
          <li>
            <a href="#Anchor_107342563_h4_1">Building Assembly Files</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_2">Compiled Headers</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_3">Debugging Information File (NSS) Cache</a>
          </li>
        </ul>
        <li>
          <a href="#Anchor_107342563_h3_2">Features Specific to NX</a>
        </li>
        <ul>
          <li>
            <a href="#Anchor_107342563_h4_4">Individual Processing of the Source File</a>
          </li>
          <ul>
            <li>
              <a href="#Anchor_107342563_h5_1">Perform Preprocessing</a>
            </li>
            <li>
              <a href="#Anchor_107342563_h5_2">Perform Static Analysis</a>
            </li>
            <li>
              <a href="#Anchor_107342563_h5_3">Disassembly</a>
            </li>
          </ul>
          <li>
            <a href="#Anchor_107342563_h4_5">Displaying Pseudo-Stacks for Inline Frames</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_6">Specify Execution Target</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_7">New Macros That Can Be Used in Solutions</a>
          </li>
          <ul>
            <li>
              <a href="#Anchor_107342563_h5_4">NXTargetSerialNumber</a>
            </li>
          </ul>
          <li>
            <a href="#Anchor_107342563_h4_8">NX Register Window</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_9">NX Threads Window</a>
          </li>
          <li>
            <a href="#Anchor_107342563_h4_10">Dying Messages Window</a>
          </li>
        </ul>
        <li>
          <a href="#Anchor_107342563_h3_3">Unsupported Features</a>
        </li>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_107342563_h1_3">Debugging information</a>
    </li>
    <li>
      <a href="#Anchor_107342563_h1_4">Compatibility</a>
    </li>
    <li>
      <a href="#Anchor_107342563_h1_5">Installing, Uninstalling, and Reinstalling</a>
    </li>
    <ul>
      <ul>
        <ul>
          <ul>
            <li>
              <a href="#Anchor_107342563_h5_5">Advance Preparations</a>
            </li>
            <li>
              <a href="#Anchor_107342563_h5_6">Uninstalling</a>
            </li>
            <li>
              <a href="#Anchor_107342563_h5_7">Installing</a>
            </li>
            <li>
              <a href="#Anchor_107342563_h5_8">Reinstalling</a>
            </li>
          </ul>
        </ul>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_107342563_h1_6">Debugging for Multiple Programs</a>
    </li>
    <li>
      <a href="#Anchor_107342563_h1_7">Debugging Optimized Code</a>
    </li>
    <li>
      <a href="#Anchor_107342563_h1_8">Limitations</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107342563_h2_4">Using Break All (CTRL+ALT+BREAK) during debugging can result in invalid variables.</a>
      </li>
      <li>
        <a href="#Anchor_107342563_h2_5">When calling nn::diag::IsDebuggerAttached() immediately after attaching, a result of not being attached is returned.</a>
      </li>
      <li>
        <a href="#Anchor_107342563_h2_6">On some screens, the application cannot be started from the HOME Menu using VSI or RunOnTarget.</a>
      </li>
      <li>
        <a href="#Anchor_107342563_h2_7">Options cannot be opened for an application started by VSI or RunOnTarget.</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_107342563_h1_1">Overview</h1>
<p>NX VSI is Visual Studio Integration (VSI) for the development of NX applications.</p>
<p>After you have installed NX VSI, you can use Visual Studio to build and debug NX applications.</p>
<p>Many common debugging features are supported, including breakpoints, stepwise execution, and watching variables.</p>
<p>
  <br />
</p>
<p>This support enables programs for the NX platform to be built for Windows, and to run and be debugged on Windows.</p>
<p>You can easily switch between an NX build and the Windows build from a list box in Visual Studio. In effect, you do not need to rewrite the game program.</p>
<h2 id="Anchor_107342563_h2_1">Packages</h2>
<p>NX VSI is provided as part of the NintendoSDK NX Add-On.</p>
<h2 id="Anchor_107342563_h2_2">Supported Platforms</h2>
<p>Supports Windows and NX.</p>
<h2 id="Anchor_107342563_h2_3">Related Items</h2>
<p>To run and debug NX applications using VSI, you first must start Target Manager.</p>
<p>For more information, see <a href="../Pages/Page_93359711.html">Controlling the Development Hardware &gt; Target Manager</a></p>
<h1 id="Anchor_107342563_h1_2">Debugger Features</h1>
<p>Most Visual Studio debugging features that can be used for debugging Windows applications are also supported for NX applications.</p>
<h3 id="Anchor_107342563_h3_1">Features Associated With NX-Specific Behavior</h3>
<h4 id="Anchor_107342563_h4_1">Building Assembly Files</h4>
<ul>
  <li>In VSI for NX, assembly files can be compiled and linked simply by adding them to the project.</li>
</ul>
<h4 id="Anchor_107342563_h4_2">Compiled Headers</h4>
<ul>
  <li>In VSI for NX, compiled headers are included automatically.</li>
</ul>
<h4 id="Anchor_107342563_h4_3">
  <a name="Anchor_107342563_NSSCache"></a>Debugging Information File (NSS) Cache</h4>
<ul>
  <li>When NSS is loaded, the path is cached in the Target Manager that is running. When you search for an NSS that occurs later, this cached path is also a search target. To delete the cache, you must exit the Target Manager.</li>
  <li>Related information: <a href="../Pages/Page_279139350.html">VSI / Using Symbol Server</a></li>
</ul>
<h3 id="Anchor_107342563_h3_2">Features Specific to NX</h3>
<h4 id="Anchor_107342563_h4_4">Individual Processing of the Source File</h4>
<p>By right-clicking the source code in the source code explorer, the following operations can be performed for each source file.</p>
<h5 id="Anchor_107342563_h5_1">Perform Preprocessing</h5>
<p>Run the preprocessor, and display the preprocessing results.</p>
<h5 id="Anchor_107342563_h5_2">Perform Static Analysis</h5>
<p>Perform static analysis, and detect and report on any latent bugs.<br />For analysis, use the <code>clang --analyze</code> command.</p>
<h5 id="Anchor_107342563_h5_3">Disassembly</h5>
<p>Compile and display the disassembly of those results.</p>
<h4 id="Anchor_107342563_h4_5">Displaying Pseudo-Stacks for Inline Frames</h4>
<p>While debugging, you can display an inline function as a pseudo-stack by selecting <strong>Call History</strong>, and selecting the <strong>Display Inline Frame</strong> check box on the shortcut menu.</p>
<h4 id="Anchor_107342563_h4_6">
  <a name="Anchor_107342563_SpecifyExecutionTarget"></a>Specify Execution Target</h4>
<p>The target for running the program from VSI can be selected using the <strong>NX Targets</strong> button on the VSI toolbar.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107342563/360647943.png" height="156" class="embedded-image" />
  </span>
</p>
<h4 id="Anchor_107342563_h4_7">New Macros That Can Be Used in Solutions</h4>
<h5 id="Anchor_107342563_h5_4">NXTargetSerialNumber</h5>
<p>The execution target serial number can be obtained by specifying <code>$(NXTargetSerialNumber)</code> in the project properties.</p>
<p>For more information about specifying a target execution destination, see <a href="#Anchor_107342563_h4_6">Specify Execution Target</a>.</p>
<h4 id="Anchor_107342563_h4_8">NX Register Window</h4>
<p>During debugging, you can display this window by selecting <strong>Debug</strong> &gt; <strong>Window</strong> &gt; <strong>NX Register</strong>.<br />The differences between this window and the original register window are as follows.</p>
<ul>
  <li>Adjustments to indentation</li>
  <li>Copies for each variable</li>
</ul>
<h4 id="Anchor_107342563_h4_9">NX Threads Window</h4>
<p>During debugging, you can display this window by selecting <strong>Debug</strong> &gt; <strong>Window</strong> &gt; <strong>NX Threads</strong>.<br />The differences between this window and the original window are as follows.</p>
<ul>
  <li>The current core and priority core are displayed<ul><li>These cores were both shown in the name column in the original, but because they are now displayed in individual columns, they can be sorted and the like.</li></ul></li>
  <li>Status<ul><li>Displays the thread state, such as Stopped or Running.</li></ul></li>
</ul>
<h4 id="Anchor_107342563_h4_10">Dying Messages Window</h4>
<p>During debugging, you can display this window by selecting <strong>Debug</strong> &gt; <strong>Window</strong> &gt; <strong>Dying Messages</strong>.</p>
<p>Using this window makes it possible to display and copy the memory region specified by the <strong><span class="ApiLink_nn__os__SetDyingMessageRegion">nn::os::SetDyingMessageRegion</span>()</strong> function.</p>
<p>This window is also available during <code>nxdmp</code> debugging.</p>
<h3 id="Anchor_107342563_h3_3">Unsupported Features</h3>
<p>Includes several features for which future support is planned.</p>
<ul>
  <li>Expression evaluation in the Watch window</li>
  <li>Editing register values</li>
  <li>Call History window &gt; shortcut menu &gt; <strong>Unwind to this frame</strong></li>
  <li>Parallel Stacks window &gt; <strong>Stack Display</strong> drop-down list &gt; <strong>Tasks</strong></li>
  <li>Parallel Stacks window &gt; shortcut menu &gt; <strong>Move to Tasks</strong></li>
</ul>
<h1 id="Anchor_107342563_h1_3">Debugging information</h1>
<p>NX application debugging information is stored in NSS files.</p>
<p>When debugging NX applications using VSI, search for the NSS files in the following directories.</p>
<ul>
  <li>Program export directories (NSPD directories and directories to which NCA files are exported)</li>
  <li>Library directories</li>
  <li>Cached path (<a href="#Anchor_107342563_NSSCache">Debug Information File (NSS) Cache</a>)</li>
</ul>
<p>The <code>Unable to find debug data for (<em>module name</em>).</code> log entry is exported to Target Manager when the required NSS file is not found within these directories.</p>
<h1 id="Anchor_107342563_h1_4">Compatibility</h1>
<p>The VSI version must match the version of Target Manager.<br />For more information about compatibility between Target Manager and the firmware and other tools, see the Compatibility section of <a href="../Pages/Page_93359711.html#Anchor_93359711_h1_6">Target Manager</a>.</p>
<h1 id="Anchor_107342563_h1_5">
  <a name="Anchor_107342563_InstallUninstallReinstall"></a>Installing, Uninstalling, and Reinstalling</h1>
<p>VSI is linked to Target Manager, so if you are going to install or reinstall VSI you must also install or reinstall Target Manager.</p>
<p>This section describes the procedure.</p>
<h5 id="Anchor_107342563_h5_5">Advance Preparations</h5>
<p>Before beginning, completely exit Target Manager and Visual Studio.</p>
<h5 id="Anchor_107342563_h5_6">Uninstalling</h5>
<ol>
  <li>Run <code>NintendoSDK\Installers\Vsi\Uninstall.bat</code> from the NintendoSDK corresponding to the currently installed VSI.</li>
  <li>Run <code>NintendoSDK\Installers\TargetManager\Uninstall.bat</code> from the NintendoSDK corresponding to the currently installed Target Manager.</li>
</ol>
<p>
  <br />
</p>
<div class="warn_new">
  <div class="warn_new_left">Warning</div>
  <div class="warn_new_right">
    <p>Note that this is not an indicator to execute the <code>Uninstall.bat</code> file that is included in the Nintendo SDK that is to be installed.</p>
  </div>
</div>
<p>For more information about the correspondence between Target Manager and NX Add-On versions, see <a href="../Pages/Page_93359711.html#Anchor_93359711_h2_26">Controlling the Development Hardware &gt; Target Manager - Target Manager Versions in Each NX Add-On Version</a>.</p>
<h5 id="Anchor_107342563_h5_7">Installing</h5>
<ol>
  <li>Run <code>NintendoSDK\Installers\TargetManager\Install.bat</code> from the NintendoSDK containing the instance of Target Manager you want to install.</li>
  <li>Run <code>NintendoSDK\Installers\Vsi\Install.bat</code> from the NintendoSDK containing the instance of VSI you want to install.</li>
</ol>
<h5 id="Anchor_107342563_h5_8">Reinstalling</h5>
<p>Use the procedures to uninstall and install.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>There was a problem where the files directly under the drive directory would be deleted if specific versions (4.3.4~5.2.2.22477_Hotfix1) of VSI 2015 were installed and then removed.</p>
    <p>If the conditions for encountering this problem are met, a message appears and the process aborts when executing these patch files.</p>
    <p>Perform the appropriate handling and try again.</p>
  </div>
</div>
<p>
  <br />
</p>
<h1 id="Anchor_107342563_h1_6">Debugging for Multiple Programs</h1>
<p>A single VSI instance does not support simultaneous debugging for multiple programs.<br />To debug multiple programs simultaneously, you must start Visual Studio for each and debug them that way.<br />There is no upper limit of the number of instances that can debug simultaneously, but the PC resources engender a substantial limitation.<br />Because a maximum of two programs can be tested at the same time, attempts to simultaneously debug more than that number can result in bugs.</p>
<h1 id="Anchor_107342563_h1_7">Debugging Optimized Code</h1>
<p>Despite our commitment to enabling accurate debugging, optimization can sometimes lead to unintended debugging behavior.<br />The following problems have been identified and being fixed, but please do not hesitate to report any other incorrect debugging behaviors you discover.</p>
<ul>
  <li>Stopping at breakpoints does not always occur at the expected time.</li>
  <li>Local variables in the same scope sometimes are not visible.</li>
</ul>
<h1 id="Anchor_107342563_h1_8">Limitations</h1>
<p>This section describes the current limitations of the tool. Unlike the unsupported features and known bugs, these items will not be fixed in a future release.</p>
<h2 id="Anchor_107342563_h2_4">Using Break All (CTRL+ALT+BREAK) during debugging can result in invalid variables.</h2>
<p>With the exception of PC and SP, the register values are not assured when you use Break All to pause debugging. As a result, values may not be displayed correctly for variables optimized by updating just the registers.<br />To stop the game program in a specific state, use breakpoints or assertions.<br />In some cases, you can restore the correct states by stepping through the code.</p>
<h2 id="Anchor_107342563_h2_5">When calling nn::diag::IsDebuggerAttached() immediately after attaching, a result of not being attached is returned.</h2>
<p>The API returns the state at the time of calling <code><span class="ApiLink_nn__diag__IsDebuggerAttached">nn::diag::IsDebuggerAttached</span>()</code>. When calling this API immediately after attaching, returning a result in the state of not being attached is possible for a brief time.</p>
<h2 id="Anchor_107342563_h2_6">On some screens, the application cannot be started from the HOME Menu using VSI or RunOnTarget.</h2>
<p>When you start an application from the HOME Menu using VSI or RunOnTarget, the application starts in a special state. In some screens this feature cannot be used and processing stops. The following screens are known to stop responding in this situation.</p>
<ul>
  <li>Screen for selecting accounts before starting the application</li>
  <li>Screen that displays the dialog box that occurs prior to starting the application</li>
</ul>
<p>We recommend creating an NSP file and installing it or burning it to a game card when it is time for the final check of the behavior of going back and forth between the application and the HOME Menu.</p>
<h2 id="Anchor_107342563_h2_7">Options cannot be opened for an application started by VSI or RunOnTarget.</h2>
<p>When you start an application from the HOME Menu using VSI or RunOnTarget, the application starts in a special state and options cannot be opened for the application.</p>
<p>To open the options, either install the application or burn it to a game card.</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__os__SetDyingMessageRegion', '../../../Api/HtmlNX/namespacenn_1_1os.html#a25125eea675c69bc6912e1140d4df148' )
SetUrl( 'ApiLink_nn__diag__IsDebuggerAttached', '../../../Api/HtmlNX/namespacenn_1_1diag.html#a11289e5a5c20b19933ea319a220988b3' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
