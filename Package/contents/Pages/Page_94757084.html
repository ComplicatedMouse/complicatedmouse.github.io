<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Changes to NintendoWare Graphics | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Changes to NintendoWare Graphics -->
<div class="pagetitle" id="PageId_94757084">Changes to NintendoWare Graphics</div>
<div class="text_separate">
<p>This section describes the changes made to NintendoWare Graphics in NintendoSDK 0.7.0. <br />NintendoWare Graphics consists of the following modules.</p>
<ul>
  <li>
    <span class="ApiLink_nn__g3d">nn::g3d</span>
  </li>
  <li>
    <span class="ApiLink_nn__ui2d">nn::ui2d</span>
  </li>
  <li>
    <span class="ApiLink_nn__font">nn::font</span>
  </li>
  <li>
    <span class="ApiLink_nn__vfx">nn::vfx</span>
  </li>
</ul>
<p> </p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Specifications changed for handling descriptor pools in NintendoSDK 0.8.0. The code samples presented on this page were modified to conform to the NintendoSDK 0.8.0 specifications.</p>
    <p>For more information about changes to the descriptor pool specifications, see <a href="../Pages/Page_99804825.html">Changes to NintendoWare Graphics 0.8.0</a>.</p>
  </div>
</div>
<h2 id="Anchor_94757084_h2_1">Contents</h2>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_94757084_h2_1">Contents</a>
    </li>
    <li>
      <a href="#Anchor_94757084_h2_2">Namespace Migration</a>
    </li>
    <li>
      <a href="#Anchor_94757084_h2_3">Change in the Low-Layer Graphics Library</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_94757084_h3_1">Graphics Devices</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_2">Graphics Commands</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_3">Descriptor Pool</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_4">Texture Resources</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_5">Implementations Using the nn::gfx Library</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_94757084_h2_4">Tools</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_94757084_h3_6">3DEditor</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_7">LayoutEditor</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_8">EffectMaker</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_94757084_h2_5">Viewers</a>
    </li>
    <li>
      <a href="#Anchor_94757084_h2_6">Renamed APIs and Member Functions</a>
    </li>
    <li>
      <a href="#Anchor_94757084_h2_7">Changes to the Various Modules</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_94757084_h3_9">Changes to nn::g3d</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_10">Changes to nn::vfx</a>
      </li>
      <li>
        <a href="#Anchor_94757084_h3_11">Changes to nn::ui2d and nn::font</a>
      </li>
    </ul>
  </ul>
</p>
<p> </p>
<h2 id="Anchor_94757084_h2_2">Namespace Migration</h2>
<p>In NintendoSDK 0.7.0, the earlier NintendoWare Graphics modules were migrated from the <code>nw</code> namespace to the <code>nn</code> namespace.<br />Along with this namespace migration, the namespace names were reviewed and integrated.</p>
<table class="table">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th class="highlight-blue">New Graphics Module</th>
      <th class="highlight-blue">Earlier Graphics Module</th>
      <th class="highlight-blue"> </th>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__g3d">nn::g3d</span>
      </td>
      <td style="text-align: left;">nw::g3d</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__g3d__viewer">nn::g3d::viewer</span>
      </td>
      <td>nw::g3d::edit</td>
      <td>Not included in 0.7.0. Will be included in a future version.</td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__ui2d">nn::ui2d</span>
      </td>
      <td style="text-align: left;">nw::lyt and nw::ctrl</td>
      <td>
        <code>nw::lyt</code> and <code>nw::ctrl</code> have been integrated into <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>.</td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__ui2d__viewer">nn::ui2d::viewer</span>
      </td>
      <td>nw::vwrlyt</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__font">nn::font</span>
      </td>
      <td>nw::sys::font and nw::scfont</td>
      <td>
        <code>nw::sys::font</code> and <code>nw::scfont</code> have been integrated into <code><span class="ApiLink_nn__font">nn::font</span></code>.</td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__fontll">nn::fontll</span>
      </td>
      <td>scffnd</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__vfx">nn::vfx</span>
      </td>
      <td style="text-align: left;">nw::eft</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: left;">
        <span class="ApiLink_nn__vfx__viewer">nn::vfx::viewer</span>
      </td>
      <td style="text-align: left;">nw::eftvw</td>
      <td> </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_94757084_h2_3">Change in the Low-Layer Graphics Library</h2>
<p>Previously, the NintendoWare Graphics modules (<code><span class="ApiLink_nn__g3d">nn::g3d</span></code>, <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>, and <code><span class="ApiLink_nn__vfx">nn::vfx</span></code>) used OpenGL as the low-layer graphics library. This was changed in NintendoSDK 0.7.0 to use the <code><span class="ApiLink_nn__gfx">nn::gfx</span></code> library.</p>
<p>With this change, the following structure is used.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_94757084/94707133.png" width="500" class="embedded-image" />
  </span>
</p>
<p>With this change, the various modules were migrated from the earlier <code>nw</code> namespace and the specifications were changed in ways requiring users to rewrite their code.</p>
<p> </p>
<h3 id="Anchor_94757084_h3_1">Graphics Devices</h3>
<p>The <code><span class="ApiLink_nn__gfx">nn::gfx</span></code> library requires an <code><span class="ApiLink_nn__gfx__Device">nn::gfx::Device</span></code> object for initializing textures, samplers, and other graphics objects. The specification has been changed accordingly in the <code><span class="ApiLink_nn__g3d">nn::g3d</span></code>, <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>, and <code><span class="ApiLink_nn__vfx">nn::vfx</span></code> runtimes so that member functions that initialize resources request an <code><span class="ApiLink_nn__gfx__Device">nn::gfx::Device</span></code> object when the system is initialized.</p>
<p> </p>
<h3 id="Anchor_94757084_h3_2">Graphics Commands</h3>
<p>In the <code><span class="ApiLink_nn__gfx">nn::gfx</span></code> library specification, graphics commands are issued via the <code><span class="ApiLink_nn__gfx__Command">nn::gfx::Command</span></code> class, so the API specifications have been changed so that the <code><span class="ApiLink_nn__g3d">nn::g3d</span></code>, <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>, and <code><span class="ApiLink_nn__vfx">nn::vfx</span></code> member functions that issue draw commands now take the <code><span class="ApiLink_nn__gfx__Command">nn::gfx::Command</span></code> class as an argument.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16</td>
      <td class="code">
        <div class="codeblock"><pre><span class="c1">// Initializes the command buffer.
</span><span class="nn">nn::gfx::</span><span class="n">CommandBuffer</span> <span class="n">gfxCommandBuffer</span> <span class="p">;</span>
<span class="n">gfxCommandBuffer</span><span class="p">.</span><span class="n">Initialize</span><span class="p">(</span> <span class="p">...</span> <span class="p">);</span>

<span class="n">gfxCommandBuffer</span><span class="p">.</span><span class="n">Begin</span><span class="p">();</span>
<span class="p">{</span>
&nbsp;&nbsp;<span class="c1">// Issue the nn::vfx module draw command.
</span>&nbsp;&nbsp;<span class="n">vfxSystem</span><span class="o">-&gt;</span><span class="n">SwapBuffer</span><span class="p">();</span>
&nbsp;&nbsp;<span class="n">vfxSystem</span><span class="o">-&gt;</span><span class="n">SetViewParam</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">view</span> <span class="p">);</span>
&nbsp;&nbsp;<span class="c1">// Passes the nn::gfx::CommandBuffer object issuing the draw command to the parameter.
</span>&nbsp;&nbsp;<span class="n">vfxSystem</span><span class="o">-&gt;</span><span class="n">Draw</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">gfxCommandBuffer</span> <span class="p">);</span>
<span class="p">}</span>
<span class="n">gfxCommandBuffer</span><span class="p">.</span><span class="n">End</span><span class="p">();</span>

<span class="c1">// Executes the written graphics commands.
</span><span class="n">gfxQueue</span><span class="p">.</span><span class="n">ExecuteCommand</span><span class="p">(</span> <span class="n">g_pCurrentCommandBuffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_Fence</span> <span class="p">);</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p> </p>
<h3 id="Anchor_94757084_h3_3">Descriptor Pool</h3>
<p>Texture objects and sampler objects can be used after registering them to the descriptor pool and obtaining a descriptor slot. Only one descriptor pool is prepared for the application. When working with objects generated in the <code>font</code>, <code>ui2d</code>, and <code>vfx</code> runtimes, you must use a callback function to notify the application about the objects, register them to the descriptor pool in the application, and get a descriptor slot.</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_94757084/94709916.png" width="500" class="embedded-image" />
  </span>
</p>
<p>When you use a descriptor pool, the number of textures and samplers that can be used for rendering a single object increases enormously. But there is a limit to the number of graphics objects that can be registered to the descriptor pool. In addition, only one descriptor pool can be prepared for NintendoWare, the application, and the operating system.</p>
<table class="table">
  <tbody>
    <tr>
      <td>Texture objects</td>
      <td>2^20  (1048576 objects)</td>
    </tr>
    <tr>
      <td>Sampler objects</td>
      <td>2^12 (4096 objects)</td>
    </tr>
  </tbody>
</table>
<p class="auto-cursor-target">
  <br />
</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19<br />
20<br />
21<br />
22<br />
23<br />
24<br />
25<br />
26<br />
27<br />
28<br />
29<br />
30<br />
31<br />
32<br />
33<br />
34<br />
35<br />
36<br />
37<br />
38<br />
39<br />
40<br />
41<br />
42<br />
43<br />
44<br />
45<br />
46<br />
47<br />
48<br />
49<br />
50<br />
51<br />
52<br />
53<br />
54</td>
      <td class="code">
        <div class="codeblock"><pre><span class="c1">// Example of a callback function for registering texture objects to the descriptor pool.
</span><span class="kt">bool</span> <span class="nf">AllocateSlotForTexture</span><span class="p">(</span> <span class="nn">nn::gfx::</span><span class="n">DescriptorSlot</span><span class="o">*</span> <span class="n">dstSlot</span><span class="p">,</span> <span class="k">const</span> <span class="nn">nn::gfx::</span><span class="n">TextureView</span><span class="o">&amp;</span> <span class="n">textureView</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pUserData</span> <span class="p">)</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// pUserData takes objects to be registered to the texture descriptor pool.
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TextrueDescriptorManger</span><span class="o">*</span> <span class="n">manger</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span> <span class="n">TextrueDescriptorManger</span><span class="o">*</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">pUserData</span> <span class="p">);</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Secures an empty descriptor index.
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">int</span> <span class="n">emptyTextureSlot</span> <span class="o">=</span> <span class="n">manger</span><span class="o">-&gt;</span><span class="n">GetEmptyTextureDescriptorSlot</span><span class="p">();</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::gfx::</span><span class="n">DescriptorPool</span> <span class="n">textureDescriptorPool</span><span class="p">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">textureDescriptorPool</span><span class="p">.</span><span class="n">BeginUpdate</span><span class="p">();</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">textureDescriptorPool</span><span class="p">.</span><span class="n">SetTextureView</span><span class="p">(</span> <span class="n">emptyTextureSlot</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">textureView</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">textureDescriptorPool</span><span class="p">.</span><span class="n">EndUpdate</span><span class="p">();</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Gets a descriptor slot from the descriptor index.
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">textureDescriptorPool</span><span class="p">.</span><span class="n">GetDescriptorSlot</span><span class="p">(</span> <span class="n">dstSlot</span><span class="p">,</span> <span class="n">emptyTextureSlot</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Example of a callback function for registering sampler objects to the descriptor pool.
</span><span class="kt">bool</span> <span class="nf">AllocateSlotForSampler</span><span class="p">(</span><span class="nn">nn::gfx::</span><span class="n">DescriptorSlot</span><span class="o">*</span> <span class="n">dstSlot</span><span class="p">,</span> <span class="k">const</span> <span class="nn">nn::gfx::</span><span class="n">Sampler</span><span class="o">&amp;</span> <span class="n">sampler</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pUserData</span> <span class="p">)</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// pUserData takes objects to be registered to the sampler descriptor pool.
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">SamplerDescriptorManger</span><span class="o">*</span> <span class="n">manger</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span> <span class="n">SamplerDescriptorManger</span><span class="o">*</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">pUserData</span> <span class="p">);</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Secures an empty descriptor index.
</span>　&nbsp;&nbsp;<span class="kt">int</span> <span class="n">emptySamplerSlot</span> <span class="o">=</span> <span class="n">manger</span><span class="o">-&gt;</span><span class="n">GetEmptySamplerDescriptorSlot</span><span class="p">();</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::gfx::</span><span class="n">DescriptorPool</span> <span class="n">samplerDescriptorPool</span><span class="p">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">samplerDescriptorPool</span><span class="p">.</span><span class="n">BeginUpdate</span><span class="p">();</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">g_samplerDescriptorPool</span><span class="p">.</span><span class="n">SetSampler</span><span class="p">(</span> <span class="n">emptySamplerSlot</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sampler</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">samplerDescriptorPool</span><span class="p">.</span><span class="n">EndUpdate</span><span class="p">();</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Gets a descriptor slot from the descriptor index.
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">samplerDescriptorPool</span><span class="p">.</span><span class="n">GetDescriptorSlot</span><span class="p">(</span> <span class="n">dstSlot</span><span class="p">,</span> <span class="n">emptySamplerSlot</span> <span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Registers the texture and sampler to the descriptor pool via callbacks.
</span>
<span class="c1">// nn::font example.
</span><span class="nn">nn::font::ResFontBase::</span><span class="n">RegisterTextureViewToDescriptorPool</span><span class="p">(</span> <span class="n">AllocateSlotForTexture</span><span class="p">,</span> <span class="n">textureDescriptorManger</span> <span class="p">);</span>
<span class="nn">nn::font::RectDrawer::</span><span class="n">RegisterSamplerToDescriptorPool</span><span class="p">(</span> <span class="n">AllocateSlotForSampler</span><span class="p">,</span> <span class="n">samplerDescriptorManger</span> <span class="p">);</span>

<span class="c1">// nn::vfx example.
</span><span class="nn">nn::vfx::System::</span><span class="n">RegisterTextureViewToDescriptorPool</span><span class="p">(</span> <span class="n">AllocateSlotForTexture</span><span class="p">,</span> <span class="n">textureDescriptorManger</span> <span class="p">);</span>
<span class="nn">nn::vfx::System::</span><span class="n">RegisterSamplerToDescriptorPool</span><span class="p">(</span> <span class="n">AllocateSlotForSampler</span><span class="p">,</span> <span class="n">samplerDescriptorManger</span> <span class="p">);</span>
<span class="nn">nn::vfx::Resource::</span><span class="n">RegisterTextureViewToDescriptorPool</span><span class="p">(</span> <span class="n">AllocateSlotForSampler</span><span class="p">,</span> <span class="n">samplerDescriptorManger</span> <span class="p">);</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p> </p>
<h3 id="Anchor_94757084_h3_4">Texture Resources</h3>
<p>The texture files used in the <code>g3d</code> and <code>vfx</code> modules use <code>gtx</code> texture resources. <code>gtx</code> texture resources are compatible with the NW4F texture format, so you can use previously created texture resources. However, the <code>vtx</code> module, which until NintendoSDK 0.6.0 could use tiling textures, must convert them to linear textures to use them on the Windows platform in NintendoSDK 0.7.0 or later.<br />The <code>ui2d</code> module can use TGA textures just as it could before.</p>
<p> </p>
<h3 id="Anchor_94757084_h3_5">Implementations Using the nn::gfx Library</h3>
<p>The following table summarizes the features of the <code><span class="ApiLink_nn__gfx">nn::gfx</span></code> library currently supported by the NintendoWare Graphics modules.</p>
<p>Additional features will be supported in the future to optimize operations on the platforms that are supported.</p>
<table class="table">
  <tbody>
    <tr>
      <th>Feature</th>
      <th>Usage</th>
    </tr>
    <tr>
      <td>Memory pool</td>
      <td>Uses</td>
    </tr>
    <tr>
      <td>Texture descriptor pool</td>
      <td>Uses</td>
    </tr>
    <tr>
      <td>Sampler descriptor pool</td>
      <td>Uses</td>
    </tr>
    <tr>
      <td>Constant buffer descriptor pool</td>
      <td>Does not use</td>
    </tr>
    <tr>
      <td>Pipeline mode</td>
      <td>Does not use</td>
    </tr>
    <tr>
      <td>Root signature mode</td>
      <td>Does not use</td>
    </tr>
  </tbody>
</table>
<p> </p>
<h2 id="Anchor_94757084_h2_4">Tools</h2>
<p>The new NintendoWare Graphics uses the 3DEditor, LayoutEditor, and EffectMaker tools just like in the past to create and edit graphics objects.</p>
<h3 id="Anchor_94757084_h3_6">3DEditor</h3>
<p>The tool is basically used the same way as before.</p>
<p>However, behavior can be switched in minor ways, depending on the platform.</p>
<h3 id="Anchor_94757084_h3_7">LayoutEditor</h3>
<p>The tool is basically used the same way as before.<br />However, behavior can be switched in minor ways, depending on the platform.</p>
<h3 id="Anchor_94757084_h3_8">EffectMaker</h3>
<p>The upper part of EffectMaker contains a combo box for selecting the platform for creating and editing.</p>
<table class="table">
  <tbody>
    <tr>
      <th>Platform Name</th>
      <th> </th>
    </tr>
    <tr>
      <td>Windows</td>
      <td>Select when creating and editing effect data for <code><span class="ApiLink_nn__vfx">nn::vfx</span></code>.</td>
    </tr>
    <tr>
      <td>WindowsNw4f</td>
      <td>Select when creating and editing effect data for <code>nw::eft2</code>.</td>
    </tr>
  </tbody>
</table>
<p> </p>
<h2 id="Anchor_94757084_h2_5">Viewers</h2>
<p>The LayoutViewer and EffectViewer tools provided in NintendoWare have been replaced with implementations using the <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code> runtime and the <code><span class="ApiLink_nn__vfx">nn::vfx</span></code> runtime. Because of this change, the executable files for the viewers released in NintendoSDK 0.7.0 differ from those in NintendoSDK 0.6.0.</p>
<table class="table">
  <tbody>
    <tr>
      <th>Executable Filename</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>
        <strong>\Tools\Graphics\EffectViewer\Win32\EffectViewer.exe</strong>
      </td>
      <td>A 32-bit build of the viewer for communicating with EffectMaker and playing effect data, implemented using <code><span class="ApiLink_nn__vfx">nn::vfx</span></code>.</td>
    </tr>
    <tr>
      <td>
        <p>\Tools\Graphics\EffectViewer\Nw4f\EffectViewer.exe</p>
      </td>
      <td>A viewer implemented using <code>nw::eft2</code>.</td>
    </tr>
    <tr>
      <td>
        <strong>Tools\Graphics\LayoutViewer\Win32\lytviewerGfx.exe</strong>
      </td>
      <td>A 32-bit build of the viewer for communicating with LayoutEditor and playing layout data, implemented using <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>.</td>
    </tr>
    <tr>
      <td>Tools\Graphics\LayoutViewer-Nw4f\Win32\lytviewerGfx.exe</td>
      <td>A viewer implemented using <code>nw::lyt</code>.</td>
    </tr>
  </tbody>
</table>
<p> </p>
<p>With NintendoSDK 0.7.0, you must start <code>TargetManager</code> to link the editor and the viewer. For more information, see <a href="../Pages/Page_94763641.html">NintendoWare News</a>.</p>
<h2 id="Anchor_94757084_h2_6">Renamed APIs and Member Functions</h2>
<p>Various APIs and member functions have been renamed to make NintendoSDK more consistent.</p>
<p> </p>
<h2 id="Anchor_94757084_h2_7">Changes to the Various Modules</h2>
<p>This section describes changes that are unique to the individual modules of the new NintendoWare Graphics.</p>
<h3 id="Anchor_94757084_h3_9">Changes to nn::g3d</h3>
<h4 id="Anchor_94757084_h4_1">Render States</h4>
<p>
  <code>nw::g3d</code> has a class that provides features similar to the <code>ResRenderInfo</code> class and the <code>ResRenderState</code> class. For this reason, the <code>ResRenderState</code> class has been eliminated, and its roles have been taken over by the <code>ResRenderInfo</code> class. Because of this change, when models that were used with <code>nw::g3d</code> are converted for <code><span class="ApiLink_nn__g3d">nn::g3d</span></code>, the render state information that was configured using 3DEditor is not automatically included in the model data. Information that is essential for the render state must be written as rendering information annotation (<code>renderinfo</code>) in the shader, set appropriately using 3DEditor, and obtained via the <code>ResRenderInfo</code> class.</p>
<p>To convert the <code>&lt;render_state&gt;</code> element in old intermediate files to <code>&lt;render_info&gt;</code>, use the <a href="../Pages/Page_83955970.html">intermediate file filter</a> tool.</p>
<h4 id="Anchor_94757084_h4_2">Animations</h4>
<p>Changes were made to the correspondence between various animations and the classes that handle those animations in the runtime. The following table summarizes these changes.</p>
<table class="table">
  <tbody>
    <tr>
      <th>Animation</th>
      <th>Classes</th>
    </tr>
    <tr>
      <td>Skeletal animation</td>
      <td>
        <p>ResSkeletalAnim</p>
        <p>SkeletalAnimObj</p>
      </td>
    </tr>
    <tr>
      <td>Shape animation</td>
      <td>
        <p>ResShapeAnim</p>
        <p>ShapeAnimObj</p>
      </td>
    </tr>
    <tr>
      <td>
        <p>Shader parameter animation</p>
        <p>Color animation</p>
        <p>Texture SRT animation</p>
        <p>Texture pattern animation</p>
        <p>Material visibility animation</p>
      </td>
      <td>
        <p>ResMaterialAnim</p>
        <p>MaterialAnimObj</p>
      </td>
    </tr>
    <tr>
      <td>Bone visibility animation</td>
      <td>
        <p>ResBoneVisibilityAnim</p>
        <p>BoneVisibilityAnimObj</p>
      </td>
    </tr>
    <tr>
      <td>Scene animation</td>
      <td>
        <p>ResSceneAnim</p>
        <p>SceneAnimObj</p>
      </td>
    </tr>
  </tbody>
</table>
<p>With these changes, <code>nw::g3d</code> no longer allows the same animation names (the same filenames) to be used for shader parameter animation, color animation, texture SRT animation, texture pattern animation, and material visibility animation. You must remember this point when converting animation data used in <code>nw::g3d</code> to a form for <code><span class="ApiLink_nn__g3d">nn::g3d</span></code>, and change the names of animation files where necessary. </p>
<h4 id="Anchor_94757084_h4_3">Textures</h4>
<p>Texture data is no longer included in the model data. You must handle the texture data as a separate resource from the model data and bind it to the model using the <code>BindTexture</code> function. You can create texture data using 3DTextureConverter.</p>
<h4 id="Anchor_94757084_h4_4">Effect Binary Output Options</h4>
<p>Changes were made to the way command-line options are specified when the binary is exported from EffectMaker for <code>nw::eft2</code> and <code><span class="ApiLink_nn__vfx">nn::vfx</span></code>.<br />For more information, see <a href="../Pages/Page_83955581.html">Binary Converter</a>.</p>
<p> </p>
<h3 id="Anchor_94757084_h3_10">Changes to nn::vfx</h3>
<p>This section describes changes unique to the migration from <code>nw::eft2</code> to <code><span class="ApiLink_nn__vfx">nn::vfx</span></code>.<br />Also refer to <a href="../Pages/Page_83955666.html">Embedding the Effect Runtime　</a>, which was also rewritten to be based on the <code><span class="ApiLink_nn__vfx">nn::vfx</span></code> namespace.</p>
<h4 id="Anchor_94757084_h4_5">Texture Resources</h4>
<p>To use NW4F format textures in the <code>vfx</code> module, you must convert tiling textures to linear textures.</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="gutter">1<br />
2</td>
      <td class="code">
        <div class="codeblock"><pre><span class="c1">// Converts tiling textures to linear textures.
</span><span class="n">NintendoSDK</span><span class="err">\</span><span class="n">Tools</span><span class="err">\</span><span class="n">Graphics</span><span class="err">\</span><span class="mi">3</span><span class="n">dTools</span><span class="err">\</span><span class="mi">3</span><span class="n">dTextureConverter</span><span class="p">.</span><span class="n">exe</span> <span class="n">texture_tiling</span><span class="p">.</span><span class="n">ftxb</span> <span class="o">-</span><span class="n">o</span> <span class="n">texture_linear</span><span class="p">.</span><span class="n">ftxb</span> <span class="o">--</span><span class="n">tile</span><span class="o">-</span><span class="n">mode</span> <span class="n">linear</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p> </p>
<h3 id="Anchor_94757084_h3_11">Changes to nn::ui2d and nn::font</h3>
<h4 id="Anchor_94757084_h4_6">
  <span class="with-breadcrumbs">Resources</span>
</h4>
<h5 id="Anchor_94757084_h5_1">
  <span class="with-breadcrumbs">Fonts</span>
</h5>
<p>
  <span class="with-breadcrumbs">You must remake the font binary because the format for fonts has changed.<br /></span>
</p>
<h4 id="Anchor_94757084_h4_7">
  <span class="with-breadcrumbs">Runtime Library</span>
</h4>
<h5 id="Anchor_94757084_h5_2">
  <span class="with-breadcrumbs">Initialization</span>
</h5>
<p>
  <span class="with-breadcrumbs">Shader resources are embedded in the runtime, so you no longer need to load them from outside and pass them.</span>
</p>
<p>
  <span class="with-breadcrumbs">You do need to prepare samplers in the application and pass them to the runtime. For more information, see the <code>Ui2dSimple</code> sample demo.</span>
</p>
<h5 id="Anchor_94757084_h5_3">
  <span class="with-breadcrumbs">Other</span>
  <br />
</h5>
<p>
  <span class="with-breadcrumbs">The alpha test feature is not supported. The decision about whether to support this feature in the future has not been made.</span>
</p>
<p>
  <span class="with-breadcrumbs">You must call <code><span class="ApiLink_nn__fontll__ScalableFontEngineHelper__Decode">nn::fontll::ScalableFontEngineHelper::Decode</span></code> before you use scalable font files.</span>
</p>
<h4 id="Anchor_94757084_h4_8">
  <span class="with-breadcrumbs">Converters</span>
</h4>
<h5 id="Anchor_94757084_h5_4">LayoutConverter</h5>
<p>This tool can export binary in the new format for <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code> and in the earlier format for <code>nw::lyt</code>.<br />Specify the appropriate value for the following option.</p>
<table class="table">
  <thead>
    <tr>
      <th>
        <div class="tablesorter-header-inner">Command-Line Options</div>
      </th>
      <th>
        <div class="tablesorter-header-inner">Description</div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-p [platform]</td>
      <td>
        <ul>
          <li>Specify <strong>win32ui2d</strong> for <code><span class="ApiLink_nn__ui2d">nn::ui2d</span></code>.</li>
          <li> Specify <strong>win32</strong> for <code>nw::lyt</code>.</li>
          <li>If you do not specify anything, the binary is exported for <code>nw::lyt</code>.</li>
          <li>Example: <code>-p=win32ui2d</code></li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h4 id="Anchor_94757084_h4_9">
  <span class="with-breadcrumbs">FontConverterConsole</span>
</h4>
<p>This tool can export binary in the new format for <code><span class="ApiLink_nn__font">nn::font</span></code> and in the earlier format for <code>nw::font</code>.<br />Specify the appropriate value for the following option. (The GUI version of FontConverter exports the binary for <code><span class="ApiLink_nn__font">nn::font</span></code>.)</p>
<table class="table">
  <thead>
    <tr>
      <th>
        <div class="tablesorter-header-inner">Command-Line Options</div>
      </th>
      <th>
        <div class="tablesorter-header-inner">Description</div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <p>-nobntx</p>
      </td>
      <td>
        <ul>
          <li>If you specify this option, the binary is exported for <code>nw::font</code>.</li>
          <li>If you do not specify anything, the binary is exported for <code><span class="ApiLink_nn__font">nn::font</span></code>.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h4 id="Anchor_94757084_h4_10">
  <span class="with-breadcrumbs">Tools</span>
</h4>
<h5 id="Anchor_94757084_h5_5">
  <span class="with-breadcrumbs">LayoutEditor</span>
</h5>
<p>
  <span class="with-breadcrumbs">The notation for command-line options has changed.</span>
</p>
<p>(The notation for the input file path has not changed.)</p>
<div>
  <div class="syntaxhighlighter nogutter plain">
    <p> </p>
    <table class="table">
      <tbody>
        <tr>
          <td>
            <div class="container" title="Hint: double-click to select code">
              <div class="line number1 index0 alt2">
                <code class="plain plain">LayoutEditor.exe ...path of input file... [option]</code>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Options</strong>
    </p>
  </div>
</div>
<table class="table">
  <thead>
    <tr>
      <th>
        <div class="tablesorter-header-inner">Earlier Options</div>
      </th>
      <th>
        <div class="tablesorter-header-inner">New Options</div>
      </th>
      <th>
        <div class="tablesorter-header-inner">Description</div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-scf</td>
      <td>--current-frame</td>
      <td>Specifies the current frame.</td>
    </tr>
    <tr>
      <td>-ssc</td>
      <td>--save-screen-capture</td>
      <td>Saves a screenshot.</td>
    </tr>
    <tr>
      <td>-scs</td>
      <td>--capture-size</td>
      <td>Specifies the screenshot size.</td>
    </tr>
    <tr>
      <td> </td>
      <td>--capture-file-path</td>
      <td>Specifies the file path for the screenshot.</td>
    </tr>
    <tr>
      <td>-exp</td>
      <td>-o, --output</td>
      <td>Specifies the output file path for the intermediate files.</td>
    </tr>
    <tr>
      <td>-cil</td>
      <td>--close-if-loaded</td>
      <td>Closes any loaded files.</td>
    </tr>
    <tr>
      <td>-spr</td>
      <td>--parts-root-path</td>
      <td>Specifies the parts root path.</td>
    </tr>
  </tbody>
</table>
<p>
  <code>--ssc</code> was divided into two options: one to set the flag to save a screenshot (<code>--save-screen-capture</code>), and another to specify the file path (<code>--capture-file-path</code>).</p>
<h4 id="Anchor_94757084_h4_11">
  <span class="with-breadcrumbs">Sample Demos</span>
</h4>
<p>
  <span class="with-breadcrumbs">The following sample demos have been added: Ui2dSimple, Ui2dUserShader, FontSimple, FontWordWrapping, and ScalableFontSimple.</span>
</p>
<p> </p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__g3d', '../../../Api/HtmlNX/namespacenn_1_1g3d.html' )
SetUrl( 'ApiLink_nn__ui2d', '../../../Api/HtmlNX/namespacenn_1_1ui2d.html' )
SetUrl( 'ApiLink_nn__font', '../../../Api/HtmlNX/namespacenn_1_1font.html' )
SetUrl( 'ApiLink_nn__vfx', '../../../Api/HtmlNX/namespacenn_1_1vfx.html' )
SetUrl( 'ApiLink_nn__g3d__viewer', '../../../Api/HtmlNX/namespacenn_1_1g3d_1_1viewer.html' )
SetUrl( 'ApiLink_nn__ui2d__viewer', '../../../Api/HtmlNX/namespacenn_1_1ui2d_1_1viewer.html' )
SetUrl( 'ApiLink_nn__fontll', '../../../Api/HtmlNX/namespacenn_1_1fontll.html' )
SetUrl( 'ApiLink_nn__vfx__viewer', '../../../Api/HtmlNX/namespacenn_1_1vfx_1_1viewer.html' )
SetUrl( 'ApiLink_nn__gfx', '../../../Api/HtmlNX/namespacenn_1_1gfx.html' )
SetUrl( 'ApiLink_nn__gfx__Device', '../../../Api/HtmlNX/namespacenn_1_1gfx.html#a911efa3d8dce04d59a39b97d97079cd7' )
// ApiLink_nn__gfx__Command
SetUrl( 'ApiLink_nn__fontll__ScalableFontEngineHelper__Decode', '../../../Api/HtmlNX/classnn_1_1fontll_1_1_scalable_font_engine_helper.html#aec10ff3677f0074f9ef25f25396f1f89' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
