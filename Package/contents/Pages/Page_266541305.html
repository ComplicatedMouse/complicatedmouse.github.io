<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<script type="text/javascript" src="../tocDataApi.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Feature Usage | NintendoSDK Documents</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="text-align: center;"><img src="../template/img/noscript.svg" /></div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Feature Usage -->
<div class="pagetitle" id="PageId_266541305">Feature Usage</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_266541305_h1_1">Introduction</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_2">Workflow for Using the nfc Library</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_3">Initialization</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_4">Starting Tag Detection</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_5">Getting Tag Information</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_6">Loading MIFARE Tags</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_7">Writing to a MIFARE Tag</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_8">Sending Commands to a NFC Tag</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_9">Sending Multiple Commands to a NFC Tag in the Same Session</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_10">Waiting for Tag Loss Notifications</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_11">Finalization</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_12">Common Error Handling</a>
    </li>
    <li>
      <a href="#Anchor_266541305_h1_13">Displaying Messages Using the Error Viewer</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_266541305_h2_1">Displaying the Error Viewer From the Application</a>
      </li>
      <li>
        <a href="#Anchor_266541305_h2_2">Displaying the Error Viewer From the nfc Library</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_266541305_h1_14">Using Multiple NFC Devices Simultaneously</a>
    </li>
  </ul>
</p>
<h1 id="Anchor_266541305_h1_1">Introduction</h1>
<p>This section describes how to use the various features of the <code>nfc</code> library.</p>
<p>Flow diagrams show basic usage examples for each function. Handle these functions appropriately based on the circumstances of actual application development. For more information about handling errors that may occur, in the Nintendo Switch Online documents, in the Error Code List, see the <strong>Solution (for developer)</strong> column. The messages shown in the list can be displayed in the Error Viewer.</p>
<h1 id="Anchor_266541305_h1_2">Workflow for Using the nfc Library</h1>
<p>The following figure illustrates the basic workflow for using the <code>nfc</code> library.</p>
<!--figure001-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure001"></a>Figure 25  Basic Workflow for Using the nfc Library</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089892.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_3">Initialization</h1>
<p>For more information see <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_3">Initialization</a> under nfp Library. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>.</p>
<h1 id="Anchor_266541305_h1_4">Starting Tag Detection</h1>
<p>For more information see <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_4">Starting Tag Detection</a> under nfp Library. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>.</p>
<h1 id="Anchor_266541305_h1_5">Getting Tag Information</h1>
<p>For more information, see nfp Library &gt; <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_5">Getting Tag Information</a>. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>.</p>
<h1 id="Anchor_266541305_h1_6">Loading MIFARE Tags</h1>
<p>Call the <code><span class="ApiLink_nn__nfc__ReadMifare">nn::nfc::ReadMifare</span>()</code> function to load MIFARE tag data.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Loading a MIFARE tag takes approximately one to two seconds.</p>
  </div>
</div>
<p>The following flow diagram shows an example of reading a MIFARE tag.</p>
<!--figure004-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure004"></a>Figure 26  Loading a MIFARE Tag</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089894.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_7">Writing to a MIFARE Tag</h1>
<p>Call the <code><span class="ApiLink_nn__nfc__WriteMifare">nn::nfc::WriteMifare</span>()</code> function to write data to a MIFARE tag.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Writing a MIFARE tag takes approximately one to two seconds.</p>
  </div>
</div>
<p>The following flow diagram shows an example of writing to a MIFARE tag.</p>
<!--figure005-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure005"></a>Figure 27  Writing to a MIFARE Tag</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089897.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_8">Sending Commands to a NFC Tag</h1>
<p>Call the <code><span class="ApiLink_nn__nfc__SendCommandByPassThrough">nn::nfc::SendCommandByPassThrough</span>()</code> function to send a command to a NFC tag.</p>
<div class="info_new">
  <div class="info_new_left">Info</div>
  <div class="info_new_right">
    <p>Sending a command to a NFC tag takes approximately one to two seconds.</p>
  </div>
</div>
<p>The following flow diagram shows an example of sending a command to a NFC tag.</p>
<!--figure006-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure006"></a>Figure 28  Sending a Command to a NFC Tag</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089895.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_9">Sending Multiple Commands to a NFC Tag in the Same Session</h1>
<p>To send multiple commands to a NFC tag in the same session, call the <code><span class="ApiLink_nn__nfc__KeepPassThroughSession">nn::nfc::KeepPassThroughSession</span>()</code> function to keep the session, and then call the <code><span class="ApiLink_nn__nfc__SendCommandByPassThrough">nn::nfc::SendCommandByPassThrough</span>()</code> function.</p>
<p>After the necessary commands have been sent, promptly call the <code><span class="ApiLink_nn__nfc__ReleasePassThroughSession">nn::nfc::ReleasePassThroughSession</span>()</code> function to release the session.</p>
<p>The following flow diagram shows an example of sending two commands to a NFC tag in the same session.</p>
<!--figure007-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure007"></a>Figure 29  Sending Multiple Commands to a NFC Tag in the Same Session</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089893.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_10">Waiting for Tag Loss Notifications</h1>
<p>When tag detection is continued after access to a tag has been terminated or when touched with a different tag, the device returns to the tag detection to enabled state.</p>
<p>Then, notify the user to remove the tag. A tag loss notification is sent to the application when the tag is moved away from the NFC device.</p>
<p>Call the <code><span class="ApiLink_nn__nfp__StopDetection">nn::nfp::StopDetection</span>()</code> function to stop tag detection.</p>
<p>The following figure presents an example of the flow for waiting for a lost tag.</p>
<!--figure012-->
<div class="figure">
  <a name="AutoAnchor_266541305_figure012"></a>Figure 30  Waiting for Tag Loss Notifications</div>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_266541305/517089896.png" class="embedded-image" />
  </span>
</p>
<h1 id="Anchor_266541305_h1_11">Finalization</h1>
<p>For more information, see nfp Library &gt; <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_9">Finalization</a>. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>.</p>
<h1 id="Anchor_266541305_h1_12">Common Error Handling</h1>
<p>For more information see nfp Library &gt; <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_10">Common Error Handling</a>. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>.</p>
<h1 id="Anchor_266541305_h1_13">Displaying Messages Using the Error Viewer</h1>
<h2 id="Anchor_266541305_h2_1">Displaying the Error Viewer From the Application</h2>
<p>You can use the error viewer to display error messages for errors returned by the <code>nfc</code> library.</p>
<p>For more information about errors and message content supported by the Error Viewer, see the Error Code List in the Nintendo Switch Online documents.</p>
<h2 id="Anchor_266541305_h2_2">Displaying the Error Viewer From the nfc Library</h2>
<p>For more information, see nfp Library &gt; <a href="../Pages/Page_114739604.html#Anchor_114739604_h2_9">Displaying the Error Viewer Using the nfp Library</a>.</p>
<h1 id="Anchor_266541305_h1_14">Using Multiple NFC Devices Simultaneously</h1>
<p>For more information see nfp Library &gt; <a href="../Pages/Page_114739604.html#Anchor_114739604_h1_13">Using Multiple NFC Devices Simultaneously</a>. Replace <code><span class="ApiLink_nn__nfp__">nn::nfp::</span></code> with <code><span class="ApiLink_nn__nfc__">nn::nfc::</span></code>. (Ignore descriptions of the amiibo settings.)</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
<p>&nbsp;</p>
<hr />
<p>CONFIDENTIAL</p>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank" rel="noopener noreferrer" >';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__nfp__', '../../../Api/HtmlNX/namespacenn_1_1nfp.html' )
SetUrl( 'ApiLink_nn__nfc__', '../../../Api/HtmlNX/namespacenn_1_1nfc.html' )
SetUrl( 'ApiLink_nn__nfc__ReadMifare', '../../../Api/HtmlNX/namespacenn_1_1nfc.html#a8babcf3c5aeaee169a3a959fbc38f43c' )
SetUrl( 'ApiLink_nn__nfc__WriteMifare', '../../../Api/HtmlNX/namespacenn_1_1nfc.html#addacc075c380b619532b81427c68b8df' )
SetUrl( 'ApiLink_nn__nfc__SendCommandByPassThrough', '../../../Api/HtmlNX/namespacenn_1_1nfc.html#aaa5f78462048d36938757959c3cb18ef' )
SetUrl( 'ApiLink_nn__nfc__KeepPassThroughSession', '../../../Api/HtmlNX/namespacenn_1_1nfc.html#adf8b5f4fdd503907ebfea3a81cc39682' )
SetUrl( 'ApiLink_nn__nfc__ReleasePassThroughSession', '../../../Api/HtmlNX/namespacenn_1_1nfc.html#a518c818637185ea2406e63ac7c79258c' )
SetUrl( 'ApiLink_nn__nfp__StopDetection', '../../../Api/HtmlNX/namespacenn_1_1nfp.html#aa8bd12f4e1b4b206463047e3142a261a' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
