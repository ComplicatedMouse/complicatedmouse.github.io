<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NVN Tutorial 03: Asset File Loading | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_nvn.html">NVN</a></li><li class="navelem"><a class="el" href="_page_sample_nvn_tutorial.html">NVN Tutorial</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NVN Tutorial 03: Asset File Loading </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleNvnTutorial03_SectionBrief">Overview</a><ul><li class="level2"><a href="#PageSampleNvnTutorial03_SectionExpectedOutput">Expected Output</a></li>
</ul>
</li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionNecessaryEnvironment">System Requirements</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionHowToOperate">Operation Procedure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionPrecaution">Precautions</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial03_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleNvnTutorial03_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleNvnTutorial03_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This tutorial demonstrates rendering a simple model loaded from an asset file generated by Tutorial02.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionBrief"></a>
Overview</h1>
<p>This tutorial demonstrates rendering a simple model loaded from an asset file generated by Tutorial02. The loaded model data is used to show how to create vertex/index buffers with NVNbuffers, how to set up vertex state, and how to bind them to a command buffer for rendering. The loaded texture data demonstrates how to set up <a class="el" href="struct_n_v_ntexture.html" title="Block of GPU-accessible memory and related state used to hold image data.">NVNtexture</a> and <a class="el" href="struct_n_v_nsampler.html" title="GPU-accessible object controlling how texture data are fetched and filtered.">NVNsampler</a> objects, registering those with their respective descriptor pools, and how to make them accessible by a shader program. The compiled shader data is used to demonstrate how to set up a NVNshaderProgram from a precompiled shader, how to set up and update uniform blocks using the helper shader headers, and how to use the shader along with the vertex attribute data and uniform data in a given command buffer.</p>
<h2><a class="anchor" id="PageSampleNvnTutorial03_SectionExpectedOutput"></a>
Expected Output</h2>
<div class="image">
<img src="NvnTutorial03.png" alt=""/>
</div>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionFileStructure"></a>
File Structure</h1>
<p>The main tutorial file and Visual Studio solutions can be found at <a class="el" href="dir_917bf5efbb880f21b44b35897247dd86.html">Samples/Sources/Applications/NvnTutorial03AssetFileLoading </a></p>
<p>The tutorial library which contains common code shared by the tutorials can be found at Samples/Sources/Libraries/NvnTutorial</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionNecessaryEnvironment"></a>
System Requirements</h1>
<p>No extra system requirements.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionHowToOperate"></a>
Operation Procedure</h1>
<p>This sample runs on its own without any additional input. Hitting escape on Windows or touching the touch screen on NX will exit the program.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionPrecaution"></a>
Precautions</h1>
<p>None.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the Visual Solution in the desired configuration and run it.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial03_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleNvnTutorial03_SectionSampleProgram"></a>
Sample Program</h2>
<p>Below is the source code for the main tutorial file for this sample.</p>
<p><a class="el" href="_nvn_tutorial03_8cpp.html" title="This tutorial demonstrates rendering a simple model loaded from an asset file generated by Tutorial02...">NvnTutorial03.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &lt;nn/nn_SdkAssert.h&gt;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="util___matrix_8h.html">nn/util/util_Matrix.h</a>&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="util___vector_8h.html">nn/util/util_Vector.h</a>&gt;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_inline_8h.html">nvn/nvn_FuncPtrInline.h</a>&gt;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_impl_8h.html">nvn/nvn_FuncPtrImpl.h</a>&gt;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">    #ifndef WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">    #define WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">    #ifndef NOMINMAX</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">    #define NOMINMAX</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">    #include &lt;<a class="code" href="nn___windows_8h.html">nn/nn_Windows.h</a>&gt;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_tutorial_base_class_8h.html">nvntutorial/TutorialBaseClass.h</a>&gt;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &lt;nvntutorial/ShaderHeaders/SimpleTexturedModelDataHelper.h&gt;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_asset_file_loading_helper_8h.html">nvntutorial/AssetFileLoadingHelper.h</a>&gt;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_tutorial_util_8h.html">nvntutorial/TutorialUtil.h</a>&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_texture_i_d_manager_8h.html">nvntutorial/TextureIDManager.h</a>&gt;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_uniform_buffer_8h.html">nvntutorial/UniformBuffer.h</a>&gt;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_stat_tracker_8h.html">nvntutorial/StatTracker.h</a>&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_debug_text_renderer_8h.html">nvntutorial/DebugTextRenderer.h</a>&gt;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_CommandMemorySize = 1024;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_ControlMemorySize = 1024;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>    g_NumColorBuffers = 2;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">class </span>AssetFileLoading : <span class="keyword">public</span> TutorialBaseClass</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="nn___macro_8h.html#a82564079f8f8c6547726002a9b168bdb">NN_DISALLOW_COPY</a>(AssetFileLoading);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        AssetFileLoading();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keyword">virtual</span> ~AssetFileLoading();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Init(PFNNVNBOOTSTRAPLOADERPROC pLoader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">Shutdown</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Draw(uint64_t millisec);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">void</span> NVNAPIENTRY DebugLayerCallback(</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordtype">void</span>* pUser</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordtype">void</span> SetupUniformBlock();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordtype">void</span> UpdateUniformBlock(<span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; modelMatrix, <span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; projectionMatrix, <span class="keyword">const</span> <a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a> handle);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordtype">int</span> UpdateRenderTargets();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="struct_n_v_ndevice.html">NVNdevice</a>               m_Device;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="struct_n_v_nqueue.html">NVNqueue</a>                m_Queue;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">void</span>*                   m_pQueueMemory;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pCommandMemoryPool;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        ptrdiff_t               m_CommandPoolOffset;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordtype">void</span>*                   m_pControlPool;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>        m_CommandBuffer;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>        m_CommandHandle;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a>       m_RenderTargetBuilder;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>*             m_pRenderTargets[g_NumColorBuffers];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>*             m_pDepthBuffer;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a>       m_SamplerBuilder;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="struct_n_v_nbuffer_builder.html">NVNbufferBuilder</a>        m_BufferBuilder;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_RenderTargetPresentSync;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_CommandBufferSync;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_UniformBlockUpdateSync;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        AssetFileLoadingHelper* m_pAssetLoader;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        AssetFileDataHolder*    m_pDataHolder;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="struct_n_v_nblend_state.html">NVNblendState</a>           m_BlendState;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="struct_n_v_nchannel_mask_state.html">NVNchannelMaskState</a>     m_ChannelMaskState;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="struct_n_v_ncolor_state.html">NVNcolorState</a>           m_ColorState;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="struct_n_v_ndepth_stencil_state.html">NVNdepthStencilState</a>    m_DepthStencilState;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="struct_n_v_nmultisample_state.html">NVNmultisampleState</a>     m_MultisampleState;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="struct_n_v_npolygon_state.html">NVNpolygonState</a>         m_PolygonState;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pUniformBufferMemoryPool;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        UniformBuffer           m_UniformBlockVertex;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        UniformBuffer           m_UniformBlockFragment;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        TextureIDManager*       m_pTextureIDManager;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pRenderTargetMemoryPool;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pShaderScratchMemoryPool;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordtype">size_t</span>                  m_ShaderScratchSize;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        ptrdiff_t               m_RenderTargetCommandPoolOffset;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordtype">void</span>*                   m_pRenderTargetControlPool;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>        m_RenderTargetCommandBuffer;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>        m_RenderTargetCommandHandle;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>*              m_pWindow;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a>        m_WindowBuilder;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordtype">int</span>                     m_CurrentWindowIndex;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_WindowSync;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordtype">int</span>                     m_CommandMemoryUsed;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordtype">int</span>                     m_ControlMemoryUsed;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordtype">int</span>                     m_ScreenWidth;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordtype">int</span>                     m_ScreenHeight;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordtype">float</span>                   m_RotY;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordtype">size_t</span>                  m_ColorTargetSize;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordtype">size_t</span>                  m_DepthTargetSize;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;};</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> * AssetFileLoading Constructor</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> * ----------------------------</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * Sets up default values for the members of the class.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;AssetFileLoading::AssetFileLoading() :</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    m_pQueueMemory(NULL),</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    m_pCommandMemoryPool(NULL),</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    m_pControlPool(NULL),</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    m_CommandHandle(0),</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    m_pDepthBuffer(NULL),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    m_pAssetLoader(NULL),</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    m_pDataHolder(NULL),</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    m_pUniformBufferMemoryPool(NULL),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    m_pTextureIDManager(NULL),</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    m_pRenderTargetMemoryPool(NULL),</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    m_pShaderScratchMemoryPool(NULL),</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    m_ShaderScratchSize(0),</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    m_pRenderTargetControlPool(NULL),</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    m_RenderTargetCommandHandle(NULL),</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    m_pWindow(NULL),</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    m_CurrentWindowIndex(-1),</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    m_CommandMemoryUsed(0),</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    m_ControlMemoryUsed(0),</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    m_ScreenWidth(0),</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    m_ScreenHeight(0),</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    m_RotY(45.0f),</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    m_ColorTargetSize(0),</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    m_DepthTargetSize(0)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        m_pRenderTargets[i] = NULL;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"> * AssetFileLoading Destructor</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * ---------------------------</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> * Empty destructor.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;AssetFileLoading::~AssetFileLoading()</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"> * AssetFileLoading::SetupUniformBlock</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"> * -----------------------------------</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> * Initializes the uniform buffers used for the</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> * shader program.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::SetupUniformBlock()</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    m_pUniformBufferMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">int</span> bufferAlignment = 0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_UNIFORM_BUFFER_ALIGNMENT, &amp;bufferAlignment);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    m_pUniformBufferMemoryPool-&gt;Init(</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        NULL,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        Align(<span class="keyword">sizeof</span>(SimpleTexturedModel::BlockVSUniformBlockData), bufferAlignment) +</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        Align(<span class="keyword">sizeof</span>(SimpleTexturedModel::BlockFSUniformBlockData), bufferAlignment),</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        &amp;m_Device);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    m_UniformBlockVertex.Init(&amp;m_Device, <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockVSUniformBlockData), m_pUniformBufferMemoryPool);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    m_UniformBlockFragment.Init(&amp;m_Device, <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockFSUniformBlockData), m_pUniformBufferMemoryPool);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> * AssetFileLoading::UpdateUniformBlock</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> * ------------------------------------</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> * Updates the uniform blocks with the given data.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::UpdateUniformBlock(<span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; modelMatrix, <span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; projectionMatrix, <span class="keyword">const</span> <a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a> handle)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    SimpleTexturedModel::BlockVSUniformBlockData vertexShaderData;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="structnn_1_1util_1_1_float_row_major4x4.html">nn::util::Float4x4</a> temp;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    nn::util::MatrixStore(&amp;temp, modelMatrix);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    vertexShaderData.SetUniform_u_modelMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> cameraMat;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    nn::util::MatrixIdentity(&amp;cameraMat);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    nn::util::MatrixStore(&amp;temp, cameraMat);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    vertexShaderData.SetUniform_u_viewMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    nn::util::MatrixStore(&amp;temp, projectionMatrix);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    vertexShaderData.SetUniform_u_projMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    m_UniformBlockVertex.SetData(&amp;vertexShaderData, <span class="keyword">sizeof</span>(vertexShaderData));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    SimpleTexturedModel::BlockFSUniformBlockData fragmentShaderData;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    fragmentShaderData.SetUniform_u_bindlessTex(handle);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    m_UniformBlockFragment.SetData(&amp;fragmentShaderData, <span class="keyword">sizeof</span>(fragmentShaderData));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::Init(PFNNVNBOOTSTRAPLOADERPROC pLoader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pLoader);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">/* Load the function pointer to get other nvn function pointers. */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    pfnc_nvnDeviceGetProcAddress = (<a class="code" href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a>) (*pLoader)(<span class="stringliteral">&quot;nvnDeviceGetProcAddress&quot;</span>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (pfnc_nvnDeviceGetProcAddress == NULL)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="comment">/* This can happen if an NVN driver is not installed on a Windows PC. */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;BootstrapLoader failed to find nvnDeviceGetProcAddress&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">         * Load function pointers for creating nvn device</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    nvnLoadCProcs( NULL, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">int</span> majorVersion, minorVersion;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    nvnDeviceGetInteger( NULL, NVN_DEVICE_INFO_API_MAJOR_VERSION, &amp;majorVersion );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    nvnDeviceGetInteger( NULL, NVN_DEVICE_INFO_API_MINOR_VERSION, &amp;minorVersion );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span>( majorVersion != <a class="code" href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a> || minorVersion &lt; <a class="code" href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a> )</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( 0, <span class="stringliteral">&quot;NVN SDK not supported by current driver.&quot;</span> );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">/* If debug or develop is enabled, turn on NVN&#39;s debug layer. */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> deviceFlags = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#if defined(NN_SDK_BUILD_DEBUG) || defined(NN_SDK_BUILD_DEVELOP)</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    deviceFlags = <a class="code" href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a> deviceBuilder;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    nvnDeviceBuilderSetDefaults(&amp;deviceBuilder);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    nvnDeviceBuilderSetFlags(&amp;deviceBuilder, deviceFlags);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (nvnDeviceInitialize(&amp;m_Device, &amp;deviceBuilder) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">             * This can fail for a few reasons; the most likely on Horizon is</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">             * insufficent device memory.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnDeviceInitialize&quot;</span>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">         * Ensure function pointers are all loaded properly</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    nvnLoadCProcs(&amp;m_Device, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (deviceFlags &amp; NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        nvnDeviceInstallDebugCallback(</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            &amp;m_Device,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a><span class="keyword">&gt;</span>(&amp;DebugLayerCallback),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            NULL, <span class="comment">// For testing purposes; any pointer is OK here.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a> <span class="comment">// NVN_TRUE = Enable the callback.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">/* Initialize the queue. */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a> queueBuilder;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    nvnQueueBuilderSetDevice(&amp;queueBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    nvnQueueBuilderSetDefaults(&amp;queueBuilder);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    nvnQueueBuilderSetComputeMemorySize(&amp;queueBuilder, 0);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">int</span> minQueueCommandMemorySize = 0;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_QUEUE_COMMAND_MEMORY_MIN_SIZE, &amp;minQueueCommandMemorySize);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    nvnQueueBuilderSetCommandMemorySize(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    nvnQueueBuilderSetCommandFlushThreshold(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">size_t</span> neededQueueMemorySize = nvnQueueBuilderGetQueueMemorySize(&amp;queueBuilder);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> ((neededQueueMemorySize % <a class="code" href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a>) != 0)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Memory size reported for queue is not the proper granularity&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_WIN )</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    m_pQueueMemory = NULL;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    m_pQueueMemory = AlignedAllocate(neededQueueMemorySize, <a class="code" href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    nvnQueueBuilderSetQueueMemory(&amp;queueBuilder, m_pQueueMemory, neededQueueMemorySize);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (nvnQueueInitialize(&amp;m_Queue, &amp;queueBuilder) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnQueueInitialize failed&quot;</span>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (nvnCommandBufferInitialize(&amp;m_CommandBuffer, &amp;m_Device) == NULL)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnCommandBufferInitialize&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordtype">int</span> commandBufferCommandAlignment = 0;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">int</span> commandBufferControlAlignment = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_COMMAND_ALIGNMENT, &amp;commandBufferCommandAlignment);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_CONTROL_ALIGNMENT, &amp;commandBufferControlAlignment);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    m_pCommandMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    m_pCommandMemoryPool-&gt;Init(NULL, Align(g_CommandMemorySize, commandBufferCommandAlignment) * 2, NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT, &amp;m_Device);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    m_CommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    m_pControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (!nvnCommandBufferInitialize(&amp;m_RenderTargetCommandBuffer, &amp;m_Device))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target command buffer&quot;</span>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    m_RenderTargetCommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    m_pRenderTargetControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_RenderTargetPresentSync, &amp;m_Device))</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target present sync&quot;</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_CommandBufferSync, &amp;m_Device))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize command buffer sync&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_UniformBlockUpdateSync, &amp;m_Device))</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize uniform block update sync&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_WindowSync, &amp;m_Device))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize window sync&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    nvnBlendStateSetDefaults(&amp;m_BlendState);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    nvnChannelMaskStateSetDefaults(&amp;m_ChannelMaskState);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    nvnColorStateSetDefaults(&amp;m_ColorState);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    nvnDepthStencilStateSetDefaults(&amp;m_DepthStencilState);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    nvnDepthStencilStateSetDepthTestEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    nvnDepthStencilStateSetDepthWriteEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    nvnDepthStencilStateSetDepthFunc(&amp;m_DepthStencilState, NVN_DEPTH_FUNC_LESS);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    nvnMultisampleStateSetDefaults(&amp;m_MultisampleState);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    nvnPolygonStateSetDefaults(&amp;m_PolygonState);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    nvnPolygonStateSetFrontFace(&amp;m_PolygonState, NVNfrontFace::NVN_FRONT_FACE_CCW);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_BACK);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    nvnPolygonStateSetPolygonMode(&amp;m_PolygonState, NVN_POLYGON_MODE_FILL);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    nvnSamplerBuilderSetDevice(&amp;m_SamplerBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    nvnSamplerBuilderSetDefaults(&amp;m_SamplerBuilder);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    nvnBufferBuilderSetDevice(&amp;m_BufferBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    nvnBufferBuilderSetDefaults(&amp;m_BufferBuilder);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    nvnTextureBuilderSetDevice(&amp;m_RenderTargetBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_DISPLAY_BIT | NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, 1920, 1080);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_RGBA8);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    m_ColorTargetSize = nvnTextureBuilderGetStorageSize(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, 1920, 1080);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_DEPTH32F);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    m_DepthTargetSize = nvnTextureBuilderGetStorageSize(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    m_pRenderTargetMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    m_pRenderTargetMemoryPool-&gt;Init(</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        NULL,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        m_ColorTargetSize * g_NumColorBuffers + m_DepthTargetSize,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT | NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT,</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        &amp;m_Device);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    m_pTextureIDManager = <span class="keyword">new</span> TextureIDManager(&amp;m_Device);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    SetupUniformBlock();</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordtype">size_t</span> cacheSize = 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="classnn_1_1_result.html">nn::Result</a> result = <a class="code" href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a>(&amp;cacheSize);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.IsSuccess() );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordtype">char</span>* mountRomCacheBuffer = <span class="keyword">new</span>(std::nothrow) <span class="keywordtype">char</span>[cacheSize];</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a>(mountRomCacheBuffer);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    result = <a class="code" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a>(<span class="stringliteral">&quot;rom&quot;</span>, mountRomCacheBuffer, cacheSize);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    m_pAssetLoader = <span class="keyword">new</span> AssetFileLoadingHelper(&amp;m_Device, m_pTextureIDManager);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    m_pDataHolder = m_pAssetLoader-&gt;LoadAssetFile(<span class="stringliteral">&quot;cube.out&quot;</span>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    m_pDataHolder-&gt;SetupAttributeStatesNVN(SimpleTexturedModel::Attributes::GetAttributeLocation);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    m_pDataHolder-&gt;SetupTextureSamplerHandle(&amp;m_Device, m_pTextureIDManager, &amp;m_SamplerBuilder);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    m_ShaderScratchSize = m_pDataHolder-&gt;GetProgramData()[0]-&gt;m_ShaderScratchMemorySize;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (m_ShaderScratchSize != 0)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        m_pShaderScratchMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        m_pShaderScratchMemoryPool-&gt;Init(<span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                         m_ShaderScratchSize,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                         NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT | NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                         &amp;m_Device);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    nvnWindowBuilderSetDefaults(&amp;m_WindowBuilder);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    nvnWindowBuilderSetDevice(&amp;m_WindowBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    nvnWindowBuilderSetNativeWindow(&amp;m_WindowBuilder, nativeWindow);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(<span class="stringliteral">&quot;rom&quot;</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keyword">delete</span>[] mountRomCacheBuffer;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::Shutdown()</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    nvnQueueFinish(&amp;m_Queue);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    nvnSyncFinalize(&amp;m_RenderTargetPresentSync);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    nvnSyncFinalize(&amp;m_CommandBufferSync);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    nvnSyncFinalize(&amp;m_UniformBlockUpdateSync);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    nvnSyncFinalize(&amp;m_WindowSync);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    nvnCommandBufferFinalize(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">if</span>(m_pRenderTargetControlPool)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        AlignedDeallocate(m_pRenderTargetControlPool);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        m_pRenderTargetControlPool = NULL;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    nvnCommandBufferFinalize(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span>(m_pCommandMemoryPool)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        m_pCommandMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keyword">delete</span> m_pCommandMemoryPool;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        m_pCommandMemoryPool = NULL;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span>(m_pControlPool)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        AlignedDeallocate(m_pControlPool);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        m_pControlPool = NULL;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span>(m_pWindow)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        nvnWindowFinalize(m_pWindow);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keyword">delete</span> m_pWindow;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        m_pWindow = NULL;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span>(m_pRenderTargets[i])</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            nvnTextureFinalize(m_pRenderTargets[i]);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keyword">delete</span> m_pRenderTargets[i];</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            m_pRenderTargets[i] = NULL;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span>(m_pDepthBuffer)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        nvnTextureFinalize(m_pDepthBuffer);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keyword">delete</span> m_pDepthBuffer;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        m_pDepthBuffer = NULL;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    m_UniformBlockVertex.Finalize();</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    m_UniformBlockFragment.Finalize();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span>(m_pUniformBufferMemoryPool)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        m_pUniformBufferMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keyword">delete</span> m_pUniformBufferMemoryPool;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        m_pUniformBufferMemoryPool = NULL;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span>(m_pDataHolder)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keyword">delete</span> m_pDataHolder;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        m_pDataHolder = NULL;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span>(m_pAssetLoader)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keyword">delete</span> m_pAssetLoader;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        m_pAssetLoader = NULL;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span>(m_pRenderTargetMemoryPool)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        m_pRenderTargetMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keyword">delete</span> m_pRenderTargetMemoryPool;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        m_pRenderTargetMemoryPool = NULL;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (m_pShaderScratchMemoryPool)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        m_pShaderScratchMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keyword">delete</span> m_pShaderScratchMemoryPool;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        m_pShaderScratchMemoryPool = NULL;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        m_ShaderScratchSize = 0;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span>(m_pTextureIDManager)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keyword">delete</span> m_pTextureIDManager;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        m_pTextureIDManager = NULL;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    nvnQueueFinalize(&amp;m_Queue);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (m_pQueueMemory)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        AlignedDeallocate(m_pQueueMemory);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        m_pQueueMemory = NULL;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    nvnDeviceFinalize(&amp;m_Device);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::Draw(uint64_t <span class="comment">/*millisec*/</span>)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordtype">int</span> index = UpdateRenderTargets();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_RenderTargetCommandHandle);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    nvnQueueFenceSync(&amp;m_Queue, &amp;m_UniformBlockUpdateSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    nvnSyncWait(&amp;m_UniformBlockUpdateSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleTranslateMat;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    nn::util::MatrixIdentity(&amp;simpleTranslateMat);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleTranslateVector;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    nn::util::VectorSet(&amp;simpleTranslateVector, 0.0f, 0.0f, -3.0f);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    nn::util::MatrixSetTranslate(&amp;simpleTranslateMat, simpleTranslateVector);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleRotateXMat;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    nn::util::MatrixIdentity(&amp;simpleRotateXMat);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleRotateXVector;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    nn::util::VectorSet(&amp;simpleRotateXVector, 30.0f * 3.1459f / 180.0f, 0.0f, 0.0f);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    nn::util::MatrixSetRotateXyz(&amp;simpleRotateXMat, simpleRotateXVector);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleRotateYMat;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    nn::util::MatrixIdentity(&amp;simpleRotateYMat);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleRotateYVector;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    nn::util::VectorSet(&amp;simpleRotateYVector, 0.0f, m_RotY * 3.14159f / 180.0f, 0.0f);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    nn::util::MatrixSetRotateXyz(&amp;simpleRotateYMat, simpleRotateYVector);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleModelMat;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> tempMat1;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    nn::util::MatrixMultiply(&amp;tempMat1, simpleRotateYMat, simpleRotateXMat);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    nn::util::MatrixMultiply(&amp;simpleModelMat, tempMat1, simpleTranslateMat);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> simpleModelMat44;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    nn::util::MatrixConvert(&amp;simpleModelMat44, simpleModelMat);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> projMat44;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    nn::util::MatrixPerspectiveFieldOfViewRightHanded(&amp;projMat44, 60.0f * 3.14159f / 180.0f, <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(m_ScreenWidth) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(m_ScreenHeight), 1.0f, 1000.0f);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    std::vector&lt;NVNTextureData*&gt;&amp; textureData = m_pDataHolder-&gt;GetTextureData();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    UpdateUniformBlock(simpleModelMat44, projMat44, textureData[0]-&gt;m_TextureHandle);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    m_RotY += 0.15f;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    nvnSyncWait(&amp;m_WindowSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_CommandHandle);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    nvnQueuePresentTexture(&amp;m_Queue, m_pWindow, index);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"> * AssetFileLoading::UpdateRenderTargets</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"> * -------------------------------------</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"> * Gets the index of the current render target from the NVNwindow</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment"> * and records a command buffer that sets it up to be rendered to.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="keywordtype">int</span> AssetFileLoading::UpdateRenderTargets()</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a> result = nvnWindowAcquireTexture(m_pWindow, &amp;m_WindowSync, &amp;m_CurrentWindowIndex);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == NVN_WINDOW_ACQUIRE_TEXTURE_RESULT_SUCCESS);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(result);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    nvnCommandBufferBeginRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    nvnCommandBufferSetRenderTargets(&amp;m_RenderTargetCommandBuffer, 1, &amp;m_pRenderTargets[m_CurrentWindowIndex], NULL, m_pDepthBuffer, NULL);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    m_RenderTargetCommandHandle = nvnCommandBufferEndRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">return</span> m_CurrentWindowIndex;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;}</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;{</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (width == 0 || height == 0)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    m_ScreenHeight = height;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    m_ScreenWidth = width;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (m_pWindow == NULL)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        m_pWindow = <span class="keyword">new</span> <a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">         * Otherwise finalize (free) the NVNwindow used for the previous window size.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">         * The NVNWindow must be finalized before a render target it owns is finalized.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        nvnWindowFinalize(m_pWindow);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_DISPLAY_BIT | NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_RGBA8);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> (m_pRenderTargets[i] == NULL)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            m_pRenderTargets[i] = <span class="keyword">new</span> <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            nvnTextureFinalize(m_pRenderTargets[i]);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        nvnTextureBuilderSetStorage(&amp;m_RenderTargetBuilder, m_pRenderTargetMemoryPool-&gt;GetMemoryPool(), m_ColorTargetSize * i);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span> (!nvnTextureInitialize(m_pRenderTargets[i], &amp;m_RenderTargetBuilder))</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target&quot;</span>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">if</span> (m_pDepthBuffer == NULL)</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        m_pDepthBuffer = <span class="keyword">new</span> <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        nvnTextureFinalize(m_pDepthBuffer);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_DEPTH32F);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    nvnTextureBuilderSetStorage(&amp;m_RenderTargetBuilder, m_pRenderTargetMemoryPool-&gt;GetMemoryPool(), m_ColorTargetSize * g_NumColorBuffers);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">if</span> (!nvnTextureInitialize(m_pDepthBuffer, &amp;m_RenderTargetBuilder))</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize depth target&quot;</span>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    nvnWindowBuilderSetTextures(&amp;m_WindowBuilder, g_NumColorBuffers, m_pRenderTargets);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    nvnWindowInitialize(m_pWindow, &amp;m_WindowBuilder);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        nvnCommandBufferBeginRecording(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            m_pTextureIDManager-&gt;SetSamplerPool(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            m_pTextureIDManager-&gt;SetTexturePool(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <span class="comment">// Sets the scissor rectangle and viewport to the full screen</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            nvnCommandBufferSetScissor(&amp;m_CommandBuffer, 0, 0, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            nvnCommandBufferSetViewport(&amp;m_CommandBuffer, 0, 0, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordtype">float</span> clear_color[4] = { 0.4f, 0.55f, 0.6f, 1.0f };</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, clear_color, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            nvnCommandBufferClearDepthStencil(&amp;m_CommandBuffer, 1.0, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>, 0, 255);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            std::vector&lt;NVNModelData*&gt;&amp;     modelData   = m_pDataHolder-&gt;GetModelData();</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            std::vector&lt;NVNProgramData*&gt;&amp;   programData = m_pDataHolder-&gt;GetProgramData();</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            nvnCommandBufferBindBlendState(&amp;m_CommandBuffer, &amp;m_BlendState);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            nvnCommandBufferBindChannelMaskState(&amp;m_CommandBuffer, &amp;m_ChannelMaskState);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            nvnCommandBufferBindColorState(&amp;m_CommandBuffer, &amp;m_ColorState);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            nvnCommandBufferBindDepthStencilState(&amp;m_CommandBuffer, &amp;m_DepthStencilState);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            nvnCommandBufferBindMultisampleState(&amp;m_CommandBuffer, &amp;m_MultisampleState);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            nvnCommandBufferBindPolygonState(&amp;m_CommandBuffer, &amp;m_PolygonState);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            nvnCommandBufferSetSampleMask(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(~0));</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            Model* pModel = &amp;modelData[0]-&gt;m_Model;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <a class="code" href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a> vboAddr = nvnBufferGetAddress(&amp;modelData[0]-&gt;m_VertexBuffer);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; pModel-&gt;m_VertexAttributes.size(); ++i)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                VertexAttribute&amp; attr = pModel-&gt;m_VertexAttributes[i];</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                nvnCommandBufferBindVertexBuffer(&amp;m_CommandBuffer, attr.m_Location, vboAddr + modelData[0]-&gt;m_VertexAttributeBufferOffsets[i], attr.m_DataSize);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            uint32_t vertBindingLoc = SimpleTexturedModel::BlockVSUniformBlockData::GetBinding(NVN_SHADER_STAGE_VERTEX);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            nvnCommandBufferBindUniformBuffer(&amp;m_CommandBuffer, NVN_SHADER_STAGE_VERTEX, vertBindingLoc, m_UniformBlockVertex.GetBufferAddress(), <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockVSUniformBlockData));</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            uint32_t fragBindingLoc = SimpleTexturedModel::BlockFSUniformBlockData::GetBinding(NVN_SHADER_STAGE_FRAGMENT);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            nvnCommandBufferBindUniformBuffer(&amp;m_CommandBuffer, NVN_SHADER_STAGE_FRAGMENT, fragBindingLoc, m_UniformBlockFragment.GetBufferAddress(), <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockFSUniformBlockData));</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            nvnCommandBufferBindVertexAttribState(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(modelData[0]-&gt;m_VertexAttributeStates.size()), &amp;modelData[0]-&gt;m_VertexAttributeStates[0]);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            nvnCommandBufferBindVertexStreamState(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(modelData[0]-&gt;m_VertexStreamStates.size()), &amp;modelData[0]-&gt;m_VertexStreamStates[0]);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            <span class="keywordflow">if</span> (m_pShaderScratchMemoryPool)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                nvnCommandBufferSetShaderScratchMemory(&amp;m_CommandBuffer, m_pShaderScratchMemoryPool-&gt;GetMemoryPool(), 0, m_ShaderScratchSize);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            programData[0]-&gt;BindShaderProgram(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <a class="code" href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a> indexType = <span class="keyword">static_cast&lt;</span><a class="code" href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a><span class="keyword">&gt;</span>(modelData[0]-&gt;m_Model.m_IndexData.m_IndexType);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            uint32_t numIndices = pModel-&gt;m_IndexData.m_DataSize / pModel-&gt;m_IndexData.m_Stride;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            nvnCommandBufferDrawElements(&amp;m_CommandBuffer,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                         <span class="keyword">static_cast&lt;</span><a class="code" href="group__nvn__c__enum.html#gab22437710b6816a67a1263d0087ded72">NVNdrawPrimitive</a><span class="keyword">&gt;</span>(pModel-&gt;m_NvnDrawPrimitiveType),</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                         indexType,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                         numIndices,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                         nvnBufferGetAddress(&amp;modelData[0]-&gt;m_IndexBuffer));</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        m_CommandHandle = nvnCommandBufferEndRecording(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#ifdef CHECK_COMMAND_BUFFER_MEMORY_USAGE</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    m_CommandMemoryUsed = nvnCommandBufferGetCommandMemoryUsed(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    m_ControlMemoryUsed = nvnCommandBufferGetControlMemoryUsed(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keywordtype">void</span> AssetFileLoading::DebugLayerCallback(</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordtype">void</span>* pUser</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    )</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;{</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pUser == NULL);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(pUser);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;NVN Debug Layer Callback:\n&quot;</span>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  source:       0x%08x\n&quot;</span>, source);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  type:         0x%08x\n&quot;</span>, type);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  id:           0x%08x\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  severity:     0x%08x\n&quot;</span>, severity);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  message:      %s\n&quot;</span>, message);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Debug layer callback hit&quot;</span>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;}</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;TutorialBaseClass* t()</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;{</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keyword">static</span> AssetFileLoading s_Tut;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">return</span> (&amp;s_Tut);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;}</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    TutorialRun();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="ttc" id="a_asset_file_loading_helper_8h_html"><div class="ttname"><a href="_asset_file_loading_helper_8h.html">AssetFileLoadingHelper.h</a></div><div class="ttdoc">This file defines a helper class used to load in asset files generated by Tutorial02.</div></div>
<div class="ttc" id="a_debug_text_renderer_8h_html"><div class="ttname"><a href="_debug_text_renderer_8h.html">DebugTextRenderer.h</a></div><div class="ttdoc">This file defines a singleton class that renders text to the screen.</div></div>
<div class="ttc" id="a_stat_tracker_8h_html"><div class="ttname"><a href="_stat_tracker_8h.html">StatTracker.h</a></div><div class="ttdoc">This file defines a helper class that sets up command buffers to report GPU statistic counters and re...</div></div>
<div class="ttc" id="a_texture_i_d_manager_8h_html"><div class="ttname"><a href="_texture_i_d_manager_8h.html">TextureIDManager.h</a></div><div class="ttdoc">This file defines a class that wraps the texture and sampler registering process.</div></div>
<div class="ttc" id="a_tutorial_base_class_8h_html"><div class="ttname"><a href="_tutorial_base_class_8h.html">TutorialBaseClass.h</a></div><div class="ttdoc">This class is shared among all tutorials in order to abstract away per-operating system details relat...</div></div>
<div class="ttc" id="a_tutorial_util_8h_html"><div class="ttname"><a href="_tutorial_util_8h.html">TutorialUtil.h</a></div><div class="ttdoc">This file defines the interface for utility functions used in the tutorials.</div></div>
<div class="ttc" id="a_uniform_buffer_8h_html"><div class="ttname"><a href="_uniform_buffer_8h.html">UniformBuffer.h</a></div><div class="ttdoc">This file defines a helper class for setting up uniform blocks.</div></div>
<div class="ttc" id="aclassnn_1_1_result_html"><div class="ttname"><a href="classnn_1_1_result.html">nn::Result</a></div><div class="ttdoc">Represents the generic result of an operation.</div><div class="ttdef"><b>Definition:</b> nn_Result.h:32</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="agroup__nvn__c__api__typedefs_html_ga05b6b3dd5b965bd81efe2d03cee0bbbd"><div class="ttname"><a href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a></div><div class="ttdeci">void * NVNnativeWindow</div><div class="ttdoc">Platform native window type.</div><div class="ttdef"><b>Definition:</b> nvn.h:159</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga48151b7e768a13685d77d1a4c464a33b"><div class="ttname"><a href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a></div><div class="ttdeci">#define NVN_TRUE</div><div class="ttdoc">Boolean condition with a value of true.</div><div class="ttdef"><b>Definition:</b> nvn.h:4566</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga4eb83fe713146d844b1ac7f8e9c3dada"><div class="ttname"><a href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MAJOR_VERSION</div><div class="ttdoc">Major version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:59</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga6c3444e501307a094f1d57abf1059aed"><div class="ttname"><a href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a></div><div class="ttdeci">#define NVN_WAIT_TIMEOUT_MAXIMUM</div><div class="ttdoc">When waiting on NVNsync objects, wait indefinitely until the sync object is signaled.</div><div class="ttdef"><b>Definition:</b> nvn.h:4574</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gaa8b4a49a0c4f852b73be3b50bb3f270e"><div class="ttname"><a href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MINOR_VERSION</div><div class="ttdoc">Minor version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:62</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gace820e752b400cf7aa36e9684a7f45cb"><div class="ttname"><a href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_ALIGNMENT</div><div class="ttdoc">Required base address alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4578</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gadfd69601d2d9f953c55808127ba60853"><div class="ttname"><a href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_GRANULARITY</div><div class="ttdoc">Required size alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4582</div></div>
<div class="ttc" id="agroup__nvn__c__entryfuncptrs_html_ga9557d931192cd70c7d2810a6425326eb"><div class="ttname"><a href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a></div><div class="ttdeci">PFNNVNGENERICFUNCPTRPROC(* PFNNVNDEVICEGETPROCADDRESSPROC)(const NVNdevice *device, const char *name)</div><div class="ttdoc">Function pointer type to call nvnDeviceGetProcAddress().</div><div class="ttdef"><b>Definition:</b> nvn.h:15922</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga58e9b155d7f2272b95044eed1f40415e"><div class="ttname"><a href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a></div><div class="ttdeci">NVNwindowAcquireTextureResult</div><div class="ttdoc">Specifies the result of acquiring a texture from a window.</div><div class="ttdef"><b>Definition:</b> nvn.h:2673</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga661d03f0e1c886c81d5ccc67935df182"><div class="ttname"><a href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a></div><div class="ttdeci">NVNdebugCallbackType</div><div class="ttdoc">Specifies the type of event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2924</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga6d72003c068d7795201e77d27bf8c7ac"><div class="ttname"><a href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a></div><div class="ttdeci">NVNdebugCallbackSeverity</div><div class="ttdoc">Specifies the severity of the event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2954</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga70a49f98019e4832818240297bee7eb3"><div class="ttname"><a href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a></div><div class="ttdeci">NVNdebugCallbackSource</div><div class="ttdoc">Specifies the type of operation being performed when a debug callback is made.</div><div class="ttdef"><b>Definition:</b> nvn.h:2902</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gaaf90e0c2dbdc1e42db8192f0c0cb1522"><div class="ttname"><a href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a></div><div class="ttdeci">NVNindexType</div><div class="ttdoc">Specifies a data type used for index values in DrawElements commands.</div><div class="ttdef"><b>Definition:</b> nvn.h:2232</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gab22437710b6816a67a1263d0087ded72"><div class="ttname"><a href="group__nvn__c__enum.html#gab22437710b6816a67a1263d0087ded72">NVNdrawPrimitive</a></div><div class="ttdeci">NVNdrawPrimitive</div><div class="ttdoc">Specifies the type of primitive to render in draw calls.</div><div class="ttdef"><b>Definition:</b> nvn.h:2120</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6"><div class="ttname"><a href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a></div><div class="ttdeci">@ NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</div><div class="ttdoc">Enable (TRUE) or disable (FALSE) level 2 debug layer for the device.</div><div class="ttdef"><b>Definition:</b> nvn.h:2828</div></div>
<div class="ttc" id="agroup__nvn__c__funcptrs_html_gab106acc34961bf1c3a43514686dbfc4b"><div class="ttname"><a href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a></div><div class="ttdeci">void(* PFNNVNDEBUGCALLBACKPROC)(NVNdebugCallbackSource source, NVNdebugCallbackType type, int id, NVNdebugCallbackSeverity severity, const char *message, void *userParam)</div><div class="ttdoc">Function pointer type used to specify a function to call for debug callbacks.</div><div class="ttdef"><b>Definition:</b> nvn.h:4674</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_ga067da3a838f115226c89fad655278f80"><div class="ttname"><a href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a></div><div class="ttdeci">uint64_t NVNbufferAddress</div><div class="ttdoc">GPU address of memory inside a buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:434</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gaa1a1fc7a9e690ce93870bcd71ea6b446"><div class="ttname"><a href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a></div><div class="ttdeci">uint64_t NVNtextureHandle</div><div class="ttdoc">GPU handle used to refer to a texture object for texture mapping operations.</div><div class="ttdef"><b>Definition:</b> nvn.h:441</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gab7f10945ffe1f6161c87238c75ae411d"><div class="ttname"><a href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a></div><div class="ttdeci">uint64_t NVNcommandHandle</div><div class="ttdoc">GPU handle used to refer to a command buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:437</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a2e453fe1fbf8f818dc45bbd2897105cd"><div class="ttname"><a href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a></div><div class="ttdeci">Result MountRom(const char *name, void *pFileSystemCacheBuffer, size_t fileSystemCacheBufferSize) NN_NOEXCEPT</div><div class="ttdoc">Mounts ROM resource data.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5df6e3385c795a5bd046790ef7f17f2d"><div class="ttname"><a href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a></div><div class="ttdeci">Result QueryMountRomCacheSize(size_t *pOutValue) NN_NOEXCEPT</div><div class="ttdoc">Get the size needed for the nn::fs::MountRom file system cache.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8a95249afd4a87a55d319dfecb0466c"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></div><div class="ttdeci">void Unmount(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Unmounts a mounted file system and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_ad620d8208dd309eb7c4dd5973a6aeee5"><div class="ttname"><a href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">nn::gfx::MemoryPool</a></div><div class="ttdeci">TMemoryPool&lt; TargetConfig::Variation &gt; MemoryPool</div><div class="ttdoc">The type definition representing a memory pool.</div><div class="ttdef"><b>Definition:</b> gfx_Types.h:116</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a895595468f09d14293edd099a8ff7dc5"><div class="ttname"><a href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">nn::socket::Shutdown</a></div><div class="ttdeci">int Shutdown(int socket, ShutdownMethod how) NN_NOEXCEPT</div><div class="ttdoc">Disable sends and/or receives on a socket.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___assert_8h_html_a0473ebccccc250efd6100a9bbfec406b"><div class="ttname"><a href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a></div><div class="ttdeci">#define NN_ASSERT_NOT_NULL(pointer)</div><div class="ttdoc">Tests whether the pointer is not a null pointer.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:140</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_a82564079f8f8c6547726002a9b168bdb"><div class="ttname"><a href="nn___macro_8h.html#a82564079f8f8c6547726002a9b168bdb">NN_DISALLOW_COPY</a></div><div class="ttdeci">#define NN_DISALLOW_COPY(type)</div><div class="ttdoc">Prohibits copy constructors and copy assignment operators.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:507</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="ann___windows_8h_html"><div class="ttname"><a href="nn___windows_8h.html">nn_Windows.h</a></div><div class="ttdoc">A header file that enables &lt;Windows.h&gt; to be included safely.</div></div>
<div class="ttc" id="anvn___func_ptr_impl_8h_html"><div class="ttname"><a href="nvn___func_ptr_impl_8h.html">nvn_FuncPtrImpl.h</a></div><div class="ttdoc">Definition of the global function pointer variables implementing the entry points of the NVN C interf...</div></div>
<div class="ttc" id="anvn___func_ptr_inline_8h_html"><div class="ttname"><a href="nvn___func_ptr_inline_8h.html">nvn_FuncPtrInline.h</a></div><div class="ttdoc">Implementation of the NVN C interface entry points as inline functions that call through global funct...</div></div>
<div class="ttc" id="astruct_n_v_nblend_state_html"><div class="ttname"><a href="struct_n_v_nblend_state.html">NVNblendState</a></div><div class="ttdoc">API state object controlling blending for one color target.</div><div class="ttdef"><b>Definition:</b> nvn.h:241</div></div>
<div class="ttc" id="astruct_n_v_nbuffer_builder_html"><div class="ttname"><a href="struct_n_v_nbuffer_builder.html">NVNbufferBuilder</a></div><div class="ttdoc">Object specifying state used to construct new buffer objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:313</div></div>
<div class="ttc" id="astruct_n_v_nchannel_mask_state_html"><div class="ttname"><a href="struct_n_v_nchannel_mask_state.html">NVNchannelMaskState</a></div><div class="ttdoc">API state object holding per-channel write masks for all color buffers.</div><div class="ttdef"><b>Definition:</b> nvn.h:247</div></div>
<div class="ttc" id="astruct_n_v_ncolor_state_html"><div class="ttname"><a href="struct_n_v_ncolor_state.html">NVNcolorState</a></div><div class="ttdoc">API state object controlling processing of color values.</div><div class="ttdef"><b>Definition:</b> nvn.h:252</div></div>
<div class="ttc" id="astruct_n_v_ncommand_buffer_html"><div class="ttname"><a href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn.h:236</div></div>
<div class="ttc" id="astruct_n_v_ndepth_stencil_state_html"><div class="ttname"><a href="struct_n_v_ndepth_stencil_state.html">NVNdepthStencilState</a></div><div class="ttdoc">API state object controlling depth and stencil testing operations.</div><div class="ttdef"><b>Definition:</b> nvn.h:258</div></div>
<div class="ttc" id="astruct_n_v_ndevice_builder_html"><div class="ttname"><a href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a></div><div class="ttdoc">Object specifying state used to construct new device objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:216</div></div>
<div class="ttc" id="astruct_n_v_ndevice_html"><div class="ttname"><a href="struct_n_v_ndevice.html">NVNdevice</a></div><div class="ttdoc">API class used to represent a specific GPU/device.</div><div class="ttdef"><b>Definition:</b> nvn.h:221</div></div>
<div class="ttc" id="astruct_n_v_nmultisample_state_html"><div class="ttname"><a href="struct_n_v_nmultisample_state.html">NVNmultisampleState</a></div><div class="ttdoc">API state object controlling multisample rasterization and sample processing.</div><div class="ttdef"><b>Definition:</b> nvn.h:264</div></div>
<div class="ttc" id="astruct_n_v_npolygon_state_html"><div class="ttname"><a href="struct_n_v_npolygon_state.html">NVNpolygonState</a></div><div class="ttdoc">API state object controlling rasterization of polygons.</div><div class="ttdef"><b>Definition:</b> nvn.h:269</div></div>
<div class="ttc" id="astruct_n_v_nqueue_builder_html"><div class="ttname"><a href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a></div><div class="ttdoc">Object specifying state used to construct new queue objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:226</div></div>
<div class="ttc" id="astruct_n_v_nqueue_html"><div class="ttname"><a href="struct_n_v_nqueue.html">NVNqueue</a></div><div class="ttdoc">API class used to send commands to the GPU.</div><div class="ttdef"><b>Definition:</b> nvn.h:231</div></div>
<div class="ttc" id="astruct_n_v_nsampler_builder_html"><div class="ttname"><a href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a></div><div class="ttdoc">Object specifying state used to construct new sampler objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:352</div></div>
<div class="ttc" id="astruct_n_v_nsync_html"><div class="ttname"><a href="struct_n_v_nsync.html">NVNsync</a></div><div class="ttdoc">Synchronization primitive object used to order execution of commands and track progress.</div><div class="ttdef"><b>Definition:</b> nvn.h:364</div></div>
<div class="ttc" id="astruct_n_v_ntexture_builder_html"><div class="ttname"><a href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a></div><div class="ttdoc">Object specifying state used to construct new texture objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:330</div></div>
<div class="ttc" id="astruct_n_v_ntexture_html"><div class="ttname"><a href="struct_n_v_ntexture.html">NVNtexture</a></div><div class="ttdoc">Block of GPU-accessible memory and related state used to hold image data.</div><div class="ttdef"><b>Definition:</b> nvn.h:325</div></div>
<div class="ttc" id="astruct_n_v_nwindow_builder_html"><div class="ttname"><a href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a></div><div class="ttdoc">Object specifying state used to construct new window objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:375</div></div>
<div class="ttc" id="astruct_n_v_nwindow_html"><div class="ttname"><a href="struct_n_v_nwindow.html">NVNwindow</a></div><div class="ttdoc">Object that manages texture presentation to the platform windowing system.</div><div class="ttdef"><b>Definition:</b> nvn.h:370</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_float_row_major4x4_html"><div class="ttname"><a href="structnn_1_1util_1_1_float_row_major4x4.html">nn::util::FloatRowMajor4x4</a></div><div class="ttdoc">Represents a four-row, four-column, row-major matrix using a single precision floating point array.</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:198</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_matrix_row_major4x3f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::MatrixRowMajor4x3fType</a></div><div class="ttdoc">Represents a four-row, three-column, row-major matrix using a single precision floating point data ty...</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:394</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_matrix_row_major4x4f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::MatrixRowMajor4x4fType</a></div><div class="ttdoc">Represents a four-row, four-column, row-major matrix using a single precision floating point data typ...</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:422</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_vector3f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a></div><div class="ttdoc">Represents a three-dimensional vector using a single precision floating point data type.</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:306</div></div>
<div class="ttc" id="autil___matrix_8h_html"><div class="ttname"><a href="util___matrix_8h.html">util_Matrix.h</a></div><div class="ttdoc">Provides matrix calculations.</div></div>
<div class="ttc" id="autil___vector_8h_html"><div class="ttname"><a href="util___vector_8h.html">util_Vector.h</a></div><div class="ttdoc">Provides vector calculations.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleNvnTutorial03_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This application uses loaded model data, texture data, and compiled shaders to render a spinning textured cube. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
