<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Audio Memory Pool Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_audio.html">Audio Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Audio Memory Pool Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleAudioAudioMemoryPool_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>Describes the audio memory pool sample program.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionBrief"></a>
Overview</h1>
<p>This sample uses an audio memory pool to play audio.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_c6a114ae7b5d1580d9709fe2fbbcd8e0.html">Samples/Sources/Applications/AudioMemoryPool/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>You must be able to use audio output.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionHowToOperate"></a>
How to Use</h1>
<p>After this sample program runs, BGM starts playing. You can also use the buttons to play sound effects.</p>
<p>This sample program demonstrates how to use <code><a class="el" href="structnn_1_1audio_1_1_memory_pool_type.html" title="Structure for representing memory regions used by an audio renderer.">nn::audio::MemoryPoolType</a></code>. This sample assumes that you already know how to use basic audio renderers. For a detailed example of using the audio renderer, see <code><a class="el" href="dir_70876cb07341a98dfa9ff0036c24a992.html">Samples/Sources/Applications/AudioRenderer/ </a> </code>.</p>
<table class="doxtable">
<tr>
<th>Input </th><th>Operation  </th></tr>
<tr>
<td>A Button </td><td>Enable or disable the BGM playback state.  </td></tr>
<tr>
<td>[X] </td><td>Play sound effect 0.  </td></tr>
<tr>
<td>[Y] </td><td>Play sound effect 1.  </td></tr>
<tr>
<td>START or SPACEBAR </td><td>Exits the program.  </td></tr>
</table>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionPrecaution"></a>
Important Information</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleAudioAudioMemoryPool_SectionDetail"></a>
Description</h1>
<p>This sample program shows how to use <code><a class="el" href="structnn_1_1audio_1_1_memory_pool_type.html" title="Structure for representing memory regions used by an audio renderer.">nn::audio::MemoryPoolType</a></code>. The following is a description of sound effect playback and stream playback, which plays back waveform data as it is sequentially read into memory, using two methods as examples.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Initialize the file system and HID.</li>
<li>Initialize the most basic configuration of an audio renderer, and start the process.</li>
<li>Prepare a memory pool for sound effects and a voice for playback.</li>
<li>Prepare a memory pool for stream playback and a file to use for stream playback.</li>
<li>Update <code>WaveBuffer</code> for stream playback.</li>
<li>Destroy memory pool.</li>
</ul>
<p>The memory pool structure (<code><a class="el" href="structnn_1_1audio_1_1_memory_pool_type.html" title="Structure for representing memory regions used by an audio renderer.">nn::audio::MemoryPoolType</a></code>) represents a memory region used by an audio renderer. To initialize a memory pool, pass a memory region to the <code><a class="el" href="namespacenn_1_1audio.html#a8e7b32e31ba3ea6f61c00c752c3a90d0" title="Gets a memory pool for an audio renderer.">nn::audio::AcquireMemoryPool()</a></code> function. The specified region can then be used by an audio renderer. All of the data that must be in the memory pool for the audio renderer to work must be placed in this region. The following types of data must be placed in the memory pool.</p><ul>
<li>Buffers specified as instances of <code><a class="el" href="structnn_1_1audio_1_1_wave_buffer.html#ad7ea254b8bcd4cfa996c2187969a1989" title="Buffer address that maintains the waveform data to play back.">nn::audio::WaveBuffer.buffer</a></code> and <code><a class="el" href="structnn_1_1audio_1_1_wave_buffer.html#a04b836718c60e740f6728d29ca686393" title="Context data.">nn::audio::WaveBuffer.pContext</a></code>.</li>
<li>Buffers specified for the <code><em>pParameter</em></code> parameter of the <code><a class="el" href="namespacenn_1_1audio.html#a3cc31617500698ba14f0d1d5e20b7668" title="Initializes VoiceType with options that specify its behavior and adds it to AudioRendererConfig.">nn::audio::AcquireVoiceSlot()</a></code> function.</li>
<li>Buffers specified for the <code><em>buffer</em></code> parameter of the <code><a class="el" href="namespacenn_1_1audio.html#ad332d3b8805f5157ef98572a99a9f2a0" title="Adds a DelayType object to FinalMixType.">nn::audio::AddDelay()</a></code>, <code><a class="el" href="namespacenn_1_1audio.html#aa081b9cab7e4ca8d079093c1fc50bb4d" title="Adds a ReverbType object to FinalMixType.">nn::audio::AddReverb()</a></code>, <code><a class="el" href="namespacenn_1_1audio.html#a88bff95c7242f9d37ae5f631e825648b" title="Adds a I3dl2ReverbType object to FinalMixType.">nn::audio::AddI3dl2Reverb()</a></code>, and <code><a class="el" href="namespacenn_1_1audio.html#a086c8ae883a8dabacad2c3ff3e995f13" title="Adds an AuxType object to FinalMixType.">nn::audio::AddAux()</a></code> functions for adding effects.</li>
<li>Buffers specified in the <code><em>buffer</em></code> parameter of <code><a class="el" href="namespacenn_1_1audio.html#af781d15dcac44311d87e69ccab19cf57" title="Initializes Sink for a circular buffer.">nn::audio::AddCircularBufferSink()</a></code>.</li>
</ul>
<p>Memory pools have four states: attach requested, attached, detach requested, and detached. Audio renderers can only access audio memory pools that are in the attached state. Memory pools default to the detached state immediately after initialization. For this reason, you must place the necessary data in the memory pool and then explicitly set it to the attached state. This program goes into detail for the settings process.</p>
<p>While a memory pool is in the attached state, make sure not to access the memory region allocated for that memory pool. Memory can be accessed only when using the <code><a class="el" href="namespacenn_1_1fs.html" title="Namespace for the file system library.">nn::fs</a></code> library or <code><a class="el" href="namespacenn_1_1audio.html#a2fb36e3fd0639be1a1ff056d8d80dcc5" title="Reads or writes data to a memory region managed by a memory pool.">nn::audio::CopyMemoryPoolData()</a></code>. Even using this method, however, still try to avoid accessing the data while it is being used by an audio renderer. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
