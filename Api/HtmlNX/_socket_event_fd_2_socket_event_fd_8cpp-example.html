<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SocketEventFd/SocketEventFd.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SocketEventFd/SocketEventFd.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_socket_event_fd.html">SocketEventFd sample</a> and <tt>SocketEventFd/SocketEventFd.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span> <span class="comment">// size_t</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span>   <span class="comment">// std::string</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___macro_8h.html">nn/nn_Macro.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___time_span_8h.html">nn/nn_TimeSpan.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="os___event_8h.html">nn/os/os_Event.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="socket_8h.html">nn/socket.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Network socket library static memory</span></div>
<div class="line"><a name="_a0"></a><a class="code" href="classnn_1_1socket_1_1_config_default_with_memory.html">nn::socket::ConfigDefaultWithMemory</a> g_SocketConfigWithMemory;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Worker interruptThread data</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> ThreadStackSize = 8192;</div>
<div class="line"><a name="a1"></a><a class="code" href="os___thread_common_8h.html#a5ce0c3c0aaceb976178a60a18d90f470">NN_OS_ALIGNAS_THREAD_STACK</a> <span class="keywordtype">char</span>  g_threadInterruptStack[ThreadStackSize];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Number the semaphore EventFds are incremented by in the example.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> SemaphoreCount = 3;</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Creates 4 EventFds, 1 for each type:</span></div>
<div class="line"><span class="comment">// fdNone: socket emulation</span></div>
<div class="line"><span class="comment">// fdSemaphore: socket emulation with decremented read count</span></div>
<div class="line"><span class="comment">// fdNonBlock: socket emulation with nonblocking read</span></div>
<div class="line"><span class="comment">// fdSemaphoreAndNonBlock: socket enumation with decremented read count and nonblocking</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">struct </span>ExampleEventFdData</div>
<div class="line">{</div>
<div class="line">    ExampleEventFdData()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// You may not want to create many EventFds because there is a limit to how many</span></div>
<div class="line">        <span class="comment">// fdSet the nn::socket library can handle. Limit: @ref nn::socket::FdSetSize</span></div>
<div class="line">        fdNone = <a name="a2"></a><a class="code" href="namespacenn_1_1socket.html#ae82dfb460b32b4e583f55b500385c776">nn::socket::EventFd</a>(0, nn::socket::EventFdFlags::None);</div>
<div class="line">        <span class="keywordflow">if</span>(fdNone == -1)</div>
<div class="line">        {</div>
<div class="line">            <a name="a3"></a><a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;fdNone error: %d\n&quot;</span>, <a name="a4"></a><a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        fdSemaphore = <a class="code" href="namespacenn_1_1socket.html#ae82dfb460b32b4e583f55b500385c776">nn::socket::EventFd</a>(0, nn::socket::EventFdFlags::Semaphore);</div>
<div class="line">        <span class="keywordflow">if</span>(fdSemaphore == -1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;fdSemaphore error: %d\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        fdNonBlock = <a class="code" href="namespacenn_1_1socket.html#ae82dfb460b32b4e583f55b500385c776">nn::socket::EventFd</a>(0, nn::socket::EventFdFlags::Nonblock);</div>
<div class="line">        <span class="keywordflow">if</span>(fdNonBlock == -1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;fdNonBlock error: %d\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        fdSemaphoreAndNonBlock = <a class="code" href="namespacenn_1_1socket.html#ae82dfb460b32b4e583f55b500385c776">nn::socket::EventFd</a>(0, nn::socket::EventFdFlags::SemaphoreAndNonblock);</div>
<div class="line">        <span class="keywordflow">if</span>(fdSemaphoreAndNonBlock == -1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;fdSemaphoreAndNonBlock error: %d\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a5"></a><a class="code" href="namespacenn_1_1os.html#af07abef747ac6b51112b9e800ba9632c">nn::os::InitializeEvent</a>(&amp;writeNextEventFd, <span class="keyword">false</span>, <a name="a6"></a><a class="code" href="namespacenn_1_1os.html#a11ab71d44973a4135958c420e5682452a31f6133098296b3ddb7e14da3dc695cc">nn::os::EventClearMode_AutoClear</a>);</div>
<div class="line">    }</div>
<div class="line">    ~ExampleEventFdData()</div>
<div class="line">    {</div>
<div class="line">        <a name="a7"></a><a class="code" href="namespacenn_1_1os.html#adae3d14bd5e37dd1feee56bbf1717e37">nn::os::FinalizeEvent</a>(&amp;writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <a name="a8"></a><a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(fdSemaphoreAndNonBlock);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(fdNonBlock);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(fdSemaphore);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(fdNone);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> fdNone;                 <span class="comment">// Socket emulation</span></div>
<div class="line">    <span class="keywordtype">int</span> fdSemaphore;            <span class="comment">// Socket emulation with decremented read count</span></div>
<div class="line">    <span class="keywordtype">int</span> fdNonBlock;             <span class="comment">// Socket emulation with nonblocking read when unreadable</span></div>
<div class="line">    <span class="keywordtype">int</span> fdSemaphoreAndNonBlock; <span class="comment">// Socket emulation with decremented read count and nonblocking read when unreadable</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Used to synchronize the interrupt thread and main thread to make logging order</span></div>
<div class="line">    <span class="comment">// deterministic and nonBlocking calls (expected failures: EAgain) determinisitc.</span></div>
<div class="line">    <a name="_a9"></a><a class="code" href="structnn_1_1os_1_1_event_type.html">nn::os::EventType</a> writeNextEventFd;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Convert PollEvent bit flags into a string</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">std::string PollEventToString(<a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9">nn::socket::PollEvent</a> pe)</div>
<div class="line">{</div>
<div class="line">    std::string out;</div>
<div class="line">    <span class="keywordflow">if</span>(pe == nn::socket::PollEvent::PollNone)</div>
<div class="line">    {</div>
<div class="line">        out += <span class="stringliteral">&quot;(PollNone)&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a10"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>      ) != 0) { out += <span class="stringliteral">&quot;(PollIn) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a11"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1034fc649394d42b19fead1ab1828e54">nn::socket::PollEvent::PollPri</a>     ) != 0) { out += <span class="stringliteral">&quot;(PollPri) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a12"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aca8de23660319dc20822f6e6059a727b">nn::socket::PollEvent::PollOut</a>     ) != 0) { out += <span class="stringliteral">&quot;(PollOut) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a13"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a6aee635278505dd8cc1da7f50c4a651d">nn::socket::PollEvent::PollErr</a>     ) != 0) { out += <span class="stringliteral">&quot;(PollErr) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a14"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a2421093408548ab23a7a93500e8cccd3">nn::socket::PollEvent::PollHup</a>     ) != 0) { out += <span class="stringliteral">&quot;(PollHup) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a15"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aecf0948bef1a1db017a0d4e714f05c04">nn::socket::PollEvent::PollNVal</a>    ) != 0) { out += <span class="stringliteral">&quot;(PollNVal) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a16"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aaf909a6e6a64bebd393ae9fbc33f200a">nn::socket::PollEvent::PollRdNorm</a>  ) != 0) { out += <span class="stringliteral">&quot;(PollRdNorm) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a17"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a9b8ce4bb4c25d8b2abc5e5648c9cd54a">nn::socket::PollEvent::PollRdBand</a>  ) != 0) { out += <span class="stringliteral">&quot;(PollRdBand) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a18"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9af5abb7d0050a44e425556082ae71b547">nn::socket::PollEvent::PollWrNorm</a>  ) != 0) { out += <span class="stringliteral">&quot;(PollWrNorm) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; <a name="a19"></a><a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a70417b0dc75887023e5fa42ca645d4c9">nn::socket::PollEvent::PollWrBand</a>  ) != 0) { out += <span class="stringliteral">&quot;(PollWrBand) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; nn::socket::PollEvent::PollMsg     ) != 0) { out += <span class="stringliteral">&quot;(PollMsg) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; nn::socket::PollEvent::PollRdHup   ) != 0) { out += <span class="stringliteral">&quot;(PollRdHup) &quot;</span>; }</div>
<div class="line">        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)(pe &amp; nn::socket::PollEvent::PollInIgnEof) != 0) { out += <span class="stringliteral">&quot;(PollInIgnEof) &quot;</span>; }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> out;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The startup function for the interrupter thread. This thread will make eventFd&#39;s</span></div>
<div class="line"><span class="comment">// readable once it is allowed to write to them. This will then cause Poll() and</span></div>
<div class="line"><span class="comment">// Select() calls to return with the readable eventFd.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> ExampleInterrupter(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    ExampleEventFdData* d = <span class="keyword">static_cast&lt;</span>ExampleEventFdData*<span class="keyword">&gt;</span>(arg);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Structure used to hold the data for the interrupter</span></div>
<div class="line">    <span class="keyword">struct </span>ExCase</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">int</span> fd;</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#ada14f217430a89abc25c5c9ed822f115">nn::socket::EventFdType</a> value;</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// &quot;1337&quot; and &quot;9001&quot; are arbitrary value numbers to write.</span></div>
<div class="line">    <span class="comment">// You may use whatever value you like and expect to receive it</span></div>
<div class="line">    <span class="comment">// when reading from EventFds&#39; with None OR NonBlock flags.</span></div>
<div class="line">    ExCase exCases[] =</div>
<div class="line">    {</div>
<div class="line">        { d-&gt;fdNone,                1337,          },</div>
<div class="line">        { d-&gt;fdSemaphore,           SemaphoreCount,},</div>
<div class="line">        { d-&gt;fdNonBlock,            9001,          },</div>
<div class="line">        { d-&gt;fdSemaphoreAndNonBlock,SemaphoreCount,},</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a name="a20"></a><a class="code" href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a>(exCases); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Used for nonblock examples and output log determinism.</span></div>
<div class="line">        <a name="a21"></a><a class="code" href="namespacenn_1_1os.html#aabdcb2de0b5dbdd64a0ec3d7e65c72f4">nn::os::WaitEvent</a>(&amp;d-&gt;writeNextEventFd);</div>
<div class="line">        <a name="a22"></a><a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;{[Interrupt Thread]} EventFdWrite(%d)\n&quot;</span>, exCases[i].value);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// By writing to the EventFd we make it readable which will make any</span></div>
<div class="line">        <span class="comment">// Poll() or Select() operations using the EventFd to return.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// The order we write to the EventFd does not matter. We may write to it before or</span></div>
<div class="line">        <span class="comment">// during another thread&#39;s call to Poll() or Select(). The EventFd will remain</span></div>
<div class="line">        <span class="comment">// readable until it has been read.</span></div>
<div class="line">        <span class="keywordtype">int</span> res = <a name="a23"></a><a class="code" href="namespacenn_1_1socket.html#af5535161f9c800ca7f7f9e7a854ba122">nn::socket::EventFdWrite</a>(exCases[i].fd, exCases[i].value);</div>
<div class="line">        <a name="a24"></a><a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(res == 0, <span class="stringliteral">&quot;{[Interrupt Thread]} EventFdWrite failed!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Read eventFd and print the results</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> ReadEventFd(<span class="keywordtype">int</span> eventFd, <span class="keyword">const</span> <span class="keywordtype">char</span>* tag)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacenn_1_1socket.html#ada14f217430a89abc25c5c9ed822f115">nn::socket::EventFdType</a> eventValue = 0;</div>
<div class="line">    <span class="keywordtype">int</span> readRes = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print that we are starting a read, the tag is for legibility.</span></div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Reading EventFd (%s)\n&quot;</span>, tag);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a25"></a><a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>(<span class="keyword">true</span>)) <span class="comment">// Logically equivalent operations</span></div>
<div class="line">    {</div>
<div class="line">        readRes = <a name="a26"></a><a class="code" href="namespacenn_1_1socket.html#a5175276a6b52a0b9d6e99a78ea330de5">nn::socket::EventFdRead</a>(eventFd, &amp;eventValue);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>  <span class="comment">// Logically equivalent operations</span></div>
<div class="line">    {</div>
<div class="line">        readRes = <a name="a27"></a><a class="code" href="namespacenn_1_1socket.html#ae1fd34e9d084e5bb0f17a6c2361896c2">nn::socket::Read</a>(eventFd, &amp;eventValue, <span class="keyword">sizeof</span>(eventValue));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    EventFdRead result: %d %s\n&quot;</span>, readRes, readRes == 0 ? <span class="stringliteral">&quot;(success)&quot;</span> : <span class="stringliteral">&quot;(failed)&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span>(readRes == -1) <span class="comment">// Failure</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    EventFdRead Errno: %d%s\n&quot;</span>,</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>(),</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>() == <a name="a28"></a><a class="code" href="namespacenn_1_1socket.html#ad1ade4838b158c7aaf9c9a78338e06aea54cafc2ec81f6d1fe8ba661ade3931cb">nn::socket::Errno::EAgain</a> ? <span class="stringliteral">&quot; = EAgain&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="comment">// 0 (success) OR sizeof(eventValue) depending on static condition above.</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    EventFdRead value:  %d\n&quot;</span>, eventValue);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a name="a29"></a><a class="code" href="_socket_event_fd_8cpp.html#a5a2b600f6e6c5792cf99dcb421973db6">PollExample</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> EventFdIndex = 0;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> SocketFdIndex = 1;</div>
<div class="line">    <span class="comment">// Interrupt thread is used to wake up the main thread from Poll()</span></div>
<div class="line">    <a name="_a30"></a><a class="code" href="structnn_1_1os_1_1_thread_type.html">nn::os::ThreadType</a> interruptThread;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Contructor will creates 4 EventFds, 1 for each type:</span></div>
<div class="line">    <span class="comment">// fdNone:                 socket emulation</span></div>
<div class="line">    <span class="comment">// fdSemaphore:            socket emulation with decremented read count</span></div>
<div class="line">    <span class="comment">// fdNonBlock:             socket emulation with nonblocking read when unreadable</span></div>
<div class="line">    <span class="comment">// fdSemaphoreAndNonBlock: socket enumation with decremented read count and nonblocking read when unreadable</span></div>
<div class="line">    ExampleEventFdData eventFds;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create worker interruptThread to interrupt us from our call to Poll()</span></div>
<div class="line">    <a name="a31"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a32"></a><a class="code" href="namespacenn_1_1os.html#a75f43e1d3c194c0d2173ef5d95785933">nn::os::CreateThread</a>(&amp;interruptThread, ExampleInterrupter, &amp;eventFds, g_threadInterruptStack, ThreadStackSize, <a name="a33"></a><a class="code" href="namespacenn_1_1os.html#a5985811d04e64c0823ed758fd420591d">nn::os::DefaultThreadPriority</a>));</div>
<div class="line">    <a name="a34"></a><a class="code" href="namespacenn_1_1os.html#a18eec7c4c4c298f7abaa9ef41d6de76b">nn::os::StartThread</a>(&amp;interruptThread);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Make a socket fd. In this example it will never become readable.</span></div>
<div class="line">    <span class="keywordtype">int</span> socketFd = <a name="a35"></a><a class="code" href="namespacenn_1_1socket.html#a9afeb564bac1d0c04af2fec1f00c739f">nn::socket::Socket</a>(<a name="a36"></a><a class="code" href="namespacenn_1_1socket.html#a057d985148e23267303e6d00d7ed205daa4d833d8c15a76105639ddd11bcb614e">nn::socket::Family::Af_Inet</a>, <a name="a37"></a><a class="code" href="namespacenn_1_1socket.html#a1db675083dcccec6500d1435c5dfeaeaa4cc079142a1be58955eb22bed651ebba">nn::socket::Type::Sock_Dgram</a>, <a name="a38"></a><a class="code" href="namespacenn_1_1socket.html#a46347de69614965469ac8f3c8056468ea48e0b0b8eaaf71a2c2c0ebfa0e802b1a">nn::socket::Protocol::IpProto_Udp</a>);</div>
<div class="line">    <span class="keywordflow">if</span>(socketFd &lt; 0)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;nn::socket::Socket() failed (error %d)\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="_a39"></a><a class="code" href="structnn_1_1socket_1_1_poll_fd.html">nn::socket::PollFd</a> fds[2] = {};</div>
<div class="line">    <span class="comment">// Wait for readable data on EventFd (ie. EventFdWrite)</span></div>
<div class="line">    fds[EventFdIndex].<a name="a40"></a><a class="code" href="structnn_1_1socket_1_1_poll_fd.html#ab5c064cf340ae80e805a84e927dcdb9f">events</a> = <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>;</div>
<div class="line">    fds[EventFdIndex].<a name="a41"></a><a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = -1; <span class="comment">// set later</span></div>
<div class="line">    <span class="comment">// Wait for readable data on socket. It will never become readable in this example.</span></div>
<div class="line">    fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#ab5c064cf340ae80e805a84e927dcdb9f">events</a> = <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>;</div>
<div class="line">    fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = socketFd;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Poll Event Fd, Flags: None -----------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: None</span></div>
<div class="line">    <span class="comment">// Description: Wait on socketFd until readable OR until our interrupt thread makes fdNone readable.</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = eventFds.fdNone;</div>
<div class="line">        <span class="comment">// Reset return events</span></div>
<div class="line">        fds[EventFdIndex].<a name="a42"></a><a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = nn::socket::PollEvent::PollNone;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll or Read fdNone here. It would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Starting Poll (EventFd Flags None)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write to fdNone.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make behavior deterministic, removal would leave a valid program.</span></div>
<div class="line">        <a name="a43"></a><a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Poll until either fd becomes readable.</span></div>
<div class="line">        <span class="keywordtype">int</span> pollRes = <a name="a44"></a><a class="code" href="namespacenn_1_1socket.html#ad9e109d18fb43f275742d74d74d06cde">nn::socket::Poll</a>(fds, <a class="code" href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a>(fds), <a name="a45"></a><a class="code" href="namespacenn_1_1socket.html#ac63165d8f4ab675489cda23034aa9eeb">nn::socket::InfTim</a>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Poll returned result: %d\n&quot;</span>, pollRes);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent eventFd:  %s\n&quot;</span>, PollEventToString(fds[EventFdIndex].revents).c_str());</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent socketFd: %s\n&quot;</span>, PollEventToString(fds[SocketFdIndex].revents).c_str());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Poll should only return because eventFd is now readable</span></div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(fds[EventFdIndex].revents == <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Read value from event FD</span></div>
<div class="line">        ReadEventFd(eventFds.fdNone, <span class="stringliteral">&quot;None&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll or Read fdNone here. It would block forever unless written to by another thread.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Poll Event Fd, Flags: Semaphore ------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: Semaphore</span></div>
<div class="line">    <span class="comment">// Description: Wait on socketFd until readable OR until fdSemaphore is incremented</span></div>
<div class="line">    <span class="comment">// in which case Poll and read SemaphoreCount times.</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = eventFds.fdSemaphore;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll or Read (decrement) the fdSemaphore here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Start Polling (EventFd Flags Semaphore)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write (increment) to fdSemaphore.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make behavior deterministic, removal would leave a valid program.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Decrement fdSemaphore by SemaphoreCount</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; SemaphoreCount; ++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Reset return events</span></div>
<div class="line">            fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = nn::socket::PollEvent::PollNone;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Poll until either fd becomes readable.</span></div>
<div class="line">            <span class="keywordtype">int</span> pollRes = <a class="code" href="namespacenn_1_1socket.html#ad9e109d18fb43f275742d74d74d06cde">nn::socket::Poll</a>(fds, <a class="code" href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a>(fds), <a class="code" href="namespacenn_1_1socket.html#ac63165d8f4ab675489cda23034aa9eeb">nn::socket::InfTim</a>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Poll returned result: %d\n&quot;</span>, pollRes);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent eventFd:  %s\n&quot;</span>, PollEventToString(fds[EventFdIndex].revents).c_str());</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent socketFd: %s\n&quot;</span>, PollEventToString(fds[SocketFdIndex].revents).c_str());</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Poll should only return because eventFd is now readable</span></div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(fds[EventFdIndex].revents == <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Decrement fdSemaphore counter for every read</span></div>
<div class="line">            ReadEventFd(eventFds.fdSemaphore, <span class="stringliteral">&quot;Semaphore&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll or Read (decrement) the fdSemaphore here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Poll Event Fd, Flags: Nonblock -------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: Nonblock</span></div>
<div class="line">    <span class="comment">// Description: Behaves the same as None option, but EventFdRead will return EAgain</span></div>
<div class="line">    <span class="comment">// error instead of blocking when the EventFd is not readable.</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = eventFds.fdNonBlock;</div>
<div class="line">        <span class="comment">// Reset return events</span></div>
<div class="line">        fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = nn::socket::PollEvent::PollNone;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll fdNonBlock, it would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from a fdNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock, EAgain expected&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Starting Poll (EventFd Flags Nonblock)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write to fdNonBlock.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make program valid and deterministic.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Poll until either fd becomes readable.</span></div>
<div class="line">        <span class="keywordtype">int</span> pollRes = <a class="code" href="namespacenn_1_1socket.html#ad9e109d18fb43f275742d74d74d06cde">nn::socket::Poll</a>(fds, <a class="code" href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a>(fds), <a class="code" href="namespacenn_1_1socket.html#ac63165d8f4ab675489cda23034aa9eeb">nn::socket::InfTim</a>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Poll returned result: %d\n&quot;</span>, pollRes);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent eventFd:  %s\n&quot;</span>, PollEventToString(fds[EventFdIndex].revents).c_str());</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent socketFd: %s\n&quot;</span>, PollEventToString(fds[SocketFdIndex].revents).c_str());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Poll should only return because eventFd is now readable</span></div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(fds[EventFdIndex].revents == <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Read value from event Fd</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll fdNonBlock, it would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from a fdNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock, EAgain expected&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Poll Event Fd, Flags: SemaphoreAndNonBlock -\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-----------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: SemaphoreAndNonBlocking</span></div>
<div class="line">    <span class="comment">// Description: Behaves the same as the Semaphore option, but EventFdRead will return EAagin</span></div>
<div class="line">    <span class="comment">// error instead of blocking when fdSemaphoreAndNonBlock cannot be decremented.</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">fd</a> = eventFds.fdSemaphoreAndNonBlock;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll the fdSemaphoreAndNonBlock here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from fdSemaphoreAndNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;Semaphore, EAgain expected&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Start Polling (EventFd Flags SemaphoreAndNonBlock)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write (increment) to fdSemaphoreAndNonBlock.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make program valid and deterministic.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Decrement fdSemaphore by SemaphoreCount</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; SemaphoreCount; ++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Reset return events</span></div>
<div class="line">            fds[EventFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = fds[SocketFdIndex].<a class="code" href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">revents</a> = nn::socket::PollEvent::PollNone;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Poll until either fd becomes readable.</span></div>
<div class="line">            <span class="keywordtype">int</span> pollRes = <a class="code" href="namespacenn_1_1socket.html#ad9e109d18fb43f275742d74d74d06cde">nn::socket::Poll</a>(fds, <a class="code" href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a>(fds), <a class="code" href="namespacenn_1_1socket.html#ac63165d8f4ab675489cda23034aa9eeb">nn::socket::InfTim</a>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Poll returned result: %d\n&quot;</span>, pollRes);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent eventFd:  %s\n&quot;</span>, PollEventToString(fds[EventFdIndex].revents).c_str());</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    PollEvent socketFd: %s\n&quot;</span>, PollEventToString(fds[SocketFdIndex].revents).c_str());</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Poll should only return because eventFd is now readable</span></div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(fds[EventFdIndex].revents == <a class="code" href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Decrement fdSemaphore counter for every read</span></div>
<div class="line">            ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;Semaphore&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Poll the fdSemaphoreAndNonBlock here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from fdSemaphoreAndNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;Semaphore, EAgain expected&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(socketFd);</div>
<div class="line">    <span class="comment">// Wait for interrupt thread to terminate, it has a ptr to the EventFds on our stack.</span></div>
<div class="line">    <a name="a46"></a><a class="code" href="namespacenn_1_1os.html#a8070c91be85c5ccb36b56e9ff3a75b26">nn::os::WaitThread</a>( &amp;interruptThread );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a name="a47"></a><a class="code" href="_socket_event_fd_8cpp.html#ac3b5f1d8c72de1a4cfe464ad90f5f274">SelectExample</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Interrupt thread is used to wakeup the main thread from Select()</span></div>
<div class="line">    <a class="code" href="structnn_1_1os_1_1_thread_type.html">nn::os::ThreadType</a> interruptThread;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Contructor will creates 4 EventFds, 1 for each type:</span></div>
<div class="line">    <span class="comment">// fdNone:                 socket emulation</span></div>
<div class="line">    <span class="comment">// fdSemaphore:            socket emulation with decremented read count</span></div>
<div class="line">    <span class="comment">// fdNonBlock:             socket emulation with nonblocking read when unreadable</span></div>
<div class="line">    <span class="comment">// fdSemaphoreAndNonBlock: socket enumation with decremented read count and nonblocking read when unreadable</span></div>
<div class="line">    ExampleEventFdData eventFds;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Used by Select()</span></div>
<div class="line">    <a name="_a48"></a><a class="code" href="structnn_1_1socket_1_1_fd_set.html">nn::socket::FdSet</a> fdSet = {};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create worker interruptThread to interrupt us from our Select() call</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1os.html#a75f43e1d3c194c0d2173ef5d95785933">nn::os::CreateThread</a>(&amp;interruptThread, ExampleInterrupter, &amp;eventFds, g_threadInterruptStack, ThreadStackSize, <a class="code" href="namespacenn_1_1os.html#a5985811d04e64c0823ed758fd420591d">nn::os::DefaultThreadPriority</a>));</div>
<div class="line">    <a class="code" href="namespacenn_1_1os.html#a18eec7c4c4c298f7abaa9ef41d6de76b">nn::os::StartThread</a>(&amp;interruptThread);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Make a socket fd. In this example it will never become readable.</span></div>
<div class="line">    <span class="keywordtype">int</span> socketFd = <a class="code" href="namespacenn_1_1socket.html#a9afeb564bac1d0c04af2fec1f00c739f">nn::socket::Socket</a>(<a class="code" href="namespacenn_1_1socket.html#a057d985148e23267303e6d00d7ed205daa4d833d8c15a76105639ddd11bcb614e">nn::socket::Family::Af_Inet</a>, <a class="code" href="namespacenn_1_1socket.html#a1db675083dcccec6500d1435c5dfeaeaa4cc079142a1be58955eb22bed651ebba">nn::socket::Type::Sock_Dgram</a>, <a class="code" href="namespacenn_1_1socket.html#a46347de69614965469ac8f3c8056468ea48e0b0b8eaaf71a2c2c0ebfa0e802b1a">nn::socket::Protocol::IpProto_Udp</a>);</div>
<div class="line">    <span class="keywordflow">if</span>(socketFd &lt; 0)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;nn::socket::Socket() failed (error %d)\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a>());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get max fdIndex</span></div>
<div class="line">    <span class="keywordtype">int</span> maxFdIndex = -1;</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(socketFd                        &gt; maxFdIndex) maxFdIndex = socketFd;</div>
<div class="line">        <span class="keywordflow">if</span>(eventFds.fdNone                 &gt; maxFdIndex) maxFdIndex = eventFds.fdNone;</div>
<div class="line">        <span class="keywordflow">if</span>(eventFds.fdSemaphore            &gt; maxFdIndex) maxFdIndex = eventFds.fdSemaphore;</div>
<div class="line">        <span class="keywordflow">if</span>(eventFds.fdNonBlock             &gt; maxFdIndex) maxFdIndex = eventFds.fdNonBlock;</div>
<div class="line">        <span class="keywordflow">if</span>(eventFds.fdSemaphoreAndNonBlock &gt; maxFdIndex) maxFdIndex = eventFds.fdSemaphoreAndNonBlock;</div>
<div class="line">    }</div>
<div class="line">    maxFdIndex += 1;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Select Event Fd, Flags: None -----------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: None</span></div>
<div class="line">    <span class="comment">// Description: Wait on socketFd until readable OR until our interrupt thread makes fdNone readable</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        <a name="a49"></a><a class="code" href="namespacenn_1_1socket.html#aa62380fb58406f3d7e83ea25c6deab35">nn::socket::FdSetZero</a>(&amp;fdSet);</div>
<div class="line">        <a name="a50"></a><a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(eventFds.fdNone, &amp;fdSet);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(socketFd, &amp;fdSet);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select or Read fdNone here. It would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select started (EventFd Flags None)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread write to fdNone.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make behavior deterministic, removal would leave a valid program.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Select until either fd becomes readable.</span></div>
<div class="line">        <span class="keywordtype">int</span> selectRes = <a name="a51"></a><a class="code" href="namespacenn_1_1socket.html#aa523b16a6004b8748cc0116f9ed65dd2">nn::socket::Select</a>(maxFdIndex, &amp;fdSet, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select returned result: %d\n&quot;</span>, selectRes);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select eventFd is %sreadable\n&quot;</span>, <a name="a52"></a><a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(eventFds.fdNone, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select socketFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(socketFd, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Read value from event FD</span></div>
<div class="line">        ReadEventFd(eventFds.fdNone, <span class="stringliteral">&quot;None&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select or Read again. It would block forever unless written to by another thread.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Select Event Fd, Flags: Semaphore ------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: Semaphore</span></div>
<div class="line">    <span class="comment">// Description: wait on socketFd until readable OR until fdSemaphore is incremented</span></div>
<div class="line">    <span class="comment">// in which case Select and read SemaphoreCount times.</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// If we attempted to Select or Read (decrement) the fdSemaphore here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select started (EventFd Flags Semaphore)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread write (increment) to fdSemaphore.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make behavior deterministic, removal would leave a valid program.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Decrement fdSemaphore by SemaphoreCount</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; SemaphoreCount; ++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Set eventFd</span></div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#aa62380fb58406f3d7e83ea25c6deab35">nn::socket::FdSetZero</a>(&amp;fdSet);</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(eventFds.fdSemaphore, &amp;fdSet);</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(socketFd, &amp;fdSet);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordtype">int</span> selectRes = <a class="code" href="namespacenn_1_1socket.html#aa523b16a6004b8748cc0116f9ed65dd2">nn::socket::Select</a>(maxFdIndex, &amp;fdSet, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select returned result: %d\n&quot;</span>, selectRes);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select eventFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(eventFds.fdSemaphore, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select socketFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(socketFd, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Reading will decrement fdSemaphore&#39;s counter</span></div>
<div class="line">            ReadEventFd(eventFds.fdSemaphore, <span class="stringliteral">&quot;Semaphore&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select or Read (decrement) the fdSemaphore here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Select Event Fd, Flags: Nonblock -------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: Nonblock</span></div>
<div class="line">    <span class="comment">// Description: Behaves the same as None, but Read will return an error instead of blocking</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set eventFd</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#aa62380fb58406f3d7e83ea25c6deab35">nn::socket::FdSetZero</a>(&amp;fdSet);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(eventFds.fdNonBlock, &amp;fdSet);</div>
<div class="line">        <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(socketFd, &amp;fdSet);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select fdNonBlock, it would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from a fdNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock, EAgain expected&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select started (EventFd Flags Nonblock)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write to fdNonBlock.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make program valid and deterministic.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Select until either fd becomes readable.</span></div>
<div class="line">        <span class="keywordtype">int</span> selectRes = <a class="code" href="namespacenn_1_1socket.html#aa523b16a6004b8748cc0116f9ed65dd2">nn::socket::Select</a>(maxFdIndex, &amp;fdSet, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select returned result: %d\n&quot;</span>, selectRes);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select eventFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(eventFds.fdNonBlock, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select socketFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(socketFd, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Read value from event Fd</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select fdNonBlock, it would block forever unless written to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from a fdNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdNonBlock, <span class="stringliteral">&quot;Nonblock, EAgain expected&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-- Select Event Fd, Flags: SemaphoreAndNonBlock -\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);</div>
<div class="line">    <span class="comment">// EventFd Flags: SemaphoreAndNonBlocking</span></div>
<div class="line">    <span class="comment">// Description: Same as fdSemaphore with the addition that a call to read will return an error instead of blocking</span></div>
<div class="line">    <span class="comment">// See examples above for details</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// If we attempted to Select the fdSemaphoreAndNonBlock here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from fdSemaphoreAndNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;SemaphoreAndNonBlock, EAgain expected&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Signal interrupt thread to write (increment) to fdSemaphoreAndNonBlock.</span></div>
<div class="line">        <span class="comment">// Synchronization is done to make program valid and deterministic.</span></div>
<div class="line">        <a class="code" href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a>(&amp;eventFds.writeNextEventFd);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Decrement fdSemaphore by SemaphoreCount</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; SemaphoreCount; ++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Set eventFd</span></div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#aa62380fb58406f3d7e83ea25c6deab35">nn::socket::FdSetZero</a>(&amp;fdSet);</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(eventFds.fdSemaphoreAndNonBlock, &amp;fdSet);</div>
<div class="line">            <a class="code" href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a>(socketFd, &amp;fdSet);</div>
<div class="line"> </div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select started (EventFd Flags SemaphoreAndNonBlock)\n&quot;</span>);</div>
<div class="line">            <span class="keywordtype">int</span> selectRes = <a class="code" href="namespacenn_1_1socket.html#aa523b16a6004b8748cc0116f9ed65dd2">nn::socket::Select</a>(maxFdIndex, &amp;fdSet, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Select returned result: %d\n&quot;</span>, selectRes);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select eventFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(eventFds.fdSemaphoreAndNonBlock, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;    Select socketFd is %sreadable\n&quot;</span>, <a class="code" href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a>(socketFd, &amp;fdSet) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Decrement fdSemaphore counter for every read</span></div>
<div class="line">            ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;SemaphoreAndNonBlock&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we attempted to Select the fdSemaphoreAndNonBlock here,</span></div>
<div class="line">        <span class="comment">// it would block forever unless written (incremented) to by another thread.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Attempting to read from fdSemaphoreAndNonBlock eventFd. This will return error EAgain.</span></div>
<div class="line">        ReadEventFd(eventFds.fdSemaphoreAndNonBlock, <span class="stringliteral">&quot;SemaphoreAndNonBlock, EAgain expected&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a>(socketFd);</div>
<div class="line">    <span class="comment">// Wait for interrupt thread to terminate, it has a ptr to the EventFds on our stack.</span></div>
<div class="line">    <a class="code" href="namespacenn_1_1os.html#a8070c91be85c5ccb36b56e9ff3a75b26">nn::os::WaitThread</a>(&amp;interruptThread);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a name="a53"></a><a class="code" href="_socket_event_fd_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize the socket library</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a54"></a><a class="code" href="namespacenn_1_1socket.html#adacc3405184e8f28fb630745b9f43db0">nn::socket::Initialize</a>(g_SocketConfigWithMemory).IsFailure())</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;nn::socket::Initialize failed, ensure that your SDEV is properly configured\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// EventFd&#39;s usage with Poll()</span></div>
<div class="line">    <a class="code" href="_socket_event_fd_8cpp.html#a5a2b600f6e6c5792cf99dcb421973db6">PollExample</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// EventFd&#39;s usage with Select()</span></div>
<div class="line">    <a class="code" href="_socket_event_fd_8cpp.html#ac3b5f1d8c72de1a4cfe464ad90f5f274">SelectExample</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Finalize the socket library</span></div>
<div class="line">    <a name="a55"></a><a class="code" href="namespacenn_1_1socket.html#a28a801f086aadf0b731a721567f3e4b2">nn::socket::Finalize</a>();</div>
<div class="line">}</div>
<div class="ttc" id="a_socket_event_fd_8cpp_html_a5a2b600f6e6c5792cf99dcb421973db6"><div class="ttname"><a href="_socket_event_fd_8cpp.html#a5a2b600f6e6c5792cf99dcb421973db6">PollExample</a></div><div class="ttdeci">void PollExample()</div><div class="ttdoc">PollExample Example usage of nn::socket::Poll() and eventFd for all eventFd flags.</div><div class="ttdef"><b>Definition:</b> SocketEventFd.cpp:276</div></div>
<div class="ttc" id="a_socket_event_fd_8cpp_html_ac3b5f1d8c72de1a4cfe464ad90f5f274"><div class="ttname"><a href="_socket_event_fd_8cpp.html#ac3b5f1d8c72de1a4cfe464ad90f5f274">SelectExample</a></div><div class="ttdeci">void SelectExample()</div><div class="ttdoc">SelectExample Example usage of nn::socket::Select() and eventFd for all eventFd flags.</div><div class="ttdef"><b>Definition:</b> SocketEventFd.cpp:487</div></div>
<div class="ttc" id="a_socket_event_fd_8cpp_html_ae79180f8ae90e05743b47a872f305a52"><div class="ttname"><a href="_socket_event_fd_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a></div><div class="ttdeci">void nnMain()</div><div class="ttdoc">nnMain Sample program, SocketEventFd, entry point.</div><div class="ttdef"><b>Definition:</b> SocketEventFd.cpp:681</div></div>
<div class="ttc" id="aclassnn_1_1socket_1_1_config_default_with_memory_html"><div class="ttname"><a href="classnn_1_1socket_1_1_config_default_with_memory.html">nn::socket::ConfigDefaultWithMemory</a></div><div class="ttdoc">Class specifying a default configuration.</div><div class="ttdef"><b>Definition:</b> socket_Config.h:627</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a11ab71d44973a4135958c420e5682452a31f6133098296b3ddb7e14da3dc695cc"><div class="ttname"><a href="namespacenn_1_1os.html#a11ab71d44973a4135958c420e5682452a31f6133098296b3ddb7e14da3dc695cc">nn::os::EventClearMode_AutoClear</a></div><div class="ttdeci">@ EventClearMode_AutoClear</div><div class="ttdoc">Automatically cleared event.</div><div class="ttdef"><b>Definition:</b> os_EventCommon.h:33</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a18eec7c4c4c298f7abaa9ef41d6de76b"><div class="ttname"><a href="namespacenn_1_1os.html#a18eec7c4c4c298f7abaa9ef41d6de76b">nn::os::StartThread</a></div><div class="ttdeci">void StartThread(ThreadType *thread) NN_NOEXCEPT</div><div class="ttdoc">Starts execution on a thread.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a5985811d04e64c0823ed758fd420591d"><div class="ttname"><a href="namespacenn_1_1os.html#a5985811d04e64c0823ed758fd420591d">nn::os::DefaultThreadPriority</a></div><div class="ttdeci">const int DefaultThreadPriority</div><div class="ttdoc">Constant indicating the default value of thread priority.</div><div class="ttdef"><b>Definition:</b> os_ThreadCommon.h:47</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a75f43e1d3c194c0d2173ef5d95785933"><div class="ttname"><a href="namespacenn_1_1os.html#a75f43e1d3c194c0d2173ef5d95785933">nn::os::CreateThread</a></div><div class="ttdeci">nn::Result CreateThread(ThreadType *thread, ThreadFunction function, void *argument, void *stack, size_t stackSize, int priority, int idealCoreNumber) NN_NOEXCEPT</div><div class="ttdoc">Generates a thread.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a8070c91be85c5ccb36b56e9ff3a75b26"><div class="ttname"><a href="namespacenn_1_1os.html#a8070c91be85c5ccb36b56e9ff3a75b26">nn::os::WaitThread</a></div><div class="ttdeci">void WaitThread(ThreadType *thread) NN_NOEXCEPT</div><div class="ttdoc">Waits for the specified thread to stop.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a9b959a51c1d28b76894597695fd3d081"><div class="ttname"><a href="namespacenn_1_1os.html#a9b959a51c1d28b76894597695fd3d081">nn::os::SignalEvent</a></div><div class="ttdeci">void SignalEvent(EventType *event) NN_NOEXCEPT</div><div class="ttdoc">Puts an EventType object in a signaled state.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_aabdcb2de0b5dbdd64a0ec3d7e65c72f4"><div class="ttname"><a href="namespacenn_1_1os.html#aabdcb2de0b5dbdd64a0ec3d7e65c72f4">nn::os::WaitEvent</a></div><div class="ttdeci">void WaitEvent(EventType *event) NN_NOEXCEPT</div><div class="ttdoc">Waits for an EventType object to enter a signaled state.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_adae3d14bd5e37dd1feee56bbf1717e37"><div class="ttname"><a href="namespacenn_1_1os.html#adae3d14bd5e37dd1feee56bbf1717e37">nn::os::FinalizeEvent</a></div><div class="ttdeci">void FinalizeEvent(EventType *event) NN_NOEXCEPT</div><div class="ttdoc">Finalizes an EventType object.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_af07abef747ac6b51112b9e800ba9632c"><div class="ttname"><a href="namespacenn_1_1os.html#af07abef747ac6b51112b9e800ba9632c">nn::os::InitializeEvent</a></div><div class="ttdeci">void InitializeEvent(EventType *event, bool initiallySignaled, EventClearMode clearMode) NN_NOEXCEPT</div><div class="ttdoc">Initializes an EventType object.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a057d985148e23267303e6d00d7ed205daa4d833d8c15a76105639ddd11bcb614e"><div class="ttname"><a href="namespacenn_1_1socket.html#a057d985148e23267303e6d00d7ed205daa4d833d8c15a76105639ddd11bcb614e">nn::socket::Family::Af_Inet</a></div><div class="ttdeci">@ Af_Inet</div><div class="ttdoc">Internet Version 4.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a1db675083dcccec6500d1435c5dfeaeaa4cc079142a1be58955eb22bed651ebba"><div class="ttname"><a href="namespacenn_1_1socket.html#a1db675083dcccec6500d1435c5dfeaeaa4cc079142a1be58955eb22bed651ebba">nn::socket::Type::Sock_Dgram</a></div><div class="ttdeci">@ Sock_Dgram</div><div class="ttdoc">Datagram socket.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a1ea80c65c3a931a374bf2f0aab5153d1"><div class="ttname"><a href="namespacenn_1_1socket.html#a1ea80c65c3a931a374bf2f0aab5153d1">nn::socket::FdSetSet</a></div><div class="ttdeci">long FdSetSet(int fd, FdSet *pFdset) NN_NOEXCEPT</div><div class="ttdoc">Includes a particular descriptor fd in fdset.</div><div class="ttdef"><b>Definition:</b> socket_Api.h:1425</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a28a801f086aadf0b731a721567f3e4b2"><div class="ttname"><a href="namespacenn_1_1socket.html#a28a801f086aadf0b731a721567f3e4b2">nn::socket::Finalize</a></div><div class="ttdeci">Result Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalize socket library.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9">nn::socket::PollEvent</a></div><div class="ttdeci">PollEvent</div><div class="ttdoc">Poll events.</div><div class="ttdef"><b>Definition:</b> socket_Types.h:128</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a1034fc649394d42b19fead1ab1828e54"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1034fc649394d42b19fead1ab1828e54">nn::socket::PollEvent::PollPri</a></div><div class="ttdeci">@ PollPri</div><div class="ttdoc">High priority data may be read without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a1b0bed7d85ba6b2cbe91629776e3ee6d">nn::socket::PollEvent::PollIn</a></div><div class="ttdeci">@ PollIn</div><div class="ttdoc">Data other than high priority data may be read without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a2421093408548ab23a7a93500e8cccd3"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a2421093408548ab23a7a93500e8cccd3">nn::socket::PollEvent::PollHup</a></div><div class="ttdeci">@ PollHup</div><div class="ttdoc">The device or socket has been disconnected.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a6aee635278505dd8cc1da7f50c4a651d"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a6aee635278505dd8cc1da7f50c4a651d">nn::socket::PollEvent::PollErr</a></div><div class="ttdeci">@ PollErr</div><div class="ttdoc">An exceptional condition has occurred on the device or socket.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a70417b0dc75887023e5fa42ca645d4c9"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a70417b0dc75887023e5fa42ca645d4c9">nn::socket::PollEvent::PollWrBand</a></div><div class="ttdeci">@ PollWrBand</div><div class="ttdoc">Data with a non-zero priority may be written without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9a9b8ce4bb4c25d8b2abc5e5648c9cd54a"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9a9b8ce4bb4c25d8b2abc5e5648c9cd54a">nn::socket::PollEvent::PollRdBand</a></div><div class="ttdeci">@ PollRdBand</div><div class="ttdoc">Data with a non-zero priority may be read without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9aaf909a6e6a64bebd393ae9fbc33f200a"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aaf909a6e6a64bebd393ae9fbc33f200a">nn::socket::PollEvent::PollRdNorm</a></div><div class="ttdeci">@ PollRdNorm</div><div class="ttdoc">Normal data may be read without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9aca8de23660319dc20822f6e6059a727b"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aca8de23660319dc20822f6e6059a727b">nn::socket::PollEvent::PollOut</a></div><div class="ttdeci">@ PollOut</div><div class="ttdoc">File descriptor is writeable.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9aecf0948bef1a1db017a0d4e714f05c04"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9aecf0948bef1a1db017a0d4e714f05c04">nn::socket::PollEvent::PollNVal</a></div><div class="ttdeci">@ PollNVal</div><div class="ttdoc">The file descriptor is not open.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a2b8c53cba8a2be170c93a76742b092c9af5abb7d0050a44e425556082ae71b547"><div class="ttname"><a href="namespacenn_1_1socket.html#a2b8c53cba8a2be170c93a76742b092c9af5abb7d0050a44e425556082ae71b547">nn::socket::PollEvent::PollWrNorm</a></div><div class="ttdeci">@ PollWrNorm</div><div class="ttdoc">Normal data may be written without blocking.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a46347de69614965469ac8f3c8056468ea48e0b0b8eaaf71a2c2c0ebfa0e802b1a"><div class="ttname"><a href="namespacenn_1_1socket.html#a46347de69614965469ac8f3c8056468ea48e0b0b8eaaf71a2c2c0ebfa0e802b1a">nn::socket::Protocol::IpProto_Udp</a></div><div class="ttdeci">@ IpProto_Udp</div><div class="ttdoc">User datagram protocol.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a5175276a6b52a0b9d6e99a78ea330de5"><div class="ttname"><a href="namespacenn_1_1socket.html#a5175276a6b52a0b9d6e99a78ea330de5">nn::socket::EventFdRead</a></div><div class="ttdeci">int EventFdRead(int fd, EventFdType *value) NN_NOEXCEPT</div><div class="ttdoc">Read from an event fd.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a6db6951cb084f74f4c17d655ce798890"><div class="ttname"><a href="namespacenn_1_1socket.html#a6db6951cb084f74f4c17d655ce798890">nn::socket::GetLastError</a></div><div class="ttdeci">Errno GetLastError() NN_NOEXCEPT</div><div class="ttdoc">Read the global variable errno.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a8f66b219c3bb6d59b09f26ee75348f82"><div class="ttname"><a href="namespacenn_1_1socket.html#a8f66b219c3bb6d59b09f26ee75348f82">nn::socket::FdSetIsSet</a></div><div class="ttdeci">bool FdSetIsSet(int fd, const FdSet *pFdset) NN_NOEXCEPT</div><div class="ttdoc">Returns non-zero if fd is a member of pFdset, zero otherwise.</div><div class="ttdef"><b>Definition:</b> socket_Api.h:1467</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a9afeb564bac1d0c04af2fec1f00c739f"><div class="ttname"><a href="namespacenn_1_1socket.html#a9afeb564bac1d0c04af2fec1f00c739f">nn::socket::Socket</a></div><div class="ttdeci">int Socket(Family domain, Type type, Protocol protocol) NN_NOEXCEPT</div><div class="ttdoc">Create endpoint for communication.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_aa523b16a6004b8748cc0116f9ed65dd2"><div class="ttname"><a href="namespacenn_1_1socket.html#aa523b16a6004b8748cc0116f9ed65dd2">nn::socket::Select</a></div><div class="ttdeci">int Select(int numberOfDescriptors, FdSet *pReadDescriptors, FdSet *pWriteDescriptors, FdSet *pExceptDescriptors, TimeVal *pTimeout) NN_NOEXCEPT</div><div class="ttdoc">Synchronous I/O multiplexing.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_aa62380fb58406f3d7e83ea25c6deab35"><div class="ttname"><a href="namespacenn_1_1socket.html#aa62380fb58406f3d7e83ea25c6deab35">nn::socket::FdSetZero</a></div><div class="ttdeci">void FdSetZero(FdSet *pFdset) NN_NOEXCEPT</div><div class="ttdoc">Initializes a descriptor set s to the null set.</div><div class="ttdef"><b>Definition:</b> socket_Api.h:1399</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ac63165d8f4ab675489cda23034aa9eeb"><div class="ttname"><a href="namespacenn_1_1socket.html#ac63165d8f4ab675489cda23034aa9eeb">nn::socket::InfTim</a></div><div class="ttdeci">const int InfTim</div><div class="ttdoc">If poll timeout is InfTim (-1), the poll blocks indefinitely.</div><div class="ttdef"><b>Definition:</b> socket_Constants.h:99</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ad1ade4838b158c7aaf9c9a78338e06aea54cafc2ec81f6d1fe8ba661ade3931cb"><div class="ttname"><a href="namespacenn_1_1socket.html#ad1ade4838b158c7aaf9c9a78338e06aea54cafc2ec81f6d1fe8ba661ade3931cb">nn::socket::Errno::EAgain</a></div><div class="ttdeci">@ EAgain</div><div class="ttdoc">11</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ad9e109d18fb43f275742d74d74d06cde"><div class="ttname"><a href="namespacenn_1_1socket.html#ad9e109d18fb43f275742d74d74d06cde">nn::socket::Poll</a></div><div class="ttdeci">int Poll(PollFd *pSocketDescriptors, NfdsT numberOfDescriptors, int timeoutMilliseconds) NN_NOEXCEPT</div><div class="ttdoc">Synchronous I/O multiplexing.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ada14f217430a89abc25c5c9ed822f115"><div class="ttname"><a href="namespacenn_1_1socket.html#ada14f217430a89abc25c5c9ed822f115">nn::socket::EventFdType</a></div><div class="ttdeci">uint64_t EventFdType</div><div class="ttdoc">Type for EventFdRead and EventFdWrite.</div><div class="ttdef"><b>Definition:</b> socket_Types.h:354</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_adacc3405184e8f28fb630745b9f43db0"><div class="ttname"><a href="namespacenn_1_1socket.html#adacc3405184e8f28fb630745b9f43db0">nn::socket::Initialize</a></div><div class="ttdeci">Result Initialize(const Config &amp;config) NN_NOEXCEPT</div><div class="ttdoc">Initialize socket library.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ae01110d228e2148d830b1ecfb9aaa425"><div class="ttname"><a href="namespacenn_1_1socket.html#ae01110d228e2148d830b1ecfb9aaa425">nn::socket::Close</a></div><div class="ttdeci">int Close(int socket) NN_NOEXCEPT</div><div class="ttdoc">Delete a descriptor.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ae1fd34e9d084e5bb0f17a6c2361896c2"><div class="ttname"><a href="namespacenn_1_1socket.html#ae1fd34e9d084e5bb0f17a6c2361896c2">nn::socket::Read</a></div><div class="ttdeci">int Read(int socket, void *outBuffer, size_t outBufferLength) NN_NOEXCEPT</div><div class="ttdoc">Read input.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_ae82dfb460b32b4e583f55b500385c776"><div class="ttname"><a href="namespacenn_1_1socket.html#ae82dfb460b32b4e583f55b500385c776">nn::socket::EventFd</a></div><div class="ttdeci">int EventFd(uint64_t initialValue, EventFdFlags flags) NN_NOEXCEPT</div><div class="ttdoc">Create an event fd.</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_af5535161f9c800ca7f7f9e7a854ba122"><div class="ttname"><a href="namespacenn_1_1socket.html#af5535161f9c800ca7f7f9e7a854ba122">nn::socket::EventFdWrite</a></div><div class="ttdeci">int EventFdWrite(int fd, EventFdType value) NN_NOEXCEPT</div><div class="ttdoc">Write to an event fd.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_a205eaac89c47d49cb982bf136e113de2"><div class="ttname"><a href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a></div><div class="ttdeci">#define NN_ABORT(...)</div><div class="ttdoc">Stops execution.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:29</div></div>
<div class="ttc" id="ann___abort_8h_html_a5c1a90d3a6474658ae0ac5dc5bcb14e4"><div class="ttname"><a href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS(condition,...)</div><div class="ttdoc">Tests whether a condition has been satisfied and stops execution if it has not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:38</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html"><div class="ttname"><a href="nn___macro_8h.html">nn_Macro.h</a></div><div class="ttdoc">Defines the macros used throughout all libraries.</div></div>
<div class="ttc" id="ann___macro_8h_html_a71c0f58f6d49fe1392380eed4509ab9a"><div class="ttname"><a href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a></div><div class="ttdeci">#define NN_STATIC_CONDITION(condition)</div><div class="ttdoc">Suppresses compiler warnings on intentional, explicitly specified conditional constants.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:626</div></div>
<div class="ttc" id="ann___macro_8h_html_acd3a418aa2fc4a6379eaa722181a46a6"><div class="ttname"><a href="nn___macro_8h.html#acd3a418aa2fc4a6379eaa722181a46a6">NN_ARRAY_SIZE</a></div><div class="ttdeci">#define NN_ARRAY_SIZE(array)</div><div class="ttdoc">Gets the array size.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:696</div></div>
<div class="ttc" id="ann___time_span_8h_html"><div class="ttname"><a href="nn___time_span_8h.html">nn_TimeSpan.h</a></div><div class="ttdoc">TimeSpan class declarations.</div></div>
<div class="ttc" id="aos___event_8h_html"><div class="ttname"><a href="os___event_8h.html">os_Event.h</a></div><div class="ttdoc">Public header file for Event objects.</div></div>
<div class="ttc" id="aos___thread_common_8h_html_a5ce0c3c0aaceb976178a60a18d90f470"><div class="ttname"><a href="os___thread_common_8h.html#a5ce0c3c0aaceb976178a60a18d90f470">NN_OS_ALIGNAS_THREAD_STACK</a></div><div class="ttdeci">#define NN_OS_ALIGNAS_THREAD_STACK</div><div class="ttdoc">Macro to specify the stack space alignment.</div><div class="ttdef"><b>Definition:</b> os_ThreadCommon.h:108</div></div>
<div class="ttc" id="asocket_8h_html"><div class="ttname"><a href="socket_8h.html">socket.h</a></div><div class="ttdoc">Top level header defining the socket library API.</div></div>
<div class="ttc" id="astructnn_1_1os_1_1_event_type_html"><div class="ttname"><a href="structnn_1_1os_1_1_event_type.html">nn::os::EventType</a></div><div class="ttdoc">This structure defines an event object.</div><div class="ttdef"><b>Definition:</b> os_EventTypes.h:62</div></div>
<div class="ttc" id="astructnn_1_1os_1_1_thread_type_html"><div class="ttname"><a href="structnn_1_1os_1_1_thread_type.html">nn::os::ThreadType</a></div><div class="ttdoc">This structure defines a thread object.</div><div class="ttdef"><b>Definition:</b> os_ThreadTypes.h:92</div></div>
<div class="ttc" id="astructnn_1_1socket_1_1_fd_set_html"><div class="ttname"><a href="structnn_1_1socket_1_1_fd_set.html">nn::socket::FdSet</a></div><div class="ttdoc">Structure used for Select().</div><div class="ttdef"><b>Definition:</b> socket_Types.h:552</div></div>
<div class="ttc" id="astructnn_1_1socket_1_1_poll_fd_html"><div class="ttname"><a href="structnn_1_1socket_1_1_poll_fd.html">nn::socket::PollFd</a></div><div class="ttdoc">Structure used for Poll().</div><div class="ttdef"><b>Definition:</b> socket_Types.h:534</div></div>
<div class="ttc" id="astructnn_1_1socket_1_1_poll_fd_html_a778aa060c42157a250cf459f7cfea273"><div class="ttname"><a href="structnn_1_1socket_1_1_poll_fd.html#a778aa060c42157a250cf459f7cfea273">nn::socket::PollFd::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">File descriptor to poll.</div><div class="ttdef"><b>Definition:</b> socket_Types.h:539</div></div>
<div class="ttc" id="astructnn_1_1socket_1_1_poll_fd_html_ab5c064cf340ae80e805a84e927dcdb9f"><div class="ttname"><a href="structnn_1_1socket_1_1_poll_fd.html#ab5c064cf340ae80e805a84e927dcdb9f">nn::socket::PollFd::events</a></div><div class="ttdeci">PollEvent events</div><div class="ttdoc">Events to poll for.</div><div class="ttdef"><b>Definition:</b> socket_Types.h:542</div></div>
<div class="ttc" id="astructnn_1_1socket_1_1_poll_fd_html_aca13d3c2b88fcd0292ecbcbbbc5f85dc"><div class="ttname"><a href="structnn_1_1socket_1_1_poll_fd.html#aca13d3c2b88fcd0292ecbcbbbc5f85dc">nn::socket::PollFd::revents</a></div><div class="ttdeci">PollEvent revents</div><div class="ttdoc">Events which may occur.</div><div class="ttdef"><b>Definition:</b> socket_Types.h:545</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
