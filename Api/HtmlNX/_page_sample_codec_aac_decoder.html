<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AAC Decoder | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_codec.html">Codec Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AAC Decoder </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleCodecAacDecoder_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleCodecAacDecoder_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleCodecAacDecoder_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleCodecAacDecoder_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This section describes the AAC decoder sample program.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionBrief"></a>
Overview</h1>
<p>This sample program uses an AAC decoder to decode and play AAC audio data. An audio renderer is used to play the audio.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_f07ca488ee9bfda191e875e53b9209c2.html">Samples/Sources/Applications/CodecAacDecoder/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>You must be able to use audio output.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionHowToOperate"></a>
How to Use</h1>
<p>When this sample program is executed, background music (BGM) is played for a fixed time and then automatically stops.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionPrecaution"></a>
Important Information</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleCodecAacDecoder_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleCodecAacDecoder_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_codec_aac_decoder_8cpp.html" title="AAC decoder sample program.">CodecAacDecoder.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span>  <span class="comment">// std::min</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span>  <span class="comment">// std::malloc, std::free</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &lt;new&gt;</span>  <span class="comment">// std::nothrow</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="audio_8h.html">nn/audio.h</a>&gt;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="codec_8h.html">nn/codec.h</a>&gt;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="mem_8h.html">nn/mem.h</a>&gt;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;nns/nns_Log.h&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// #define ADTS</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#if defined(ADTS)</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &quot;AdtsHeaderReader.h&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#else  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;Mp4BoxHeaderReader.h&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;Mp4BoxStsdReader.h&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keywordtype">char</span> g_HeapBuffer[32 * 1024 * 1024];</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordtype">char</span>* g_MountRomCacheBuffer = NULL;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordtype">void</span> InitializeFileSystem()</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">size_t</span> cacheSize = 0;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a>(&amp;cacheSize));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    g_MountRomCacheBuffer = <span class="keyword">new</span>(std::nothrow) <span class="keywordtype">char</span>[cacheSize];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="nn___abort_8h.html#ae872300a22548da2b586ef68d2c048a3">NN_ABORT_UNLESS_NOT_NULL</a>(g_MountRomCacheBuffer);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a>(<span class="stringliteral">&quot;asset&quot;</span>, g_MountRomCacheBuffer, cacheSize)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keywordtype">void</span> FinalizeFileSystem()</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(<span class="stringliteral">&quot;asset&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">delete</span>[] g_MountRomCacheBuffer;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    g_MountRomCacheBuffer = NULL;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}  <span class="comment">// namespace {anonymous}</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a> allocator(g_HeapBuffer, <span class="keyword">sizeof</span>(g_HeapBuffer));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// Initializes the work buffer for AacDecoder.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">auto</span> aacWorkBufferSize = <a class="code" href="namespacenn_1_1codec.html#a021b7b176b887d3a65ea95eb01c5e8ad">nn::codec::GetAacDecoderWorkBufferSize</a>(48000, 2, <a class="code" href="namespacenn_1_1codec.html#a4f4457ac1a9d14922cdccec484f1d394a72dbc76c8ab9d982311f2430869c5ac7">nn::codec::Mpeg4AudioObjectType_AacLc</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">auto</span> aacWorkBuffer = allocator.Allocate(aacWorkBufferSize);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if defined(ADTS)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Reads the AAC file.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    uint8_t* aacData;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    int64_t size;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        InitializeFileSystem();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> Filename[] = <span class="stringliteral">&quot;asset:/SampleBgm0-2ch.adts.aac&quot;</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> handle;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>(&amp;handle, Filename, <a class="code" href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393afde4472d2b455879cad02aade386ac0d">nn::fs::OpenMode_Read</a>));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a>(&amp;size, handle));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        aacData = <span class="keyword">static_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(allocator.Allocate(<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(size)));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(aacData);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(handle, 0, aacData, <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(size)));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>(handle);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        FinalizeFileSystem();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Analyzes the ADTS format and initializes AacDecoder.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    AdtsHeaderReader header(aacData, 16);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="structnn_1_1codec_1_1_aac_decoder_type.html">nn::codec::AacDecoderType</a> decoder;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">auto</span> result = <a class="code" href="namespacenn_1_1codec.html#ae5ff7119a3994863631aaea37092f194">nn::codec::InitializeAacDecoder</a>(&amp;decoder, header.GetSampleRate(), header.GetChannelCount(), <a class="code" href="namespacenn_1_1codec.html#a4f4457ac1a9d14922cdccec484f1d394a72dbc76c8ab9d982311f2430869c5ac7">nn::codec::Mpeg4AudioObjectType_AacLc</a>, aacWorkBuffer, aacWorkBufferSize);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == <a class="code" href="namespacenn_1_1codec.html#a7c912cb4c2087fe80c1b81f85b08a2e0a6667bf2e4863f4674ba97f18c20d7d31">nn::codec::AacDecoderResult_Success</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#else  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Reads the AAC file.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    uint8_t* aacData = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    int64_t size = 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">auto</span> type = <a class="code" href="namespacenn_1_1codec.html#a4f4457ac1a9d14922cdccec484f1d394a2a84818a0778e954c6b7c32106b849cd">nn::codec::Mpeg4AudioObjectType_Invalid</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">int</span> sampleRate = 0;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">int</span> channelCount = 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        InitializeFileSystem();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> Filename[] = <span class="stringliteral">&quot;asset:/SampleBgm0-2ch.m4a&quot;</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> handle;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>(&amp;handle, Filename, <a class="code" href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393afde4472d2b455879cad02aade386ac0d">nn::fs::OpenMode_Read</a>));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        int64_t filesize;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a>(&amp;filesize, handle));</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">// Searches for RAW data.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        int64_t offset = 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">while</span> (offset &lt; filesize)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            uint8_t buffer[8];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(handle, offset, buffer, <span class="keyword">sizeof</span>(buffer)));</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            Mp4BoxHeaderReader header(buffer, <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//             NNS_LOG(&quot;%s: %d\n&quot;, header.GetType().c_str(), header.GetSize());</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (header.GetType() == <span class="stringliteral">&quot;mdat&quot;</span>)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                size = header.GetSize() - 8;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                aacData = <span class="keyword">static_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(allocator.Allocate(<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(size)));</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(aacData);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(handle, offset + 8, aacData, <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(size)));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">if</span> (header.GetType() == <span class="stringliteral">&quot;stsd&quot;</span>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                uint8_t stsdBuffer[128];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(handle, offset + 8, stsdBuffer, header.GetSize() - 8));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                Mp4BoxStsdReader stsd(stsdBuffer, header.GetSize());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                type = stsd.GetMpeg4AudioObjectType();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                sampleRate = stsd.GetSampleRate();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                channelCount = stsd.GetChannelCount();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> (header.HasChild())</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                offset += 8;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                offset += header.GetSize();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>(handle);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        FinalizeFileSystem();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="structnn_1_1codec_1_1_aac_decoder_type.html">nn::codec::AacDecoderType</a> decoder;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">auto</span> result = <a class="code" href="namespacenn_1_1codec.html#ae5ff7119a3994863631aaea37092f194">nn::codec::InitializeAacDecoder</a>(&amp;decoder, sampleRate, channelCount, type, aacWorkBuffer, aacWorkBufferSize);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == <a class="code" href="namespacenn_1_1codec.html#a7c912cb4c2087fe80c1b81f85b08a2e0a6667bf2e4863f4674ba97f18c20d7d31">nn::codec::AacDecoderResult_Success</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Initializes and starts AudioOut for audio playback.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="structnn_1_1audio_1_1_audio_out.html">nn::audio::AudioOut</a> audioOut;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="classnn_1_1os_1_1_system_event.html">nn::os::SystemEvent</a> systemEvent;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="structnn_1_1audio_1_1_audio_out_parameter.html">nn::audio::AudioOutParameter</a> parameter;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="namespacenn_1_1audio.html#a53eb3602be04d214fd6973fa4b63e637">nn::audio::InitializeAudioOutParameter</a>(&amp;parameter);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    parameter.<a class="code" href="structnn_1_1audio_1_1_audio_out_parameter.html#a37d112b41c15a7c666540b7106167293">sampleRate</a> = 48000;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    parameter.<a class="code" href="structnn_1_1audio_1_1_audio_out_parameter.html#a6a1ae1ae3536822b96a448bee14cca3d">channelCount</a> = 2;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1audio.html#a7d4ddedf1f043b725b4e3a5236a05417">nn::audio::OpenDefaultAudioOut</a>(&amp;audioOut, &amp;systemEvent, parameter));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="namespacenn_1_1audio.html#a2edc363ab06840fc2eaf2acb551bf0c1">nn::audio::SampleFormat</a> sampleFormat = <a class="code" href="namespacenn_1_1audio.html#a36250ba99a54f2adbd9bd993f63fc4b4">nn::audio::GetAudioOutSampleFormat</a>(&amp;audioOut);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(<a class="code" href="namespacenn_1_1audio.html#a20de4a3eb5e5c4fba0f3b45e0b9e24c8">nn::audio::GetSampleByteSize</a>(sampleFormat) == <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> dataSize = 1024 * <a class="code" href="namespacenn_1_1codec.html#a147875a2d13cd7bc1df9b736cddc38ad">nn::codec::GetAacDecoderChannelCount</a>(&amp;decoder) * <a class="code" href="namespacenn_1_1audio.html#a20de4a3eb5e5c4fba0f3b45e0b9e24c8">nn::audio::GetSampleByteSize</a>(sampleFormat);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> bufferSize = <a class="code" href="namespacenn_1_1util.html#a275a3c89db5d0ab915559d8a85f9cbdd">nn::util::align_up</a>(dataSize, <a class="code" href="structnn_1_1audio_1_1_audio_out_buffer.html#aa20555e970c0cf61d80914af41cf3a44">nn::audio::AudioOutBuffer::SizeGranularity</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> bufferCount = 4;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="structnn_1_1audio_1_1_audio_out_buffer.html">nn::audio::AudioOutBuffer</a> audioOutBuffer[bufferCount];</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">void</span>* outBuffer[bufferCount];</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bufferCount; ++i)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        outBuffer[i] = allocator.Allocate(bufferSize, <a class="code" href="structnn_1_1audio_1_1_audio_out_buffer.html#aee83fe382b830ee95f7ecd7431ba9f73">nn::audio::AudioOutBuffer::AddressAlignment</a>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(outBuffer[i]);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        memset(outBuffer[i], 0, dataSize);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="namespacenn_1_1audio.html#aa1ffe215f031b4b64e1cce6fe195b5c4">nn::audio::SetAudioOutBufferInfo</a>(&amp;audioOutBuffer[i], outBuffer[i], bufferSize, dataSize);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="namespacenn_1_1audio.html#adf6ae7da062359e04d32ec1ec51b84a0">nn::audio::AppendAudioOutBuffer</a>(&amp;audioOut, &amp;audioOutBuffer[i]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1audio.html#aa522149d7a0b48763dd5c1eb32609505">nn::audio::StartAudioOut</a>(&amp;audioOut));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Main loop.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    int64_t dec = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">while</span> (dec &lt; size)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        systemEvent.<a class="code" href="classnn_1_1os_1_1_system_event.html#a51c8560630f9760922b6e180b75a45b2">Wait</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="structnn_1_1audio_1_1_audio_out_buffer.html">nn::audio::AudioOutBuffer</a>* pAudioOutBuffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        pAudioOutBuffer = <a class="code" href="namespacenn_1_1audio.html#a9bf1c9d96a5761b3dca59f7f13155ad8">nn::audio::GetReleasedAudioOutBuffer</a>(&amp;audioOut);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">while</span> (pAudioOutBuffer &amp;&amp; dec &lt; size)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordtype">void</span>* pOutBuffer = <a class="code" href="namespacenn_1_1audio.html#ac60d0ae60bafcbf7b3baae780efcce77">nn::audio::GetAudioOutBufferDataPointer</a>(pAudioOutBuffer);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#if defined(ADTS)</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">// Reads the ADTS header.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            uint8_t* data = aacData + dec;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            AdtsHeaderReader reader(data, 16);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(reader.GetSampleRate() == <a class="code" href="namespacenn_1_1codec.html#a683b9e7c7db5e9daaa57e3e3e226047f">nn::codec::GetAacDecoderSampleRate</a>(&amp;decoder));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(reader.GetChannelCount() == <a class="code" href="namespacenn_1_1codec.html#a147875a2d13cd7bc1df9b736cddc38ad">nn::codec::GetAacDecoderChannelCount</a>(&amp;decoder));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keyword">auto</span> headerSize = reader.GetHeaderSize();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keyword">auto</span> frameLength = reader.GetFrameLength();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            data += headerSize;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            dec += headerSize;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#else  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keyword">auto</span> frameLength = std::min(<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(size - dec), <a class="code" href="namespacenn_1_1codec.html#a402917821c786b5aa50b463c3cf62903">nn::codec::AacPayloadSizePerChannel</a> * channelCount);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            uint8_t* data = aacData + dec;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(ADTS)</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// Performs decoding.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordtype">size_t</span> consumed;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordtype">int</span> sampleCount;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            int16_t pcm[2 * 1024 * 4];</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            result = <a class="code" href="namespacenn_1_1codec.html#a3cab771aed9fb627dcb1d2dc57c02c33">nn::codec::DecodeAacInterleaved</a>(&amp;decoder, &amp;consumed, &amp;sampleCount, pcm, <span class="keyword">sizeof</span>(pcm), data, frameLength);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == <a class="code" href="namespacenn_1_1codec.html#a7c912cb4c2087fe80c1b81f85b08a2e0a6667bf2e4863f4674ba97f18c20d7d31">nn::codec::AacDecoderResult_Success</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            dec += consumed;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">// Copies the decoded results to AudioOutBuffer and plays the audio.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            memcpy(pOutBuffer, pcm, <span class="keyword">sizeof</span>(int16_t) * <a class="code" href="namespacenn_1_1codec.html#a147875a2d13cd7bc1df9b736cddc38ad">nn::codec::GetAacDecoderChannelCount</a>(&amp;decoder) * sampleCount);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="namespacenn_1_1audio.html#adf6ae7da062359e04d32ec1ec51b84a0">nn::audio::AppendAudioOutBuffer</a>(&amp;audioOut, pAudioOutBuffer);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            pAudioOutBuffer = <a class="code" href="namespacenn_1_1audio.html#a9bf1c9d96a5761b3dca59f7f13155ad8">nn::audio::GetReleasedAudioOutBuffer</a>(&amp;audioOut);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="namespacenn_1_1audio.html#ad908ac057d85fa7d4d4c4f047edc6c4d">nn::audio::StopAudioOut</a>(&amp;audioOut);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="namespacenn_1_1audio.html#abecd28c6321841cde54d0d16a8800da4">nn::audio::CloseAudioOut</a>(&amp;audioOut);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bufferCount; ++i)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        allocator.Free(outBuffer[i]);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="namespacenn_1_1codec.html#a6bc551e11ac1351a350e256d0a02c768">nn::codec::FinalizeAacDecoder</a>(&amp;decoder);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    allocator.Free(aacData);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    allocator.Free(aacWorkBuffer);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}  <span class="comment">// NOLINT(readability/fn_size)</span></div>
<div class="ttc" id="aaudio_8h_html"><div class="ttname"><a href="audio_8h.html">audio.h</a></div><div class="ttdoc">Declarations for the audio library API.</div></div>
<div class="ttc" id="aclassnn_1_1mem_1_1_standard_allocator_html"><div class="ttname"><a href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a></div><div class="ttdoc">Class for managing memory.</div><div class="ttdef"><b>Definition:</b> mem_StandardAllocator.h:35</div></div>
<div class="ttc" id="aclassnn_1_1os_1_1_system_event_html"><div class="ttname"><a href="classnn_1_1os_1_1_system_event.html">nn::os::SystemEvent</a></div><div class="ttdoc">Class for handling system events.</div><div class="ttdef"><b>Definition:</b> os_SystemEvent.h:46</div></div>
<div class="ttc" id="aclassnn_1_1os_1_1_system_event_html_a51c8560630f9760922b6e180b75a45b2"><div class="ttname"><a href="classnn_1_1os_1_1_system_event.html#a51c8560630f9760922b6e180b75a45b2">nn::os::SystemEvent::Wait</a></div><div class="ttdeci">void Wait() NN_NOEXCEPT</div><div class="ttdoc">Waits for a system event to enter a signaled state.</div><div class="ttdef"><b>Definition:</b> os_SystemEvent.h:244</div></div>
<div class="ttc" id="acodec_8h_html"><div class="ttname"><a href="codec_8h.html">codec.h</a></div><div class="ttdoc">Declarations for the codec library API for audio and video compression.</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div><div class="ttdoc">Header to include the dynamic memory allocation library for fast allocation and deallocation.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a20de4a3eb5e5c4fba0f3b45e0b9e24c8"><div class="ttname"><a href="namespacenn_1_1audio.html#a20de4a3eb5e5c4fba0f3b45e0b9e24c8">nn::audio::GetSampleByteSize</a></div><div class="ttdeci">size_t GetSampleByteSize(SampleFormat sampleFormat) noexcept</div><div class="ttdoc">Gets the size in bytes of an audio sample represented by the specified sample format.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a2edc363ab06840fc2eaf2acb551bf0c1"><div class="ttname"><a href="namespacenn_1_1audio.html#a2edc363ab06840fc2eaf2acb551bf0c1">nn::audio::SampleFormat</a></div><div class="ttdeci">SampleFormat</div><div class="ttdoc">Enumerates the sample formats.</div><div class="ttdef"><b>Definition:</b> audio_SampleFormat.h:31</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a36250ba99a54f2adbd9bd993f63fc4b4"><div class="ttname"><a href="namespacenn_1_1audio.html#a36250ba99a54f2adbd9bd993f63fc4b4">nn::audio::GetAudioOutSampleFormat</a></div><div class="ttdeci">SampleFormat GetAudioOutSampleFormat(const AudioOut *pAudioOut) noexcept</div><div class="ttdoc">Gets the sample format of an audio output.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a53eb3602be04d214fd6973fa4b63e637"><div class="ttname"><a href="namespacenn_1_1audio.html#a53eb3602be04d214fd6973fa4b63e637">nn::audio::InitializeAudioOutParameter</a></div><div class="ttdeci">void InitializeAudioOutParameter(AudioOutParameter *pOutParameter) noexcept</div><div class="ttdoc">Initializes the audio output parameters.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a7d4ddedf1f043b725b4e3a5236a05417"><div class="ttname"><a href="namespacenn_1_1audio.html#a7d4ddedf1f043b725b4e3a5236a05417">nn::audio::OpenDefaultAudioOut</a></div><div class="ttdeci">Result OpenDefaultAudioOut(AudioOut *pOutAudioOut, const AudioOutParameter &amp;parameter) noexcept</div><div class="ttdoc">Initializes the default audio output and gets an accessor.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_a9bf1c9d96a5761b3dca59f7f13155ad8"><div class="ttname"><a href="namespacenn_1_1audio.html#a9bf1c9d96a5761b3dca59f7f13155ad8">nn::audio::GetReleasedAudioOutBuffer</a></div><div class="ttdeci">AudioOutBuffer * GetReleasedAudioOutBuffer(AudioOut *pAudioOut) noexcept</div><div class="ttdoc">Gets an audio output buffer that has already been played.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_aa1ffe215f031b4b64e1cce6fe195b5c4"><div class="ttname"><a href="namespacenn_1_1audio.html#aa1ffe215f031b4b64e1cce6fe195b5c4">nn::audio::SetAudioOutBufferInfo</a></div><div class="ttdeci">void SetAudioOutBufferInfo(AudioOutBuffer *pOutAudioOutBuffer, void *buffer, size_t bufferSize, size_t dataSize) noexcept</div><div class="ttdoc">Sets information in an audio output buffer.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_aa522149d7a0b48763dd5c1eb32609505"><div class="ttname"><a href="namespacenn_1_1audio.html#aa522149d7a0b48763dd5c1eb32609505">nn::audio::StartAudioOut</a></div><div class="ttdeci">Result StartAudioOut(AudioOut *pAudioOut) noexcept</div><div class="ttdoc">Starts playing a waveform from an audio output.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_abecd28c6321841cde54d0d16a8800da4"><div class="ttname"><a href="namespacenn_1_1audio.html#abecd28c6321841cde54d0d16a8800da4">nn::audio::CloseAudioOut</a></div><div class="ttdeci">void CloseAudioOut(AudioOut *pAudioOut) noexcept</div><div class="ttdoc">Closes the audio output and destroys the accessor.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_ac60d0ae60bafcbf7b3baae780efcce77"><div class="ttname"><a href="namespacenn_1_1audio.html#ac60d0ae60bafcbf7b3baae780efcce77">nn::audio::GetAudioOutBufferDataPointer</a></div><div class="ttdeci">void * GetAudioOutBufferDataPointer(const AudioOutBuffer *pAudioOutBuffer) noexcept</div><div class="ttdoc">Gets a pointer to the data buffer in an audio output buffer.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_ad908ac057d85fa7d4d4c4f047edc6c4d"><div class="ttname"><a href="namespacenn_1_1audio.html#ad908ac057d85fa7d4d4c4f047edc6c4d">nn::audio::StopAudioOut</a></div><div class="ttdeci">void StopAudioOut(AudioOut *pAudioOut) noexcept</div><div class="ttdoc">Stops playing a waveform from an audio output.</div></div>
<div class="ttc" id="anamespacenn_1_1audio_html_adf6ae7da062359e04d32ec1ec51b84a0"><div class="ttname"><a href="namespacenn_1_1audio.html#adf6ae7da062359e04d32ec1ec51b84a0">nn::audio::AppendAudioOutBuffer</a></div><div class="ttdeci">bool AppendAudioOutBuffer(AudioOut *pAudioOut, AudioOutBuffer *pAudioOutBuffer) noexcept</div><div class="ttdoc">Registers an audio output buffer.</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a021b7b176b887d3a65ea95eb01c5e8ad"><div class="ttname"><a href="namespacenn_1_1codec.html#a021b7b176b887d3a65ea95eb01c5e8ad">nn::codec::GetAacDecoderWorkBufferSize</a></div><div class="ttdeci">size_t GetAacDecoderWorkBufferSize(int sampleRate, int channelCount, Mpeg4AudioObjectType type) noexcept</div><div class="ttdoc">Gets the size of work buffer required by one instance of AacDecoder according to the specified parame...</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a147875a2d13cd7bc1df9b736cddc38ad"><div class="ttname"><a href="namespacenn_1_1codec.html#a147875a2d13cd7bc1df9b736cddc38ad">nn::codec::GetAacDecoderChannelCount</a></div><div class="ttdeci">int GetAacDecoderChannelCount(const AacDecoderType *pDecoder) noexcept</div><div class="ttdoc">Gets the number of channels specified for the AacDecoder instance.</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a3cab771aed9fb627dcb1d2dc57c02c33"><div class="ttname"><a href="namespacenn_1_1codec.html#a3cab771aed9fb627dcb1d2dc57c02c33">nn::codec::DecodeAacInterleaved</a></div><div class="ttdeci">AacDecoderResult DecodeAacInterleaved(AacDecoderType *pDecoder, size_t *pOutConsumed, int *pOutSampleCount, int16_t *outputBuffer, size_t outputSize, const void *inputBuffer, size_t inputSize) noexcept</div><div class="ttdoc">Decodes using the AacDecoder instance.</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a402917821c786b5aa50b463c3cf62903"><div class="ttname"><a href="namespacenn_1_1codec.html#a402917821c786b5aa50b463c3cf62903">nn::codec::AacPayloadSizePerChannel</a></div><div class="ttdeci">const std::size_t AacPayloadSizePerChannel</div><div class="ttdoc">The maximum size per channel per frame of AAC data.</div><div class="ttdef"><b>Definition:</b> codec_AacCommonTypes.h:28</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a4f4457ac1a9d14922cdccec484f1d394a2a84818a0778e954c6b7c32106b849cd"><div class="ttname"><a href="namespacenn_1_1codec.html#a4f4457ac1a9d14922cdccec484f1d394a2a84818a0778e954c6b7c32106b849cd">nn::codec::Mpeg4AudioObjectType_Invalid</a></div><div class="ttdeci">@ Mpeg4AudioObjectType_Invalid</div><div class="ttdoc">Invalid.</div><div class="ttdef"><b>Definition:</b> codec_AacCommonTypes.h:35</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a4f4457ac1a9d14922cdccec484f1d394a72dbc76c8ab9d982311f2430869c5ac7"><div class="ttname"><a href="namespacenn_1_1codec.html#a4f4457ac1a9d14922cdccec484f1d394a72dbc76c8ab9d982311f2430869c5ac7">nn::codec::Mpeg4AudioObjectType_AacLc</a></div><div class="ttdeci">@ Mpeg4AudioObjectType_AacLc</div><div class="ttdoc">AAC Low Complexity.</div><div class="ttdef"><b>Definition:</b> codec_AacCommonTypes.h:36</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a683b9e7c7db5e9daaa57e3e3e226047f"><div class="ttname"><a href="namespacenn_1_1codec.html#a683b9e7c7db5e9daaa57e3e3e226047f">nn::codec::GetAacDecoderSampleRate</a></div><div class="ttdeci">int GetAacDecoderSampleRate(const AacDecoderType *pDecoder) noexcept</div><div class="ttdoc">Gets the sample rate specified for the AacDecoder instance.</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a6bc551e11ac1351a350e256d0a02c768"><div class="ttname"><a href="namespacenn_1_1codec.html#a6bc551e11ac1351a350e256d0a02c768">nn::codec::FinalizeAacDecoder</a></div><div class="ttdeci">void FinalizeAacDecoder(AacDecoderType *pDecoder) noexcept</div><div class="ttdoc">Finalizes and destroys the AacDecoder instance.</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_a7c912cb4c2087fe80c1b81f85b08a2e0a6667bf2e4863f4674ba97f18c20d7d31"><div class="ttname"><a href="namespacenn_1_1codec.html#a7c912cb4c2087fe80c1b81f85b08a2e0a6667bf2e4863f4674ba97f18c20d7d31">nn::codec::AacDecoderResult_Success</a></div><div class="ttdeci">@ AacDecoderResult_Success</div><div class="ttdoc">Success.</div><div class="ttdef"><b>Definition:</b> codec_AacDecoderTypes.h:43</div></div>
<div class="ttc" id="anamespacenn_1_1codec_html_ae5ff7119a3994863631aaea37092f194"><div class="ttname"><a href="namespacenn_1_1codec.html#ae5ff7119a3994863631aaea37092f194">nn::codec::InitializeAacDecoder</a></div><div class="ttdeci">AacDecoderResult InitializeAacDecoder(AacDecoderType *pOutDecoder, int sampleRate, int channelCount, Mpeg4AudioObjectType type, void *buffer, size_t size) noexcept</div><div class="ttdoc">Gets and initializes an instance of AacDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a0f2b5b30657b1ffaf1dec49bfb36462b"><div class="ttname"><a href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></div><div class="ttdeci">Result OpenFile(FileHandle *outValue, const char *path, int mode) NN_NOEXCEPT</div><div class="ttdoc">Opens a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a2e453fe1fbf8f818dc45bbd2897105cd"><div class="ttname"><a href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a></div><div class="ttdeci">Result MountRom(const char *name, void *pFileSystemCacheBuffer, size_t fileSystemCacheBufferSize) NN_NOEXCEPT</div><div class="ttdoc">Mounts ROM resource data.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a4c97b79cce78a95c2333dbc9053b9393afde4472d2b455879cad02aade386ac0d"><div class="ttname"><a href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393afde4472d2b455879cad02aade386ac0d">nn::fs::OpenMode_Read</a></div><div class="ttdeci">@ OpenMode_Read</div><div class="ttdoc">Specifies read mode.</div><div class="ttdef"><b>Definition:</b> fs_FileSystem.h:39</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5df6e3385c795a5bd046790ef7f17f2d"><div class="ttname"><a href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a></div><div class="ttdeci">Result QueryMountRomCacheSize(size_t *pOutValue) NN_NOEXCEPT</div><div class="ttdoc">Get the size needed for the nn::fs::MountRom file system cache.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a81801a404563984f8c6cc1483cc6d730"><div class="ttname"><a href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></div><div class="ttdeci">Result ReadFile(FileHandle handle, int64_t offset, void *buffer, size_t size, const ReadOption &amp;option) NN_NOEXCEPT</div><div class="ttdoc">Loads the content of the file into the specified memory.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_aba29e01d386e809349d60eccdb15ff21"><div class="ttname"><a href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a></div><div class="ttdeci">Result GetFileSize(int64_t *outValue, FileHandle handle) NN_NOEXCEPT</div><div class="ttdoc">Gets the size of a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8a95249afd4a87a55d319dfecb0466c"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></div><div class="ttdeci">void Unmount(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Unmounts a mounted file system and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8bd9e828751bd4f953acfa765278f84"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a></div><div class="ttdeci">void CloseFile(FileHandle handle) NN_NOEXCEPT</div><div class="ttdoc">Closes a file.</div></div>
<div class="ttc" id="anamespacenn_1_1util_html_a275a3c89db5d0ab915559d8a85f9cbdd"><div class="ttname"><a href="namespacenn_1_1util.html#a275a3c89db5d0ab915559d8a85f9cbdd">nn::util::align_up</a></div><div class="ttdeci">constexpr T align_up(T x, size_t align) NN_NOEXCEPT</div><div class="ttdoc">Rounds up a value so that it fits the specified alignment.</div><div class="ttdef"><b>Definition:</b> util_BitUtil.h:111</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_ae872300a22548da2b586ef68d2c048a3"><div class="ttname"><a href="nn___abort_8h.html#ae872300a22548da2b586ef68d2c048a3">NN_ABORT_UNLESS_NOT_NULL</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_NOT_NULL(pointer)</div><div class="ttdoc">Tests whether the pointer is a null pointer and stops execution if it is.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:56</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_buffer_html"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_buffer.html">nn::audio::AudioOutBuffer</a></div><div class="ttdoc">Structure representing an audio output buffer.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:67</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_buffer_html_aa20555e970c0cf61d80914af41cf3a44"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_buffer.html#aa20555e970c0cf61d80914af41cf3a44">nn::audio::AudioOutBuffer::SizeGranularity</a></div><div class="ttdeci">static constexpr size_t SizeGranularity</div><div class="ttdoc">The size granularity required for AudioOutBuffer.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:69</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_buffer_html_aee83fe382b830ee95f7ecd7431ba9f73"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_buffer.html#aee83fe382b830ee95f7ecd7431ba9f73">nn::audio::AudioOutBuffer::AddressAlignment</a></div><div class="ttdeci">static constexpr size_t AddressAlignment</div><div class="ttdoc">The alignment required for AudioOutBuffer.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:68</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_html"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out.html">nn::audio::AudioOut</a></div><div class="ttdoc">Structure for managing an audio output.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:129</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_parameter_html"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_parameter.html">nn::audio::AudioOutParameter</a></div><div class="ttdoc">Parameter for audio output.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:44</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_parameter_html_a37d112b41c15a7c666540b7106167293"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_parameter.html#a37d112b41c15a7c666540b7106167293">nn::audio::AudioOutParameter::sampleRate</a></div><div class="ttdeci">int32_t sampleRate</div><div class="ttdoc">The sample rate.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:45</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_audio_out_parameter_html_a6a1ae1ae3536822b96a448bee14cca3d"><div class="ttname"><a href="structnn_1_1audio_1_1_audio_out_parameter.html#a6a1ae1ae3536822b96a448bee14cca3d">nn::audio::AudioOutParameter::channelCount</a></div><div class="ttdeci">uint16_t channelCount</div><div class="ttdoc">Number of channels.</div><div class="ttdef"><b>Definition:</b> audio_AudioOutTypes.h:46</div></div>
<div class="ttc" id="astructnn_1_1codec_1_1_aac_decoder_type_html"><div class="ttname"><a href="structnn_1_1codec_1_1_aac_decoder_type.html">nn::codec::AacDecoderType</a></div><div class="ttdoc">The structure for dealing with AacDecoder.</div><div class="ttdef"><b>Definition:</b> codec_AacDecoderTypes.h:29</div></div>
<div class="ttc" id="astructnn_1_1fs_1_1_file_handle_html"><div class="ttname"><a href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a></div><div class="ttdoc">Handle for working with a file.</div><div class="ttdef"><b>Definition:</b> fs_File.h:90</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleCodecAacDecoder_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program decodes audio data that has been encoded in AAC format, playing the audio as the data is being decoded. This sample program presents examples of decoding MP4 data and ADTS data. You can use the <code>ADTS</code> macro to switch to these audio formats.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Initialize the file system.</li>
<li>Load the AAC data.</li>
<li>Initialize the AAC decoder.</li>
<li>Initialize and start the audio renderer.</li>
<li>Run the AAC decoder and play the decoded results.</li>
<li>Finalize the audio renderer.</li>
<li>Exit the AAC decoder.</li>
</ul>
<p>First, initialize the file system. Use a resource file that is converted during build. Appropriately change the location of the resource directory.</p>
<p>Read the AAC data from the file.</p>
<p>Initialize the ACC decoder, based on the header information.</p>
<p>The initialization function <code><a class="el" href="classnn_1_1codec_1_1_aac_decoder.html#afe1df0b43aad6af769833cf591fa4c38" title="Initializes.">nn::codec::AacDecoder::Initialize()</a></code> must be passed a sample rate, a number of channels, the <code>Mpeg-4 Audio Object Type</code>, and a work buffer whose size is determined by these parameters.</p>
<p>You can get the size of the work buffer by using the <code><a class="el" href="classnn_1_1codec_1_1_aac_decoder.html#a3cd6c82d89486464df694231323e025a" title="Gets the size of work buffer required for AacDecoder.">nn::codec::AacDecoder::GetWorkBufferSize()</a></code> function.</p>
<p>Prepare the audio output. For more information about audio output, see the API Reference and the <code><a class="el" href="dir_890c704a49e013738da6ffe20023061b.html">Samples/Sources/Applications/AudioOut/ </a> </code> sample.</p>
<p>The main loop implements a streaming playback process. Several PCM buffers are prepared, and while audio is being played via <code><a class="el" href="structnn_1_1audio_1_1_audio_out.html" title="Structure for managing an audio output.">nn::audio::AudioOut</a></code>, the next chunk of AAC data gets decoded in the buffer whose data has finished being played.</p>
<p>After all of the AAC data has been decoded and played, the audio output is stopped, the audio output and the AAC decoder are finalized, and the memory is freed. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
