<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Measure Power Consumption Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_pcm.html">Pcm Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Measure Power Consumption Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSamplePcmBasic_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSamplePcmBasic_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSamplePcmBasic_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSamplePcmBasic_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This sample calculates power consumption using the power measurement library.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionBrief"></a>
Overview</h1>
<p>This sample uses the power measurement library to measure power consumption.</p>
<p>For more information about how to use the power measurement library, see the <a class="el" href="namespacenn_1_1pcm.html">Power Measurement Library API Reference</a>.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_73d77f30f2fbbc2b736565941967f829.html">Samples/Sources/Applications/PcmBasic/ </a> </code>.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>This sample program can only be built and run on the NX platform.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSamplePcmBasic_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSamplePcmBasic_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_pcm_basic_8cpp.html" title="Sample program demonstrating how to select performance configurations.">PcmBasic.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &lt;nn/nn_Common.h&gt;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="gfx_8h.html">nn/gfx.h</a>&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="pcm_8h.html">nn/pcm/pcm.h</a>&gt;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nv___memory_management_8h.html">nv/nv_MemoryManagement.h</a>&gt;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// Set measurement point information.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">struct </span>MeasuringPointInfo</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6a">nn::pcm::MeasuringPoint</a> point;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>*             pointName;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;};</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// Set measurement points (definitions fixed for NX specification).</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">const</span> MeasuringPointInfo MeasuringPointList[] =</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    { <a class="code" href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aa2b1972039a41892eee8f7d9e3baf7e98">nn::pcm::MeasuringPoint_Gpu</a>, <span class="stringliteral">&quot;GPU&quot;</span> },</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    { <a class="code" href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aad6938e54cb5176869d113813cca7d123">nn::pcm::MeasuringPoint_Cpu</a>, <span class="stringliteral">&quot;CPU&quot;</span> },</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    { <a class="code" href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aa30517fb9032b33a96ab1a448b2b12181">nn::pcm::MeasuringPoint_Ddr</a>, <span class="stringliteral">&quot;DDR&quot;</span> },</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;};</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// Number of measurement points.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> MeasuringPointCountMax = <span class="keyword">sizeof</span>(MeasuringPointList) / <span class="keyword">sizeof</span>(MeasuringPointList[0]);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// Variables and functions required to initialize the graphics device.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> GraphicsSystemMemorySize = 8 * 1024 * 1024;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<a class="code" href="classnn_1_1gfx_1_1_t_device.html">nn::gfx::Device</a> g_Device;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keywordtype">void</span> InitializeDevice()</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="classnn_1_1gfx_1_1_device_info.html">nn::gfx::Device::InfoType</a> info;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    info.<a class="code" href="classnn_1_1gfx_1_1_device_info.html#a2cb416e4373b83e5581daf818c4b2809">SetDefault</a>();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    info.<a class="code" href="classnn_1_1gfx_1_1_device_info.html#a5b400f8e8ec5b457db033faab20714af">SetApiVersion</a>(<a class="code" href="namespacenn_1_1gfx.html#aadcb725d8dd0dd4ee3987d07fb990cfd">nn::gfx::ApiMajorVersion</a>, <a class="code" href="namespacenn_1_1gfx.html#a810943869115c31d39dcc3598bddb92a">nn::gfx::ApiMinorVersion</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    g_Device.<a class="code" href="classnn_1_1gfx_1_1_t_device.html#a78cd197d82ff797eeb658446e9cfe387">Initialize</a>(info);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordtype">void</span> FinalizeDevice()</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    g_Device.<a class="code" href="classnn_1_1gfx_1_1_t_device.html#a6a6db34b0acc447ff87e6d07e813ae0b">Finalize</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keywordtype">void</span>* <a class="code" href="namespacenns_1_1g3d.html#a1a215a2fdfabe9aa8b6b70c639e9fd56">Allocate</a>(<span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> alignment, <span class="keywordtype">void</span>*)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> aligned_alloc(alignment, <a class="code" href="namespacenn_1_1util.html#a275a3c89db5d0ab915559d8a85f9cbdd">nn::util::align_up</a>(size, alignment));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">Free</a>(<span class="keywordtype">void</span>* addr, <span class="keywordtype">void</span>*)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    free(addr);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keywordtype">void</span>* Reallocate(<span class="keywordtype">void</span>* addr, <span class="keywordtype">size_t</span> newSize, <span class="keywordtype">void</span>*)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> realloc(addr, newSize);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}   <span class="comment">// Namespace.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">//  Main function.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;PCM demo start.\n\n&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// Initialize the surrounding memory for the graphics system.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespacenv.html#a7d85cfdd1bae1b635cc66b8d58077688">nv::SetGraphicsAllocator</a>(Allocate, Free, Reallocate, NULL);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="namespacenv.html#a5ef00427dfc2493551bb66b37731bb35">nv::SetGraphicsDevtoolsAllocator</a>(Allocate, Free, Reallocate, NULL);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="namespacenv.html#aacadc57952b370f2286108f5835ce726">nv::InitializeGraphics</a>(aligned_alloc(4096, GraphicsSystemMemorySize), GraphicsSystemMemorySize);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Initialize the graphics system to turn on the GPU.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="namespacenn_1_1gfx.html#a7fdc6aeebf1a1d6cc8a8893bcc3fd128">nn::gfx::Initialize</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    InitializeDevice();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// Wait until the GPU power measurement stabilizes.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a>(1));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// Initialize the power measurement library.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="namespacenn_1_1pcm.html#a9d7e8819a8a0c6bf7d6bdd45d02dc5e0">nn::pcm::Initialize</a>();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// Measure and display the power consumption at each measurement point.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;[Measurement Result]\n&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> point = 0; point &lt; MeasuringPointCountMax; ++point)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacenn_1_1pcm.html#a154dbabc2d8edc502e576bdf80cd67df">nn::pcm::IsSupported</a>(MeasuringPointList[point].point))</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordtype">int</span> power = <a class="code" href="namespacenn_1_1pcm.html#a20acdbdfb8c2feb09edef61a7acbcdd0">nn::pcm::ReadCurrentPower</a>(MeasuringPointList[point].point);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;%4d mW (@ %s)\n&quot;</span>, power, MeasuringPointList[point].pointName);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;---- mW (@ %s) / Not implemented on this board.\n&quot;</span>, MeasuringPointList[point].pointName);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// Finalize the power measurement library.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="namespacenn_1_1pcm.html#a74c98beba0080bbd002858ecd6b4aecf">nn::pcm::Finalize</a>();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Finalize the graphics system.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    FinalizeDevice();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="namespacenn_1_1gfx.html#a8e776d92173c3073b31a5cf65e306dfc">nn::gfx::Finalize</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;\nPCM demo end.\n\n&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="ttc" id="aclassnn_1_1_time_span_html_a8e74f5ceb64fc02aa614eed3cc148e82"><div class="ttname"><a href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a></div><div class="ttdeci">static constexpr TimeSpan FromSeconds(int64_t seconds) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in seconds.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:563</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_device_info_html"><div class="ttname"><a href="classnn_1_1gfx_1_1_device_info.html">nn::gfx::DeviceInfo</a></div><div class="ttdoc">The class representing the information for initializing a device.</div><div class="ttdef"><b>Definition:</b> gfx_DeviceInfo.h:38</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_device_info_html_a2cb416e4373b83e5581daf818c4b2809"><div class="ttname"><a href="classnn_1_1gfx_1_1_device_info.html#a2cb416e4373b83e5581daf818c4b2809">nn::gfx::DeviceInfo::SetDefault</a></div><div class="ttdeci">void SetDefault() NN_NOEXCEPT</div><div class="ttdoc">Helper function to set each parameter to the default value.</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_device_info_html_a5b400f8e8ec5b457db033faab20714af"><div class="ttname"><a href="classnn_1_1gfx_1_1_device_info.html#a5b400f8e8ec5b457db033faab20714af">nn::gfx::DeviceInfo::SetApiVersion</a></div><div class="ttdeci">void SetApiVersion(int majorVersion, int minorVersion) NN_NOEXCEPT</div><div class="ttdoc">Sets the API version.</div><div class="ttdef"><b>Definition:</b> gfx_DeviceInfo.h:86</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_t_device_html"><div class="ttname"><a href="classnn_1_1gfx_1_1_t_device.html">nn::gfx::TDevice</a></div><div class="ttdoc">Graphics abstraction layer representing a device.</div><div class="ttdef"><b>Definition:</b> gfx_Device.h:66</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_t_device_html_a6a6db34b0acc447ff87e6d07e813ae0b"><div class="ttname"><a href="classnn_1_1gfx_1_1_t_device.html#a6a6db34b0acc447ff87e6d07e813ae0b">nn::gfx::TDevice::Finalize</a></div><div class="ttdeci">void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes a device.</div><div class="ttdef"><b>Definition:</b> gfx_Device.h:128</div></div>
<div class="ttc" id="aclassnn_1_1gfx_1_1_t_device_html_a78cd197d82ff797eeb658446e9cfe387"><div class="ttname"><a href="classnn_1_1gfx_1_1_t_device.html#a78cd197d82ff797eeb658446e9cfe387">nn::gfx::TDevice::Initialize</a></div><div class="ttdeci">void Initialize(const InfoType &amp;info) NN_NOEXCEPT</div><div class="ttdoc">Initializes a device.</div><div class="ttdef"><b>Definition:</b> gfx_Device.h:117</div></div>
<div class="ttc" id="agfx_8h_html"><div class="ttname"><a href="gfx_8h.html">gfx.h</a></div><div class="ttdoc">Declaration of API resources for the graphics library.</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_a7fdc6aeebf1a1d6cc8a8893bcc3fd128"><div class="ttname"><a href="namespacenn_1_1gfx.html#a7fdc6aeebf1a1d6cc8a8893bcc3fd128">nn::gfx::Initialize</a></div><div class="ttdeci">void Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the gfx library.</div><div class="ttdef"><b>Definition:</b> gfx_Core.h:71</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_a810943869115c31d39dcc3598bddb92a"><div class="ttname"><a href="namespacenn_1_1gfx.html#a810943869115c31d39dcc3598bddb92a">nn::gfx::ApiMinorVersion</a></div><div class="ttdeci">static const int ApiMinorVersion</div><div class="ttdoc">The minor version of the API.</div><div class="ttdef"><b>Definition:</b> gfx_Core.h:60</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_a8e776d92173c3073b31a5cf65e306dfc"><div class="ttname"><a href="namespacenn_1_1gfx.html#a8e776d92173c3073b31a5cf65e306dfc">nn::gfx::Finalize</a></div><div class="ttdeci">void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the gfx library.</div><div class="ttdef"><b>Definition:</b> gfx_Core.h:85</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_aadcb725d8dd0dd4ee3987d07fb990cfd"><div class="ttname"><a href="namespacenn_1_1gfx.html#aadcb725d8dd0dd4ee3987d07fb990cfd">nn::gfx::ApiMajorVersion</a></div><div class="ttdeci">static const int ApiMajorVersion</div><div class="ttdoc">The major version of the API.</div><div class="ttdef"><b>Definition:</b> gfx_Core.h:55</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">Puts the current thread to sleep for the specified amount of time.</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a154dbabc2d8edc502e576bdf80cd67df"><div class="ttname"><a href="namespacenn_1_1pcm.html#a154dbabc2d8edc502e576bdf80cd67df">nn::pcm::IsSupported</a></div><div class="ttdeci">bool IsSupported(MeasuringPoint point) NN_NOEXCEPT</div><div class="ttdoc">Gets whether the specified power measurement point is available.</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a20acdbdfb8c2feb09edef61a7acbcdd0"><div class="ttname"><a href="namespacenn_1_1pcm.html#a20acdbdfb8c2feb09edef61a7acbcdd0">nn::pcm::ReadCurrentPower</a></div><div class="ttdeci">int ReadCurrentPower(MeasuringPoint point) NN_NOEXCEPT</div><div class="ttdoc">Reads the power consumption, in milliwatts (mW), immediately next to the specified point.</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a74c98beba0080bbd002858ecd6b4aecf"><div class="ttname"><a href="namespacenn_1_1pcm.html#a74c98beba0080bbd002858ecd6b4aecf">nn::pcm::Finalize</a></div><div class="ttdeci">void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalize the pcm library.</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a807222fd7d04b95f8e6ba2161ee7eb6a"><div class="ttname"><a href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6a">nn::pcm::MeasuringPoint</a></div><div class="ttdeci">MeasuringPoint</div><div class="ttdoc">The format for representing the power measurement point identifiers.</div><div class="ttdef"><b>Definition:</b> pcm_MeasuringPoint-spec.nx.h:26</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a807222fd7d04b95f8e6ba2161ee7eb6aa2b1972039a41892eee8f7d9e3baf7e98"><div class="ttname"><a href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aa2b1972039a41892eee8f7d9e3baf7e98">nn::pcm::MeasuringPoint_Gpu</a></div><div class="ttdeci">@ MeasuringPoint_Gpu</div><div class="ttdoc">The point for measuring power for the main GPU.</div><div class="ttdef"><b>Definition:</b> pcm_MeasuringPoint-spec.nx.h:27</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a807222fd7d04b95f8e6ba2161ee7eb6aa30517fb9032b33a96ab1a448b2b12181"><div class="ttname"><a href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aa30517fb9032b33a96ab1a448b2b12181">nn::pcm::MeasuringPoint_Ddr</a></div><div class="ttdeci">@ MeasuringPoint_Ddr</div><div class="ttdoc">The point for measuring power for the main DDR.</div><div class="ttdef"><b>Definition:</b> pcm_MeasuringPoint-spec.nx.h:29</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a807222fd7d04b95f8e6ba2161ee7eb6aad6938e54cb5176869d113813cca7d123"><div class="ttname"><a href="namespacenn_1_1pcm.html#a807222fd7d04b95f8e6ba2161ee7eb6aad6938e54cb5176869d113813cca7d123">nn::pcm::MeasuringPoint_Cpu</a></div><div class="ttdeci">@ MeasuringPoint_Cpu</div><div class="ttdoc">The point for measuring power for the main CPU.</div><div class="ttdef"><b>Definition:</b> pcm_MeasuringPoint-spec.nx.h:28</div></div>
<div class="ttc" id="anamespacenn_1_1pcm_html_a9d7e8819a8a0c6bf7d6bdd45d02dc5e0"><div class="ttname"><a href="namespacenn_1_1pcm.html#a9d7e8819a8a0c6bf7d6bdd45d02dc5e0">nn::pcm::Initialize</a></div><div class="ttdeci">void Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initialize the pcm library.</div></div>
<div class="ttc" id="anamespacenn_1_1util_html_a275a3c89db5d0ab915559d8a85f9cbdd"><div class="ttname"><a href="namespacenn_1_1util.html#a275a3c89db5d0ab915559d8a85f9cbdd">nn::util::align_up</a></div><div class="ttdeci">constexpr T align_up(T x, size_t align) NN_NOEXCEPT</div><div class="ttdoc">Rounds up a value so that it fits the specified alignment.</div><div class="ttdef"><b>Definition:</b> util_BitUtil.h:111</div></div>
<div class="ttc" id="anamespacenns_1_1g3d_html_a1a215a2fdfabe9aa8b6b70c639e9fd56"><div class="ttname"><a href="namespacenns_1_1g3d.html#a1a215a2fdfabe9aa8b6b70c639e9fd56">nns::g3d::Allocate</a></div><div class="ttdeci">T * Allocate(size_t size, size_t alignment) NN_NOEXCEPT</div><div class="ttdoc">&lt;b&gt;The use of internal features is prohibited.&lt;/b&gt; Allocates memory according to the specified type a...</div><div class="ttdef"><b>Definition:</b> g3d_System.h:64</div></div>
<div class="ttc" id="anamespacenns_1_1g3d_html_ac23ca3ba1949451319eb3bbaec93a93d"><div class="ttname"><a href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">nns::g3d::Free</a></div><div class="ttdeci">void Free(void *ptr) NN_NOEXCEPT</div><div class="ttdoc">&lt;b&gt;The use of internal features is prohibited.&lt;/b&gt; Frees memory.</div><div class="ttdef"><b>Definition:</b> g3d_System.h:90</div></div>
<div class="ttc" id="anamespacenv_html_a5ef00427dfc2493551bb66b37731bb35"><div class="ttname"><a href="namespacenv.html#a5ef00427dfc2493551bb66b37731bb35">nv::SetGraphicsDevtoolsAllocator</a></div><div class="ttdeci">void SetGraphicsDevtoolsAllocator(AllocateFunction allocate, FreeFunction free, ReallocateFunction reallocate, void *userPtr) NN_NOEXCEPT</div><div class="ttdoc">Set memory allocator for graphics developer tools and NVN debug layer.</div></div>
<div class="ttc" id="anamespacenv_html_a7d85cfdd1bae1b635cc66b8d58077688"><div class="ttname"><a href="namespacenv.html#a7d85cfdd1bae1b635cc66b8d58077688">nv::SetGraphicsAllocator</a></div><div class="ttdeci">void SetGraphicsAllocator(AllocateFunction allocate, FreeFunction free, ReallocateFunction reallocate, void *userPtr) NN_NOEXCEPT</div><div class="ttdoc">Set memory allocator for graphics subsystem.</div></div>
<div class="ttc" id="anamespacenv_html_aacadc57952b370f2286108f5835ce726"><div class="ttname"><a href="namespacenv.html#aacadc57952b370f2286108f5835ce726">nv::InitializeGraphics</a></div><div class="ttdeci">void InitializeGraphics(void *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Specify the address and size of memory that is donated to graphics firmware.</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="anv___memory_management_8h_html"><div class="ttname"><a href="nv___memory_management_8h.html">nv_MemoryManagement.h</a></div><div class="ttdoc">グラフィックスのメモリ管理機能を提供します。</div></div>
<div class="ttc" id="apcm_8h_html"><div class="ttname"><a href="pcm_8h.html">pcm.h</a></div><div class="ttdoc">Public header for the pcm library.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSamplePcmBasic_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program calculates the current consumption from all of the measurement points that can be specified and displays the results.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Initialize the power measurement library.</li>
<li>Measure and display the power consumption at each measurement point.<ul>
<li>Beginning with <code>nn::pcm::MeasuringPoint_</code>, specify an enumerator as the argument, corresponding to each measurement point that you want to measure.</li>
</ul>
</li>
<li>Verify execution results<ul>
<li>The power consumption, in milliwatts (mW), measured at the specified measurement point is saved to the return value.</li>
</ul>
</li>
</ul>
<p>The results of running this sample program on an SDEV are indicated below. If this program is executed on an EDEV with no measurement points, all measurement points will show "Not implemented on this board."</p>
<pre class="fragment">PCM demo start.

[Measurement Result]
  54 mW (@ GPU)
 750 mW (@ CPU)
 928 mW (@ DDR)

PCM demo end.
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
