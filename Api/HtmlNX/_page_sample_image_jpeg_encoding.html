<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sample for Encoding JPEGs and Setting Exif Information | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_image.html">Image Codec Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Sample for Encoding JPEGs and Setting Exif Information </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleImageJpegEncoding_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleImageJpegEncoding_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>This documentation describes how to encode JPEG and set Exif information.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionBrief"></a>
Overview</h1>
<p>This sample program shows how to generate pixel data and encode it to JPEG data. It also sets thumbnail images and Exif information.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_bfad899ff57f4a71302f60f3d1d90b0f.html">Samples/Sources/Applications/ImageJpegEncoding/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>This sample program only runs in an environment where the host PC file system can be mounted.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionHowToOperate"></a>
How to Use</h1>
<p>When the sample program is run, JPEG encoding is performed by creating and analyzing pixel data and assigning thumbnail images and Exif information. The obtained JPEG data is saved in storage on the host PC as a file.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionPrecaution"></a>
Important Information</h1>
<p>The output JPEG file is saved as <code>C:\JpegInputDir\output.jpg</code> on the host PC. The <code>C:\JpegInputDir</code> directory must be created in advance.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleImageJpegEncoding_SectionDetail"></a>
Description</h1>
<p>This sample program shows a method of encoding pixel data to JPEG data. Encoding to JPEG data includes assigning thumbnail images and setting Exif information.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Create pixel data.</li>
<li>Allocate the output buffer.</li>
<li>Set Exif information.<ul>
<li>Set metadata.</li>
<li>Create and set the thumbnail image.</li>
</ul>
</li>
<li>Perform JPEG encoding.<ul>
<li>Set encoding parameters.</li>
<li>Analyze pixel data and encoding parameters.</li>
<li>Calculate the amount of work memory needed to encode JPEG.</li>
<li>Perform encoding to specify Exif information.</li>
</ul>
</li>
<li>Output JPEG data to a file.</li>
</ul>
<p>Create pixel data to be encoded. This data is stored in a line-aligned buffer at an appropriate size. Next, prepare a buffer to store the output JPEG data. The size of the output JPEG data cannot be accurately estimated, so reserve a buffer of suitable size in advance.</p>
<p>Exif information can be built independent of JPEG encoding using <code><a class="el" href="classnn_1_1image_1_1_exif_builder.html" title="Creates Exif information.">nn::image::ExifBuilder</a></code>. Note that although any supported metadata can be included, the final Exif information size, including the thumbnail image size, must not exceed 65,527 bytes. Thumbnail images can be obtained by JPEG-encoding any pixel data. A thumbnail of any number of pixels or any byte count can be specified as long as the EXIF information size range is not exceeded. However, do not include EXIF information in the thumbnail image.</p>
<p>The obtained pixel data, thumbnail image, and EXIF information are used to create the JPEG data. The amount of work memory required for encoding can be obtained by setting pixel data and encoding parameters in <code><a class="el" href="classnn_1_1image_1_1_jpeg_encoder.html" title="Encodes JPEG data.">nn::image::JpegEncoder</a></code> and then analyzing it. If work memory of a suitable size is allocated, JPEG encoding is performed by specifying Exif information. The thumbnail image, the metadata, and <code><a class="el" href="classnn_1_1image_1_1_exif_builder.html" title="Creates Exif information.">nn::image::ExifBuilder</a></code> work memory are deallocated after JPEG encoding. The obtained JPEG data is saved as is on the host PC file system as a file.</p>
<p>Running this sample program returns the following results. The JPEG data obtained by running this sample program can be accessed as the file <code>ExampleOutput.jpg</code> located in the same folder as this sample.</p>
<pre class="fragment">Exif 情報を設定します。
 - 画像方向: "垂直方向に反転"
 - ソフトウェア名: "Nintendo SDK Sample Program for JPEG library"
 - 撮影日時: "2015:08:07 09:00:00"
 - メーカーノート: 2 バイト
 - サムネイル画像: 幅 127 px, 高さ 96 px, 画質 100, 5060 バイト
エンコード設定
 - 画質パラメータ: 100
 - YCbCrサンプリング比: 4:4:4
JPEG データにエンコードします。
出力された JPEG データ: 幅 639 px, 高さ 480 px, 142466 バイト
</pre><p>This application is created by using the following OSS.</p>
<ul>
<li>IJG libjpeg<ul>
<li>This software is based in part on the work of the Independent JPEG Group. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
