<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EcConsumableServiceItemManager/EcConsumableServiceItemManager.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EcConsumableServiceItemManager/EcConsumableServiceItemManager.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_ec_consumable_service_item_manager.html">EcConsumableServiceItemManager</a> and <tt>EcConsumableServiceItemManager/EcConsumableServiceItemManager.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/nn_Result.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/account.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___result_8h.html">nn/account/account_Result.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/nifm.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ec___consumable_service_item_api_8h.html">nn/ec/ec_ConsumableServiceItemApi.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ec___consumable_service_item_types_8h.html">nn/ec/ec_ConsumableServiceItemTypes.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="util___scope_exit_8h.html">nn/util/util_ScopeExit.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;EcConsumableServiceItemManager.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;EcConsumableServiceItemManager_ServiceMethods.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define EXIT_UNLESS(expression) \</span></div>
<div class="line"><span class="preprocessor">    do { auto _r = (expression); if (!_r) return; } while (NN_STATIC_CONDITION(false))</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define FAILURE_UNLESS(expression) \</span></div>
<div class="line"><span class="preprocessor">    do { auto _r = (expression); if (!_r) return false; } while (NN_STATIC_CONDITION(false))</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Work memory for the shop service accessor.</span></div>
<div class="line">    <a name="a0"></a><a class="code" href="nn___macro_8h.html#a6ce9d4b07ab8bec971ac8875873615b5">NN_ALIGNAS</a>(<a name="a1"></a><a class="code" href="namespacenn_1_1os.html#ac880b46610757e748d5bd79211af4236">nn::os::MemoryPageSize</a>) nn::Bit8 g_AccessorWorkMemory[<a name="a2"></a><a class="code" href="namespacenn_1_1ec.html#a9e1f5f238952f0596feb3afb7063ebba">nn::ec::RequiredMinimumWorkMemorySizeForShopServiceAccessor</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Work memory for the consumable service item manager.</span></div>
<div class="line">    <a class="code" href="nn___macro_8h.html#a6ce9d4b07ab8bec971ac8875873615b5">NN_ALIGNAS</a>(<a class="code" href="namespacenn_1_1os.html#ac880b46610757e748d5bd79211af4236">nn::os::MemoryPageSize</a>) nn::Bit8 g_ManagerWorkMemory[<a name="a3"></a><a class="code" href="namespacenn_1_1ec.html#a9b351c75efb6d117f999455249e031de">nn::ec::RequiredWorkMemorySizeForConsumableServiceItem</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Determine whether the specified file exists.</span></div>
<div class="line"><span class="keywordtype">bool</span> Program::Exists(<span class="keyword">const</span> <span class="keywordtype">char</span>* pFilePath) <a name="a4"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacenn_1_1fs.html#a5fc46cd05067c210b62e96f903a2fe85">nn::fs::DirectoryEntryType</a> entryType;</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a5"></a><a class="code" href="namespacenn_1_1fs.html#a5cf6e2f2c5a0c4e404ba3dd782cc98bc">nn::fs::GetEntryType</a>(&amp;entryType, pFilePath).IsSuccess())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (entryType == nn::fs::DirectoryEntryType::DirectoryEntryType_File)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read data from the specified file.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::ReadFile(<span class="keywordtype">size_t</span>* pReadSize, <span class="keywordtype">void</span>* buffer, <span class="keyword">const</span> <span class="keywordtype">size_t</span> bufferSize, <span class="keyword">const</span> <span class="keywordtype">char</span>* pFilePath) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Ensure that a file exists in pFilePath.</span></div>
<div class="line">    <span class="comment">// In this sample program, Program::ReadFile is not called if no file exists.</span></div>
<div class="line">    <a name="a6"></a><a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(Exists(pFilePath));</div>
<div class="line"> </div>
<div class="line">    <a name="_a7"></a><a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> handle;</div>
<div class="line">    <a name="a8"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a9"></a><a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>(&amp;handle, pFilePath, nn::fs::OpenMode::OpenMode_Read));</div>
<div class="line">    <a name="a10"></a><a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <a name="a11"></a><a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>(handle);</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Ensure the output buffer is large enough.</span></div>
<div class="line">    <span class="comment">// This sample program passes an output buffer of nn::ec::RequiredUserSaveDataSizeForConsumableServiceItem bytes to Program::ReadFile.</span></div>
<div class="line">    <span class="comment">// If a buffer of this size has been allocated, the library specification ensures that the serialized license information will be read.</span></div>
<div class="line">    int64_t fileSize;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a12"></a><a class="code" href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a>(&amp;fileSize, handle));</div>
<div class="line">    <span class="keyword">auto</span> readSize = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(fileSize);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(bufferSize &gt;= readSize);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Load pFilePath into buffer.</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a13"></a><a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(pReadSize, handle, 0, buffer, bufferSize));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Write data to the specified f.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::WriteFile(<span class="keyword">const</span> <span class="keywordtype">char</span>* pFilePath, <span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> bufferSize) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// If there is a file in pFilePath, delete that file.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Exists(pFilePath))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a14"></a><a class="code" href="namespacenn_1_1fs.html#a812ac4964fb5564467c5475c1b9fb16b">nn::fs::DeleteFile</a>(pFilePath));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create pFilePath.</span></div>
<div class="line">    <span class="keyword">auto</span> createSize = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(bufferSize);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a15"></a><a class="code" href="namespacenn_1_1fs.html#a3e89c4d57cc8379265894ff7f3e98b2c">nn::fs::CreateFile</a>(pFilePath, createSize));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Write into buffer.</span></div>
<div class="line">    <a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> handle;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>(&amp;handle, pFilePath, <a name="a16"></a><a class="code" href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393a0ee257dbba840301b0e656f6d1345c03">nn::fs::OpenMode_Write</a>));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>(handle);</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a17"></a><a class="code" href="namespacenn_1_1fs.html#ab4351ff3a319e9a63093324a669492ab">nn::fs::WriteFile</a>(handle, 0, buffer, bufferSize, <a name="a18"></a><a class="code" href="structnn_1_1fs_1_1_write_option.html#ae7e600e7ade2fdde6fab0559dfb4bd1e">nn::fs::WriteOption::MakeValue</a>(<a name="a19"></a><a class="code" href="namespacenn_1_1fs.html#afb4fdd50e0892400c07232f714caa14da2956e16dac576b2b7eff3142e18ac2c0">nn::fs::WriteOptionFlag_Flush</a>)));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Write the serialized license information to the specified file.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::WriteSerializedRightData(<span class="keyword">const</span> <span class="keywordtype">char</span>* pathSerializedRightData, <a name="_a20"></a><a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html">nn::ec::ConsumableServiceItemManager</a>* pManager) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> bufferSize = pManager-&gt;GetRequiredBufferSizeToExportSerializedRightData();</div>
<div class="line">    <span class="keyword">auto</span> buffer = std::make_unique&lt;nn::Bit8[]&gt;(bufferSize);</div>
<div class="line">    <span class="keyword">auto</span> serializedDataSize = pManager-&gt;ExportSerializedRightData(buffer.get(), bufferSize);</div>
<div class="line">    <a class="code" href="namespacenn_1_1fs.html#ab4351ff3a319e9a63093324a669492ab">WriteFile</a>(pathSerializedRightData, buffer.get(), serializedDataSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Execute nn::account::EnsureNetworkServiceAccountAvailable. If the process fails, display the error viewer.</span></div>
<div class="line"><a name="_a21"></a><a class="code" href="classnn_1_1_result.html">nn::Result</a> Program::EnsureNetworkServiceAccountAvailableWithShowingError(<span class="keyword">const</span> <a name="_a22"></a><a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a>&amp; userHandle) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Try to activate the network service account.</span></div>
<div class="line">    <span class="keyword">auto</span> ensureResult = <a name="a23"></a><a class="code" href="namespacenn_1_1account.html#a3f6aca5d7fd762684b1ee408a35d99f6">nn::account::EnsureNetworkServiceAccountAvailable</a>(userHandle);</div>
<div class="line">    <span class="keywordflow">if</span> (ensureResult.IsFailure())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (nn::account::ResultCancelledByUser::Includes(ensureResult))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// If the user has intentionally canceled activation, do not display the error viewer.</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a name="a24"></a><a class="code" href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a>(ensureResult);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> ensureResult;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Display the error viewer while determining nn::ec::ResultShowErrorCodeRequired for the result of the asynchronous request.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::ShowErrorWithHandlingResultShowErrorCodeRequired(<span class="keyword">const</span> <a class="code" href="classnn_1_1_result.html">nn::Result</a> responseResult, <span class="keyword">const</span> <a name="_a25"></a><a class="code" href="structnn_1_1err_1_1_error_code.html">nn::err::ErrorCode</a>&amp; errorCode) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (nn::ec::ResultShowErrorCodeRequired::Includes(responseResult))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a>(errorCode);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a>(responseResult);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Execute the asynchronous request, including error handling.</span></div>
<div class="line"><span class="comment">// In the current version of AsyncRequest, there are no errors that require separate handling, so a shared error handling process can be coded.</span></div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><span class="keywordtype">bool</span> Program::ExecuteAsyncRequestWithHandlingResult(T* pAsyncRequest, <span class="keyword">const</span> <a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a>&amp; userHandle) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> beginResult = pAsyncRequest-&gt;Begin();</div>
<div class="line">    <span class="keywordflow">if</span> (beginResult.IsFailure())</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a>(beginResult);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> endResult = pAsyncRequest-&gt;End();</div>
<div class="line">    <span class="keywordflow">if</span> (endResult.IsFailure())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (nn::ec::ResultShopServiceAccessCanceled::Includes(endResult))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The error viewer is not displayed if shop service access has been canceled.</span></div>
<div class="line">            <span class="comment">// Asynchronous requests are not canceled in this sample program, so this error is not returned.</span></div>
<div class="line">            <span class="comment">// To cancel an asynchronous request, execute pAsyncRequest-&gt;Cancel.</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nn::account::ResultNetworkServiceAccountUnavailable::Includes(endResult))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// This sample program only activates the network account, and does not make the asynchronous request again.</span></div>
<div class="line">            <span class="comment">// To make the asynchronous request again, the following processes must be supported.</span></div>
<div class="line">            <span class="comment">// If license recovery or access to a license has failed, destroy the instance of the failed asynchronous request and try again starting from the creation of a new instance.</span></div>
<div class="line">            <span class="comment">// If license consumption has failed, the consumable service manager must recover the license. Try again starting with recovering the license.</span></div>
<div class="line">            EnsureNetworkServiceAccountAvailableWithShowingError(userHandle);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            ShowErrorWithHandlingResultShowErrorCodeRequired(endResult, pAsyncRequest-&gt;GetErrorCode());</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Transfer the purchased license information from the eShop server to the user save data.</span></div>
<div class="line"><span class="keywordtype">bool</span> Program::TransferRightData(</div>
<div class="line">    <a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html">nn::ec::ConsumableServiceItemManager</a>* pManager,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* mountName,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* pathSerializedRightData,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a>&amp; userHandle</div>
<div class="line">) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Determine whether a license needs to be recovered, and request license recovery if necessary.</span></div>
<div class="line">    <span class="keywordflow">if</span> (pManager-&gt;IsRecoveryRequired())</div>
<div class="line">    {</div>
<div class="line">        <a name="_a26"></a><a class="code" href="classnn_1_1ec_1_1_async_recover_right_data_request.html">nn::ec::AsyncRecoverRightDataRequest</a> asyncRequest;</div>
<div class="line">        pManager-&gt;SetupAsyncRequest(&amp;asyncRequest);</div>
<div class="line"> </div>
<div class="line">        FAILURE_UNLESS(ExecuteAsyncRequestWithHandlingResult&lt;nn::ec::AsyncRecoverRightDataRequest&gt;(&amp;asyncRequest, userHandle));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Determine whether a license is available, and request the license if it can be obtained.</span></div>
<div class="line">    <span class="keywordflow">if</span> (pManager-&gt;CanQueryNewData())</div>
<div class="line">    {</div>
<div class="line">        <a name="_a27"></a><a class="code" href="classnn_1_1ec_1_1_async_get_consumable_right_data_request.html">nn::ec::AsyncGetConsumableRightDataRequest</a> asyncRequest;</div>
<div class="line">        pManager-&gt;SetupAsyncRequest(&amp;asyncRequest);</div>
<div class="line"> </div>
<div class="line">        FAILURE_UNLESS(ExecuteAsyncRequestWithHandlingResult&lt;nn::ec::AsyncGetConsumableRightDataRequest&gt;(&amp;asyncRequest, userHandle));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Save the serialized license information to the user save data and commit before consuming any licenses.</span></div>
<div class="line">    <span class="comment">// This step preserves the license information even if the power is cut while the license is being consumed.</span></div>
<div class="line">    WriteSerializedRightData(pathSerializedRightData, pManager);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a28"></a><a class="code" href="namespacenn_1_1fs.html#ab534529ae3c325863fe1eb34bd03c872">nn::fs::Commit</a>(mountName));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Determine whether a license needs to be consumed, and request license consumption if necessary.</span></div>
<div class="line">    <span class="keywordflow">if</span> (pManager-&gt;IsConsumptionRequired())</div>
<div class="line">    {</div>
<div class="line">        <a name="_a29"></a><a class="code" href="classnn_1_1ec_1_1_async_consume_right_data_request.html">nn::ec::AsyncConsumeRightDataRequest</a> asyncRequest;</div>
<div class="line">        pManager-&gt;SetupAsyncRequest(&amp;asyncRequest);</div>
<div class="line"> </div>
<div class="line">        FAILURE_UNLESS(ExecuteAsyncRequestWithHandlingResult&lt;nn::ec::AsyncConsumeRightDataRequest&gt;(&amp;asyncRequest, userHandle));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Save the result of consuming the license as serialized license information in the user save data, and commit.</span></div>
<div class="line">        WriteSerializedRightData(pathSerializedRightData, pManager);</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#ab534529ae3c325863fe1eb34bd03c872">nn::fs::Commit</a>(mountName));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Provide service.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::ProvideService(</div>
<div class="line">    <a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html">nn::ec::ConsumableServiceItemManager</a>* pManager,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* mountName,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* pathSerializedRightData,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* pathInGameValue</div>
<div class="line">) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Get saved &#39;gold&#39; or &#39;medicinal herb&#39; items from the user save data.</span></div>
<div class="line">    InGameValue inGameValue = {};</div>
<div class="line">    <span class="keywordflow">if</span> (Exists(pathInGameValue))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">size_t</span> readSize;</div>
<div class="line">        <a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">ReadFile</a>(&amp;readSize, &amp;inGameValue, <span class="keyword">sizeof</span>(inGameValue), pathInGameValue);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Show the number of pieces of gold or medicinal herbs before the service has been provided.</span></div>
<div class="line">    PrintInGameValue(<span class="stringliteral">&quot;Before Service Provided&quot;</span>, inGameValue);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get the number of item IDs for which services can be provided.</span></div>
<div class="line">    <span class="keyword">auto</span> itemIdCount = pManager-&gt;GetProvidableItemIdCount();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get item IDs for which services can be provided.</span></div>
<div class="line">    <span class="comment">// This sample program passes a sufficient amount of work memory when ConsumableServiceItemManager is initialized.</span></div>
<div class="line">    <span class="comment">// The buffer for itemIds is also sufficient, so do not perform error handling and abort if the process fails.</span></div>
<div class="line">    <span class="keyword">auto</span> itemIds = std::make_unique&lt;nn::ec::ConsumableServiceItemId[]&gt;(itemIdCount);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(pManager-&gt;GetProvidableItemIds(&amp;itemIdCount, itemIds.get(), itemIdCount));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; itemIdCount; i++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span>&amp; itemId = itemIds[i];</div>
<div class="line">        <span class="keyword">auto</span> atService = ServiceMethods::MapWithItemId.find(itemId.value);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (atService == ServiceMethods::MapWithItemId.end())</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The providing service found an item ID not defined in the application.</span></div>
<div class="line">            Printf(<span class="stringliteral">&quot;Unknown item id is found.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Make sure that you define a service provision process corresponding to the item ID for all consumable service items registered in your retail product.</span></div>
<div class="line">            <span class="comment">// As long as the application ID is 0x01004b9000490000, all of the products purchasable by the sample program that</span></div>
<div class="line">            <span class="comment">// gets a list of consumable service items can be converted to &#39;gold&#39; and &#39;medicinal herb&#39; items by this sample program. For this reason, the process is canceled if the program enters this branch.</span></div>
<div class="line">            <a name="a30"></a><a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;Unknown item id is found. The item id is %s.\n&quot;</span>, itemId.value);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Treat the corresponding item ID as a provided service.</span></div>
<div class="line">        <span class="comment">// In this sample program, the item IDs never specify items that are now owned, so error handling is not performed and the program is aborted if the process fails.</span></div>
<div class="line">        uint64_t seed;</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(pManager-&gt;MarkServiceProvided(&amp;seed, itemId));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Execute the process imparted to the gold or medicinal herb corresponding to that item ID.</span></div>
<div class="line">        atService-&gt;second(&amp;inGameValue, seed);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Show the number of pieces of gold or medicinal herbs after the service has been provided.</span></div>
<div class="line">    PrintInGameValue(<span class="stringliteral">&quot;After Service Provided&quot;</span>, inGameValue);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Save the serialized license information and the gold or medicinal herb to the user save data as the result of the provided service.</span></div>
<div class="line">    WriteSerializedRightData(pathSerializedRightData, pManager);</div>
<div class="line">    <span class="keywordtype">size_t</span> bufferSize = <span class="keyword">sizeof</span>(inGameValue);</div>
<div class="line">    <a class="code" href="namespacenn_1_1fs.html#ab4351ff3a319e9a63093324a669492ab">WriteFile</a>(pathInGameValue, &amp;inGameValue, bufferSize);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Commit the serialized license information and the gold or medicinal herb at the same time.</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#ab534529ae3c325863fe1eb34bd03c872">nn::fs::Commit</a>(mountName));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The main process of the user save data manager for consumable service items.</span></div>
<div class="line"><span class="keywordtype">void</span> Program::Main() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize the network connection management library and issue a network connection request.</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a31"></a><a class="code" href="namespacenn_1_1nifm.html#a0e3aaf3209696149ec22613e1d3d6705">nn::nifm::Initialize</a>());</div>
<div class="line">    <span class="keywordflow">while</span> (<a name="a32"></a><a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>(<span class="keyword">true</span>))</div>
<div class="line">    {</div>
<div class="line">        <a name="a33"></a><a class="code" href="namespacenn_1_1nifm.html#ac42c271bffbeb6324e5a41ae779d6575">nn::nifm::SubmitNetworkRequestAndWait</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a34"></a><a class="code" href="namespacenn_1_1nifm.html#a933a28d229a56e800703d95d4830fc6a">nn::nifm::IsNetworkAvailable</a>())</div>
<div class="line">        {</div>
<div class="line">            Printf(<span class="stringliteral">&quot;Network is available.\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a35"></a><a class="code" href="namespacenn_1_1nifm.html#a4b82cc2b7ac1d168d0d22b777465f418">nn::nifm::HandleNetworkRequestErrorResult</a>())</div>
<div class="line">        {</div>
<div class="line">            Printf(<span class="stringliteral">&quot;Network is not available. SubmitNetworkRequest again.\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        Printf(<span class="stringliteral">&quot;Network is not available. A sample program ends.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the account system and select a user.</span></div>
<div class="line">    <a name="a36"></a><a class="code" href="namespacenn_1_1account.html#ac5870470963c9923c63f76e03c8c024e">nn::account::Initialize</a>();</div>
<div class="line">    <a name="_a37"></a><a class="code" href="structnn_1_1account_1_1_uid.html">nn::account::Uid</a> user;</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> result = <a name="a38"></a><a class="code" href="namespacenn_1_1account.html#a749534bdfdee56eebe9203a526390b32">nn::account::ShowUserSelector</a>(&amp;user);</div>
<div class="line">        <span class="keywordflow">if</span> (nn::account::ResultCancelledByUser::Includes(result))</div>
<div class="line">        {</div>
<div class="line">            Printf(<span class="stringliteral">&quot;User selection is cancelled. A sample program ends.\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open the user.</span></div>
<div class="line">    <a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a> userHandle;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a39"></a><a class="code" href="namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41">nn::account::OpenUser</a>(&amp;userHandle, user));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Close the user when Program::Main ends.</span></div>
<div class="line">        <a name="a40"></a><a class="code" href="namespacenn_1_1account.html#aaf1a6e0b8cbcef6f62eae042bca5b7cb">nn::account::CloseUser</a>(userHandle);</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create and mount user save data.</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* mountName = <span class="stringliteral">&quot;save&quot;</span>;</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> result = <a name="a41"></a><a class="code" href="namespacenn_1_1fs.html#ae5f48fe542ce22263e1399e3b50190e8">nn::fs::EnsureSaveData</a>(user);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// nn::fs::EnsureSaveData acts internally to display the error viewer.</span></div>
<div class="line">        <span class="comment">// For this reason, the caller of the function does not need to display the error viewer.</span></div>
<div class="line">        EXIT_UNLESS(result.IsSuccess());</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a42"></a><a class="code" href="namespacenn_1_1fs.html#afdbda9f24e47b02bb74da4558bbd0760">nn::fs::MountSaveData</a>(mountName, user));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Unmount the user save data when Program::Main ends.</span></div>
<div class="line">        <a name="a43"></a><a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(mountName);</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the utility feature for shop service access.</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a44"></a><a class="code" href="namespacenn_1_1ec.html#ad61a6802748556c33adbdf7ad49a5438">nn::ec::InitializeForShopServiceAccessors</a>(g_AccessorWorkMemory, <span class="keyword">sizeof</span>(g_AccessorWorkMemory)));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Finalize the utility feature for shop service access when Program::Main ends.</span></div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a45"></a><a class="code" href="namespacenn_1_1ec.html#af60c0d6dbd360cef0ee822cea3305ce2">nn::ec::FinalizeForShopServiceAccessors</a>());</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the shop service accessor, specifying &lt;tt&gt;Type_OwnedConsumableServiceItem&lt;/tt&gt;.</span></div>
<div class="line">    <a name="_a46"></a><a class="code" href="classnn_1_1ec_1_1_shop_service_accessor.html">nn::ec::ShopServiceAccessor</a> accessor;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(accessor.<a name="a47"></a><a class="code" href="classnn_1_1ec_1_1_shop_service_accessor.html#a687ab8fd1a47844704753ee5154bd1f6">Initialize</a>(nn::ec::ShopService::Type::Type_OwnedConsumableServiceItem));</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html">nn::ec::ConsumableServiceItemManager</a> manager;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* pathSerializedRightData = <span class="stringliteral">&quot;save:/SerializedRightData&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Determine whether the user save data contains serialized license information.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Exists(pathSerializedRightData))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// If the data exists, get that data.</span></div>
<div class="line">        <span class="keywordtype">size_t</span> bufferSize = <a name="a48"></a><a class="code" href="namespacenn_1_1ec.html#a91d90c10315f282b743dee0ec75c0506">nn::ec::RequiredUserSaveDataSizeForConsumableServiceItem</a>;</div>
<div class="line">        <span class="keyword">auto</span> buffer = std::make_unique&lt;nn::Bit8[]&gt;(bufferSize);</div>
<div class="line">        <span class="keywordtype">size_t</span> readSize;</div>
<div class="line">        <a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">ReadFile</a>(&amp;readSize, buffer.get(), bufferSize, pathSerializedRightData);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Specify the serialized license information and initialize the consumable service item manager.</span></div>
<div class="line">        <span class="comment">// This sample program uses a sufficient amount of work memory and does not overwrite the serialized license information, so an error does not occur.</span></div>
<div class="line">        <span class="comment">// For this reason, the program is aborted without performing error handling if the process fails.</span></div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(manager.<a name="a49"></a><a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html#a46610134ab3f906d1830ca637dd0555b">Initialize</a>(&amp;accessor, user, g_ManagerWorkMemory, <span class="keyword">sizeof</span>(g_ManagerWorkMemory), buffer.get(), readSize));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Initialize the consumable service item manager without specifying the serialized license information.</span></div>
<div class="line">        <span class="comment">// This sample program uses a sufficient amount of work memory so that an error does not occur.</span></div>
<div class="line">        <span class="comment">// For this reason, the program is aborted without performing error handling if the process fails.</span></div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(manager.<a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html#a46610134ab3f906d1830ca637dd0555b">Initialize</a>(&amp;accessor, user, g_ManagerWorkMemory, <span class="keyword">sizeof</span>(g_ManagerWorkMemory)));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// In this sample program, flags are recorded to indicate whether the provision of service has been executed as a way of separating out the log when the program ends.</span></div>
<div class="line">    <span class="keywordtype">bool</span> isProvideServiceExecuted = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Recover, get, and consume licenses and provide services, repeating the process until there are no more item IDs for which services can be provided.</span></div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>(<span class="keyword">true</span>))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Transfer the purchased license information from the eShop server to the user save data.</span></div>
<div class="line">        EXIT_UNLESS(TransferRightData(&amp;manager, mountName, pathSerializedRightData, userHandle));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get the number of item IDs for which services can be provided.</span></div>
<div class="line">        <span class="keyword">auto</span> itemIdCount = manager.<a name="a50"></a><a class="code" href="classnn_1_1ec_1_1_consumable_service_item_manager.html#a3aab8fe7b1b423fbd0730a4d04cc1eb2">GetProvidableItemIdCount</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If there are no more item IDs for which services can be provided after the licenses have been successfully consumed,</span></div>
<div class="line">        <span class="comment">// end the process of providing consumable service items with the user save data manager.</span></div>
<div class="line">        <span class="keywordflow">if</span> (itemIdCount == 0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Provide service.</span></div>
<div class="line">        <span class="comment">// This sample program does not generate errors using the necessary functions for providing services that are called inside ProvideService.</span></div>
<div class="line">        <span class="comment">// For this reason, the program is aborted without performing error handling if the process fails.</span></div>
<div class="line">        <span class="comment">// Besides sample program processes, the only other factor that could cause the program to abort is insufficient save data space when writing data to save data.</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span>* pathInGameValue = <span class="stringliteral">&quot;save:/InGameValue&quot;</span>;</div>
<div class="line">        ProvideService(&amp;manager, mountName, pathSerializedRightData, pathInGameValue);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This sample program records the provision of services as a way of separating out the log when the program ends.</span></div>
<div class="line">        isProvideServiceExecuted = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// If no services have been provided, this sample program displays that fact on the screen.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!isProvideServiceExecuted)</div>
<div class="line">    {</div>
<div class="line">        Printf(<span class="stringliteral">&quot;No providable services are found.\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    Printf(<span class="stringliteral">&quot;Providing services of Owned Consumable Service Item is completed.\n&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aaccount___result_8h_html"><div class="ttname"><a href="account___result_8h.html">account_Result.h</a></div><div class="ttdoc">Defines nn::Resutl-type values that can be returned by the account system.</div></div>
<div class="ttc" id="aclassnn_1_1_result_html"><div class="ttname"><a href="classnn_1_1_result.html">nn::Result</a></div><div class="ttdoc">Represents the generic result of an operation.</div><div class="ttdef"><b>Definition:</b> nn_Result.h:32</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_async_consume_right_data_request_html"><div class="ttname"><a href="classnn_1_1ec_1_1_async_consume_right_data_request.html">nn::ec::AsyncConsumeRightDataRequest</a></div><div class="ttdoc">Asynchronous request class that consumes the rights information stored on the server.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemApi.h:602</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_async_get_consumable_right_data_request_html"><div class="ttname"><a href="classnn_1_1ec_1_1_async_get_consumable_right_data_request.html">nn::ec::AsyncGetConsumableRightDataRequest</a></div><div class="ttdoc">Asynchronous request class for getting unconsumed license information stored on the server.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemApi.h:509</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_async_recover_right_data_request_html"><div class="ttname"><a href="classnn_1_1ec_1_1_async_recover_right_data_request.html">nn::ec::AsyncRecoverRightDataRequest</a></div><div class="ttdoc">Asynchronous request class that restores the license information to a state where it can be provided.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemApi.h:690</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_consumable_service_item_manager_html"><div class="ttname"><a href="classnn_1_1ec_1_1_consumable_service_item_manager.html">nn::ec::ConsumableServiceItemManager</a></div><div class="ttdoc">A manager class for maintaining consumable service items in the client.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemApi.h:107</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_consumable_service_item_manager_html_a3aab8fe7b1b423fbd0730a4d04cc1eb2"><div class="ttname"><a href="classnn_1_1ec_1_1_consumable_service_item_manager.html#a3aab8fe7b1b423fbd0730a4d04cc1eb2">nn::ec::ConsumableServiceItemManager::GetProvidableItemIdCount</a></div><div class="ttdeci">int GetProvidableItemIdCount() const NN_NOEXCEPT</div><div class="ttdoc">Gets the number of consumable service items that can be provided.</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_consumable_service_item_manager_html_a46610134ab3f906d1830ca637dd0555b"><div class="ttname"><a href="classnn_1_1ec_1_1_consumable_service_item_manager.html#a46610134ab3f906d1830ca637dd0555b">nn::ec::ConsumableServiceItemManager::Initialize</a></div><div class="ttdeci">nn::Result Initialize(ShopServiceAccessor *pAccessor, const account::Uid &amp;user, void *pWorkMemory, size_t workMemorySize) NN_NOEXCEPT</div><div class="ttdoc">Initializes the consumable service item manager.</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_shop_service_accessor_html"><div class="ttname"><a href="classnn_1_1ec_1_1_shop_service_accessor.html">nn::ec::ShopServiceAccessor</a></div><div class="ttdoc">The shop service accessor class.</div><div class="ttdef"><b>Definition:</b> ec_ShopServiceAccessor.h:173</div></div>
<div class="ttc" id="aclassnn_1_1ec_1_1_shop_service_accessor_html_a687ab8fd1a47844704753ee5154bd1f6"><div class="ttname"><a href="classnn_1_1ec_1_1_shop_service_accessor.html#a687ab8fd1a47844704753ee5154bd1f6">nn::ec::ShopServiceAccessor::Initialize</a></div><div class="ttdeci">Result Initialize(const ShopService &amp;target) NN_NOEXCEPT</div><div class="ttdoc">Initializes an accessor instance as an accessor to the specified shop service server.</div></div>
<div class="ttc" id="aec___consumable_service_item_api_8h_html"><div class="ttname"><a href="ec___consumable_service_item_api_8h.html">ec_ConsumableServiceItemApi.h</a></div><div class="ttdoc">Definitions of APIs for using consumable service items from the client.</div></div>
<div class="ttc" id="aec___consumable_service_item_types_8h_html"><div class="ttname"><a href="ec___consumable_service_item_types_8h.html">ec_ConsumableServiceItemTypes.h</a></div><div class="ttdoc">Defines the types of consumable service items in the client.</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="anamespacenn_1_1account_html_a06fd27c776fbc31c918ea0a84ddb1f41"><div class="ttname"><a href="namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41">nn::account::OpenUser</a></div><div class="ttdeci">Result OpenUser(UserHandle *pOutHandle, const Uid &amp;user) NN_NOEXCEPT</div><div class="ttdoc">Changes a user to an open state and gets the appropriate handle.</div></div>
<div class="ttc" id="anamespacenn_1_1account_html_a3f6aca5d7fd762684b1ee408a35d99f6"><div class="ttname"><a href="namespacenn_1_1account.html#a3f6aca5d7fd762684b1ee408a35d99f6">nn::account::EnsureNetworkServiceAccountAvailable</a></div><div class="ttdeci">Result EnsureNetworkServiceAccountAvailable(const UserHandle &amp;handle) NN_NOEXCEPT</div><div class="ttdoc">Checks network service account availability.</div></div>
<div class="ttc" id="anamespacenn_1_1account_html_a749534bdfdee56eebe9203a526390b32"><div class="ttname"><a href="namespacenn_1_1account.html#a749534bdfdee56eebe9203a526390b32">nn::account::ShowUserSelector</a></div><div class="ttdeci">Result ShowUserSelector(Uid *pOut, const UserSelectionSettings &amp;arg) NN_NOEXCEPT</div><div class="ttdoc">Calls the UI for selecting users.</div></div>
<div class="ttc" id="anamespacenn_1_1account_html_aaf1a6e0b8cbcef6f62eae042bca5b7cb"><div class="ttname"><a href="namespacenn_1_1account.html#aaf1a6e0b8cbcef6f62eae042bca5b7cb">nn::account::CloseUser</a></div><div class="ttdeci">void CloseUser(const UserHandle &amp;handle) NN_NOEXCEPT</div><div class="ttdoc">Changes the state of the user indicated by the specified handle to Closed.</div></div>
<div class="ttc" id="anamespacenn_1_1account_html_ac5870470963c9923c63f76e03c8c024e"><div class="ttname"><a href="namespacenn_1_1account.html#ac5870470963c9923c63f76e03c8c024e">nn::account::Initialize</a></div><div class="ttdeci">void Initialize() NN_NOEXCEPT</div><div class="ttdoc">Begins using the account system.</div></div>
<div class="ttc" id="anamespacenn_1_1ec_html_a91d90c10315f282b743dee0ec75c0506"><div class="ttname"><a href="namespacenn_1_1ec.html#a91d90c10315f282b743dee0ec75c0506">nn::ec::RequiredUserSaveDataSizeForConsumableServiceItem</a></div><div class="ttdeci">static const size_t RequiredUserSaveDataSizeForConsumableServiceItem</div><div class="ttdoc">Save data size required to save the serialized rights information.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemTypes.h:32</div></div>
<div class="ttc" id="anamespacenn_1_1ec_html_a9b351c75efb6d117f999455249e031de"><div class="ttname"><a href="namespacenn_1_1ec.html#a9b351c75efb6d117f999455249e031de">nn::ec::RequiredWorkMemorySizeForConsumableServiceItem</a></div><div class="ttdeci">static const size_t RequiredWorkMemorySizeForConsumableServiceItem</div><div class="ttdoc">Minimum memory size for the work buffer required for internal processing for the library.</div><div class="ttdef"><b>Definition:</b> ec_ConsumableServiceItemTypes.h:27</div></div>
<div class="ttc" id="anamespacenn_1_1ec_html_a9e1f5f238952f0596feb3afb7063ebba"><div class="ttname"><a href="namespacenn_1_1ec.html#a9e1f5f238952f0596feb3afb7063ebba">nn::ec::RequiredMinimumWorkMemorySizeForShopServiceAccessor</a></div><div class="ttdeci">const size_t RequiredMinimumWorkMemorySizeForShopServiceAccessor</div><div class="ttdoc">The minimum work buffer size required for using the shop service access utility feature.</div><div class="ttdef"><b>Definition:</b> ec_ShopServiceAccessor.h:80</div></div>
<div class="ttc" id="anamespacenn_1_1ec_html_ad61a6802748556c33adbdf7ad49a5438"><div class="ttname"><a href="namespacenn_1_1ec.html#ad61a6802748556c33adbdf7ad49a5438">nn::ec::InitializeForShopServiceAccessors</a></div><div class="ttdeci">Result InitializeForShopServiceAccessors(void *pWorkMemoryTop, size_t byteSizeOfTotal) NN_NOEXCEPT</div><div class="ttdoc">Requests initialization of the shop service access utility feature.</div></div>
<div class="ttc" id="anamespacenn_1_1ec_html_af60c0d6dbd360cef0ee822cea3305ce2"><div class="ttname"><a href="namespacenn_1_1ec.html#af60c0d6dbd360cef0ee822cea3305ce2">nn::ec::FinalizeForShopServiceAccessors</a></div><div class="ttdeci">Result FinalizeForShopServiceAccessors() NN_NOEXCEPT</div><div class="ttdoc">Requests finalization of the shop service access utility feature.</div></div>
<div class="ttc" id="anamespacenn_1_1err_html_a245efc14eca3ff209ce8858b059ec739"><div class="ttname"><a href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a></div><div class="ttdeci">void ShowError(nn::Result result) NN_NOEXCEPT</div><div class="ttdoc">Display an error that occurs.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a0f2b5b30657b1ffaf1dec49bfb36462b"><div class="ttname"><a href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></div><div class="ttdeci">Result OpenFile(FileHandle *outValue, const char *path, int mode) NN_NOEXCEPT</div><div class="ttdoc">Opens a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a3e89c4d57cc8379265894ff7f3e98b2c"><div class="ttname"><a href="namespacenn_1_1fs.html#a3e89c4d57cc8379265894ff7f3e98b2c">nn::fs::CreateFile</a></div><div class="ttdeci">Result CreateFile(const char *path, int64_t size) NN_NOEXCEPT</div><div class="ttdoc">Creates a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a4c97b79cce78a95c2333dbc9053b9393a0ee257dbba840301b0e656f6d1345c03"><div class="ttname"><a href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393a0ee257dbba840301b0e656f6d1345c03">nn::fs::OpenMode_Write</a></div><div class="ttdeci">@ OpenMode_Write</div><div class="ttdoc">Specifies write mode.</div><div class="ttdef"><b>Definition:</b> fs_FileSystem.h:40</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5cf6e2f2c5a0c4e404ba3dd782cc98bc"><div class="ttname"><a href="namespacenn_1_1fs.html#a5cf6e2f2c5a0c4e404ba3dd782cc98bc">nn::fs::GetEntryType</a></div><div class="ttdeci">Result GetEntryType(DirectoryEntryType *outValue, const char *path) NN_NOEXCEPT</div><div class="ttdoc">Gets the type of the entry.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5fc46cd05067c210b62e96f903a2fe85"><div class="ttname"><a href="namespacenn_1_1fs.html#a5fc46cd05067c210b62e96f903a2fe85">nn::fs::DirectoryEntryType</a></div><div class="ttdeci">DirectoryEntryType</div><div class="ttdoc">Enumerated type representing directory entry types.</div><div class="ttdef"><b>Definition:</b> fs_FileSystem.h:68</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a812ac4964fb5564467c5475c1b9fb16b"><div class="ttname"><a href="namespacenn_1_1fs.html#a812ac4964fb5564467c5475c1b9fb16b">nn::fs::DeleteFile</a></div><div class="ttdeci">Result DeleteFile(const char *path) NN_NOEXCEPT</div><div class="ttdoc">Deletes a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a81801a404563984f8c6cc1483cc6d730"><div class="ttname"><a href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></div><div class="ttdeci">Result ReadFile(FileHandle handle, int64_t offset, void *buffer, size_t size, const ReadOption &amp;option) NN_NOEXCEPT</div><div class="ttdoc">Loads the content of the file into the specified memory.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ab4351ff3a319e9a63093324a669492ab"><div class="ttname"><a href="namespacenn_1_1fs.html#ab4351ff3a319e9a63093324a669492ab">nn::fs::WriteFile</a></div><div class="ttdeci">Result WriteFile(FileHandle handle, int64_t offset, const void *buffer, size_t size, const WriteOption &amp;option) NN_NOEXCEPT</div><div class="ttdoc">Writes the contents of the specified memory to a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ab534529ae3c325863fe1eb34bd03c872"><div class="ttname"><a href="namespacenn_1_1fs.html#ab534529ae3c325863fe1eb34bd03c872">nn::fs::Commit</a></div><div class="ttdeci">Result Commit(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Commits updated content for file systems, in which the journaling feature is enabled.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_aba29e01d386e809349d60eccdb15ff21"><div class="ttname"><a href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a></div><div class="ttdeci">Result GetFileSize(int64_t *outValue, FileHandle handle) NN_NOEXCEPT</div><div class="ttdoc">Gets the size of a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8a95249afd4a87a55d319dfecb0466c"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></div><div class="ttdeci">void Unmount(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Unmounts a mounted file system and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8bd9e828751bd4f953acfa765278f84"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a></div><div class="ttdeci">void CloseFile(FileHandle handle) NN_NOEXCEPT</div><div class="ttdoc">Closes a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ae5f48fe542ce22263e1399e3b50190e8"><div class="ttname"><a href="namespacenn_1_1fs.html#ae5f48fe542ce22263e1399e3b50190e8">nn::fs::EnsureSaveData</a></div><div class="ttdeci">Result EnsureSaveData(const nn::account::Uid &amp;user) NN_NOEXCEPT</div><div class="ttdoc">Creates save data.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_afb4fdd50e0892400c07232f714caa14da2956e16dac576b2b7eff3142e18ac2c0"><div class="ttname"><a href="namespacenn_1_1fs.html#afb4fdd50e0892400c07232f714caa14da2956e16dac576b2b7eff3142e18ac2c0">nn::fs::WriteOptionFlag_Flush</a></div><div class="ttdeci">@ WriteOptionFlag_Flush</div><div class="ttdoc">Specify this flag to flush immediately after writing.</div><div class="ttdef"><b>Definition:</b> fs_File.h:57</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_afdbda9f24e47b02bb74da4558bbd0760"><div class="ttname"><a href="namespacenn_1_1fs.html#afdbda9f24e47b02bb74da4558bbd0760">nn::fs::MountSaveData</a></div><div class="ttdeci">Result MountSaveData(const char *name, const nn::account::Uid &amp;user) NN_NOEXCEPT</div><div class="ttdoc">Mounts save data after specifying a user.</div></div>
<div class="ttc" id="anamespacenn_1_1nifm_html_a0e3aaf3209696149ec22613e1d3d6705"><div class="ttname"><a href="namespacenn_1_1nifm.html#a0e3aaf3209696149ec22613e1d3d6705">nn::nifm::Initialize</a></div><div class="ttdeci">nn::Result Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the network connection management library and makes its functionality available.</div></div>
<div class="ttc" id="anamespacenn_1_1nifm_html_a4b82cc2b7ac1d168d0d22b777465f418"><div class="ttname"><a href="namespacenn_1_1nifm.html#a4b82cc2b7ac1d168d0d22b777465f418">nn::nifm::HandleNetworkRequestErrorResult</a></div><div class="ttdeci">bool HandleNetworkRequestErrorResult() NN_NOEXCEPT</div><div class="ttdoc">Handles submitted use requests that result in failure.</div></div>
<div class="ttc" id="anamespacenn_1_1nifm_html_a933a28d229a56e800703d95d4830fc6a"><div class="ttname"><a href="namespacenn_1_1nifm.html#a933a28d229a56e800703d95d4830fc6a">nn::nifm::IsNetworkAvailable</a></div><div class="ttdeci">bool IsNetworkAvailable() NN_NOEXCEPT</div><div class="ttdoc">Determines whether a network connection is available.</div></div>
<div class="ttc" id="anamespacenn_1_1nifm_html_ac42c271bffbeb6324e5a41ae779d6575"><div class="ttname"><a href="namespacenn_1_1nifm.html#ac42c271bffbeb6324e5a41ae779d6575">nn::nifm::SubmitNetworkRequestAndWait</a></div><div class="ttdeci">void SubmitNetworkRequestAndWait() NN_NOEXCEPT</div><div class="ttdoc">Makes a request to the system for a network connection, and blocks until the request is accepted or d...</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_ac880b46610757e748d5bd79211af4236"><div class="ttname"><a href="namespacenn_1_1os.html#ac880b46610757e748d5bd79211af4236">nn::os::MemoryPageSize</a></div><div class="ttdeci">const size_t MemoryPageSize</div><div class="ttdoc">This constant stores the minimum unit for memory operations.</div><div class="ttdef"><b>Definition:</b> os_MemoryHeapCommon.h:45</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_a205eaac89c47d49cb982bf136e113de2"><div class="ttname"><a href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a></div><div class="ttdeci">#define NN_ABORT(...)</div><div class="ttdoc">Stops execution.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:29</div></div>
<div class="ttc" id="ann___abort_8h_html_a5c1a90d3a6474658ae0ac5dc5bcb14e4"><div class="ttname"><a href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS(condition,...)</div><div class="ttdoc">Tests whether a condition has been satisfied and stops execution if it has not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:38</div></div>
<div class="ttc" id="ann___macro_8h_html_a0e31cc4dc24d85253a31e48b1a85ab33"><div class="ttname"><a href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div><div class="ttdeci">#define NN_NOEXCEPT</div><div class="ttdoc">Declares that the function does not throw exceptions.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:196</div></div>
<div class="ttc" id="ann___macro_8h_html_a6ce9d4b07ab8bec971ac8875873615b5"><div class="ttname"><a href="nn___macro_8h.html#a6ce9d4b07ab8bec971ac8875873615b5">NN_ALIGNAS</a></div><div class="ttdeci">#define NN_ALIGNAS(alignment)</div><div class="ttdoc">Sets the byte alignment.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:162</div></div>
<div class="ttc" id="ann___macro_8h_html_a71c0f58f6d49fe1392380eed4509ab9a"><div class="ttname"><a href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a></div><div class="ttdeci">#define NN_STATIC_CONDITION(condition)</div><div class="ttdoc">Suppresses compiler warnings on intentional, explicitly specified conditional constants.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:626</div></div>
<div class="ttc" id="astructnn_1_1account_1_1_uid_html"><div class="ttname"><a href="structnn_1_1account_1_1_uid.html">nn::account::Uid</a></div><div class="ttdoc">User identifiers added to the account system.</div><div class="ttdef"><b>Definition:</b> account_Types.h:37</div></div>
<div class="ttc" id="astructnn_1_1account_1_1_user_handle_html"><div class="ttname"><a href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a></div><div class="ttdoc">The handle for dealing with a user in the Open state.</div><div class="ttdef"><b>Definition:</b> account_Types.h:93</div></div>
<div class="ttc" id="astructnn_1_1err_1_1_error_code_html"><div class="ttname"><a href="structnn_1_1err_1_1_error_code.html">nn::err::ErrorCode</a></div><div class="ttdoc">Structure representing error codes.</div><div class="ttdef"><b>Definition:</b> err_Types.h:50</div></div>
<div class="ttc" id="astructnn_1_1fs_1_1_file_handle_html"><div class="ttname"><a href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a></div><div class="ttdoc">Handle for working with a file.</div><div class="ttdef"><b>Definition:</b> fs_File.h:90</div></div>
<div class="ttc" id="astructnn_1_1fs_1_1_write_option_html_ae7e600e7ade2fdde6fab0559dfb4bd1e"><div class="ttname"><a href="structnn_1_1fs_1_1_write_option.html#ae7e600e7ade2fdde6fab0559dfb4bd1e">nn::fs::WriteOption::MakeValue</a></div><div class="ttdeci">static WriteOption MakeValue(int flags)</div><div class="ttdoc">Utility function for creating a WriteOption with flags specified for options.</div><div class="ttdef"><b>Definition:</b> fs_File.h:74</div></div>
<div class="ttc" id="autil___scope_exit_8h_html"><div class="ttname"><a href="util___scope_exit_8h.html">util_ScopeExit.h</a></div><div class="ttdoc">Defines the macro that writes the code to run when an object goes out of scope.</div></div>
<div class="ttc" id="autil___scope_exit_8h_html_a674e2d673758265abe6e8e17426489ea"><div class="ttname"><a href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div><div class="ttdeci">#define NN_UTIL_SCOPE_EXIT</div><div class="ttdoc">Macro that writes the process when an object goes out of scope.</div><div class="ttdef"><b>Definition:</b> util_ScopeExit.h:101</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
