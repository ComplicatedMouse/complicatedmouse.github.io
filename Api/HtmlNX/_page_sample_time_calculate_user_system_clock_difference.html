<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Calculate User-Initiated System Clock Changes Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_time.html">Time Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Calculate User-Initiated System Clock Changes Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionBrief">Overview</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#TimeCalculateUserSystemClockDifference_SectionDetail">Description</a><ul><li class="level2"><a href="#TimeCalculateUserSystemClockDifference_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#TimeCalculateUserSystemClockDifference_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Describes the sample program showing how to calculate the amount by which the user intentionally changed the user clock (<code><a class="el" href="classnn_1_1time_1_1_standard_user_system_clock.html">nn::time::StandardUserSystemClock</a></code>).</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionBrief"></a>
Overview</h1>
<p>This sample program shows how to use two <code><a class="el" href="classnn_1_1time_1_1_clock_snapshot.html" title="Class for storing various types of time information.">nn::time::ClockSnapshot</a></code> objects and the <code><a class="el" href="namespacenn_1_1time.html#a7ebe8af7470bcbe489878e09cde9f3cd">nn::time::CalculateStandardUserSystemClockDifferenceByUser</a></code> function to calculate the amount by which the user intentionally changed the user clock (<code><a class="el" href="classnn_1_1time_1_1_standard_user_system_clock.html">nn::time::StandardUserSystemClock</a></code>).</p>
<p>Also see the references for the <code><a class="el" href="classnn_1_1time_1_1_clock_snapshot.html">ClockSnapshot</a></code> class and the <code><a class="el" href="namespacenn_1_1time.html#a7ebe8af7470bcbe489878e09cde9f3cd">CalculateStandardUserSystemClockDifferenceByUser</a></code> function.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_b729025ac994447f77c4b22c89c58077.html">Samples/Sources/Applications/TimeCalculateUserSystemClockDifference/ </a> </code>.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_time_calculate_user_system_clock_difference_8cpp.html" title="Sample program showing how to calculate the amount by which the user intentionally changed the user c...">TimeCalculateUserSystemClockDifference.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">nn/time.h</a>&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="os___thread_api_8h.html">nn/os/os_ThreadApi.h</a>&gt;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Initialize the time library.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a class="code" href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a>() );</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Initialize\n&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;---- Sample of calculating nn::time::StandardUserSystemClock difference by user.\n&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Create the original context for the comparison.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Use ClockSnapshot::CreateWithAdjustableSystemClock to initialize the object if using AdjustableUserSystemClock and AdjustableNetworkSystemClock.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a> oldContext;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a>(&amp;oldContext);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Saving the initial ClockSnapshot object that you created in a location such as save data makes it possible to reload that object later to calculate</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// the amount of time by which the clock has been changed even spanning across events such as applications being closed or the system being shut down.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// ClockSnapshot objects satisfy the standard C++ requirements for being trivially copyable and can be copied with std::memcpy().</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Waiting three seconds.\n&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a>(3));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// During this sleep period, press the HOME Button to display DevMenu or the HOME Menu, and then change the time or the time zone setting.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// This step triggers the clock operation detection process and satisfies the conditions for the branch for detecting changes to the time zone.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// Create the current context.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a> latestContext;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a>(&amp;latestContext);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// CalculateStandardUserSystemClockDifferenceByUser() calculates the amount by which</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// the user intentionally changed the user clock (nn::time::StandardUserSystemClock)</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// between oldContext and latestContext.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> differenceByUser = <a class="code" href="namespacenn_1_1time.html#a7ebe8af7470bcbe489878e09cde9f3cd">nn::time::CalculateStandardUserSystemClockDifferenceByUser</a>(oldContext, latestContext);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span>(differenceByUser == <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a>(0))</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// If the user has not intentionally changed the clock during this period, the function returns nn::TimeSpan(0).</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;StandardUserSystemClock was not operated by the user.\n&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">// Even if CalculateStandardUserSystemClockDifferenceByUser() returns nn::TimeSpan(0), it only indicates the user has not intentionally changed the clock.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// It does not guarantee that the time value that can be obtained with</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// StandardUserSystemClock::GetCurrentTime() has not changed by a large amount.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// The user has intentionally changed the clock.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;StandardUserSystemClock was operated by the user: %lld [sec]\n&quot;</span>, differenceByUser.<a class="code" href="classnn_1_1_time_span.html#ab6c1f55e20a747b295363a0cecb9bd20">GetSeconds</a>());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// CalculateStandardUserSystemClockDifferenceByUser() does not check whether the time zone has been changed.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// Use ClockSnapshot::GetLocationName() to make this comparison if necessary.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span>(oldContext.<a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ac308286533f87d84d4b3c481fb8939a0">GetLocationName</a>() == latestContext.<a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ac308286533f87d84d4b3c481fb8939a0">GetLocationName</a>())</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">// The time zone has not been changed in system settings.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;LocationName was not changed.\n&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// The time zone has been changed in system settings.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;LocationName was changed.\n&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// If you need to calculate the magnitude of the time difference to apply to the local time, do the following.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">// Note, however, that the magnitude of this time difference may change even if the time zone has not been changed in system settings, such as when daylight saving time begins or ends.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keyword">auto</span> oldUtcOffsetSeconds = oldContext.<a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#a22baa9964e626ac081fbc44f74a5a7e2">GetStandardUserSystemClockCalendarAdditionalInfo</a>().<a class="code" href="structnn_1_1time_1_1_calendar_additional_info.html#a9a3a079c4198750cd2ec4949549108ba">timeZone</a>.<a class="code" href="structnn_1_1time_1_1_time_zone.html#a42cfcbfbf422ab63ce33099b5ff2fc43">utcOffsetSeconds</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keyword">auto</span> latestUtcOffsetSeconds = latestContext.<a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#a22baa9964e626ac081fbc44f74a5a7e2">GetStandardUserSystemClockCalendarAdditionalInfo</a>().<a class="code" href="structnn_1_1time_1_1_calendar_additional_info.html#a9a3a079c4198750cd2ec4949549108ba">timeZone</a>.<a class="code" href="structnn_1_1time_1_1_time_zone.html#a42cfcbfbf422ab63ce33099b5ff2fc43">utcOffsetSeconds</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keyword">auto</span> diffOfUtcOffsetSeconds = latestUtcOffsetSeconds - oldUtcOffsetSeconds;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;UTC offset seconds at local time: %d seconds -&gt; %d seconds; difference: %d seconds\n&quot;</span>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            oldUtcOffsetSeconds, latestUtcOffsetSeconds, diffOfUtcOffsetSeconds);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// Finalize the time library.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a class="code" href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a>() );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Finalize\n&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="ttc" id="aclassnn_1_1_time_span_html"><div class="ttname"><a href="classnn_1_1_time_span.html">nn::TimeSpan</a></div><div class="ttdoc">This class represents a length of time.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:456</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_a8e74f5ceb64fc02aa614eed3cc148e82"><div class="ttname"><a href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a></div><div class="ttdeci">static constexpr TimeSpan FromSeconds(int64_t seconds) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in seconds.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:563</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_ab6c1f55e20a747b295363a0cecb9bd20"><div class="ttname"><a href="classnn_1_1_time_span.html#ab6c1f55e20a747b295363a0cecb9bd20">nn::TimeSpan::GetSeconds</a></div><div class="ttdeci">constexpr int64_t GetSeconds() const NN_NOEXCEPT</div><div class="ttdoc">Gets the time in seconds.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:655</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a></div><div class="ttdoc">Class for storing various types of time information.</div><div class="ttdef"><b>Definition:</b> time_ClockSnapshot.h:46</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_a22baa9964e626ac081fbc44f74a5a7e2"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#a22baa9964e626ac081fbc44f74a5a7e2">nn::time::ClockSnapshot::GetStandardUserSystemClockCalendarAdditionalInfo</a></div><div class="ttdeci">nn::time::CalendarAdditionalInfo GetStandardUserSystemClockCalendarAdditionalInfo() const NN_NOEXCEPT</div><div class="ttdoc">Gets the user clock additional calendar information stored by the object.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_ab46c9996752e49c22634b140a99deee6"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a></div><div class="ttdeci">static void CreateWithStandardSystemClock(ClockSnapshot *pOut) NN_NOEXCEPT</div><div class="ttdoc">Creates the object with the latest system time.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_ac308286533f87d84d4b3c481fb8939a0"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#ac308286533f87d84d4b3c481fb8939a0">nn::time::ClockSnapshot::GetLocationName</a></div><div class="ttdeci">nn::time::LocationName GetLocationName() const NN_NOEXCEPT</div><div class="ttdoc">Gets the name of the region stored by the object.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">Puts the current thread to sleep for the specified amount of time.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_a316a48243971bfac1dfcc1ea07466563"><div class="ttname"><a href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a></div><div class="ttdeci">Result Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the use of the time library.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_a7ebe8af7470bcbe489878e09cde9f3cd"><div class="ttname"><a href="namespacenn_1_1time.html#a7ebe8af7470bcbe489878e09cde9f3cd">nn::time::CalculateStandardUserSystemClockDifferenceByUser</a></div><div class="ttdeci">nn::TimeSpan CalculateStandardUserSystemClockDifferenceByUser(const ClockSnapshot &amp;from, const ClockSnapshot &amp;to) NN_NOEXCEPT</div><div class="ttdoc">Gets the amount by which the user intentionally changed the user clock.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_af3d5226ce5093e581b3892fbb2fbc34c"><div class="ttname"><a href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a></div><div class="ttdeci">Result Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the time library, making its features available to use.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="aos___thread_api_8h_html"><div class="ttname"><a href="os___thread_api_8h.html">os_ThreadApi.h</a></div><div class="ttdoc">Declarations for API resources for threads.</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_additional_info_html_a9a3a079c4198750cd2ec4949549108ba"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_additional_info.html#a9a3a079c4198750cd2ec4949549108ba">nn::time::CalendarAdditionalInfo::timeZone</a></div><div class="ttdeci">TimeZone timeZone</div><div class="ttdoc">Information about standard time as applied to the local time.</div><div class="ttdef"><b>Definition:</b> time_CalendarAdditionalInfo.h:38</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_time_zone_html_a42cfcbfbf422ab63ce33099b5ff2fc43"><div class="ttname"><a href="structnn_1_1time_1_1_time_zone.html#a42cfcbfbf422ab63ce33099b5ff2fc43">nn::time::TimeZone::utcOffsetSeconds</a></div><div class="ttdeci">int32_t utcOffsetSeconds</div><div class="ttdoc">Difference between local time and Coordinated Universal Time (UTC).</div><div class="ttdef"><b>Definition:</b> time_TimeZone.h:40</div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div><div class="ttdoc">Declarations of API resources for the time library.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="TimeCalculateUserSystemClockDifference_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program has the following flow.</p>
<ul>
<li>Initialize the <code>time</code> library.</li>
<li>Create a <code>ClockSnapshot</code> object as the start point for detecting user clock operations.</li>
<li>Sleep for three seconds.</li>
<li>Create a <code>ClockSnapshot</code> object as the end point for detecting user clock operations.</li>
<li>Execute the sample program for calculating the amount by which the user intentionally changed the user clock time.</li>
<li>Finalize the <code>time</code> library.</li>
</ul>
<p>While the sample is running, when the "Waiting 3 seconds." message is displayed, press the HOME Button to display DevMenu or the HOME Menu, and then change the time or the time zone setting. This step triggers the clock operation detection process and satisfies the conditions for the branch for detecting changes to the time zone.</p>
<p>Saving the initial instance of the <code><a class="el" href="classnn_1_1time_1_1_clock_snapshot.html" title="Class for storing various types of time information.">nn::time::ClockSnapshot</a></code> object to a location such as save data makes it possible to calculate the amount by which the clock has been changed spanning across events such as applications being closed or the system being shut down.</p>
<p>For functions that return <code><a class="el" href="classnn_1_1_result.html" title="Represents the generic result of an operation.">nn::Result</a></code>, <code><a class="el" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></code> is used to handle cases where success always occurs because the pre-conditions are met.</p>
<p>The following file shows the execution results of this sample.</p>
<pre class="fragment">nn::time::Initialize
---- Sample of calculating nn::time::StandardUserSystemClock difference by user.
Waiting 3 seconds.
StandardUserSystemClock was not operated by user.
LocationName was not changed.
nn::time::Finalize
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
