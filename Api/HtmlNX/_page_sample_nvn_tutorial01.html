<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NVN Tutorial 01: Getting Started With NVN | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_nvn.html">NVN</a></li><li class="navelem"><a class="el" href="_page_sample_nvn_tutorial.html">NVN Tutorial</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NVN Tutorial 01: Getting Started With NVN </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleNvnTutorial01_SectionBrief">Overview</a><ul><li class="level2"><a href="#PageSampleNvnTutorial01_SectionIntroduction">Getting Started With NVN</a></li>
<li class="level2"><a href="#PageSampleNvnTutorial01_SectionLinking">Header Files And Link Libraries</a></li>
<li class="level2"><a href="#PageSampleNvnTutorial01_SectionExpectedOutput">Expected Output</a></li>
</ul>
</li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionNecessaryEnvironment">System Requirements</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionHowToOperate">Operation Procedure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionPrecaution">Precautions</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleNvnTutorial01_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleNvnTutorial01_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleNvnTutorial01_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This tutorial demonstrates how to setup an application to use the NVN graphics API and performs some basic operations with it.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionBrief"></a>
Overview</h1>
<h2><a class="anchor" id="PageSampleNvnTutorial01_SectionIntroduction"></a>
Getting Started With NVN</h2>
<p>Welcome to NVN! It's a new graphics library, and it's pretty great. This tutorial shows the most basic initialization and cleanup steps, how to allocate frame buffers, clear, and display.</p>
<p>One of the interesting features of the NVN API is it's ability to run both on the target device, but also on Windows PCs. In order to run on Windows, the API must be initialized via a "donor" OpenGL context.</p>
<p>In this series, the applications will use a small abstraction base class to hide the details necessary to write applications that run on both systems. (Such as OpenGL handling for Windows.) For more information on this class, see the TutorialBaseClass.</p>
<h2><a class="anchor" id="PageSampleNvnTutorial01_SectionLinking"></a>
Header Files And Link Libraries</h2>
<p>NVN is a fully dynamically linked library. This means that all NVN functions are called through function pointers. Including <a class="el" href="nvn_8h.html" title="C headers for the NVN 3D API.">nvn.h</a> in a source file brings enums, constants, macros, and definitions of all of the various function pointer types that define the parameters and return types of each NVN function.</p>
<p>An application may implement it's own function loading system, or it may use the nvn_FuncPtrInline system that is included with the NVN headers. This system defines a series of inline functions that wrap calls to function pointers loaded with the nvnLoadProcs function. In order to use this system, include <a class="el" href="nvn___func_ptr_inline_8h.html" title="Implementation of the NVN C interface entry points as inline functions that call through global funct...">nvn_FuncPtrInline.h</a> and nvn_FuncPtrImpl instead of <a class="el" href="nvn_8h.html" title="C headers for the NVN 3D API.">nvn.h</a> in source files.</p>
<p>NVN also includes a further set of wrappers that implement a C++-style interface.</p>
<p>As NVN is dynamically linked, there is no special link library requirement on Windows (though OpenGL32.dll must be linked.)</p>
<h2><a class="anchor" id="PageSampleNvnTutorial01_SectionExpectedOutput"></a>
Expected Output</h2>
<div class="image">
<img src="NvnTutorial01.png" alt=""/>
</div>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionFileStructure"></a>
File Structure</h1>
<p>The main tutorial file and Visual Studio solutions can be found at <a class="el" href="dir_a3e64bfd98fa9bc36ced2ff69bda6fb0.html">Samples/Sources/Applications/NvnTutorial01GettingStartedWithNVN </a></p>
<p>The tutorial library which contains common code shared by the tutorials can be found at Samples/Sources/Libraries/NvnTutorial</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionNecessaryEnvironment"></a>
System Requirements</h1>
<p>No extra system requirements.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionHowToOperate"></a>
Operation Procedure</h1>
<p>This sample runs on its own without any additional input. Hitting escape on Windows or touching the touch screen on NX will exit the program.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionPrecaution"></a>
Precautions</h1>
<p>None.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the Visual Solution in the desired configuration and run it.</p>
<h1><a class="anchor" id="PageSampleNvnTutorial01_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleNvnTutorial01_SectionSampleProgram"></a>
Sample Program</h2>
<p>Below is the source code for the main tutorial file for this sample.</p>
<p><a class="el" href="_nvn_tutorial01_8cpp.html" title="This tutorial demonstrates how to setup an application to use the NVN graphics API and performs some ...">NvnTutorial01.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_inline_8h.html">nvn/nvn_FuncPtrInline.h</a>&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_impl_8h.html">nvn/nvn_FuncPtrImpl.h</a>&gt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_tutorial_base_class_8h.html">nvntutorial/TutorialBaseClass.h</a>&gt;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_memory_pool_8h.html">nvntutorial/MemoryPool.h</a>&gt;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_tutorial_util_8h.html">nvntutorial/TutorialUtil.h</a>&gt;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_CommandMemorySize = 512;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_ControlMemorySize = 512;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>    g_NumColorBuffers = 2;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">class </span>GettingStartedWithNVN : <span class="keyword">public</span> TutorialBaseClass</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        GettingStartedWithNVN() ;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">virtual</span> ~GettingStartedWithNVN() ;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Init(PFNNVNBOOTSTRAPLOADERPROC loader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">Shutdown</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Draw(uint64_t millisec) ;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height) ;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">void</span> NVNAPIENTRY DebugLayerCallback(</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordtype">void</span>* pUser</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            ) ;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordtype">int</span> UpdateRenderTargets() ;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="struct_n_v_ndevice.html">NVNdevice</a>         m_Device;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="struct_n_v_nqueue.html">NVNqueue</a>          m_Queue;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordtype">void</span>*             m_pQueueMemory;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*       m_pCommandMemoryPool;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        ptrdiff_t         m_CommandPoolOffset;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordtype">void</span>*             m_pControlPool;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>  m_CommandBuffer;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>  m_CommandHandle;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        ptrdiff_t         m_RenderTargetCommandPoolOffset;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordtype">void</span>*             m_pRenderTargetControlPool;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>  m_RenderTargetCommandBuffer;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>  m_RenderTargetCommandHandle;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a> m_RenderTargetBuilder;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>*       m_RenderTargets[g_NumColorBuffers];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>           m_CommandBufferSync;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*       m_pRenderTargetMemoryPool;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>*        m_pWindow;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a>  m_WindowBuilder;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordtype">int</span>               m_CurrentWindowIndex;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="struct_n_v_nsync.html">NVNsync</a>           m_WindowSync;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordtype">size_t</span>            m_ColorTargetSize;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;};</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * GettingStartedWithNVN Constructor</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * ----------------------------</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> * Sets up default values for the members of the class.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;GettingStartedWithNVN::GettingStartedWithNVN() :</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    m_pQueueMemory(NULL),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    m_pCommandMemoryPool(NULL),</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    m_pControlPool(NULL),</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    m_CommandHandle(NULL),</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    m_pRenderTargetControlPool(NULL),</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    m_RenderTargetCommandHandle(NULL),</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    m_pRenderTargetMemoryPool(NULL),</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    m_pWindow(NULL),</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    m_CurrentWindowIndex(-1)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        m_RenderTargets[i] = NULL;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> * GettingStartedWithNVN Destructor</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * --------------------------------</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * Empty destructor.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;GettingStartedWithNVN::~GettingStartedWithNVN()</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> * GettingStartedWithNVN::Init</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> * ---------------------------</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> * This method demonstrates basic NVN initialization. The bootstrap loader</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> * function pointer is obtained in the platform-specific base class.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keywordtype">void</span> GettingStartedWithNVN::Init(PFNNVNBOOTSTRAPLOADERPROC loader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(loader != NULL, <span class="stringliteral">&quot;Bootstrap loader function pointer is NULL\n&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">     * NVN Device</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">     * ----------</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     * The NVN device object is intended to be a per-process singleton; it is</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     * used to establish communication with the GPU, and a parent for all of</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">     * the other NVN object types.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">     * Device Memory</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">     * -------------</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">     * The loader function pointer allows access to the NVN device initialization</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">     * function. This function takes a structure pointer allowing the app to</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">     * set relevant parameters. One parameter is the &quot;device memory&quot;, a block</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">     * of memory the NVN driver should use for it&#39;s internal data structures.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">     * Debug Layer</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     * -----------</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * It is possible to enable the debug layer via device initialization</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     * parameters. The debug layer adds error checking to many NVN entry points,</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">     * but has no overhead at all when not enabled. The debug layer also will</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">     * generate error and warning messages when various programming errors are</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">     * detected, so be sure to provide a message handler callback. See below for</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">     * an example of how to do this.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     * Device Thread Safety</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     * --------------------</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">     * There is no need to provide synchronization for the NVNdevice object;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">     * it may be passed in to any NVN function that requires it from any thread.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">     * The exception to this rule is device initialization and finalization;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">     * threads may not begin to use the NVNdevice until nvnDeviceInitialize has</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">     * returned sucessfully, and must cease using the device before</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">     * nvnDeviceFinalize is called.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    pfnc_nvnDeviceInitialize = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__nvn__c__entryfuncptrs.html#gaac2535d2f4e2740efa3fd69d683110fc">PFNNVNDEVICEINITIALIZEPROC</a><span class="keyword">&gt;</span>((*loader)(<span class="stringliteral">&quot;nvnDeviceInitialize&quot;</span>));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    pfnc_nvnDeviceGetProcAddress = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a><span class="keyword">&gt;</span>((*loader)(<span class="stringliteral">&quot;nvnDeviceGetProcAddress&quot;</span>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (!pfnc_nvnDeviceInitialize)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="comment">/* This can happen if an NVN driver is not installed on a Windows PC. */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;BootstrapLoader failed to find nvnDeviceInitialize&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">         * Load function pointers for creating nvn device.  NULL</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">         * is passed here at first, the function is called again</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">         * after device initialization to ensure all the function</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">         * pointers work properly.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    nvnLoadCProcs( NULL, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">         * Version Check</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">         * -------------</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">         * Check for API version mismatches. This is a comparison between the version</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">         * support reported by the NVN library, and the version of the NVN headers this</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">         * source file is compiled with. Exit with an error if the major version</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">         * mismatches (major revisions are backward-incompatible) or if the driver</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">         * reports a lower minor version. It is possible to call nvnDeviceGetInteger</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">         * with a NULL device and get the correct result when querying</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">         * NVN_DEVICE_INFO_API_MAJOR_VERSION and NVN_DEVICE_INFO_API_MINOR_VERSION.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacenn_1_1ui2d.html#a3d128ec7087f91b3f54cbfcf73fb93b9">MajorVersion</a>, <a class="code" href="namespacenn_1_1ui2d.html#a8ebb4f5324b526c9e74f0b01037fb74c">MinorVersion</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    nvnDeviceGetInteger(NULL, NVN_DEVICE_INFO_API_MAJOR_VERSION, &amp;MajorVersion);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    nvnDeviceGetInteger(NULL, NVN_DEVICE_INFO_API_MINOR_VERSION, &amp;MinorVersion);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (MajorVersion != <a class="code" href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a> || MinorVersion &lt; <a class="code" href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;NVN SDK not supported by current driver.&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">/* If debug or develop is enabled, turn on NVN&#39;s debug layer. */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">int</span> deviceFlags = 0;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#if defined(NN_SDK_BUILD_DEBUG) || defined(NN_SDK_BUILD_DEVELOP)</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    deviceFlags = <a class="code" href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a> deviceBuilder;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    nvnDeviceBuilderSetDefaults(&amp;deviceBuilder);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    nvnDeviceBuilderSetFlags(&amp;deviceBuilder, deviceFlags);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (nvnDeviceInitialize(&amp;m_Device, &amp;deviceBuilder) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">             * This can fail for a few reasons; the most likely on Horizon is</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">             * insufficent device memory.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnDeviceInitialize&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">         * API Loading</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">         * -----------</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">         * Once the device has been initialized, it is now possible to load all of the</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">         * remaining NVN API entry points. The bootstrap loader is used again to</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">         * locate the &quot;real&quot; loader function. The real loader may be passed along</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">         * with the device into nvnLoadProcs if using nvn_FuncPtrInline.h. It is also</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">         * completely valid for applications to load with their own entry points.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    nvnLoadCProcs(&amp;m_Device, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">         * Debug Layer Callback</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">         * --------------------</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">         * Install the debug layer callback if the debug layer was enabled during</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">         * device initialization. It is possible to pass a pointer to the NVN API</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">         * to remember and pass back through the debug callback.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (deviceFlags &amp; NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        nvnDeviceInstallDebugCallback(</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            &amp;m_Device,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a><span class="keyword">&gt;</span>(&amp;DebugLayerCallback),</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            NULL, <span class="comment">// For testing purposes; any pointer is OK here.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a> <span class="comment">// NVN_TRUE = Enable the callback.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            );</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">         * NVN Queue</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">         * ---------</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">         * The NVNqueue object represent a GPU context and is used to submit command buffers</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">         * to the GPU. The queue must be associated with an NVNdevice through the Initialize</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">         * function before being used. Commands submitted to the queue through the command</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">         * buffers are processed in the order that they are submitted. Commands submitted</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">         * to one queue are processed independently from commands submitted to other queues.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">         * The order in which commands in multiple queues are executed relative to each other</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">         * is undefined unless a synchronization primitive is used. Each queue has it&#39;s own</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">         * NVN state, meaning that state changes in one queue will not affect rendering in</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">         * another.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">         * It is possible to more explicitly control the size of the backing memory of a queue.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">         * Using the Set&lt;Compute/Command&gt;MemorySize functions changes the size of the backing</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">         * memory that is automatically allocated for use in submitting command buffer commands</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">         * and dispatching work to compute shaders.  The memory a queue requires for work with</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">         * compute is significantly higher than what is needed for command, so if compute is not</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">         * being used at all then the size for compute memory should be set to zero like in this</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">         * demo.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">         * You can also instead provide the queue builder a manually allocated block of memory</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">         * through the function SetQueueMemory; the minimum size needed can be queried through</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">         * GetQueueMemorySize. The value returned by GetQueueMemorySize includes the (minimum)</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">         * memory necessary for command processing, the (minimum) memory necessary for compute</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">         * dispatches, and scratch memory for fragment shader interlocks and other internal GPU</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">         * operations based on the current state of the queue builder; this is why command and</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">         * compute memory sizes are set before the query, so that they will be figured into</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">         * the minimum necessary size for the queue&#39;s memory block.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">         * Providing a block can be useful to minimize the amount of times the internal buffer</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">         * needs to be flushed if a lot of commands are being submitted.  It is also possible</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">         * to set a threshold for the queue&#39;s memory that will flush the buffer when it is</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">         * filled past the threshold.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a> queueBuilder;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    nvnQueueBuilderSetDevice(&amp;queueBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    nvnQueueBuilderSetDefaults(&amp;queueBuilder);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    nvnQueueBuilderSetComputeMemorySize(&amp;queueBuilder, 0);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">         * Get minimum size allowed for queue&#39;s internal command memory.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">         * More can be provided to the queue if the application requires</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">         * as long as it fulfils the necessary granularity and alignment</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">         * requirements.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordtype">int</span> minQueueCommandMemorySize = 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_QUEUE_COMMAND_MEMORY_MIN_SIZE, &amp;minQueueCommandMemorySize);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    nvnQueueBuilderSetCommandMemorySize(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">         * Setting the flush threshold on the queue&#39;s command memory here helps</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">         * to prevent implicit flushes when a significant amount of the memory</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">         * is used (compute dispatches, shader subroutine uniform updates, etc.)</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">         * This is due to the default flush threshold being 1/8th of the available</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">         * command memory; setting it to the size of the buffer itself means a</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">         * flush will only occur automatically when it has no more room in its</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">         * internal command buffer.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    nvnQueueBuilderSetCommandFlushThreshold(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">size_t</span> neededQueueMemorySize = nvnQueueBuilderGetQueueMemorySize(&amp;queueBuilder);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> ((neededQueueMemorySize % <a class="code" href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a>) != 0)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Memory size reported for queue is not the proper granularity&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">         * On Windows, the buffer provided to the queue here is ignored</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">         * completely and the driver allocates the memory.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_WIN )</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    m_pQueueMemory = NULL;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    m_pQueueMemory = AlignedAllocate(neededQueueMemorySize, <a class="code" href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    nvnQueueBuilderSetQueueMemory(&amp;queueBuilder, m_pQueueMemory, neededQueueMemorySize);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span>(nvnQueueInitialize(&amp;m_Queue, &amp;queueBuilder) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnQueueInitialize failed&quot;</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">         * NVN Command Buffer</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">         * ------------------</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">         * The NVNcommandBuffer object is used to record a list of commands to be run</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">         * by the GPU. The command buffer is populated by calling nvnCommandBuffer***</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">         * methods between calls to the BeginRecording and EndRecording methods. The</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">         * EndRecording method returns a NVNcommandBufferHandle that can be submitted</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">         * to the queue to run the commands in the command buffer in the order they</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">         * were recorded.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">         * A command buffer requires two blocks of memory: command memory and control</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">         * memory. Command memory is used to record the GPU commands. The command</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">         * memory is an NVNmemoryPool object and should CPU coherent or CPU non-coherent.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">         * Control memory is used to store additional information/data needed for the</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">         * GPU commands to be processed. This memory is simply allocated by the CPU and</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">         * is not an NVNmemoryPool.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span>(!nvnCommandBufferInitialize(&amp;m_CommandBuffer, &amp;m_Device))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnCommandBufferInitialize&quot;</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">         * Queries the device for the proper control and command</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">         * memory alignment for a command buffer.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span> commandBufferCommandAlignment = 0;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">int</span> commandBufferControlAlignment = 0;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_COMMAND_ALIGNMENT, &amp;commandBufferCommandAlignment);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_CONTROL_ALIGNMENT, &amp;commandBufferControlAlignment);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">/* Setup the command buffer memory pool. */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    m_pCommandMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    m_pCommandMemoryPool-&gt;Init(</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        NULL,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        Align(g_CommandMemorySize, commandBufferCommandAlignment) * 2,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        &amp;m_Device);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">/* Setup the control memory with the proper alignment. */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    m_pControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">/* Grab the offset from the memory pool. */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    m_CommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">/* Provides the command buffer with the command and control memory blocks. */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">/* Render Target Setting Command Buffer */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span>(!nvnCommandBufferInitialize(&amp;m_RenderTargetCommandBuffer, &amp;m_Device))</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnCommandBufferInitialize&quot;</span>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="comment">/* Setup the control memory with the proper alignment. */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    m_pRenderTargetControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="comment">/* Grab the offset from the memory pool. */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    m_RenderTargetCommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">         * NVN Sync Object</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">         * ---------------</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">         * The NVNsync object is a synchronization primitive that can be used to</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">         * synchronize between queue or between a queue and the CPU. The condition</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">         * that causes the sync to fire is set by the nvnQueueFenceSync command.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">         * The condition can be:</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">         * ALL_GPU_COMMANDS_COMPLETE     - Signals when all preceding GPU commands have</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">         *                                 been executed.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">         * GRAPHICS_WORLD_SPACE_COMPLETE - Signals when the vertices from the previous</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">         *                                 commands have been processed, meaning that the</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">         *                                 vertex, tessellation, and geometry shader stages</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">         *                                 and the transform feedback stage have all been</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">         *                                 fully completed.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span>(!nvnSyncInitialize(&amp;m_CommandBufferSync, &amp;m_Device))</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnSyncInitialize&quot;</span>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_WindowSync, &amp;m_Device))</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize window sync&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">         * NVN Builder Objects</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">         * -------------------</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">         * Some objects in NVN require a builder object to initialize them (buffers, textures, etc).</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">         * These builder objects are used to setup the state of the object to be created. Once</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">         * an object has been created through a builder, it can&#39;t be edited. Before using a builder</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">         * object, the SetDefaults method should be called to avoid having unitialized/undefined</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">         * state.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">         * NVN Texture</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">         * -----------</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">         * The NVNtexture object represents a block of GPU memory used to hold image data. It also</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">         * holds data to describe the image and how the image is allowed to be accessed.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">         * NVN Texture Builder</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">         * -------------------</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">         * The NVNtextureBuilder object is used to initialize an NVNtexture with</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">         * a specific set of states. States that can be set:</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">         * SetFlags                 - Set flags indentifying special properties of the texture.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">         * SetTarget                - Type of the texture (1D, 2D, Array, etc).</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">         * SetWidth                 - Width of the texture.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">         * SetHeight                - Height of the texture.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">         * SetDepth                 - Depth of the texture.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">         * SetSize*D                - Set width, height, and/or depth together in one call.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">         * SetLevels                - Number of mip map levels.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">         * SetFormat                - Pixel format.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">         * SetSamples               - Number of samples. Must be 0 for non multisample, 2/4/8/16 for multisample.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">         * SetSwizzle               - Specifies what is output from a texture lookup.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">         * SetDepthStencilMode      - Identifies whether texture lookups will return depth or stencil values.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">         * SetStorage               - Set the location in a memory pool where the texture will be allocated from.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">         * SetPackagedTextureData   - (Windows only) Pointer to texture data that has been run through the texture packager.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">         *                            Converts the texture data from the packaged format back to something usable on Windows.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">         *                            This is ignored on the target device as the packaged texture data may be used directly.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">         * SetPackagedTextureLayout - Specify the layout of packaged texture data used for texture storage.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">         * SetStride                - Specifies the stride for linear textures.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    nvnTextureBuilderSetDevice(&amp;m_RenderTargetBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment">/* Render targets that need to be displayed to the screen need both the display access and compressible bit. */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    nvnTextureBuilderSetFlags (&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_DISPLAY_BIT | NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_RGBA8);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, 1920, 1080);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    m_ColorTargetSize = nvnTextureBuilderGetStorageSize(&amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">         * Setup the render target memory pool.  Render targets are required to be compressible</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">         * textures allocated from memory pools with the NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">         * bit set.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">         * Vsync is enforced on the device, so if an application takes too long in a frame to</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">         * maintain 60 FPS it will drop to 30 FPS.  The tutorials provide 2 render targets to</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">         * the NVNwindow to swap between but more intensive applications may require more.  An</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">         * NVNwindow can support up to 6 render targets.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">         * For more information on memory pools see MemoryPool.cpp/.h</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    m_pRenderTargetMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    m_pRenderTargetMemoryPool-&gt;Init(</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        NULL,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        m_ColorTargetSize * g_NumColorBuffers,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT | NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        &amp;m_Device);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">         * NVN Window</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">         * ----------</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">         * The NVNwindow is used to present a render target to the screen. It manages</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">         * an array of render targets and associates them with an NVNnativeWindow. On</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">         * Horizon NVNnativeWindow defined as ANativeWindow* and on Windows it&#39;s defined</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">         * as HWND. Each frame, the NVNwindow needs to be queried for the active render</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">         * target for that frame.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">         * Window Builder Settings</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">         * -----------------------</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">         * SetTextures        - Sets the list of render targets to be used by the window.</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">         *                      Textures used by the NVNwindow must be initialized with the</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">         *                      display access bit. A window can be given a max of 6 targets.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">         * SetNativeWindow    - Sets the handle to the window.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">         * SetPresentInterval - Sets interval for how often the window is presented to.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">         *                      Legal values:</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">         *                      - 0: Update without waiting for next refresh, tearing likely</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">         *                           to occur</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">         *                      - 1: Updates display on next refresh, frame rate limited to</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">         *                           display&#39;s refresh rate</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">         *                      - 2: Updates display on next refresh, no sooner than two since</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">         *                           previous update.  Halves display&#39;s refresh rate.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">         *                      This api is not supported on Windows</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    nvnWindowBuilderSetDefaults(&amp;m_WindowBuilder);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    nvnWindowBuilderSetDevice(&amp;m_WindowBuilder, &amp;m_Device);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    nvnWindowBuilderSetNativeWindow(&amp;m_WindowBuilder, nativeWindow);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> * GettingStartedWithNVN::Shutdown</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> * -------------------------------</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> * This method cleans up all nvn objects and dynamically allocated memory.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="keywordtype">void</span> GettingStartedWithNVN::Shutdown()</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    nvnQueueFinish(&amp;m_Queue);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    nvnSyncFinalize(&amp;m_CommandBufferSync);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    nvnSyncFinalize(&amp;m_WindowSync);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    nvnCommandBufferFinalize(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span>(m_pRenderTargetControlPool)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        AlignedDeallocate(m_pRenderTargetControlPool);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        m_pRenderTargetControlPool = NULL;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    nvnCommandBufferFinalize(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span>(m_pCommandMemoryPool)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        m_pCommandMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keyword">delete</span> m_pCommandMemoryPool;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        m_pCommandMemoryPool = NULL;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span>(m_pControlPool)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        AlignedDeallocate(m_pControlPool);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        m_pControlPool = NULL;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (m_pWindow)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        nvnWindowFinalize(m_pWindow);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keyword">delete</span> m_pWindow;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        m_pWindow = NULL;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> (m_RenderTargets[i])</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            nvnTextureFinalize(m_RenderTargets[i]);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keyword">delete</span> m_RenderTargets[i];</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            m_RenderTargets[i] = NULL;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span>(m_pRenderTargetMemoryPool)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        m_pRenderTargetMemoryPool-&gt;Shutdown();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keyword">delete</span> m_pRenderTargetMemoryPool;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        m_pRenderTargetMemoryPool = NULL;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    nvnQueueFinalize(&amp;m_Queue);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (m_pQueueMemory)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        AlignedDeallocate(m_pQueueMemory);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        m_pQueueMemory = NULL;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    nvnDeviceFinalize(&amp;m_Device);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"> * GettingStartedWithNVN::Resize</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"> * -----------------------------</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> * This method is called everytime the window is resized and is passed</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> * the new size of the window. It frees the old render target and creates a new</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"> * render target with the new screen size. A new set of commands for the command buffer</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"> * is recorded that performs four scissored clears of different colors on the target.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="keywordtype">void</span> GettingStartedWithNVN::Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;{</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">/* Check for the window being minimized or having no visible surface. */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> (width == 0 || height == 0)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">         * Before recording a new command buffer, make sure all previous GPU</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">         * commands have finished by setting up a fence and waiting for it to</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">         * be signalled. This so that the memory the command buffer uses isn&#39;t</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">         * overwritten before the GPU is done using it.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">         * A sync placed into the queue as above must first be flushed to the</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">         * GPU before nvnSyncWait can be called on it.  If not, then a dead</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">         * lock happens where the CPU is waiting for the GPU to signal a</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">         * sync it does not know about yet.  With the debug layer active</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">         * this causes the callback function to be called if the sync is not</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">         * flushed.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment">/* If it&#39;s the first time Resize is called, allocate the NVNwindow. */</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (m_pWindow == NULL)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        m_pWindow = <span class="keyword">new</span> <a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">         * Otherwise finalize (free) the NVNwindow used for the previous window size.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">         * The NVNWindow must be finalized before a render target it owns is finalized.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        nvnWindowFinalize(m_pWindow);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">         * Set the size of the texture to be created by the texture builder.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">         * Implicitly sets depth to one.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, width, height);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="comment">/* If it&#39;s the first time Resize is called, allocate the texture. */</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">if</span> (!m_RenderTargets[i])</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            m_RenderTargets[i] = <span class="keyword">new</span> <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">             * Otherwise, finalize (free) the texture from the previous frame.</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">             * A texture belonging to an NVNwindow must be finalized after the</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">             * window that owns it is finalized.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            nvnTextureFinalize(m_RenderTargets[i]);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="comment">/* Set the memory pool the texture is to be allocated from and offset to where it will be located. */</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        nvnTextureBuilderSetStorage(&amp;m_RenderTargetBuilder, m_pRenderTargetMemoryPool-&gt;GetMemoryPool(), m_ColorTargetSize * i);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="comment">/* Create the texture using the current state of the texture builder. */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        nvnTextureInitialize(m_RenderTargets[i], &amp;m_RenderTargetBuilder);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">         *  Sets the number of render targets that the NVNwindow will have available and</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">         *  gives a pointer to an array of those targets.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    nvnWindowBuilderSetTextures(&amp;m_WindowBuilder, g_NumColorBuffers, m_RenderTargets);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    nvnWindowInitialize(m_pWindow, &amp;m_WindowBuilder);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="comment">/* Clear Colors */</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordtype">float</span> black[4] = { 0.0f, 0.0f, 0.0f, 1.0f };</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">float</span>   red[4] = { 1.0f, 0.0f, 0.0f, 1.0f };</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordtype">float</span> green[4] = { 0.0f, 1.0f, 0.0f, 1.0f };</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">float</span>  blue[4] = { 0.0f, 0.0f, 1.0f, 1.0f };</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">/* Temporary variables for size/position of cleared rects. */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordtype">int</span> halfWidth  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceil(width / 2.0f));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordtype">int</span> halfHeight = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceil(height / 2.0f));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">         * Reset the command and control memory pointers back to the beginning</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">         * of their blocks of memory. This causes the next recording to overwrite</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">         * whatever memory was there.  This is only safe to do if a sync is</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">         * used to ensure that the command memory about to be overwritten</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">         * has already been used by the gpu.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="comment">/* Starts the recording of a new set of commands for the given command buffer. */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    nvnCommandBufferBeginRecording(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">             * Lower left quadrant - black</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">             * Sets the scissor rectangle by the coordinates of its lower left</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">             * and its width/height.</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        nvnCommandBufferSetScissor(&amp;m_CommandBuffer, 0, 0, halfWidth, halfHeight);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">             * Clears the currently set render target at a given index.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">             * Channels to be cleared are set through the clear color mask.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, black, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="comment">/* Lower right quadrant - red */</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        nvnCommandBufferSetScissor(&amp;m_CommandBuffer, halfWidth, 0, width - halfWidth, halfHeight);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, red, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="comment">/* Upper right quadrant - green */</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        nvnCommandBufferSetScissor(&amp;m_CommandBuffer, halfWidth, halfHeight, width - halfWidth, height - halfHeight);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, green, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="comment">/* Upper left quadrant - blue */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        nvnCommandBufferSetScissor(&amp;m_CommandBuffer, 0, halfHeight, halfWidth, height - halfHeight);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, blue, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">         * Ends the recording of commands for the command buffer. Returns a</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">         * command handle to the compiled set of commands that can be submitted</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">         * to a queue or used as a part of another command buffer.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    m_CommandHandle = nvnCommandBufferEndRecording(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="preprocessor">#ifdef CHECK_COMMAND_BUFFER_MEMORY_USAGE</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">         * In order to pare down the memory used for command/control memory,</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">         * the command buffer can be queried for the amount of memory that is</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">         * free or used. This is useful to figure out how much memory to</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">         * allocate initially for small, reuasble command buffers.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">         * When a command buffer runs out of either command or control memory,</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">         * a callback function (optionally provided by the user) will be hit.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">         * More information about how the callback function works can be found</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">         * in ManagedCommandBuffer.cpp</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordtype">size_t</span> commandMemoryUsed = nvnCommandBufferGetCommandMemoryUsed(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordtype">size_t</span> controlMemoryUsed = nvnCommandBufferGetControlMemoryUsed(&amp;m_CommandBuffer);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"> * GettingStartedWithNVN::Draw</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"> * ---------------------------</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"> * This method submits the commands recorded in the command buffers to the queue</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"> * and presents the current render target to the screen.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="keywordtype">void</span> GettingStartedWithNVN::Draw(uint64_t <span class="comment">/*millisec*/</span>)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;{</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">         * Update the command buffer to set the current render target and grab</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">         * the index to that target.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordtype">int</span> index = UpdateRenderTargets();</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    nvnSyncWait(&amp;m_WindowSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">         * Submits the recorded commands in the command buffer to the queue</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">         * to be processed by the GPU. Multiple command buffers can be</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">         * submitted with one call by passing the number of command buffers</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">         * to be submitted and an array of command handles.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">/* Render target setting command buffer. */</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_RenderTargetCommandHandle);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">/* Scissored clears command buffer, created/update by the Resize function. */</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_CommandHandle);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="comment">/* Displays the render target at the given index to the screen. */</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    nvnQueuePresentTexture(&amp;m_Queue, m_pWindow, index);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment"> * GettingStartedWithNVN::UpdateRenderTargets</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment"> * ------------------------------------------</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"> * Gets the index of the current render target from the NVNwindow</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"> * and records a command buffer that sets it up to be rendered to.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="keywordtype">int</span> GettingStartedWithNVN::UpdateRenderTargets()</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;{</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a> result = nvnWindowAcquireTexture(m_pWindow, &amp;m_WindowSync, &amp;m_CurrentWindowIndex);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == NVN_WINDOW_ACQUIRE_TEXTURE_RESULT_SUCCESS);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(result);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">         * Set the sync object to signal when all gpu commands are complete and wait on the</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">         * sync object before overwriting the command buffer.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">         * Reset the command and control memory pointers back to the beginning</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">         * of their blocks of memory. This causes the next recording to overwrite</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">         * whatever memory was there.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">         * Records a command buffer that sets the render target at the index given</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">         * by the NVNwindow.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    nvnCommandBufferBeginRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    nvnCommandBufferSetRenderTargets(&amp;m_RenderTargetCommandBuffer, 1, &amp;m_RenderTargets[m_CurrentWindowIndex], NULL, NULL, NULL);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    m_RenderTargetCommandHandle = nvnCommandBufferEndRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">/* Return the index acquired from the NVNwindow so it can be used in the next present call. */</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">return</span> m_CurrentWindowIndex;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="keywordtype">void</span> GettingStartedWithNVN::DebugLayerCallback(</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordtype">void</span>* pUser</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    )</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;{</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pUser == NULL);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(pUser);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;NVN Debug Layer Callback:\n&quot;</span>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  source:       0x%08x\n&quot;</span>, source);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  type:         0x%08x\n&quot;</span>, type);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  id:           0x%08x\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  severity:     0x%08x\n&quot;</span>, severity);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  message:      %s\n&quot;</span>,     message);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;NVN Debug layer callback hit&quot;</span>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;TutorialBaseClass* t()</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;{</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keyword">static</span> GettingStartedWithNVN tut;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">return</span> (&amp;tut);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;{</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    TutorialRun();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div>
<div class="ttc" id="a_memory_pool_8h_html"><div class="ttname"><a href="_memory_pool_8h.html">MemoryPool.h</a></div><div class="ttdoc">This file defines a wrapper around the NVNmemoryPool object that keeps track of the memory allocated ...</div></div>
<div class="ttc" id="a_tutorial_base_class_8h_html"><div class="ttname"><a href="_tutorial_base_class_8h.html">TutorialBaseClass.h</a></div><div class="ttdoc">This class is shared among all tutorials in order to abstract away per-operating system details relat...</div></div>
<div class="ttc" id="a_tutorial_util_8h_html"><div class="ttname"><a href="_tutorial_util_8h.html">TutorialUtil.h</a></div><div class="ttdoc">This file defines the interface for utility functions used in the tutorials.</div></div>
<div class="ttc" id="agroup__nvn__c__api__typedefs_html_ga05b6b3dd5b965bd81efe2d03cee0bbbd"><div class="ttname"><a href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a></div><div class="ttdeci">void * NVNnativeWindow</div><div class="ttdoc">Platform native window type.</div><div class="ttdef"><b>Definition:</b> nvn.h:159</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga48151b7e768a13685d77d1a4c464a33b"><div class="ttname"><a href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a></div><div class="ttdeci">#define NVN_TRUE</div><div class="ttdoc">Boolean condition with a value of true.</div><div class="ttdef"><b>Definition:</b> nvn.h:4566</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga4eb83fe713146d844b1ac7f8e9c3dada"><div class="ttname"><a href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MAJOR_VERSION</div><div class="ttdoc">Major version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:59</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga6c3444e501307a094f1d57abf1059aed"><div class="ttname"><a href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a></div><div class="ttdeci">#define NVN_WAIT_TIMEOUT_MAXIMUM</div><div class="ttdoc">When waiting on NVNsync objects, wait indefinitely until the sync object is signaled.</div><div class="ttdef"><b>Definition:</b> nvn.h:4574</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gaa8b4a49a0c4f852b73be3b50bb3f270e"><div class="ttname"><a href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MINOR_VERSION</div><div class="ttdoc">Minor version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:62</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gace820e752b400cf7aa36e9684a7f45cb"><div class="ttname"><a href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_ALIGNMENT</div><div class="ttdoc">Required base address alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4578</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gadfd69601d2d9f953c55808127ba60853"><div class="ttname"><a href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_GRANULARITY</div><div class="ttdoc">Required size alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4582</div></div>
<div class="ttc" id="agroup__nvn__c__entryfuncptrs_html_ga9557d931192cd70c7d2810a6425326eb"><div class="ttname"><a href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a></div><div class="ttdeci">PFNNVNGENERICFUNCPTRPROC(* PFNNVNDEVICEGETPROCADDRESSPROC)(const NVNdevice *device, const char *name)</div><div class="ttdoc">Function pointer type to call nvnDeviceGetProcAddress().</div><div class="ttdef"><b>Definition:</b> nvn.h:15922</div></div>
<div class="ttc" id="agroup__nvn__c__entryfuncptrs_html_gaac2535d2f4e2740efa3fd69d683110fc"><div class="ttname"><a href="group__nvn__c__entryfuncptrs.html#gaac2535d2f4e2740efa3fd69d683110fc">PFNNVNDEVICEINITIALIZEPROC</a></div><div class="ttdeci">NVNboolean(* PFNNVNDEVICEINITIALIZEPROC)(NVNdevice *device, const NVNdeviceBuilder *builder)</div><div class="ttdoc">Function pointer type to call nvnDeviceInitialize().</div><div class="ttdef"><b>Definition:</b> nvn.h:15913</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga58e9b155d7f2272b95044eed1f40415e"><div class="ttname"><a href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a></div><div class="ttdeci">NVNwindowAcquireTextureResult</div><div class="ttdoc">Specifies the result of acquiring a texture from a window.</div><div class="ttdef"><b>Definition:</b> nvn.h:2673</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga661d03f0e1c886c81d5ccc67935df182"><div class="ttname"><a href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a></div><div class="ttdeci">NVNdebugCallbackType</div><div class="ttdoc">Specifies the type of event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2924</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga6d72003c068d7795201e77d27bf8c7ac"><div class="ttname"><a href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a></div><div class="ttdeci">NVNdebugCallbackSeverity</div><div class="ttdoc">Specifies the severity of the event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2954</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga70a49f98019e4832818240297bee7eb3"><div class="ttname"><a href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a></div><div class="ttdeci">NVNdebugCallbackSource</div><div class="ttdoc">Specifies the type of operation being performed when a debug callback is made.</div><div class="ttdef"><b>Definition:</b> nvn.h:2902</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6"><div class="ttname"><a href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a></div><div class="ttdeci">@ NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</div><div class="ttdoc">Enable (TRUE) or disable (FALSE) level 2 debug layer for the device.</div><div class="ttdef"><b>Definition:</b> nvn.h:2828</div></div>
<div class="ttc" id="agroup__nvn__c__funcptrs_html_gab106acc34961bf1c3a43514686dbfc4b"><div class="ttname"><a href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a></div><div class="ttdeci">void(* PFNNVNDEBUGCALLBACKPROC)(NVNdebugCallbackSource source, NVNdebugCallbackType type, int id, NVNdebugCallbackSeverity severity, const char *message, void *userParam)</div><div class="ttdoc">Function pointer type used to specify a function to call for debug callbacks.</div><div class="ttdef"><b>Definition:</b> nvn.h:4674</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gab7f10945ffe1f6161c87238c75ae411d"><div class="ttname"><a href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a></div><div class="ttdeci">uint64_t NVNcommandHandle</div><div class="ttdoc">GPU handle used to refer to a command buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:437</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_ad620d8208dd309eb7c4dd5973a6aeee5"><div class="ttname"><a href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">nn::gfx::MemoryPool</a></div><div class="ttdeci">TMemoryPool&lt; TargetConfig::Variation &gt; MemoryPool</div><div class="ttdoc">The type definition representing a memory pool.</div><div class="ttdef"><b>Definition:</b> gfx_Types.h:116</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a895595468f09d14293edd099a8ff7dc5"><div class="ttname"><a href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">nn::socket::Shutdown</a></div><div class="ttdeci">int Shutdown(int socket, ShutdownMethod how) NN_NOEXCEPT</div><div class="ttdoc">Disable sends and/or receives on a socket.</div></div>
<div class="ttc" id="anamespacenn_1_1ui2d_html_a3d128ec7087f91b3f54cbfcf73fb93b9"><div class="ttname"><a href="namespacenn_1_1ui2d.html#a3d128ec7087f91b3f54cbfcf73fb93b9">nn::ui2d::MajorVersion</a></div><div class="ttdeci">const uint8_t MajorVersion</div><div class="ttdoc">Major version of the resource.</div><div class="ttdef"><b>Definition:</b> ui2d_Resources.h:47</div></div>
<div class="ttc" id="anamespacenn_1_1ui2d_html_a8ebb4f5324b526c9e74f0b01037fb74c"><div class="ttname"><a href="namespacenn_1_1ui2d.html#a8ebb4f5324b526c9e74f0b01037fb74c">nn::ui2d::MinorVersion</a></div><div class="ttdeci">const uint8_t MinorVersion</div><div class="ttdoc">Minor version of the resource.</div><div class="ttdef"><b>Definition:</b> ui2d_Resources.h:54</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="anvn___func_ptr_impl_8h_html"><div class="ttname"><a href="nvn___func_ptr_impl_8h.html">nvn_FuncPtrImpl.h</a></div><div class="ttdoc">Definition of the global function pointer variables implementing the entry points of the NVN C interf...</div></div>
<div class="ttc" id="anvn___func_ptr_inline_8h_html"><div class="ttname"><a href="nvn___func_ptr_inline_8h.html">nvn_FuncPtrInline.h</a></div><div class="ttdoc">Implementation of the NVN C interface entry points as inline functions that call through global funct...</div></div>
<div class="ttc" id="astruct_n_v_ncommand_buffer_html"><div class="ttname"><a href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn.h:236</div></div>
<div class="ttc" id="astruct_n_v_ndevice_builder_html"><div class="ttname"><a href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a></div><div class="ttdoc">Object specifying state used to construct new device objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:216</div></div>
<div class="ttc" id="astruct_n_v_ndevice_html"><div class="ttname"><a href="struct_n_v_ndevice.html">NVNdevice</a></div><div class="ttdoc">API class used to represent a specific GPU/device.</div><div class="ttdef"><b>Definition:</b> nvn.h:221</div></div>
<div class="ttc" id="astruct_n_v_nqueue_builder_html"><div class="ttname"><a href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a></div><div class="ttdoc">Object specifying state used to construct new queue objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:226</div></div>
<div class="ttc" id="astruct_n_v_nqueue_html"><div class="ttname"><a href="struct_n_v_nqueue.html">NVNqueue</a></div><div class="ttdoc">API class used to send commands to the GPU.</div><div class="ttdef"><b>Definition:</b> nvn.h:231</div></div>
<div class="ttc" id="astruct_n_v_nsync_html"><div class="ttname"><a href="struct_n_v_nsync.html">NVNsync</a></div><div class="ttdoc">Synchronization primitive object used to order execution of commands and track progress.</div><div class="ttdef"><b>Definition:</b> nvn.h:364</div></div>
<div class="ttc" id="astruct_n_v_ntexture_builder_html"><div class="ttname"><a href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a></div><div class="ttdoc">Object specifying state used to construct new texture objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:330</div></div>
<div class="ttc" id="astruct_n_v_ntexture_html"><div class="ttname"><a href="struct_n_v_ntexture.html">NVNtexture</a></div><div class="ttdoc">Block of GPU-accessible memory and related state used to hold image data.</div><div class="ttdef"><b>Definition:</b> nvn.h:325</div></div>
<div class="ttc" id="astruct_n_v_nwindow_builder_html"><div class="ttname"><a href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a></div><div class="ttdoc">Object specifying state used to construct new window objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:375</div></div>
<div class="ttc" id="astruct_n_v_nwindow_html"><div class="ttname"><a href="struct_n_v_nwindow.html">NVNwindow</a></div><div class="ttdoc">Object that manages texture presentation to the platform windowing system.</div><div class="ttdef"><b>Definition:</b> nvn.h:370</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleNvnTutorial01_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This tutorial demonstrates how to setup an application to use the NVN graphics API and performs some basic operations with it. It walks through how to load the function pointers for the API, setting up the nvnDevice and nvnQueue objects, and creates command buffers for setting a render target and clearing quadrants of the screen. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
