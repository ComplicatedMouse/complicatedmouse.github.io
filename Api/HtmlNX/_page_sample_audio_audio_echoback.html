<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simultaneously Using Audio Input and Output Features Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_audio.html">Audio Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Simultaneously Using Audio Input and Output Features Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleAudioAudioEchoback_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>This sample program shows how to simultaneously use the audio input and output features.</p>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionBrief"></a>
Overview</h1>
<p>This sample achieves echo back by simultaneously using audio input and audio output.</p>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_877fddc0eecd3a46fdaebe82de17bfed.html">Samples/Sources/Applications/AudioEchoback/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>You must be able to use audio input (such as a microphone) and audio output (such as speakers).</p>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionHowToOperate"></a>
How to Use</h1>
<p>Run the program to echo back the audio. You can operate the program using input from a keyboard or from <code>DebugPad</code>.</p>
<table class="doxtable">
<tr>
<th>Input </th><th>Operation  </th></tr>
<tr>
<td>START or SPACEBAR </td><td>Exits the program.  </td></tr>
</table>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionPrecaution"></a>
Important Information</h1>
<p>The default audio input and audio output values for the following must match.</p><ul>
<li>Number of channels.</li>
<li>Sampling rate.</li>
<li>Sampling format.</li>
</ul>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleAudioAudioEchoback_SectionDetail"></a>
Description</h1>
<p>This sample program outputs a waveform recorded with audio input to audio output without modification.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Open default audio input and audio output.</li>
<li>Get and verify audio input and audio output information.</li>
<li>Prepare and register the recording and playback buffers.</li>
<li>Start recording and playback.</li>
<li>Echo back the audio.</li>
<li>End recording and playback.</li>
<li>Close audio input and audio output.</li>
<li>Free the recording and playback buffers.</li>
</ul>
<p>Because this program is simple, it is assumed that the following information for audio input and audio output match.</p>
<ul>
<li>Number of channels.</li>
<li>Sampling rate.</li>
<li>Sampling format.</li>
</ul>
<p>If they differ, appropriate data conversion (downmixing, sample rate conversion, and so on) is necessary.</p>
<p>Three buffers are prepared for recording and playback, each with a length of 50 milliseconds. The developer can freely determine the number and length of buffers, but if the length is too short or if the number is too small, problems such as sound cutting out can occur. The developer can freely determine the number and length of buffers, but if the length is too short or if the number is too small, problems such as sound cutting out can occur. The prepared buffers are registered with <code><a class="el" href="namespacenn_1_1audio.html#a2c217d690202ef43230d4409852f3c1d" title="Registers an audio input buffer.">nn::audio::AppendAudioInBuffer()</a></code> and <code><a class="el" href="namespacenn_1_1audio.html#adf6ae7da062359e04d32ec1ec51b84a0" title="Registers an audio output buffer.">nn::audio::AppendAudioOutBuffer()</a></code>. Registration can be performed before or after calling <code><a class="el" href="namespacenn_1_1audio.html#af72d3c3851733f838d4c7e72a26b307d" title="Starts recording a waveform from an audio input.">nn::audio::StartAudioIn()</a></code> and <code><a class="el" href="namespacenn_1_1audio.html#aa522149d7a0b48763dd5c1eb32609505" title="Starts playing a waveform from an audio output.">nn::audio::StartAudioOut()</a></code>. Actual recording and playback are not performed until <code><a class="el" href="namespacenn_1_1audio.html#af72d3c3851733f838d4c7e72a26b307d" title="Starts recording a waveform from an audio input.">nn::audio::StartAudioIn()</a></code> and <code><a class="el" href="namespacenn_1_1audio.html#aa522149d7a0b48763dd5c1eb32609505" title="Starts playing a waveform from an audio output.">nn::audio::StartAudioOut()</a></code> are called.</p>
<p>Starts recording and playback. After recording and playback start, information in the buffers that completed recording and playback is obtained with <code><a class="el" href="namespacenn_1_1audio.html#a4fe3341bdd916299f38a8eaa2c8de534" title="Gets an audio input buffer that has already been recorded to.">nn::audio::GetReleasedAudioInBuffer()</a></code> and <code><a class="el" href="namespacenn_1_1audio.html#a9bf1c9d96a5761b3dca59f7f13155ad8" title="Gets an audio output buffer that has already been played.">nn::audio::GetReleasedAudioOutBuffer()</a></code>, the recorded data is copied to the playback buffer, and each chunk of data is registered again. If downmixing or sample rate conversion is required, it is performed at this time. Echo back is realized by repeating these processes.</p>
<p>When the request to quit is made, the program exits this repetitive processing, stops recording and playback, closes the audio input and audio output, and frees the memory. When <a class="el" href="namespacenn_1_1audio.html#a29049cc380b643521d79d058a62d9e93" title="Stops recording a waveform from an audio input.">nn::audio::StopAudioIn()</a> and <a class="el" href="namespacenn_1_1audio.html#ad908ac057d85fa7d4d4c4f047edc6c4d" title="Stops playing a waveform from an audio output.">nn::audio::StopAudioOut()</a> are called, recording and playback are stopped, and access to recorded (and not recorded or played) buffers is revoked, but if <a class="el" href="namespacenn_1_1audio.html#af72d3c3851733f838d4c7e72a26b307d" title="Starts recording a waveform from an audio input.">nn::audio::StartAudioIn()</a> or <a class="el" href="namespacenn_1_1audio.html#aa522149d7a0b48763dd5c1eb32609505" title="Starts playing a waveform from an audio output.">nn::audio::StartAudioOut()</a> are run, access is attempted again. There is no access after <code><a class="el" href="namespacenn_1_1audio.html#aea9b579f0edf49dfce4ea62938317b06" title="Closes the audio input and destroys the accessor.">nn::audio::CloseAudioIn()</a></code> and <code><a class="el" href="namespacenn_1_1audio.html#abecd28c6321841cde54d0d16a8800da4" title="Closes the audio output and destroys the accessor.">nn::audio::CloseAudioOut()</a></code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
