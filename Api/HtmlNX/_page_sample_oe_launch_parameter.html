<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sample that gets launch parameters. | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_oe.html">Operating Environment Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Sample that gets launch parameters. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleOeLaunchParameter_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleOeLaunchParameter_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleOeLaunchParameter_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleOeLaunchParameter_SectionSampleDetail">Sample Program Description</a></li>
<li class="level2"><a href="#PageSampleOeLaunchParameter_Link">Related Documentation</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This document describes how to get the application launch parameters.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionBrief"></a>
Overview</h1>
<p>This document describes how to use the application operating environment library to get the launch parameters.</p>
<p>For more information about using the application operating environment, see the <a class="el" href="namespacenn_1_1oe.html">Operating Environment Library API Reference</a>.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_04827e22ced77244591f0b9b5f998f72.html">Samples/Sources/Applications/OeLaunchParameter/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>This sample program can only be built and run on the NX platform.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionPrecaution"></a>
Important Information</h1>
<p>This program does not display anything on the screen. The execution results are output to a log.</p>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionHowToExecute"></a>
Execution Procedure</h1>
<ul>
<li>Insert the SD card into the development hardware in advance.</li>
<li>Change the development hardware menu screen to DevMenu. (The following features cannot be used in the HOME Menu.)</li>
<li>As described later, register the <code>OeLaunchParameter_Parameter.nxargs</code> binary file as the launch parameters. Executing the following code installs <code>OeLaunchParameter_Parameter.nxargs</code> to the SD card.</li>
</ul>
<div class="fragment"><div class="line">$ RunOnTarget.exe DevMenuCommand.nsp -- application install-nxargs <span class="stringliteral">&quot;D:\NintendoSDK\Samples\Sources\Applications\OeLaunchParameter\OeLaunchParameter_Parameter.nxargs&quot;</span> --application-<span class="keywordtype">id</span> 0x0100005003486000</div>
</div><!-- fragment --><ul>
<li>Build the sample program and then run it.</li>
</ul>
<h1><a class="anchor" id="PageSampleOeLaunchParameter_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleOeLaunchParameter_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_oe_launch_parameter_8cpp.html" title="Sample program for getting launch parameters.">OeLaunchParameter.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;nn/nn_Common.h&gt;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="util___scope_exit_8h.html">nn/util/util_ScopeExit.h</a>&gt;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="init_8h.html">nn/init.h</a>&gt;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &lt;nn/oe.h&gt;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">//  Normally, define the independent header files for the application in advance.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keyword">class </span>LaunchParameter</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Launch parameter types.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">enum</span> LaunchParameterKind</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        LaunchParameterKind_News                = 1,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        LaunchParameterKind_ApplicationSpecific = 2,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    };</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// Header placed at the beginning of the launch parameters (fixed as 16 bytes).</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">struct </span>LaunchParameterHeader</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        LaunchParameterKind parameterKind;  <span class="comment">// Launch parameter types.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        uint32_t _reserved0;                <span class="comment">// Reserved for a future extension.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        uint32_t _reserved1;                <span class="comment">// Reserved for a future extension.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        uint32_t _reserved2;                <span class="comment">// Reserved for a future extension.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    };</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> NewsParameterBufferSize = 0x1000;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">char</span>* m_NewsParameterBuffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    ~LaunchParameter()</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keyword">delete</span>[] m_NewsParameterBuffer;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// Initialization and getting launch parameters.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">void</span> InitializeAndTryPop();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// For News.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">bool</span> IsNewsParameterAvailable()<span class="keyword"> const</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> m_NewsParameterBuffer != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">char</span>* GetNewsParameterBufferPointer()<span class="keyword"> const</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> m_NewsParameterBuffer;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;};</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keywordtype">void</span> LaunchParameter::InitializeAndTryPop()</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> bufferSize = 0x1000;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    uint8_t* pBuffer = <span class="keyword">new</span> uint8_t[bufferSize];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keyword">delete</span>[] pBuffer;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    };</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// Get one launch parameter.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordtype">size_t</span> paramSize;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="namespacenn_1_1oe.html#a598cba59fa41b29220deeb8b3d367d48">nn::oe::TryPopLaunchParameter</a>(&amp;paramSize, pBuffer, bufferSize) )</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// Parameters smaller than the header size are skipped as they are in an unknown format.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (paramSize &lt; <span class="keyword">sizeof</span>(LaunchParameterHeader))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// Analyze the header section.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keyword">auto</span>   pHeader  = <span class="keyword">reinterpret_cast&lt;</span>LaunchParameterHeader*<span class="keyword">&gt;</span>(pBuffer);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keyword">auto</span>   pData    = pBuffer   + <span class="keyword">sizeof</span>(LaunchParameterHeader);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordtype">size_t</span> dataSize = paramSize - <span class="keyword">sizeof</span>(LaunchParameterHeader);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">switch</span> (pHeader-&gt;parameterKind)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">case</span> LaunchParameterKind_News:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="comment">// Skip if the News launch parameter is larger than expected.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">if</span> (paramSize &gt; NewsParameterBufferSize)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                this-&gt;m_NewsParameterBuffer = <span class="keyword">new</span> <span class="keywordtype">char</span>[dataSize];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                std::memcpy(this-&gt;m_NewsParameterBuffer, pData, dataSize);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">case</span> LaunchParameterKind_ApplicationSpecific:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <span class="comment">// The launch parameters set by the application itself.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="comment">// However, it is skipped as there is no feature</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="comment">// like this to configure launch parameters in NX Add-On 4.2.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// Skip as this parameter is unknown.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">//  Initialize memory.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a>()</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Allocate new/delete memory from the heap.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> MemoryHeapSize = 16 * 1024 * 1024;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a class="code" href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a>(MemoryHeapSize) );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    uintptr_t address;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a class="code" href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a>(&amp;address, MemoryHeapSize) );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a>( <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(address), MemoryHeapSize );</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//  Main function.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    LaunchParameter param;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    param.InitializeAndTryPop();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (param.IsNewsParameterAvailable())</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;----------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;News parameter = &#39;%s&#39;\n&quot;</span>, param.GetNewsParameterBufferPointer());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;----------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;News parameter was not found.\n&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="ttc" id="ainit_8h_html"><div class="ttname"><a href="init_8h.html">init.h</a></div><div class="ttdoc">Declaration of API resources for the initialization library.</div></div>
<div class="ttc" id="ainit___startup_8h_html_ac781c07f35d3d9e7a71d21ad25e25f8f"><div class="ttname"><a href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a></div><div class="ttdeci">void nninitStartup(void)</div><div class="ttdoc">Startup initialization routine.</div></div>
<div class="ttc" id="anamespacenn_1_1init_html_a216ae7a5ca53a1c1e6dc0514f7283974"><div class="ttname"><a href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a></div><div class="ttdeci">void InitializeAllocator(void *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Initializes a memory allocator.</div></div>
<div class="ttc" id="anamespacenn_1_1oe_html_a598cba59fa41b29220deeb8b3d367d48"><div class="ttname"><a href="namespacenn_1_1oe.html#a598cba59fa41b29220deeb8b3d367d48">nn::oe::TryPopLaunchParameter</a></div><div class="ttdeci">bool TryPopLaunchParameter(size_t *pOutParameterSize, void *pOutBuffer, size_t bufferSize) NN_NOEXCEPT</div><div class="ttdoc">Gets the program startup parameters.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a2be8bac50d8d37a91f866d9e0c55886e"><div class="ttname"><a href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a></div><div class="ttdeci">nn::Result SetMemoryHeapSize(size_t size) NN_NOEXCEPT</div><div class="ttdoc">Changes the size of the memory heap region.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a875bf6b3129f06654e641513c63017dd"><div class="ttname"><a href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a></div><div class="ttdeci">nn::Result AllocateMemoryBlock(uintptr_t *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Allocates a memory block from the memory heap.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="autil___scope_exit_8h_html"><div class="ttname"><a href="util___scope_exit_8h.html">util_ScopeExit.h</a></div><div class="ttdoc">Defines the macro that writes the code to run when an object goes out of scope.</div></div>
<div class="ttc" id="autil___scope_exit_8h_html_a674e2d673758265abe6e8e17426489ea"><div class="ttname"><a href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div><div class="ttdeci">#define NN_UTIL_SCOPE_EXIT</div><div class="ttdoc">Macro that writes the process when an object goes out of scope.</div><div class="ttdef"><b>Definition:</b> util_ScopeExit.h:101</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleOeLaunchParameter_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program has the following flow.</p>
<ul>
<li>Use <code>nninitStartup()</code> to configure a memory pool for <code>new</code>/<code>delete</code>.</li>
<li>The <code>nnMain()</code> function executes the following processing.<ul>
<li>Place an instance of the <code>LaunchParameter</code> class.</li>
<li>Use <code>LaunchParameter::InitializeAndTryPop()</code> to get the launch parameters.</li>
<li>Use <code>LaunchParameter::GetNewsParameterBufferPointer()</code> to reference the launch parameters passed by <code>News</code>.</li>
</ul>
</li>
</ul>
<p>The actual function that gets the launch parameters is <code>InitializeAndTryPop()</code>. This function repeatedly attempts to get the launch parameters until <code><a class="el" href="namespacenn_1_1oe.html#a598cba59fa41b29220deeb8b3d367d48" title="Gets the program startup parameters.">nn::oe::TryPopLaunchParameter()</a></code> returns <code>false</code>. The launch parameters may receive multiple parameters in the future rather than only <code>News</code>, so this type of implementation is required.</p>
<p>In addition, future backward compatibility is maintained by having the program skip (ignore or destroy) launch parameters in an unrecognized format instead of canceling the process.</p>
<p>This sample program assumes that the header indicated by the <code>LaunchParameterHeader</code> structure is placed in the first 16 bytes of all launch parameters. While it is the responsibility of the application developer to independently determine whether to include this header and how to format it, we recommend considering the possible extended uses of this type of information in the future.</p>
<p>The following file shows the execution results of this sample program.</p>
<pre class="fragment">----------------------------------------------------
News Parameter = 'Hello, this is News Parameter!'
----------------------------------------------------
</pre><h2><a class="anchor" id="PageSampleOeLaunchParameter_Link"></a>
Related Documentation</h2>
<p>For more information about launch parameters, see the following documentation.</p>
<ul>
<li>Nintendo Switch News Delivery Guide &gt; BCAT Management Tool: Setting Items and Setting Rules &gt; Starting a Specific Application </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
