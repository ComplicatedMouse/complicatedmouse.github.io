<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NvnSimple/NvnSimpleSharedLib/GraphicsCommandBuffer.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NvnSimple/NvnSimpleSharedLib/GraphicsCommandBuffer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_nvn_simple_shared_lib.html">Nvn Simple Shared Library</a> and <tt>NvnSimple/NvnSimpleSharedLib/GraphicsCommandBuffer.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_graphics_command_buffer_8h.html">GraphicsCommandBuffer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_graphics_system_8h.html">GraphicsSystem.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Friend definitions</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> NVNAPIENTRY CommandBufferMemoryCallback(<a name="_a0"></a><a class="code" href="classnvn_1_1_command_buffer.html">nvn::CommandBuffer</a>* pCmdBuf, <a class="code" href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686">nvn::CommandBufferMemoryEvent::Enum</a> event, <span class="keywordtype">size_t</span> minSize, <span class="keywordtype">void</span>* callbackData) <a name="a1"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    GraphicsCommandBuffer* pCommandBuffer = <span class="keyword">static_cast&lt;</span>GraphicsCommandBuffer*<span class="keyword">&gt;</span>(callbackData);</div>
<div class="line"> </div>
<div class="line">    <a name="a2"></a><a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pCommandBuffer-&gt;GetCommandBuffer() == pCmdBuf);</div>
<div class="line">    <a name="a3"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(pCmdBuf);</div>
<div class="line"> </div>
<div class="line">    pCommandBuffer-&gt;MemoryCallbackHandler(event, minSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Public API</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::Initialize(GraphicsSystem* pGraphicsSystem) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">Initialize</a>(pGraphicsSystem, <span class="keyword">false</span>, DefaultCommandMemChunkSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::Initialize(GraphicsSystem* pGraphicsSystem, <span class="keywordtype">bool</span> manualResetMode) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">Initialize</a>(pGraphicsSystem, manualResetMode, DefaultCommandMemChunkSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::Initialize(GraphicsSystem* pGraphicsSystem, <span class="keywordtype">bool</span> manualResetMode, <span class="keywordtype">size_t</span> commandMemChunkSize) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// If manualResetMode is true, the user is responsible for calling the reset method.</span></div>
<div class="line">    <span class="comment">// If manualResetMode is false, reset is called automatically from within the StartRecording method.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Beware!  Both manualResetMode and commandMemChunkSize have default values by overload functions,</span></div>
<div class="line">    <span class="comment">// so if you just want to specify  commandMemChunkSize, make sure to explicitly set manualResetMode.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!m_IsInitialized)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(commandMemChunkSize &gt;= 512);</div>
<div class="line"> </div>
<div class="line">        m_IsManualResetMode = manualResetMode;</div>
<div class="line"> </div>
<div class="line">        m_pGraphicsSystem = pGraphicsSystem;</div>
<div class="line"> </div>
<div class="line">        m_pMemoryPool = pGraphicsSystem-&gt;GetMemoryPoolForCommandBuffers();</div>
<div class="line"> </div>
<div class="line">        m_CommandMemChunkSize = commandMemChunkSize;</div>
<div class="line">        m_ControlMemChunkSize = 512;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!m_CommandBuffer.Initialize(pGraphicsSystem-&gt;GetDevice()))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnCommandBufferInitialize failed.&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        AllocateNewCommandMemChunk();</div>
<div class="line">        AllocateNewControlMemChunk();</div>
<div class="line"> </div>
<div class="line">        Reset();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// setup memory callback</span></div>
<div class="line">        m_CommandBuffer.SetMemoryCallback(CommandBufferMemoryCallback);</div>
<div class="line">        m_CommandBuffer.SetMemoryCallbackData(<span class="keyword">this</span>);</div>
<div class="line"> </div>
<div class="line">        m_IsInitialized = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::Finalize() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (m_IsInitialized)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">void</span>* controlMemChunk : m_ControlMemChunks)</div>
<div class="line">        {</div>
<div class="line">            m_pGraphicsSystem-&gt;GetAllocator()-&gt;Free(controlMemChunk);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        m_ControlMemChunks.clear();</div>
<div class="line">        m_CommandMemChunkOffsets.clear();</div>
<div class="line"> </div>
<div class="line">        m_CommandBuffer.Finalize();</div>
<div class="line"> </div>
<div class="line">        m_pMemoryPool = <span class="keyword">nullptr</span>;</div>
<div class="line">        m_pGraphicsSystem = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">        m_IsInitialized = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::Reset() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// This method resets the command memory and control memory back to their respective first chunks.</span></div>
<div class="line">    <span class="comment">// In the scheme that this class employs, if the command buffer is being recorded per-frame, then</span></div>
<div class="line">    <span class="comment">// having Reset() called periodically (for example, once per frame) will be necessary in order to</span></div>
<div class="line">    <span class="comment">// not run out of command/control memory.  The two options are to either call Reset() explicitly</span></div>
<div class="line">    <span class="comment">// or use the automatic reset mode (i.e. manualResetMode = false).</span></div>
<div class="line"> </div>
<div class="line">    m_NumCommandMemChunksAdded = 0;</div>
<div class="line">    m_NumControlMemChunksAdded = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!AddNextCommandMemChunk())</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(<span class="keyword">false</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!AddNextControlMemChunk())</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(<span class="keyword">false</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code" href="classnvn_1_1_command_buffer.html">nvn::CommandBuffer</a>* GraphicsCommandBuffer::StartRecording() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_IsInitialized);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!m_IsManualResetMode)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Reset so we reuse the memory chunks previously allocated, unless the caller has requested the manual reset mode.</span></div>
<div class="line">        <span class="comment">// Resetting the command/control memory is safe to do as long as SubmitCommands has been finished by the GPU for the</span></div>
<div class="line">        <span class="comment">// previous frame&#39;s command sets that were recorded with this command buffer.</span></div>
<div class="line">        Reset();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_CommandBuffer.BeginRecording();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> &amp;m_CommandBuffer;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__nvn__cpp__handle.html#ga48a6926aea0b934109f96ae32027b7fb">nvn::CommandHandle</a> GraphicsCommandBuffer::EndRecording() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_IsInitialized);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> m_CommandBuffer.EndRecording();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::EndRecordingAndExecute() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__nvn__cpp__handle.html#ga48a6926aea0b934109f96ae32027b7fb">nvn::CommandHandle</a> commandHandle = EndRecording();</div>
<div class="line"> </div>
<div class="line">    m_pGraphicsSystem-&gt;GetQueue()-&gt;SubmitCommands(1, &amp;commandHandle);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::PrintCommandBufferUsage() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_IsInitialized);</div>
<div class="line"> </div>
<div class="line">    <a name="a4"></a><a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;%d command memory chunks @ %d bytes used.\n&quot;</span>, m_NumCommandMemChunksAdded, m_CommandMemChunkSize);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;%d control memory chunks @ %d bytes used.\n&quot;</span>, m_NumControlMemChunksAdded, m_ControlMemChunkSize);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> free;</div>
<div class="line">    <span class="keywordtype">size_t</span> total;</div>
<div class="line">    <span class="keywordtype">size_t</span> used;</div>
<div class="line"> </div>
<div class="line">    free  = m_CommandBuffer.GetCommandMemoryFree();</div>
<div class="line">    total = m_CommandBuffer.GetCommandMemorySize();</div>
<div class="line">    used  = m_CommandBuffer.GetCommandMemoryUsed();</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Current command chunk: %d / %d used (%d free)\n&quot;</span>, used, total, free);</div>
<div class="line"> </div>
<div class="line">    free  = m_CommandBuffer.GetControlMemoryFree();</div>
<div class="line">    total = m_CommandBuffer.GetControlMemorySize();</div>
<div class="line">    used  = m_CommandBuffer.GetControlMemoryUsed();</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;Current control chunk: %d / %d used (%d free)\n&quot;</span>, used, total, free);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Private methods</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line">ptrdiff_t GraphicsCommandBuffer::AllocateNewCommandMemChunk() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    ptrdiff_t offset = m_pMemoryPool-&gt;Allocate(m_CommandMemChunkSize, m_pGraphicsSystem-&gt;GetResourceInfo().commandMemAlignment);</div>
<div class="line"> </div>
<div class="line">    m_CommandMemChunkOffsets.push_back(offset);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> offset;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span>* GraphicsCommandBuffer::AllocateNewControlMemChunk() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span>* buf = m_pGraphicsSystem-&gt;GetAllocator()-&gt;Allocate(m_ControlMemChunkSize, m_pGraphicsSystem-&gt;GetResourceInfo().controlMemAlignment);</div>
<div class="line"> </div>
<div class="line">    m_ControlMemChunks.push_back(buf);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> buf;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> GraphicsCommandBuffer::AddNextCommandMemChunk() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> chunkIndex = m_NumCommandMemChunksAdded;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (chunkIndex &lt; m_CommandMemChunkOffsets.size())</div>
<div class="line">    {</div>
<div class="line">        m_CommandBuffer.AddCommandMemory(m_pMemoryPool-&gt;GetMemoryPool(), m_CommandMemChunkOffsets[chunkIndex], m_CommandMemChunkSize);</div>
<div class="line"> </div>
<div class="line">        ++m_NumCommandMemChunksAdded;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> GraphicsCommandBuffer::AddNextControlMemChunk() <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> chunkIndex = m_NumControlMemChunksAdded;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (chunkIndex &lt; m_ControlMemChunks.size())</div>
<div class="line">    {</div>
<div class="line">        m_CommandBuffer.AddControlMemory(m_ControlMemChunks[chunkIndex], m_ControlMemChunkSize);</div>
<div class="line"> </div>
<div class="line">        ++m_NumControlMemChunksAdded;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> GraphicsCommandBuffer::MemoryCallbackHandler(<a class="code" href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686">nvn::CommandBufferMemoryEvent::Enum</a> event, <span class="keywordtype">size_t</span> minSize) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (event == <a name="a5"></a><a class="code" href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686aebaaeb4238a35d6bc6a94b3e9800792d">nvn::CommandBufferMemoryEvent::OUT_OF_COMMAND_MEMORY</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_CommandMemChunkSize &lt; minSize)</div>
<div class="line">        {</div>
<div class="line">            m_CommandMemChunkSize = minSize;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!AddNextCommandMemChunk())</div>
<div class="line">        {</div>
<div class="line">            AllocateNewCommandMemChunk();</div>
<div class="line"> </div>
<div class="line">            <span class="keywordtype">bool</span> isSuccessed = AddNextCommandMemChunk();</div>
<div class="line">            <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(isSuccessed);</div>
<div class="line">            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(isSuccessed);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event == <a name="a6"></a><a class="code" href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686a318b543d61439a5ce486ebf4761c4196">nvn::CommandBufferMemoryEvent::OUT_OF_CONTROL_MEMORY</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_ControlMemChunkSize &lt; minSize)</div>
<div class="line">        {</div>
<div class="line">            m_ControlMemChunkSize = minSize;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!AddNextControlMemChunk())</div>
<div class="line">        {</div>
<div class="line">            AllocateNewControlMemChunk();</div>
<div class="line"> </div>
<div class="line">            <span class="keywordtype">bool</span> isSuccessed = AddNextControlMemChunk();</div>
<div class="line">            <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(isSuccessed);</div>
<div class="line">            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(isSuccessed);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_graphics_command_buffer_8h_html"><div class="ttname"><a href="_graphics_command_buffer_8h.html">GraphicsCommandBuffer.h</a></div><div class="ttdoc">A lightweight wrapper for an nvn::CommandBuffer.</div></div>
<div class="ttc" id="a_graphics_system_8h_html"><div class="ttname"><a href="_graphics_system_8h.html">GraphicsSystem.h</a></div><div class="ttdoc">A simple NVN-based rendering framework suitable for demo applications.</div></div>
<div class="ttc" id="aclassnvn_1_1_command_buffer_html"><div class="ttname"><a href="classnvn_1_1_command_buffer.html">nvn::CommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn_Cpp.h:6101</div></div>
<div class="ttc" id="agroup__nvn__cpp__handle_html_ga48a6926aea0b934109f96ae32027b7fb"><div class="ttname"><a href="group__nvn__cpp__handle.html#ga48a6926aea0b934109f96ae32027b7fb">nvn::CommandHandle</a></div><div class="ttdeci">uint64_t CommandHandle</div><div class="ttdoc">GPU handle used to refer to a command buffer object.</div><div class="ttdef"><b>Definition:</b> nvn_Cpp.h:341</div></div>
<div class="ttc" id="anamespacenn_1_1htc_html_ae7d36d5610146607c2ebbc6b31dec9e3"><div class="ttname"><a href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">nn::htc::Initialize</a></div><div class="ttdeci">void Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the htc library.</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_a0e31cc4dc24d85253a31e48b1a85ab33"><div class="ttname"><a href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div><div class="ttdeci">#define NN_NOEXCEPT</div><div class="ttdoc">Declares that the function does not throw exceptions.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:196</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="astructnvn_1_1_command_buffer_memory_event_html_ae205102e87335273e0529a0747921686"><div class="ttname"><a href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686">nvn::CommandBufferMemoryEvent::Enum</a></div><div class="ttdeci">Enum</div><div class="ttdoc">Enumerated values for the type CommandBufferMemoryEvent.</div><div class="ttdef"><b>Definition:</b> nvn_Cpp.h:3482</div></div>
<div class="ttc" id="astructnvn_1_1_command_buffer_memory_event_html_ae205102e87335273e0529a0747921686a318b543d61439a5ce486ebf4761c4196"><div class="ttname"><a href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686a318b543d61439a5ce486ebf4761c4196">nvn::CommandBufferMemoryEvent::OUT_OF_CONTROL_MEMORY</a></div><div class="ttdeci">@ OUT_OF_CONTROL_MEMORY</div><div class="ttdoc">The command buffer has run out of control memory.</div><div class="ttdef"><b>Definition:</b> nvn_Cpp.h:3496</div></div>
<div class="ttc" id="astructnvn_1_1_command_buffer_memory_event_html_ae205102e87335273e0529a0747921686aebaaeb4238a35d6bc6a94b3e9800792d"><div class="ttname"><a href="structnvn_1_1_command_buffer_memory_event.html#ae205102e87335273e0529a0747921686aebaaeb4238a35d6bc6a94b3e9800792d">nvn::CommandBufferMemoryEvent::OUT_OF_COMMAND_MEMORY</a></div><div class="ttdeci">@ OUT_OF_COMMAND_MEMORY</div><div class="ttdoc">The command buffer has run out of command memory.</div><div class="ttdef"><b>Definition:</b> nvn_Cpp.h:3489</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
