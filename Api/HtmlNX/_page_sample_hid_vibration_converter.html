<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Converting From Sound Data to Vibration Values in Real Time | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_hid.html">Human Input Device Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Converting From Sound Data to Vibration Values in Real Time </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleHidVibrationConverter_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleHidVibrationConverter_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>Describes the program that converts the sound being played to vibration values in real time.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionBrief"></a>
Overview</h1>
<p>Describes the method for converting sounds being played to vibration values in real time.</p>
<p><code><a class="el" href="classnn_1_1hid_1_1_vibration_converter.html">nn::hid::VibrationConverter</a></code> is a feature for converting sound data to vibration values in real time. This tool is the result of porting the <a href="../../Package/contents/Pages/Page_104490352.html">vibration converter</a> PC tool to the development hardware.</p>
<p>The tool automatically performs the following tasks. Applies a band-path filter to the entered sound data. Extracts the amplitude and frequency for each <code><a class="el" href="classnn_1_1hid_1_1_vibration_converter.html#a1590c98fe9eb5741c41f3eeef6cdecb3">nn::hid::VibrationConverter::ChunkDuration</a></code> of the filtered waveform. Perform this processing for both the low-frequency and high-frequency bandwidths to determine the vibration value.</p>
<p>This sample uses <code><a class="el" href="namespacenn_1_1audio.html#adaf2f0b6dfbaa1b020d61cd56b963965" title="Loads count number of samples from AuxType.">nn::audio::ReadAuxSendBuffer</a></code> to get sampling data from the audio renderer. Converts to vibration values for this data, by audio frame. Generates vibrations corresponding to the audio data being played by sending the converted vibration values to the controller vibration handle.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_ecf8d0eaef94eb773553998fdf21c0b9.html">Samples/Sources/Applications/HidVibrationRealTimeConverter</a> </code>.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>When running in a Windows environment, connect the Bluetooth dongle to the computer ahead of time, and pair the controller to the computer. When running in an SDEV or EDEV environment, pair the controller to the SDEV or EDEV ahead of time. You must connect one controller.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionHowToOperate"></a>
How to Use</h1>
<p>Run the sample program and press any of the controller buttons. After the Bluetooth connection is made, the LED on the controller stops flashing and remains lit.</p>
<p>Press the A, B, X, or Y Button. Sound effects are played, and the controller vibrates along with the sound.</p>
<p>The following operations are possible, using the different buttons.</p><ul>
<li>A Button: Play sound effect 0.</li>
<li>B Button: Play sound effect 1.</li>
<li>X Button: Play sound effect 2.</li>
<li>Y Button: Play sound effect 3.</li>
<li>L Button: Change the i3dl2 (Interactive 3D Audio Level 2) reverberation effect parameters.</li>
<li>R Button: Enable or disable conversion to vibration values.</li>
</ul>
<p>Press the + Button to terminate the sample program.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionPrecaution"></a>
Important Information</h1>
<p>Make sure that the controller is sufficiently charged before using it.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it. Connect one controller.</p>
<h1><a class="anchor" id="PageSampleHidVibrationConverter_SectionDetail"></a>
Description</h1>
<p>This sample program has the following flow.</p><ul>
<li>Set the audio parameters.</li>
<li>Set the audio sampling rate as the argument for <code><a class="el" href="classnn_1_1hid_1_1_vibration_converter.html" title="This class extracts the vibration value from the sound data.">nn::hid::VibrationConverter</a></code> and initialize (using a sampling rate of 48 KHz or 32 KHz).</li>
<li>Press the controller buttons to play sound effects.</li>
<li>Events are signaled at the audio frame level.</li>
<li>Use <code><a class="el" href="namespacenn_1_1audio.html#adaf2f0b6dfbaa1b020d61cd56b963965" title="Loads count number of samples from AuxType.">nn::audio::ReadAuxSendBuffer</a></code> to get sample data.</li>
<li>Convert the sample data to mono channel 16-bit PCM.</li>
<li>Use <code><a class="el" href="classnn_1_1hid_1_1_vibration_converter.html#a129000dfce3b353a923d9fb515630c67" title="Converts sound data to vibration values.">nn::hid::VibrationConverter::ProcessChunk</a></code> to convert sampling data to vibration values.</li>
<li>Use <code><a class="el" href="namespacenn_1_1hid.html#adc2935e350eab46cc13a4e9d33c61ef9" title="Send the vibration value to the vibration motor.">nn::hid::SendVibrationValue</a></code> to send the vibration values to the <code><a class="el" href="structnn_1_1hid_1_1_vibration_device_handle.html" title="The vibration motor&#39;s handle.">nn::hid::VibrationDeviceHandle</a></code> of the controller.</li>
<li>The controller vibrates.</li>
<li>Use <code><a class="el" href="namespacenn_1_1audio.html#a28965347a7dc482c646c14e579449359" title="Writes count number of samples to AuxType.">nn::audio::WriteAuxReturnBuffer</a></code> to rewrite the audio renderer to the sample. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
