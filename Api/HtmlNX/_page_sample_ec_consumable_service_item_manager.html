<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EcConsumableServiceItemManager | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_ec.html">Ec Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EcConsumableServiceItemManager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleEcConsumableServiceItemManager_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>This document describes the sample program that demonstrates the user save data manager for consumable service items.</p>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionBrief"></a>
Overview</h1>
<p>This sample program gets purchased consumable service items using the user save data manager. As a result of running this sample, some number of 'gold' and 'medicinal herb' items are added to the user save data.</p>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_25f99fc7954062b950859d2fa791b818.html">Samples/Sources/Applications/EcConsumableServiceItemManager/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<ul>
<li>You must create one or more accounts on the development hardware, and link the first account with the Nintendo Account in advance. </li>
<li>This sample program can only be built for and run on development hardware. Note that its use is not supported within a Windows environment. </li>
<li>Purchase the consumable service items using the sample program that gets a list of consumable service items. The application ID must match for the sample program that gets consumable service items and the sample program of the user save data manager. The sample program that gets consumable service items is located in <code><a class="el" href="dir_f2425460612e18987a25b6a533a46bb6.html">Samples/Sources/Applications/EcCatalog/ </a> </code>.</li>
</ul>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionHowToOperate"></a>
How to Use</h1>
<p>Build and run this program as you would an ordinary sample program. The execution of this program is displayed on the screen as text. The following list shows the correspondence between the items that are purchased using the sample program that gets a list of consumable service items, and the value provided by the sample program of the user save data manager. </p><ul>
<li>Sample gold (1 G to 20 G): Adds as many items of 'gold' as were purchased. </li>
<li>Sample item 1: Adds one medicinal herb (green). </li>
<li>Sample item 2: Adds one medicinal herb (red). </li>
<li>Sample item 3: Adds one medicinal herb (blue). </li>
<li>Sample item 4: Adds one medicinal herb (yellow). </li>
<li>Sample item 5: Adds one medicinal herb (purple). </li>
<li>Sample item 6: Adds one medicinal herb (pink). </li>
<li>Sample item 7: Adds one medicinal herb (orange). </li>
<li>Sample item 8: Adds one medicinal herb (white). </li>
<li>Sample item 9: Adds one medicinal herb (gray). </li>
<li>Sample item 10: Adds one medicinal herb (black). </li>
<li>Sample item 11: Adds one green, one red, and one blue medicinal herb. </li>
<li>Sample item 12: Adds one blue, one yellow, and one purple medicinal herb. </li>
<li>Sample item 13: Adds one purple, one pink, and one orange medicinal herb. </li>
<li>Sample item 14: Adds one orange, one white, and one gray medicinal herb. </li>
<li>Sample item 15: Adds one gray, one black, and one green medicinal herb. </li>
<li>Sample item 16: Adds 10 black medicinal herbs. </li>
<li>Sample item 17: Adds 100 black medicinal herbs. </li>
<li>Sample item 18: Adds 1000 black medicinal herbs. </li>
<li>Sample item 19: Adds one of one kind of medicinal herbs. </li>
<li>Sample item 20: Adds 10 of one kind of medicinal herbs.</li>
</ul>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionPrecaution"></a>
Important Information</h1>
<ul>
<li>For the actual product, change this application ID to the application ID of your retail application. Do not copy the sample application ID and use the sample as is. </li>
<li>Make sure that you define a service provision process corresponding to the item ID for all consumable service items registered in your retail product. If license information has been saved in the save data for a service that cannot be provided, the user does not benefit from the value of that license. In addition, if licenses for services that cannot be provided accumulate in the save data and the number reaches the maximum of 100 licenses that can be maintained by the method for managing user save data, the user cannot locally obtain newly purchased consumable service items from the server.</li>
</ul>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build and run the sample program.</p>
<h1><a class="anchor" id="PageSampleEcConsumableServiceItemManager_SectionDetail"></a>
Description</h1>
<p>Processes occur in the following order. </p><ul>
<li>Initialize the network connection management library and issue a network connection request. </li>
<li>Initialize the account system and select a user. </li>
<li>Open that user. </li>
<li>Create and mount user save data. </li>
<li>Initialize the utility feature for shop service access. </li>
<li>Initialize the shop service accessor, specifying <code>Type_OwnedConsumableServiceItem</code>. </li>
<li>Determine whether there is serialized license information in the user save data. If yes, get that data. </li>
<li>Initialize the consumable service item manager. If serialized license information has been obtained, pass it to the argument when initializing. </li>
<li>Recover, get, and consume licenses and provide services, repeating the process until there are no more item IDs for which services can be provided. (*) </li>
<li>Determine whether a license needs to be recovered, and request license recovery if necessary. </li>
<li>Determine whether a license is available, and request the license if it can be obtained. </li>
<li>Save the serialized license information to the user save data and commit before consuming any licenses. </li>
<li>Determine whether a license needs to be consumed, and request license consumption if necessary. </li>
<li>Save the result of consuming the license as serialized license information in the user save data, and commit. </li>
<li>Get the number of item IDs for which services can be provided. </li>
<li>If there are no more item IDs for which services can be provided after the licenses have been successfully consumed, end the process of providing consumable service items with the user save data manager. </li>
<li>Get saved 'gold' or 'medicinal herb' items from the user save data. </li>
<li>Get an item ID for which service can be provided. </li>
<li>Treat the item ID as a provided service. </li>
<li>Execute the process imparted to the gold or medicinal herb corresponding to that item ID. </li>
<li>Save the serialized license information and the gold or medicinal herb to the user save data as the result of the provided service. </li>
<li>Commit the serialized license information and the gold or medicinal herb at the same time. </li>
<li>Return to (*) and repeat the process. </li>
<li>Finalize the utility feature for shop service access. </li>
<li>Unmount the user save data. </li>
<li>Close the user. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
