<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Multi-Program Application | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_multi_program_application.html">Multi-Program Application</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Multi-Program Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleMultiProgramApplicationMain_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>Describes the sample program for the multi-program application.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionBrief"></a>
Overview</h1>
<p>This sample switches to the program with the specified program ID in a multi-program application, and shares save data and resource data.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_6450199121944143752b7c5c4ec1bd4d.html">Samples/Sources/Applications/MultiProgramApplication/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Requires installing a multi-program application (<code>0x01004b9000490000</code>), created from this sample, to development hardware. To install a multi-program application, build this program (<code>Main</code>, <code>Sub-A</code>, and <code>Sub-B</code>), as you would for an ordinary sample program, and then run <code>MergeApplication.bat</code> within the <code>MultiProgramApplication</code> directory.</p>
<p>This sample program can only be built for and run on development hardware. Note that its use is not supported within a Windows environment.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionHowToOperate"></a>
How to Use</h1>
<p>After the program starts, select a user.</p>
<p>Pressing the A Button switches to a program with the program ID specified using the B Button.</p>
<p>Pressing the B Button provides numerical input choices. Specify a program ID between <code>0</code> and <code>2</code>, where <code>0</code> is <code>Main</code>, <code>1</code> is <code>Sub-A</code>, and <code>2</code> is <code>Sub-B</code>.</p>
<p>Pressing the X Button provides text input choices. You can enter any text that was passed as arguments when the program was started by pressing the A Button.</p>
<p>Pressing the Y Button provides text input choices. Enter the string to save. When loading the various programs for <code>Main</code>, <code>Sub-A</code>, and <code>Sub-B</code>, the save data that is read is displayed. You can read and write save data from the <code>Sub-A</code> and <code>Sub-B</code> programs in the same way as from the <code>Main</code> program.</p>
<p>In addition, when using <code>Main ResourceData.txt</code>, a display is shown when reading the resource data saved in <code>Main</code> using the various <code>Main</code>, <code>Sub-A</code>, and <code>Sub-B</code> programs.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionPrecaution"></a>
Important Information</h1>
<p>We do not recommend playing any sounds before switching programs because sound is temporarily stopped when switching programs.</p>
<p>This sample overloads the global scope operators, <code>new</code> and <code>delete</code>, to avoid allocation exceptions. As a result, the <code>noexcept</code> declaration is used to indicate that allocation exceptions will not occur, even for class functions that use construction by means of <code>new</code> and the <code>STL</code> container class.</p>
<p><code>MergeApplication.bat</code> determines the platform (NX64 or NX32) and the build type (release, develop, or debug) from the last update time to update the Main build results. When you revise either of the non-<code>Main</code> programs, and build them with platforms or build types that differ from <code>Main</code>, a multi-program application in the latest state is not created.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build this program (<code>Main</code>, <code>Sub-A</code>, and <code>Sub-B</code>), as you would for an ordinary sample program, run <code>MergeApplication.bat</code> within the <code>MultiProgramApplication</code> directory, and run the application (<code>0x01004b9000490000</code>) installed on the console.</p>
<h1><a class="anchor" id="PageSampleMultiProgramApplicationMain_SectionDetail"></a>
Description</h1>
<p>Process for Switching Programs</p>
<p>Generally speaking, switches programs within the multi-program application, in the following order.</p>
<ul>
<li>Starts using the account. (<code><a class="el" href="namespacenn_1_1account.html#ac5870470963c9923c63f76e03c8c024e">nn::account::Initialize</a></code> "nn::account::Initialize")</li>
<li>Changes a user to an open state and gets the appropriate handle. (<code><a class="el" href="namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41">nn::account::OpenUser</a></code> "nn::account::OpenUser")</li>
<li>Makes user accounts in the <code>Open</code> state available between different programs while maintaining that state. (<code><a class="el" href="namespacenn_1_1account.html#aecdef7d061fbc4072e4c003a32ea13e8">nn::account::PushOpenUsers</a></code> "nn::account::PushOpenUsers")</li>
<li>Closes the current program and starts the specified program. (<code><a class="el" href="namespacenn_1_1oe.html#a7068b561ff066e1f20364c93c6cfd2f7">nn::oe::ExecuteProgram</a></code> "nn::oe::ExecuteProgram")</li>
<li>Gets the <code>UserHandle</code> for any user account held open between programs. (<code><a class="el" href="namespacenn_1_1account.html#accb35b97a8eca5f6690436550b8b29fa">nn::account::PopOpenUsers</a></code> "nn::account::PopOpenUsers")</li>
</ul>
<p>[Process for Reading and Writing Save Data From Other Programs]</p>
<p>Save data from other programs in a multi-program application is read and written in the following order. (There are no differences in the process between <code>Main</code> and <code>Sub</code>.) Common save data can be used regardless of <code>Main</code> or <code>Sub</code>.</p>
<ul>
<li>Starts using the account. (<code><a class="el" href="namespacenn_1_1account.html#ac5870470963c9923c63f76e03c8c024e">nn::account::Initialize</a></code> "nn::account::Initialize")</li>
<li>Changes a user to an open state and gets the appropriate handle. (<code><a class="el" href="namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41">nn::account::OpenUser</a></code> "nn::account::OpenUser")</li>
<li>Creates save data. (<code><a class="el" href="namespacenn_1_1fs.html#ae5f48fe542ce22263e1399e3b50190e8">nn::fs::EnsureSaveData</a></code> "nn::fs::EnsureSaveData")</li>
<li>Mounts save data after specifying a user. (<code><a class="el" href="namespacenn_1_1fs.html#afdbda9f24e47b02bb74da4558bbd0760">nn::fs::MountSaveData</a></code> "nn::fs::MountSaveData")</li>
<li>Opens a file. (<code><a class="el" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></code> "nn::fs::OpenFile")</li>
<li>Writes the contents of the specified memory to a file. (<code><a class="el" href="namespacenn_1_1fs.html#ab4351ff3a319e9a63093324a669492ab">nn::fs::WriteFile</a></code> "nn::fs::WriteFile")</li>
<li>Loads the content of the file into the specified memory. (<code><a class="el" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></code> "nn::fs::ReadFile")</li>
<li>Closes a file. (<code><a class="el" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a></code> "nn::fs::CloseFile")</li>
<li>Unmounts a mounted file system and frees the resources. (<code><a class="el" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></code> "nn::fs::Unmount")</li>
</ul>
<p>Process for Reading Resources From Other Programs</p>
<p>Resource data from other programs in a multi-program application is referenced in the following order. (There are no differences in the process between <code>Main</code> and <code>Sub</code>.)</p>
<p>You must specify the <code>ProgramIndex</code> of the program to reference in <code>NintendoSdkMeta/Core/FsAccessControlData/ResourceReferenceProgramIndices</code> in the NMETA file.</p>
<ul>
<li>Get the size needed for the <code><a class="el" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd" title="Mounts ROM resource data.">nn::fs::MountRom</a></code> file system cache. (<code><a class="el" href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a></code> "nn::fs::QueryMountRomCacheSize")</li>
<li>Mounts ROM resource data. (<code><a class="el" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a></code> "nn::fs::MountRom")</li>
<li>Opens a file. (<code><a class="el" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></code> "nn::fs::OpenFile")</li>
<li>Loads the content of the file into the specified memory. (<code><a class="el" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></code> "nn::fs::ReadFile")</li>
<li>Closes a file. (<code><a class="el" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a></code> "nn::fs::CloseFile")</li>
<li>Unmounts a mounted file system and frees the resources. (<code><a class="el" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></code> "nn::fs::Unmount")</li>
</ul>
<p>For more information about these functions, see the API Reference.</p>
<p>For more information about multi-program applications, see the section about multi-program applications in NintendoSDK Documents. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
