<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NvnTutorial05SettingUpRenderState/NvnTutorial05.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NvnTutorial05SettingUpRenderState/NvnTutorial05.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_nvn_tutorial05.html">NVN Tutorial 05: Setting Up Render State And Rendering Debug Text</a> and <tt>NvnTutorial05SettingUpRenderState/NvnTutorial05.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="util___matrix_8h.html">nn/util/util_Matrix.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="util___vector_8h.html">nn/util/util_Vector.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/nn_SdkAssert.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_inline_8h.html">nvn/nvn_FuncPtrInline.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nvn___func_ptr_impl_8h.html">nvn/nvn_FuncPtrImpl.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="preprocessor">    #ifndef WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><span class="preprocessor">    #define WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">    #ifndef NOMINMAX</span></div>
<div class="line"><span class="preprocessor">    #define NOMINMAX</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">    #include &lt;<a class="code" href="nn___windows_8h.html">nn/nn_Windows.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_tutorial_base_class_8h.html">nvntutorial/TutorialBaseClass.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_asset_file_loading_helper_8h.html">nvntutorial/AssetFileLoadingHelper.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_tutorial_util_8h.html">nvntutorial/TutorialUtil.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_debug_text_renderer_8h.html">nvntutorial/DebugTextRenderer.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nvntutorial/ShaderHeaders/SimpleTexturedModelAlphaDataHelper.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_texture_i_d_manager_8h.html">nvntutorial/TextureIDManager.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_uniform_buffer_8h.html">nvntutorial/UniformBuffer.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_CommandMemorySize = 1024;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> g_ControlMemorySize = 1024;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>    g_NumColorBuffers = 2;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>SettingUpRenderState : <span class="keyword">public</span> TutorialBaseClass</div>
<div class="line">{</div>
<div class="line">    <a name="a0"></a><a class="code" href="nn___macro_8h.html#a82564079f8f8c6547726002a9b168bdb">NN_DISALLOW_COPY</a>(SettingUpRenderState);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    SettingUpRenderState();</div>
<div class="line">    <span class="keyword">virtual</span> ~SettingUpRenderState();</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Init(<a class="code" href="group__nvn__c__funcptrs.html#ga6d548eaff5d46c83d72a818154476b84">PFNNVNBOOTSTRAPLOADERPROC</a> pLoader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow);</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">Shutdown</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Draw(uint64_t millisec);</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> NVNAPIENTRY DebugLayerCallback(</div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line">        <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line">        <span class="keywordtype">void</span>* pUser</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> UpdateCommandBuffer();</div>
<div class="line">    <span class="keywordtype">void</span> SetupModelUniformBlock();</div>
<div class="line">    <span class="keywordtype">void</span> UpdateUniformBlock(<span class="keyword">const</span> <a name="_a1"></a><a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; modelMat, <span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; projMat, <span class="keyword">const</span> <a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a> handle);</div>
<div class="line">    <span class="keywordtype">void</span> SetDefaultState();</div>
<div class="line">    <span class="keywordtype">void</span> SetStates(uint32_t frame);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> UpdateRenderTargets();</div>
<div class="line"> </div>
<div class="line">    <a name="_a2"></a><a class="code" href="struct_n_v_ndevice.html">NVNdevice</a>               m_Device;</div>
<div class="line">    <a name="_a3"></a><a class="code" href="struct_n_v_nqueue.html">NVNqueue</a>                m_Queue;</div>
<div class="line">    <span class="keywordtype">void</span>*                   m_pQueueMemory;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pCommandMemoryPool;</div>
<div class="line"> </div>
<div class="line">    ptrdiff_t               m_CommandPoolOffset;</div>
<div class="line">    <span class="keywordtype">void</span>*                   m_pControlPool;</div>
<div class="line">    <a name="_a4"></a><a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>        m_CommandBuffer;</div>
<div class="line">    <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>        m_CommandHandle;</div>
<div class="line"> </div>
<div class="line">    <a name="_a5"></a><a class="code" href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a>       m_RenderTargetBuilder;</div>
<div class="line">    <a name="_a6"></a><a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>*             m_pRenderTargets[g_NumColorBuffers];</div>
<div class="line">    <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>*             m_pDepthTarget;</div>
<div class="line"> </div>
<div class="line">    <a name="_a7"></a><a class="code" href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a>       m_SamplerBuilder;</div>
<div class="line">    <a name="_a8"></a><a class="code" href="struct_n_v_nbuffer_builder.html">NVNbufferBuilder</a>        m_BufferBuilder;</div>
<div class="line"> </div>
<div class="line">    <a name="_a9"></a><a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_RenderTargetPresentSync;</div>
<div class="line">    <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_CommandBufferSync;</div>
<div class="line">    AssetFileLoadingHelper* m_pAssetLoader;</div>
<div class="line">    AssetFileDataHolder*    m_pDataHolder;</div>
<div class="line"> </div>
<div class="line">    <a name="_a10"></a><a class="code" href="struct_n_v_nblend_state.html">NVNblendState</a>           m_BlendState;</div>
<div class="line">    <a name="_a11"></a><a class="code" href="struct_n_v_nchannel_mask_state.html">NVNchannelMaskState</a>     m_ChannelMaskState;</div>
<div class="line">    <a name="_a12"></a><a class="code" href="struct_n_v_ncolor_state.html">NVNcolorState</a>           m_ColorState;</div>
<div class="line">    <a name="_a13"></a><a class="code" href="struct_n_v_ndepth_stencil_state.html">NVNdepthStencilState</a>    m_DepthStencilState;</div>
<div class="line">    <a name="_a14"></a><a class="code" href="struct_n_v_nmultisample_state.html">NVNmultisampleState</a>     m_MultisampleState;</div>
<div class="line">    <a name="_a15"></a><a class="code" href="struct_n_v_npolygon_state.html">NVNpolygonState</a>         m_PolygonState;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pUniformBufferMemoryPool;</div>
<div class="line">    UniformBuffer           m_UniformBlockVertex;</div>
<div class="line">    UniformBuffer           m_UniformBlockFragment;</div>
<div class="line">    <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_UniformBlockUpdateSync;</div>
<div class="line"> </div>
<div class="line">    TextureIDManager*       m_pTextureIDManager;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span>                     m_ScreenWidth;</div>
<div class="line">    <span class="keywordtype">int</span>                     m_ScreenHeight;</div>
<div class="line"> </div>
<div class="line">    DebugTextRenderer*      m_pDebugTextRenderer;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span>                    m_State1;</div>
<div class="line">    <span class="keywordtype">bool</span>                    m_State2;</div>
<div class="line">    <span class="keywordtype">bool</span>                    m_State3;</div>
<div class="line">    <span class="keywordtype">bool</span>                    m_State4;</div>
<div class="line">    <span class="keywordtype">bool</span>                    m_ChangeState;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pRenderTargetMemoryPool;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>*             m_pShaderScratchMemoryPool;</div>
<div class="line">    <span class="keywordtype">size_t</span>                  m_ShaderScratchSize;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span>*                   m_pRenderTargetControlPool;</div>
<div class="line">    ptrdiff_t               m_RenderTargetCommandPoolOffset;</div>
<div class="line">    <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>        m_RenderTargetCommandBuffer;</div>
<div class="line">    <a class="code" href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a>        m_RenderTargetCommandHandle;</div>
<div class="line"> </div>
<div class="line">    <a name="_a16"></a><a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>*              m_pWindow;</div>
<div class="line">    <a name="_a17"></a><a class="code" href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a>        m_WindowBuilder;</div>
<div class="line">    <span class="keywordtype">int</span>                     m_CurrentWindowIndex;</div>
<div class="line">    <a class="code" href="struct_n_v_nsync.html">NVNsync</a>                 m_WindowSync;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span>                  m_ColorTargetSize;</div>
<div class="line">    <span class="keywordtype">size_t</span>                  m_DepthTargetSize;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState Constructor</span></div>
<div class="line"><span class="comment"> * --------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up default values for member data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">SettingUpRenderState::SettingUpRenderState() :</div>
<div class="line">    m_pQueueMemory(NULL),</div>
<div class="line">    m_pCommandMemoryPool(NULL),</div>
<div class="line">    m_pControlPool(NULL),</div>
<div class="line">    m_CommandHandle(NULL),</div>
<div class="line">    m_pDepthTarget(NULL),</div>
<div class="line">    m_pAssetLoader(NULL),</div>
<div class="line">    m_pDataHolder(NULL),</div>
<div class="line">    m_pUniformBufferMemoryPool(NULL),</div>
<div class="line">    m_pTextureIDManager(NULL),</div>
<div class="line">    m_ScreenWidth(0),</div>
<div class="line">    m_ScreenHeight(0),</div>
<div class="line">    m_pDebugTextRenderer(NULL),</div>
<div class="line">    m_State1(false),</div>
<div class="line">    m_State2(false),</div>
<div class="line">    m_State3(false),</div>
<div class="line">    m_State4(false),</div>
<div class="line">    m_ChangeState(false),</div>
<div class="line">    m_pRenderTargetMemoryPool(NULL),</div>
<div class="line">    m_pShaderScratchMemoryPool(NULL),</div>
<div class="line">    m_ShaderScratchSize(0),</div>
<div class="line">    m_pRenderTargetControlPool(NULL),</div>
<div class="line">    m_RenderTargetCommandHandle(NULL),</div>
<div class="line">    m_pWindow(NULL),</div>
<div class="line">    m_CurrentWindowIndex(NULL),</div>
<div class="line">    m_ColorTargetSize(0),</div>
<div class="line">    m_DepthTargetSize(0)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line">    {</div>
<div class="line">        m_pRenderTargets[i] = NULL;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::Init</span></div>
<div class="line"><span class="comment"> * --------------------------</span></div>
<div class="line"><span class="comment"> * Initialize NVN, load asset files, and create objects needed for the</span></div>
<div class="line"><span class="comment"> * application to run.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::Init(PFNNVNBOOTSTRAPLOADERPROC pLoader, <a class="code" href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a> nativeWindow)</div>
<div class="line">{</div>
<div class="line">    <a name="a18"></a><a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pLoader);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Load the function pointer to get other nvn function pointers. */</span></div>
<div class="line">    pfnc_nvnDeviceGetProcAddress = (<a class="code" href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a>) (*pLoader)(<span class="stringliteral">&quot;nvnDeviceGetProcAddress&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pfnc_nvnDeviceGetProcAddress == NULL)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* This can happen if an NVN driver is not installed on a Windows PC. */</span></div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;BootstrapLoader failed to find nvnDeviceGetProcAddress&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Load function pointers for creating nvn device</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnLoadCProcs( NULL, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check the API version. */</span></div>
<div class="line">    <span class="keywordtype">int</span> majorVersion, minorVersion;</div>
<div class="line">    nvnDeviceGetInteger( NULL, NVN_DEVICE_INFO_API_MAJOR_VERSION, &amp;majorVersion );</div>
<div class="line">    nvnDeviceGetInteger( NULL, NVN_DEVICE_INFO_API_MINOR_VERSION, &amp;minorVersion );</div>
<div class="line">    <span class="keywordflow">if</span>( majorVersion != <a name="a19"></a><a class="code" href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a> || minorVersion &lt; <a name="a20"></a><a class="code" href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( 0, <span class="stringliteral">&quot;NVN SDK not supported by current driver.&quot;</span> );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If debug or develop is enabled, turn on NVN&#39;s debug layer. */</span></div>
<div class="line">    <span class="keywordtype">int</span> deviceFlags = 0;</div>
<div class="line"><span class="preprocessor">#if defined(NN_SDK_BUILD_DEBUG) || defined(NN_SDK_BUILD_DEVELOP)</span></div>
<div class="line">    deviceFlags = <a class="code" href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a name="_a21"></a><a class="code" href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a> deviceBuilder;</div>
<div class="line">    nvnDeviceBuilderSetDefaults(&amp;deviceBuilder);</div>
<div class="line">    nvnDeviceBuilderSetFlags(&amp;deviceBuilder, deviceFlags);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (nvnDeviceInitialize(&amp;m_Device, &amp;deviceBuilder) == <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * This can fail for a few reasons; the most likely on Horizon is</span></div>
<div class="line"><span class="comment">             * insufficent device memory.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnDeviceInitialize&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Ensure function pointers are all loaded properly</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnLoadCProcs(&amp;m_Device, pfnc_nvnDeviceGetProcAddress );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the debug callback for the debug layer. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (deviceFlags &amp; NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT)</div>
<div class="line">    {</div>
<div class="line">        nvnDeviceInstallDebugCallback(</div>
<div class="line">            &amp;m_Device,</div>
<div class="line">            <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a><span class="keyword">&gt;</span>(&amp;DebugLayerCallback),</div>
<div class="line">            NULL, <span class="comment">// For testing purposes; any pointer is OK here.</span></div>
<div class="line">            <a name="a22"></a><a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a> <span class="comment">// NVN_TRUE = Enable the callback.</span></div>
<div class="line">            );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize the queue. */</span></div>
<div class="line">    <a name="_a23"></a><a class="code" href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a> queueBuilder;</div>
<div class="line">    nvnQueueBuilderSetDevice(&amp;queueBuilder, &amp;m_Device);</div>
<div class="line">    nvnQueueBuilderSetDefaults(&amp;queueBuilder);</div>
<div class="line">    nvnQueueBuilderSetComputeMemorySize(&amp;queueBuilder, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> minQueueCommandMemorySize = 0;</div>
<div class="line">    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_QUEUE_COMMAND_MEMORY_MIN_SIZE, &amp;minQueueCommandMemorySize);</div>
<div class="line">    nvnQueueBuilderSetCommandMemorySize(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line">    nvnQueueBuilderSetCommandFlushThreshold(&amp;queueBuilder, minQueueCommandMemorySize);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> neededQueueMemorySize = nvnQueueBuilderGetQueueMemorySize(&amp;queueBuilder);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((neededQueueMemorySize % <a name="a24"></a><a class="code" href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a>) != 0)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Memory size reported for queue is not the proper granularity&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_WIN )</span></div>
<div class="line">    m_pQueueMemory = NULL;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    m_pQueueMemory = AlignedAllocate(neededQueueMemorySize, <a name="a25"></a><a class="code" href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    nvnQueueBuilderSetQueueMemory(&amp;queueBuilder, m_pQueueMemory, neededQueueMemorySize);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (nvnQueueInitialize(&amp;m_Queue, &amp;queueBuilder) == <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnQueueInitialize failed&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize the rendering command buffer. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (nvnCommandBufferInitialize(&amp;m_CommandBuffer, &amp;m_Device) == NULL)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnCommandBufferInitialize&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Queries the device for the proper control and command</span></div>
<div class="line"><span class="comment">         * memory alignment for a command buffer.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    <span class="keywordtype">int</span> commandBufferCommandAlignment = 0;</div>
<div class="line">    <span class="keywordtype">int</span> commandBufferControlAlignment = 0;</div>
<div class="line">    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_COMMAND_ALIGNMENT, &amp;commandBufferCommandAlignment);</div>
<div class="line">    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_COMMAND_BUFFER_CONTROL_ALIGNMENT, &amp;commandBufferControlAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the command memory for the command buffers. */</span></div>
<div class="line">    m_pCommandMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pCommandMemoryPool-&gt;Init(NULL, Align(g_CommandMemorySize, commandBufferCommandAlignment) * 2, NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT, &amp;m_Device);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Grab the offset from the memory pool. */</span></div>
<div class="line">    m_CommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Allocate control memory for the command buffer. */</span></div>
<div class="line">    m_pControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add the memory to the command buffer. */</span></div>
<div class="line">    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Render Target Setting Command Buffer. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!nvnCommandBufferInitialize(&amp;m_RenderTargetCommandBuffer, &amp;m_Device))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target command buffer&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Grab the offset from the memory pool. */</span></div>
<div class="line">    m_RenderTargetCommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Allocate control memory for the command buffer. */</span></div>
<div class="line">    m_pRenderTargetControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add the memory to the command buffer. */</span></div>
<div class="line">    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize the render target sync. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_RenderTargetPresentSync, &amp;m_Device))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target present sync&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize the rendering command buffer sync. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_CommandBufferSync, &amp;m_Device))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize command buffer sync&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize the uniform buffer update sync. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_UniformBlockUpdateSync, &amp;m_Device))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize uniform block update sync&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_WindowSync, &amp;m_Device))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize window sync&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * NVN Blend State</span></div>
<div class="line"><span class="comment">         * ---------------</span></div>
<div class="line"><span class="comment">         * This render state controls the color blending equations</span></div>
<div class="line"><span class="comment">         * used for a single color buffer.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetBlendTarget   - Specifies the index of the color buffer</span></div>
<div class="line"><span class="comment">         *                    that the blend state is associated with.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetBlendFunc     - Speficies the blend functions for the</span></div>
<div class="line"><span class="comment">         *                    source/destination color and alpha channels.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetBlendEquation - Specifies the blend equation for the color</span></div>
<div class="line"><span class="comment">         *                    and alpha channels.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnBlendStateSetDefaults(&amp;m_BlendState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* NVN Channel Mask State</span></div>
<div class="line"><span class="comment">         * -----------------------</span></div>
<div class="line"><span class="comment">         * Enables/disables color channel writes for a single color buffer.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnChannelMaskStateSetDefaults(&amp;m_ChannelMaskState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* NVN Color State</span></div>
<div class="line"><span class="comment">         * ----------------</span></div>
<div class="line"><span class="comment">         * Controls processing of color values.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetBlendEnable - Enables/disables blending for a single</span></div>
<div class="line"><span class="comment">         *                  color buffer.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetLogicOp     - Specifies the logical operation to perform</span></div>
<div class="line"><span class="comment">         *                  for all color targets.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetAlphaTest   - Specifies a comparison function to use for</span></div>
<div class="line"><span class="comment">         *                  alpha testing.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnColorStateSetDefaults(&amp;m_ColorState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* NVN Depth Stencil State</span></div>
<div class="line"><span class="comment">         * ------------------------</span></div>
<div class="line"><span class="comment">         * Controls the depth testing and stencil testing operations.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetDepthTestEnable   - Specifies whether depth testing is enabled.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetDepthWriteEnable  - Specifies whether the depth buffer will be</span></div>
<div class="line"><span class="comment">         *                        updated by the depth test.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetDepthFunc         - Sets the comparison function used by the</span></div>
<div class="line"><span class="comment">         *                        depth test. (NVNdepthFunc)</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetStencilTestEnable - Specifies whether stencil testing is enabled.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetStencilFunc       - Sets the comparison function used by the</span></div>
<div class="line"><span class="comment">         *                        stencil test. (NVNstencilFunc)</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetStencilOp         - Specifies operations performed on stored stencil</span></div>
<div class="line"><span class="comment">         *                        values by the stencil test.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnDepthStencilStateSetDefaults(&amp;m_DepthStencilState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* NVN Multisample State</span></div>
<div class="line"><span class="comment">         * -----------------------</span></div>
<div class="line"><span class="comment">         * Controls multisample rasterization and sample processing.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetMultisampleEnable     - Enables/disables multisampling.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetSamples               - Specify number of sampler in the framebuffer.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetAlphaToCoverageEnable - Enable or disable alpha-to-coverage operation.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnMultisampleStateSetDefaults(&amp;m_MultisampleState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* NVN Polygon State</span></div>
<div class="line"><span class="comment">         * -----------------------</span></div>
<div class="line"><span class="comment">         * Controls the rasterization settings for rendering polygons.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetCullFace             - Specifies whether the front, back, or no face</span></div>
<div class="line"><span class="comment">         *                           should be culled.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetFrontFace            - Specifies whether clockwise or counter-clockwise</span></div>
<div class="line"><span class="comment">                                     polygons are considered front-facing.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetPolygonMode          - Specifies whether polygons are rendered as points,</span></div>
<div class="line"><span class="comment">         *                           lines, or triangles.</span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * SetPolygonOffsetEnables - Takes a bitfield that specifies whether polygon</span></div>
<div class="line"><span class="comment">         *                           offset is applied for point-mode, line-mode, and</span></div>
<div class="line"><span class="comment">         *                           filled polygons.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnPolygonStateSetDefaults(&amp;m_PolygonState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Builders */</span></div>
<div class="line">    nvnSamplerBuilderSetDevice(&amp;m_SamplerBuilder, &amp;m_Device);</div>
<div class="line">    nvnSamplerBuilderSetDefaults(&amp;m_SamplerBuilder);</div>
<div class="line"> </div>
<div class="line">    nvnBufferBuilderSetDevice(&amp;m_BufferBuilder, &amp;m_Device);</div>
<div class="line">    nvnBufferBuilderSetDefaults(&amp;m_BufferBuilder);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set up the texture builder for the render target. */</span></div>
<div class="line">    nvnTextureBuilderSetDevice(&amp;m_RenderTargetBuilder, &amp;m_Device);</div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line">    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_DISPLAY_BIT | NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line">    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, 1920, 1080);</div>
<div class="line">    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line">    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_RGBA8);</div>
<div class="line">    m_ColorTargetSize = nvnTextureBuilderGetStorageSize(&amp;m_RenderTargetBuilder);</div>
<div class="line"> </div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line">    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line">    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, 1920, 1080);</div>
<div class="line">    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line">    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_DEPTH32F);</div>
<div class="line">    m_DepthTargetSize = nvnTextureBuilderGetStorageSize(&amp;m_RenderTargetBuilder);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set up the render target memory pool. */</span></div>
<div class="line">    m_pRenderTargetMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pRenderTargetMemoryPool-&gt;Init(</div>
<div class="line">        NULL,</div>
<div class="line">        m_ColorTargetSize * g_NumColorBuffers + m_DepthTargetSize,</div>
<div class="line">        NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT | NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT,</div>
<div class="line">        &amp;m_Device);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the texture ID manager. */</span></div>
<div class="line">    m_pTextureIDManager = <span class="keyword">new</span> TextureIDManager(&amp;m_Device);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set up the uniform block for the cube. */</span></div>
<div class="line">    SetupModelUniformBlock();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> cacheSize = 0;</div>
<div class="line">    <a name="_a26"></a><a class="code" href="classnn_1_1_result.html">nn::Result</a> result = <a name="a27"></a><a class="code" href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a>(&amp;cacheSize);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.IsSuccess() );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span>* mountRomCacheBuffer = <span class="keyword">new</span>(std::nothrow) <span class="keywordtype">char</span>[cacheSize];</div>
<div class="line">    <a name="a28"></a><a class="code" href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a>(mountRomCacheBuffer);</div>
<div class="line"> </div>
<div class="line">    result = <a name="a29"></a><a class="code" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a>(<span class="stringliteral">&quot;rom&quot;</span>, mountRomCacheBuffer, cacheSize);</div>
<div class="line">    <a name="a30"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"> </div>
<div class="line">    m_pAssetLoader = <span class="keyword">new</span> AssetFileLoadingHelper(&amp;m_Device, m_pTextureIDManager);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Load in the asset file for the tutorial. */</span></div>
<div class="line">    m_pDataHolder = m_pAssetLoader-&gt;LoadAssetFile(<span class="stringliteral">&quot;cubeAlpha.out&quot;</span>);</div>
<div class="line">    m_pDataHolder-&gt;SetupAttributeStatesNVN(SimpleTexturedModelAlpha::Attributes::GetAttributeLocation);</div>
<div class="line">    m_pDataHolder-&gt;SetupTextureSamplerHandle(&amp;m_Device, m_pTextureIDManager, &amp;m_SamplerBuilder);</div>
<div class="line"> </div>
<div class="line">    m_ShaderScratchSize = m_pDataHolder-&gt;GetProgramData()[0]-&gt;m_ShaderScratchMemorySize;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_ShaderScratchSize != 0)</div>
<div class="line">    {</div>
<div class="line">        m_pShaderScratchMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">        m_pShaderScratchMemoryPool-&gt;Init(<span class="keyword">nullptr</span>,</div>
<div class="line">                                         m_ShaderScratchSize,</div>
<div class="line">                                         NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT | NVN_MEMORY_POOL_FLAGS_COMPRESSIBLE_BIT,</div>
<div class="line">                                         &amp;m_Device);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get an instance of the text renderer singleton and initialize it. */</span></div>
<div class="line">    m_pDebugTextRenderer = DebugTextRenderer::GetInstance();</div>
<div class="line">    m_pDebugTextRenderer-&gt;Init(&amp;m_Device, &amp;m_Queue, m_pTextureIDManager);</div>
<div class="line">    m_pDebugTextRenderer-&gt;SetDrawEnable(<span class="keyword">true</span>);</div>
<div class="line">    m_pDebugTextRenderer-&gt;SetSpacing(<span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the default (opaque, filled triangles) render state. */</span></div>
<div class="line">    SetDefaultState();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initial NVNwindow setup. */</span></div>
<div class="line">    nvnWindowBuilderSetDefaults(&amp;m_WindowBuilder);</div>
<div class="line">    nvnWindowBuilderSetDevice(&amp;m_WindowBuilder, &amp;m_Device);</div>
<div class="line">    nvnWindowBuilderSetNativeWindow(&amp;m_WindowBuilder, nativeWindow);</div>
<div class="line"> </div>
<div class="line">    <a name="a31"></a><a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(<span class="stringliteral">&quot;rom&quot;</span>);</div>
<div class="line">    <span class="keyword">delete</span>[] mountRomCacheBuffer;</div>
<div class="line">}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::SetDefaultState</span></div>
<div class="line"><span class="comment"> * -------------------------------------</span></div>
<div class="line"><span class="comment"> * This function sets up the render states in the</span></div>
<div class="line"><span class="comment"> * most common configuration for rendering simple</span></div>
<div class="line"><span class="comment"> * geometry (opaque, filled primitives, depth</span></div>
<div class="line"><span class="comment"> * testing, etc).</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::SetDefaultState()</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Setting up the depth stencil state. */</span></div>
<div class="line">    nvnDepthStencilStateSetDefaults(&amp;m_DepthStencilState);</div>
<div class="line">        <span class="comment">/* Enable the depth test. */</span></div>
<div class="line">    nvnDepthStencilStateSetDepthTestEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line">        <span class="comment">/* Enable writing to the depth buffer. */</span></div>
<div class="line">    nvnDepthStencilStateSetDepthWriteEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Set the depth function such that the</span></div>
<div class="line"><span class="comment">         * fragment passes the depth test if its</span></div>
<div class="line"><span class="comment">         * depth value is less than what is currently</span></div>
<div class="line"><span class="comment">         * in the depth buffer.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnDepthStencilStateSetDepthFunc(&amp;m_DepthStencilState, NVN_DEPTH_FUNC_LESS);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setting up the polygon state. */</span></div>
<div class="line">    nvnPolygonStateSetDefaults(&amp;m_PolygonState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Set the front face to be the one with the</span></div>
<div class="line"><span class="comment">         * counter-clockwise winding order.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    nvnPolygonStateSetFrontFace(&amp;m_PolygonState, NVNfrontFace::NVN_FRONT_FACE_CCW);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the face to be culled to the back face. */</span></div>
<div class="line">    nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_BACK);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the polygons to be filled. */</span></div>
<div class="line">    nvnPolygonStateSetPolygonMode(&amp;m_PolygonState, NVN_POLYGON_MODE_FILL);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the default multisample state. */</span></div>
<div class="line">    nvnMultisampleStateSetDefaults(&amp;m_MultisampleState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setting up the color state. */</span></div>
<div class="line">    nvnColorStateSetDefaults(&amp;m_ColorState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Turn off color blending. */</span></div>
<div class="line">    nvnColorStateSetBlendEnable(&amp;m_ColorState, 0, <a name="a32"></a><a class="code" href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the default channel mask state. */</span></div>
<div class="line">    nvnChannelMaskStateSetDefaults(&amp;m_ChannelMaskState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setting up the blend state. */</span></div>
<div class="line">    nvnBlendStateSetDefaults(&amp;m_BlendState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set some reasonable default alpha and color blend functions. */</span></div>
<div class="line">    nvnBlendStateSetBlendFunc(&amp;m_BlendState, NVNblendFunc::NVN_BLEND_FUNC_SRC_COLOR, NVNblendFunc::NVN_BLEND_FUNC_DST_COLOR, NVNblendFunc::NVN_BLEND_FUNC_SRC_ALPHA, NVNblendFunc::NVN_BLEND_FUNC_ONE_MINUS_SRC_ALPHA);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::SetStates</span></div>
<div class="line"><span class="comment"> * -------------------------------</span></div>
<div class="line"><span class="comment"> * This functions sets different render states</span></div>
<div class="line"><span class="comment"> * according to the range of values the current</span></div>
<div class="line"><span class="comment"> * frame is within.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::SetStates(uint32_t frame)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Set up the debug text grid size. */</span></div>
<div class="line">    m_pDebugTextRenderer-&gt;SetGridSize(120.0f, 36.0f);</div>
<div class="line"> </div>
<div class="line">    uint32_t segment = frame % 720;</div>
<div class="line"> </div>
<div class="line">    std::string name;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Segment from 0-179 set the default (opaque) state. */</span></div>
<div class="line">    <span class="keywordflow">if</span>(segment &lt; 180)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * If we&#39;re not already in the state,</span></div>
<div class="line"><span class="comment">             * change the render states and state bools.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <span class="keywordflow">if</span> (m_State1 == NULL)</div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = m_State1 = <span class="keyword">true</span>;</div>
<div class="line">            m_State2 = m_State3 = m_State4 = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Just set the default state. */</span></div>
<div class="line">            SetDefaultState();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        name = <span class="stringliteral">&quot;Opaque State&quot;</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Print out the current relevant state values. */</span></div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 5, <span class="stringliteral">&quot;Depth Test Enable: NVN_TRUE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 6, <span class="stringliteral">&quot;Polygon Mode:      NVN_POLGYON_MODE_FILL&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 7, <span class="stringliteral">&quot;Blend Enable:      NVN_FALSE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 8, <span class="stringliteral">&quot;Cull Face:         NVN_FACE_BACK&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">        <span class="comment">/* Segment from 180-359 set the wire frame state. */</span></div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(segment &lt; 360)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * If we&#39;re not already in the state,</span></div>
<div class="line"><span class="comment">             * change the render states and state bools.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <span class="keywordflow">if</span> (m_State2 == NULL)</div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = m_State2 = <span class="keyword">true</span>;</div>
<div class="line">            m_State1 = m_State3 = m_State4 = <span class="keyword">false</span>;</div>
<div class="line">            SetDefaultState();</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Don&#39;t cull and set the mode to draw lines. */</span></div>
<div class="line">            nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_NONE);</div>
<div class="line">            nvnPolygonStateSetPolygonMode(&amp;m_PolygonState, NVN_POLYGON_MODE_LINE);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        name = <span class="stringliteral">&quot;Wire Frame State&quot;</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Print out the current relevant state values. */</span></div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 5, <span class="stringliteral">&quot;Depth Test Enable: NVN_FALSE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 6, <span class="stringliteral">&quot;Polygon Mode:      NVN_POLGYON_MODE_LINE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 7, <span class="stringliteral">&quot;Blend Enable:      NVN_FALSE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 8, <span class="stringliteral">&quot;Cull Face:         NVN_FACE_NONE&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">        <span class="comment">/* Segment from 360-539 set the alpha state. */</span></div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(segment &lt; 540)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * If we&#39;re not already in the state,</span></div>
<div class="line"><span class="comment">             * change the render states and state bools.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <span class="keywordflow">if</span> (m_State3 == NULL)</div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = m_State3 = <span class="keyword">true</span>;</div>
<div class="line">            m_State1 = m_State2 = m_State4 = <span class="keyword">false</span>;</div>
<div class="line">            SetDefaultState();</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Don&#39;t cull */</span></div>
<div class="line">            nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_NONE);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Disable depth test. */</span></div>
<div class="line">            nvnDepthStencilStateSetDepthWriteEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a>);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Enable color blending. */</span></div>
<div class="line">            nvnColorStateSetBlendEnable(&amp;m_ColorState, 0, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        name = <span class="stringliteral">&quot;Alpha State&quot;</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Print out the current relevant state values. */</span></div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 5, <span class="stringliteral">&quot;Depth Test Enable: NVN_FALSE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 6, <span class="stringliteral">&quot;Polygon Mode:      NVN_POLGYON_MODE_FILL&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 7, <span class="stringliteral">&quot;Blend Enable:      NVN_TRUE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 8, <span class="stringliteral">&quot;Cull Face:         NVN_FACE_NONE&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">        <span class="comment">/* Segment from 540-719 set the alpha state. */</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * If we&#39;re not already in the state,</span></div>
<div class="line"><span class="comment">             * change the render states and state bools.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <span class="keywordflow">if</span>(m_State4 == NULL)</div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = m_State4 = <span class="keyword">true</span>;</div>
<div class="line">            m_State1 = m_State2 = m_State3 = <span class="keyword">false</span>;</div>
<div class="line">            SetDefaultState();</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Cull the front facing polygons. */</span></div>
<div class="line">            nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_FRONT);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            m_ChangeState = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        name = <span class="stringliteral">&quot;Cull Front State&quot;</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Print out the current relevant state values. */</span></div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 5, <span class="stringliteral">&quot;Depth Test Enable: NVN_TRUE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 6, <span class="stringliteral">&quot;Polygon Mode:      NVN_POLGYON_MODE_FILL&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 7, <span class="stringliteral">&quot;Blend Enable:      NVN_FALSE&quot;</span>);</div>
<div class="line">        m_pDebugTextRenderer-&gt;Printf(0, 8, <span class="stringliteral">&quot;Cull Face:         NVN_FACE_FRONT&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::string elipses;</div>
<div class="line">    uint32_t second = ((segment % 180) / 60);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; second + 1; ++i)</div>
<div class="line">    {</div>
<div class="line">        name += <span class="stringliteral">&quot; .&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Print out the state name. */</span></div>
<div class="line">    m_pDebugTextRenderer-&gt;SetGridSize(90.0f, 24.0f);</div>
<div class="line">    m_pDebugTextRenderer-&gt;Printf(36, 0, name.c_str(), frame);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::UpdateCommandBuffer</span></div>
<div class="line"><span class="comment"> * -----------------------------------------</span></div>
<div class="line"><span class="comment"> * Builds the command buffer to render the cube.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::UpdateCommandBuffer()</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Sync to safely overwrite memory. */</span></div>
<div class="line">    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line">    nvnSyncWait(&amp;m_CommandBufferSync, <a name="a33"></a><a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Reset the command buffer memory. */</span></div>
<div class="line">    nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">    nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Starts the recording of a new set of commands for the given command buffer. */</span></div>
<div class="line">    nvnCommandBufferBeginRecording(&amp;m_CommandBuffer);</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* Bind the texture and sampler descriptor pools. */</span></div>
<div class="line">        m_pTextureIDManager-&gt;SetSamplerPool(&amp;m_CommandBuffer);</div>
<div class="line">        m_pTextureIDManager-&gt;SetTexturePool(&amp;m_CommandBuffer);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Sets the scissor rectangle and viewport to the full screen */</span></div>
<div class="line">        nvnCommandBufferSetScissor(&amp;m_CommandBuffer, 0, 0, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line">        nvnCommandBufferSetViewport(&amp;m_CommandBuffer, 0, 0, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Clears the currently set render target at a given index. */</span></div>
<div class="line">        <span class="keywordtype">float</span> clear_color[4] = { 0.4f, 0.55f, 0.6f, 1.0f };</div>
<div class="line">        nvnCommandBufferClearColor(&amp;m_CommandBuffer, 0, clear_color, NVN_CLEAR_COLOR_MASK_RGBA);</div>
<div class="line">        nvnCommandBufferClearDepthStencil(&amp;m_CommandBuffer, 1.0, <a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>, 0, 255);</div>
<div class="line"> </div>
<div class="line">        std::vector&lt;NVNModelData*&gt;&amp;     modelData   = m_pDataHolder-&gt;GetModelData();</div>
<div class="line">        std::vector&lt;NVNProgramData*&gt;&amp;   programData = m_pDataHolder-&gt;GetProgramData();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (m_pShaderScratchMemoryPool)</div>
<div class="line">        {</div>
<div class="line">            nvnCommandBufferSetShaderScratchMemory(&amp;m_CommandBuffer, m_pShaderScratchMemoryPool-&gt;GetMemoryPool(), 0, m_ShaderScratchSize);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the render state objects. */</span></div>
<div class="line">        nvnCommandBufferBindBlendState(&amp;m_CommandBuffer, &amp;m_BlendState);</div>
<div class="line">        nvnCommandBufferBindChannelMaskState(&amp;m_CommandBuffer, &amp;m_ChannelMaskState);</div>
<div class="line">        nvnCommandBufferBindColorState(&amp;m_CommandBuffer, &amp;m_ColorState);</div>
<div class="line">        nvnCommandBufferBindDepthStencilState(&amp;m_CommandBuffer, &amp;m_DepthStencilState);</div>
<div class="line">        nvnCommandBufferBindMultisampleState(&amp;m_CommandBuffer, &amp;m_MultisampleState);</div>
<div class="line">        nvnCommandBufferBindPolygonState(&amp;m_CommandBuffer, &amp;m_PolygonState);</div>
<div class="line">        nvnCommandBufferSetSampleMask(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(~0));</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the vertex buffer(s). */</span></div>
<div class="line">        Model* model = &amp;modelData[0]-&gt;m_Model;</div>
<div class="line">        <a class="code" href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a> vboAddress = nvnBufferGetAddress(&amp;modelData[0]-&gt;m_VertexBuffer);</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; model-&gt;m_VertexAttributes.size(); ++i)</div>
<div class="line">        {</div>
<div class="line">            VertexAttribute&amp; attribute = model-&gt;m_VertexAttributes[i];</div>
<div class="line">            nvnCommandBufferBindVertexBuffer(&amp;m_CommandBuffer, attribute.m_Location, vboAddress + modelData[0]-&gt;m_VertexAttributeBufferOffsets[i], attribute.m_DataSize);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the vertex states. */</span></div>
<div class="line">        nvnCommandBufferBindVertexAttribState(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(modelData[0]-&gt;m_VertexAttributeStates.size()), &amp;modelData[0]-&gt;m_VertexAttributeStates[0]);</div>
<div class="line">        nvnCommandBufferBindVertexStreamState(&amp;m_CommandBuffer, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(modelData[0]-&gt;m_VertexStreamStates.size()), &amp;modelData[0]-&gt;m_VertexStreamStates[0]);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the shader program and uniforms. */</span></div>
<div class="line">        <span class="keywordtype">int</span> vertBindingLoc = SimpleTexturedModelAlpha::BlockVSUniformBlockData::GetBinding(NVN_SHADER_STAGE_VERTEX);</div>
<div class="line">        nvnCommandBufferBindUniformBuffer(&amp;m_CommandBuffer, NVN_SHADER_STAGE_VERTEX, vertBindingLoc, m_UniformBlockVertex.GetBufferAddress(), <span class="keyword">sizeof</span>(SimpleTexturedModelAlpha::BlockVSUniformBlockData));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> fragBindingLoc = SimpleTexturedModelAlpha::BlockFSUniformBlockData::GetBinding(NVN_SHADER_STAGE_FRAGMENT);</div>
<div class="line">        nvnCommandBufferBindUniformBuffer(&amp;m_CommandBuffer, NVN_SHADER_STAGE_FRAGMENT, fragBindingLoc, m_UniformBlockFragment.GetBufferAddress(), <span class="keyword">sizeof</span>(SimpleTexturedModelAlpha::BlockFSUniformBlockData));</div>
<div class="line"> </div>
<div class="line">        programData[0]-&gt;BindShaderProgram(&amp;m_CommandBuffer);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Draw the primitives. */</span></div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a> indexType = <span class="keyword">static_cast&lt;</span><a class="code" href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a><span class="keyword">&gt;</span>(modelData[0]-&gt;m_Model.m_IndexData.m_IndexType);</div>
<div class="line">        uint32_t numIndices = modelData[0]-&gt;m_Model.m_IndexData.m_DataSize / modelData[0]-&gt;m_Model.m_IndexData.m_Stride;</div>
<div class="line">        nvnCommandBufferDrawElements(&amp;m_CommandBuffer,</div>
<div class="line">                                     (<a class="code" href="group__nvn__c__enum.html#gab22437710b6816a67a1263d0087ded72">NVNdrawPrimitive</a>)modelData[0]-&gt;m_Model.m_NvnDrawPrimitiveType,</div>
<div class="line">                                     indexType,</div>
<div class="line">                                     numIndices,</div>
<div class="line">                                     nvnBufferGetAddress(&amp;modelData[0]-&gt;m_IndexBuffer));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_CommandHandle = nvnCommandBufferEndRecording(&amp;m_CommandBuffer);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::Draw</span></div>
<div class="line"><span class="comment"> * --------------------------</span></div>
<div class="line"><span class="comment"> * This method updates uniform data and submits the commands</span></div>
<div class="line"><span class="comment"> * recorded in the command buffer to the queue and presents</span></div>
<div class="line"><span class="comment"> * the render target to the screen.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::Draw(uint64_t millisec)</div>
<div class="line">{</div>
<div class="line">    <a name="a34"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(millisec);</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> s_Frame = 0;</div>
<div class="line">    ++s_Frame;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the current render target and setup/submit a command buffer to set it. */</span></div>
<div class="line">    <span class="keywordtype">int</span> index = UpdateRenderTargets();</div>
<div class="line"> </div>
<div class="line">    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_RenderTargetCommandHandle);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update the uniform data. */</span></div>
<div class="line">    <a name="_a35"></a><a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleTranslateMat;</div>
<div class="line">    nn::util::MatrixIdentity(&amp;simpleTranslateMat);</div>
<div class="line">    <a name="_a36"></a><a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleTranslateVector;</div>
<div class="line">    nn::util::VectorSet(&amp;simpleTranslateVector, -0.0f, 0.0f, -3.0f);</div>
<div class="line">    nn::util::MatrixSetTranslate(&amp;simpleTranslateMat, simpleTranslateVector);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleRotateXMat;</div>
<div class="line">    nn::util::MatrixIdentity(&amp;simpleRotateXMat);</div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleRotateXVector;</div>
<div class="line">    nn::util::VectorSet(&amp;simpleRotateXVector, 30.0f * 3.1459f / 180.0f, 0.0f, 0.0f);</div>
<div class="line">    nn::util::MatrixSetRotateXyz(&amp;simpleRotateXMat, simpleRotateXVector);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleRotateYMat;</div>
<div class="line">    nn::util::MatrixIdentity(&amp;simpleRotateYMat);</div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> simpleRotateYVector;</div>
<div class="line">    nn::util::VectorSet(&amp;simpleRotateYVector, 0.0f, s_Frame * 3.14159f / 180.0f, 0.0f);</div>
<div class="line">    nn::util::MatrixSetRotateXyz(&amp;simpleRotateYMat, simpleRotateYVector);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> simpleModelMat;</div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> tempMat1;</div>
<div class="line">    nn::util::MatrixMultiply(&amp;tempMat1, simpleRotateYMat, simpleRotateXMat);</div>
<div class="line">    nn::util::MatrixMultiply(&amp;simpleModelMat, tempMat1, simpleTranslateMat);</div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> simpleModelMat44;</div>
<div class="line">    nn::util::MatrixConvert(&amp;simpleModelMat44, simpleModelMat);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> projMat44;</div>
<div class="line">    nn::util::MatrixPerspectiveFieldOfViewRightHanded(&amp;projMat44, 60.0f * 3.14159f / 180.0f, <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(m_ScreenWidth) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(m_ScreenHeight), 1.0f, 1000.0f);</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;NVNTextureData*&gt;&amp; textureData = m_pDataHolder-&gt;GetTextureData();</div>
<div class="line">    UpdateUniformBlock(simpleModelMat44, projMat44, textureData[0]-&gt;m_TextureHandle);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set the render state for the current frame. */</span></div>
<div class="line">    SetStates(s_Frame);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If the state changed, re-record the command buffer. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (m_ChangeState)</div>
<div class="line">    {</div>
<div class="line">        UpdateCommandBuffer();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nvnSyncWait(&amp;m_WindowSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line">    nvnQueueSubmitCommands(&amp;m_Queue, 1, &amp;m_CommandHandle);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Print out the frame counter on the screen. */</span></div>
<div class="line">    m_pDebugTextRenderer-&gt;Printf(0, 0, <span class="stringliteral">&quot;Frames: %i&quot;</span>, s_Frame);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Draw the accumulated debug text for the frame. */</span></div>
<div class="line">    m_pDebugTextRenderer-&gt;Draw(m_pRenderTargets[index], m_ScreenWidth, m_ScreenHeight);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Present the texture. */</span></div>
<div class="line">    nvnQueuePresentTexture(&amp;m_Queue, m_pWindow, index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::UpdateRenderTargets</span></div>
<div class="line"><span class="comment"> * -----------------------------------------</span></div>
<div class="line"><span class="comment"> * Gets the index of the current render target from the NVNwindow</span></div>
<div class="line"><span class="comment"> * and records a command buffer that sets it up to be rendered to.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> SettingUpRenderState::UpdateRenderTargets()</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Get next render target to be used */</span></div>
<div class="line">    <a class="code" href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a> result = nvnWindowAcquireTexture(m_pWindow, &amp;m_WindowSync, &amp;m_CurrentWindowIndex);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result == NVN_WINDOW_ACQUIRE_TEXTURE_RESULT_SUCCESS);</div>
<div class="line">    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(result);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Wait for the previous fram to finish before rewriting the command buffer. */</span></div>
<div class="line">    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line">    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Reset the command buffer memory. */</span></div>
<div class="line">    nvnCommandBufferAddCommandMemory(&amp;m_RenderTargetCommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_RenderTargetCommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">    nvnCommandBufferAddControlMemory(&amp;m_RenderTargetCommandBuffer, m_pRenderTargetControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Record the command buffer to set the target. */</span></div>
<div class="line">    nvnCommandBufferBeginRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line">    nvnCommandBufferSetRenderTargets(&amp;m_RenderTargetCommandBuffer, 1, &amp;m_pRenderTargets[m_CurrentWindowIndex], NULL, m_pDepthTarget, NULL);</div>
<div class="line">    m_RenderTargetCommandHandle = nvnCommandBufferEndRecording(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Return the index. */</span></div>
<div class="line">    <span class="keywordflow">return</span> m_CurrentWindowIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::Resize</span></div>
<div class="line"><span class="comment"> * ----------------------------</span></div>
<div class="line"><span class="comment"> * This method is called everytime the window is resized and is passed</span></div>
<div class="line"><span class="comment"> * the new size of the window. It frees the old render target and creates a new</span></div>
<div class="line"><span class="comment"> * render target with the new screen size. A new set of commands for the command buffer</span></div>
<div class="line"><span class="comment"> * is recorded.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Check for the window being minimized or having no visible surface. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (width == 0 || height == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Save the current height and width of the screen. */</span></div>
<div class="line">    m_ScreenWidth = width;</div>
<div class="line">    m_ScreenHeight = height;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Sync to safely rewrite the command buffer. */</span></div>
<div class="line">    nvnQueueFenceSync(&amp;m_Queue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line">    nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If it&#39;s the first time Resize is called, allocate the NVNwindow. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (m_pWindow == NULL)</div>
<div class="line">    {</div>
<div class="line">        m_pWindow = <span class="keyword">new</span> <a class="code" href="struct_n_v_nwindow.html">NVNwindow</a>;</div>
<div class="line">    }</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Otherwise finalize (free) the NVNwindow used for the previous window size.</span></div>
<div class="line"><span class="comment">         * The NVNWindow must be finalized before a render target it owns is finalized.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        nvnWindowFinalize(m_pWindow);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set up the builder for the render target. */</span></div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line">    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_DISPLAY_BIT | NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line">    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line">    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line">    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_RGBA8);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* If it&#39;s the first time Resize is called, allocate the render target. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!m_pRenderTargets[i])</div>
<div class="line">        {</div>
<div class="line">            m_pRenderTargets[i] = <span class="keyword">new</span> <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line">        }</div>
<div class="line">            <span class="comment">/* Otherwise finalize (free) the render target used for the previous window size. */</span></div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            nvnTextureFinalize(m_pRenderTargets[i]);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        nvnTextureBuilderSetStorage(&amp;m_RenderTargetBuilder, m_pRenderTargetMemoryPool-&gt;GetMemoryPool(), m_ColorTargetSize * i);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Create the texture using the current state of the texture builder. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!nvnTextureInitialize(m_pRenderTargets[i], &amp;m_RenderTargetBuilder))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize render target&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!m_pDepthTarget)</div>
<div class="line">    {</div>
<div class="line">        m_pDepthTarget = <span class="keyword">new</span> <a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(m_pDepthTarget);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Initialize depth buffer for render target. */</span></div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_RenderTargetBuilder);</div>
<div class="line">    nvnTextureBuilderSetFlags(&amp;m_RenderTargetBuilder, NVN_TEXTURE_FLAGS_COMPRESSIBLE_BIT);</div>
<div class="line">    nvnTextureBuilderSetSize2D(&amp;m_RenderTargetBuilder, m_ScreenWidth, m_ScreenHeight);</div>
<div class="line">    nvnTextureBuilderSetTarget(&amp;m_RenderTargetBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line">    nvnTextureBuilderSetFormat(&amp;m_RenderTargetBuilder, NVN_FORMAT_DEPTH32F);</div>
<div class="line"> </div>
<div class="line">    nvnTextureBuilderSetStorage(&amp;m_RenderTargetBuilder, m_pRenderTargetMemoryPool-&gt;GetMemoryPool(), m_ColorTargetSize * g_NumColorBuffers);</div>
<div class="line">    nvnTextureInitialize(m_pDepthTarget, &amp;m_RenderTargetBuilder);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Pass off the render targets to the window. */</span></div>
<div class="line">    nvnWindowBuilderSetTextures(&amp;m_WindowBuilder, g_NumColorBuffers, m_pRenderTargets);</div>
<div class="line">    nvnWindowInitialize(m_pWindow, &amp;m_WindowBuilder);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update the cube rendering command buffer. */</span></div>
<div class="line">    UpdateCommandBuffer();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState Destructor</span></div>
<div class="line"><span class="comment"> * -------------------------------</span></div>
<div class="line"><span class="comment"> * Empty destructor.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">SettingUpRenderState::~SettingUpRenderState()</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::Shutdown</span></div>
<div class="line"><span class="comment"> * ------------------------------</span></div>
<div class="line"><span class="comment"> * This method cleans up all nvn objects and dynamically allocated memory.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::Shutdown()</div>
<div class="line">{</div>
<div class="line">    nvnQueueFinish(&amp;m_Queue);</div>
<div class="line"> </div>
<div class="line">    nvnSyncFinalize(&amp;m_CommandBufferSync);</div>
<div class="line">    nvnSyncFinalize(&amp;m_UniformBlockUpdateSync);</div>
<div class="line">    nvnSyncFinalize(&amp;m_RenderTargetPresentSync);</div>
<div class="line">    nvnSyncFinalize(&amp;m_WindowSync);</div>
<div class="line"> </div>
<div class="line">    nvnCommandBufferFinalize(&amp;m_RenderTargetCommandBuffer);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pRenderTargetControlPool)</div>
<div class="line">    {</div>
<div class="line">        AlignedDeallocate(m_pRenderTargetControlPool);</div>
<div class="line">        m_pRenderTargetControlPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nvnCommandBufferFinalize(&amp;m_CommandBuffer);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pCommandMemoryPool)</div>
<div class="line">    {</div>
<div class="line">        m_pCommandMemoryPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pCommandMemoryPool;</div>
<div class="line">        m_pCommandMemoryPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_pControlPool)</div>
<div class="line">    {</div>
<div class="line">        AlignedDeallocate(m_pControlPool);</div>
<div class="line">        m_pControlPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pWindow)</div>
<div class="line">    {</div>
<div class="line">        nvnWindowFinalize(m_pWindow);</div>
<div class="line">        <span class="keyword">delete</span> m_pWindow;</div>
<div class="line">        m_pWindow = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; g_NumColorBuffers; ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(m_pRenderTargets[i])</div>
<div class="line">        {</div>
<div class="line">            nvnTextureFinalize(m_pRenderTargets[i]);</div>
<div class="line">            <span class="keyword">delete</span> m_pRenderTargets[i];</div>
<div class="line">            m_pRenderTargets[i] = NULL;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pDepthTarget)</div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(m_pDepthTarget);</div>
<div class="line">        <span class="keyword">delete</span> m_pDepthTarget;</div>
<div class="line">        m_pDepthTarget = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_UniformBlockVertex.Finalize();</div>
<div class="line">    m_UniformBlockFragment.Finalize();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pUniformBufferMemoryPool)</div>
<div class="line">    {</div>
<div class="line">        m_pUniformBufferMemoryPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pUniformBufferMemoryPool;</div>
<div class="line">        m_pUniformBufferMemoryPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pDataHolder)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pDataHolder;</div>
<div class="line">        m_pDataHolder = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pAssetLoader)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pAssetLoader;</div>
<div class="line">        m_pAssetLoader = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pTextureIDManager)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pTextureIDManager;</div>
<div class="line">        m_pTextureIDManager = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pDebugTextRenderer)</div>
<div class="line">    {</div>
<div class="line">        m_pDebugTextRenderer-&gt;CleanUp();</div>
<div class="line">        m_pDebugTextRenderer = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pRenderTargetMemoryPool)</div>
<div class="line">    {</div>
<div class="line">        m_pRenderTargetMemoryPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pRenderTargetMemoryPool;</div>
<div class="line">        m_pRenderTargetMemoryPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_pShaderScratchMemoryPool)</div>
<div class="line">    {</div>
<div class="line">        m_pShaderScratchMemoryPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pShaderScratchMemoryPool;</div>
<div class="line">        m_pShaderScratchMemoryPool = NULL;</div>
<div class="line">        m_ShaderScratchSize = 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nvnQueueFinalize(&amp;m_Queue);</div>
<div class="line">    <span class="keywordflow">if</span> (m_pQueueMemory)</div>
<div class="line">    {</div>
<div class="line">        AlignedDeallocate(m_pQueueMemory);</div>
<div class="line">        m_pQueueMemory = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nvnDeviceFinalize(&amp;m_Device);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::SetupModelUniformBlock</span></div>
<div class="line"><span class="comment"> * --------------------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up the uniform blocks for rendering.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::SetupModelUniformBlock()</div>
<div class="line">{</div>
<div class="line">    m_pUniformBufferMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> bufferAlignment = 0;</div>
<div class="line">    nvnDeviceGetInteger(&amp;m_Device, NVN_DEVICE_INFO_UNIFORM_BUFFER_ALIGNMENT, &amp;bufferAlignment);</div>
<div class="line">    m_pUniformBufferMemoryPool-&gt;Init(NULL,</div>
<div class="line">                                     Align(<span class="keyword">sizeof</span>(SimpleTexturedModel::BlockVSUniformBlockData), bufferAlignment) +</div>
<div class="line">                                     Align(<span class="keyword">sizeof</span>(SimpleTexturedModel::BlockFSUniformBlockData), bufferAlignment),</div>
<div class="line">                                     NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line">                                     &amp;m_Device);</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        * Initialize the uniform buffers with a pointer to the</span></div>
<div class="line"><span class="comment">        * device and the appropriate size for the shader.</span></div>
<div class="line"><span class="comment">        */</span></div>
<div class="line">    m_UniformBlockVertex.Init(&amp;m_Device, <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockVSUniformBlockData), m_pUniformBufferMemoryPool);</div>
<div class="line">    m_UniformBlockFragment.Init(&amp;m_Device, <span class="keyword">sizeof</span>(SimpleTexturedModel::BlockFSUniformBlockData), m_pUniformBufferMemoryPool);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SettingUpRenderState::UpdateUniformBlock</span></div>
<div class="line"><span class="comment"> * ----------------------------------------</span></div>
<div class="line"><span class="comment"> * Updates the uniform block data with new data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::UpdateUniformBlock(<span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; modelMatrix, <span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a>&amp; projectionMatrix, <span class="keyword">const</span> <a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a> handle)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Sync to safely overwrite memory. */</span></div>
<div class="line">    nvnQueueFenceSync(&amp;m_Queue, &amp;m_UniformBlockUpdateSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">    nvnQueueFlush(&amp;m_Queue);</div>
<div class="line">    nvnSyncWait(&amp;m_UniformBlockUpdateSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Creates an instance of the vertex shader&#39;s helper class. */</span></div>
<div class="line">    SimpleTexturedModel::BlockVSUniformBlockData vertexShaderData;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Sets the data in the helper class. The helper class functions</span></div>
<div class="line"><span class="comment">         * automatically handle placing the data at the correct offset</span></div>
<div class="line"><span class="comment">         * in the uniform block.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"> </div>
<div class="line">    <a name="_a37"></a><a class="code" href="structnn_1_1util_1_1_float_row_major4x4.html">nn::util::Float4x4</a> temp;</div>
<div class="line">    nn::util::MatrixStore(&amp;temp, modelMatrix);</div>
<div class="line">    vertexShaderData.SetUniform_u_modelMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> cameraMat;</div>
<div class="line">    nn::util::MatrixIdentity(&amp;cameraMat);</div>
<div class="line">    nn::util::MatrixStore(&amp;temp, cameraMat);</div>
<div class="line">    vertexShaderData.SetUniform_u_viewMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"> </div>
<div class="line">    nn::util::MatrixStore(&amp;temp, projectionMatrix);</div>
<div class="line">    vertexShaderData.SetUniform_u_projMtx(*<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">float</span>(*)[16]<span class="keyword">&gt;</span>(&amp;temp));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Copy the set up data into the uniform buffer. */</span></div>
<div class="line">    m_UniformBlockVertex.SetData(&amp;vertexShaderData, <span class="keyword">sizeof</span>(vertexShaderData));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Creates an instance of the fragment shader&#39;s helper class. */</span></div>
<div class="line">    SimpleTexturedModel::BlockFSUniformBlockData fragmentShaderData;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Sets the data in the helper class. */</span></div>
<div class="line">    fragmentShaderData.SetUniform_u_bindlessTex(handle);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Copy the set up data into the uniform buffer. */</span></div>
<div class="line">    m_UniformBlockFragment.SetData(&amp;fragmentShaderData, <span class="keyword">sizeof</span>(fragmentShaderData));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> SettingUpRenderState::DebugLayerCallback(</div>
<div class="line">    <a class="code" href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a> source,</div>
<div class="line">    <a class="code" href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a> type,</div>
<div class="line">    <span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line">    <a class="code" href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a> severity,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div>
<div class="line">    <span class="keywordtype">void</span>* pUser</div>
<div class="line">    )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pUser == NULL);</div>
<div class="line">    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(pUser);</div>
<div class="line"> </div>
<div class="line">    <a name="a38"></a><a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;NVN Debug Layer Callback:\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  source:       0x%08x\n&quot;</span>, source);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  type:         0x%08x\n&quot;</span>, type);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  id:           0x%08x\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  severity:     0x%08x\n&quot;</span>, severity);</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;  message:      %s\n&quot;</span>,     message);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Debug layer callback hit&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TutorialBaseClass* t()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> SettingUpRenderState tut;</div>
<div class="line">    <span class="keywordflow">return</span> (&amp;tut);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line">{</div>
<div class="line">    TutorialRun();</div>
<div class="line">}</div>
<div class="ttc" id="a_asset_file_loading_helper_8h_html"><div class="ttname"><a href="_asset_file_loading_helper_8h.html">AssetFileLoadingHelper.h</a></div><div class="ttdoc">This file defines a helper class used to load in asset files generated by Tutorial02.</div></div>
<div class="ttc" id="a_debug_text_renderer_8h_html"><div class="ttname"><a href="_debug_text_renderer_8h.html">DebugTextRenderer.h</a></div><div class="ttdoc">This file defines a singleton class that renders text to the screen.</div></div>
<div class="ttc" id="a_texture_i_d_manager_8h_html"><div class="ttname"><a href="_texture_i_d_manager_8h.html">TextureIDManager.h</a></div><div class="ttdoc">This file defines a class that wraps the texture and sampler registering process.</div></div>
<div class="ttc" id="a_tutorial_base_class_8h_html"><div class="ttname"><a href="_tutorial_base_class_8h.html">TutorialBaseClass.h</a></div><div class="ttdoc">This class is shared among all tutorials in order to abstract away per-operating system details relat...</div></div>
<div class="ttc" id="a_tutorial_util_8h_html"><div class="ttname"><a href="_tutorial_util_8h.html">TutorialUtil.h</a></div><div class="ttdoc">This file defines the interface for utility functions used in the tutorials.</div></div>
<div class="ttc" id="a_uniform_buffer_8h_html"><div class="ttname"><a href="_uniform_buffer_8h.html">UniformBuffer.h</a></div><div class="ttdoc">This file defines a helper class for setting up uniform blocks.</div></div>
<div class="ttc" id="aclassnn_1_1_result_html"><div class="ttname"><a href="classnn_1_1_result.html">nn::Result</a></div><div class="ttdoc">Represents the generic result of an operation.</div><div class="ttdef"><b>Definition:</b> nn_Result.h:32</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="agroup__nvn__c__api__typedefs_html_ga05b6b3dd5b965bd81efe2d03cee0bbbd"><div class="ttname"><a href="group__nvn__c__api__typedefs.html#ga05b6b3dd5b965bd81efe2d03cee0bbbd">NVNnativeWindow</a></div><div class="ttdeci">void * NVNnativeWindow</div><div class="ttdoc">Platform native window type.</div><div class="ttdef"><b>Definition:</b> nvn.h:159</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga48151b7e768a13685d77d1a4c464a33b"><div class="ttname"><a href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a></div><div class="ttdeci">#define NVN_TRUE</div><div class="ttdoc">Boolean condition with a value of true.</div><div class="ttdef"><b>Definition:</b> nvn.h:4566</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga4eb83fe713146d844b1ac7f8e9c3dada"><div class="ttname"><a href="group__nvn__c__defines.html#ga4eb83fe713146d844b1ac7f8e9c3dada">NVN_API_MAJOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MAJOR_VERSION</div><div class="ttdoc">Major version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:59</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga6c3444e501307a094f1d57abf1059aed"><div class="ttname"><a href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a></div><div class="ttdeci">#define NVN_WAIT_TIMEOUT_MAXIMUM</div><div class="ttdoc">When waiting on NVNsync objects, wait indefinitely until the sync object is signaled.</div><div class="ttdef"><b>Definition:</b> nvn.h:4574</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gaa8b4a49a0c4f852b73be3b50bb3f270e"><div class="ttname"><a href="group__nvn__c__defines.html#gaa8b4a49a0c4f852b73be3b50bb3f270e">NVN_API_MINOR_VERSION</a></div><div class="ttdeci">#define NVN_API_MINOR_VERSION</div><div class="ttdoc">Minor version of the NVN API.</div><div class="ttdef"><b>Definition:</b> nvn.h:62</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gace820e752b400cf7aa36e9684a7f45cb"><div class="ttname"><a href="group__nvn__c__defines.html#gace820e752b400cf7aa36e9684a7f45cb">NVN_MEMORY_POOL_STORAGE_ALIGNMENT</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_ALIGNMENT</div><div class="ttdoc">Required base address alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4578</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gad12fb86930f09043843be6b39c78bb1b"><div class="ttname"><a href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a></div><div class="ttdeci">#define NVN_FALSE</div><div class="ttdoc">Boolean condition with a value of false.</div><div class="ttdef"><b>Definition:</b> nvn.h:4563</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gadfd69601d2d9f953c55808127ba60853"><div class="ttname"><a href="group__nvn__c__defines.html#gadfd69601d2d9f953c55808127ba60853">NVN_MEMORY_POOL_STORAGE_GRANULARITY</a></div><div class="ttdeci">#define NVN_MEMORY_POOL_STORAGE_GRANULARITY</div><div class="ttdoc">Required size alignment for app-specified memory used to back memory pools.</div><div class="ttdef"><b>Definition:</b> nvn.h:4582</div></div>
<div class="ttc" id="agroup__nvn__c__entryfuncptrs_html_ga9557d931192cd70c7d2810a6425326eb"><div class="ttname"><a href="group__nvn__c__entryfuncptrs.html#ga9557d931192cd70c7d2810a6425326eb">PFNNVNDEVICEGETPROCADDRESSPROC</a></div><div class="ttdeci">PFNNVNGENERICFUNCPTRPROC(* PFNNVNDEVICEGETPROCADDRESSPROC)(const NVNdevice *device, const char *name)</div><div class="ttdoc">Function pointer type to call nvnDeviceGetProcAddress().</div><div class="ttdef"><b>Definition:</b> nvn.h:15922</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga58e9b155d7f2272b95044eed1f40415e"><div class="ttname"><a href="group__nvn__c__enum.html#ga58e9b155d7f2272b95044eed1f40415e">NVNwindowAcquireTextureResult</a></div><div class="ttdeci">NVNwindowAcquireTextureResult</div><div class="ttdoc">Specifies the result of acquiring a texture from a window.</div><div class="ttdef"><b>Definition:</b> nvn.h:2673</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga661d03f0e1c886c81d5ccc67935df182"><div class="ttname"><a href="group__nvn__c__enum.html#ga661d03f0e1c886c81d5ccc67935df182">NVNdebugCallbackType</a></div><div class="ttdeci">NVNdebugCallbackType</div><div class="ttdoc">Specifies the type of event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2924</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga6d72003c068d7795201e77d27bf8c7ac"><div class="ttname"><a href="group__nvn__c__enum.html#ga6d72003c068d7795201e77d27bf8c7ac">NVNdebugCallbackSeverity</a></div><div class="ttdeci">NVNdebugCallbackSeverity</div><div class="ttdoc">Specifies the severity of the event triggering a debug callback.</div><div class="ttdef"><b>Definition:</b> nvn.h:2954</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga70a49f98019e4832818240297bee7eb3"><div class="ttname"><a href="group__nvn__c__enum.html#ga70a49f98019e4832818240297bee7eb3">NVNdebugCallbackSource</a></div><div class="ttdeci">NVNdebugCallbackSource</div><div class="ttdoc">Specifies the type of operation being performed when a debug callback is made.</div><div class="ttdef"><b>Definition:</b> nvn.h:2902</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gaaf90e0c2dbdc1e42db8192f0c0cb1522"><div class="ttname"><a href="group__nvn__c__enum.html#gaaf90e0c2dbdc1e42db8192f0c0cb1522">NVNindexType</a></div><div class="ttdeci">NVNindexType</div><div class="ttdoc">Specifies a data type used for index values in DrawElements commands.</div><div class="ttdef"><b>Definition:</b> nvn.h:2232</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gab22437710b6816a67a1263d0087ded72"><div class="ttname"><a href="group__nvn__c__enum.html#gab22437710b6816a67a1263d0087ded72">NVNdrawPrimitive</a></div><div class="ttdeci">NVNdrawPrimitive</div><div class="ttdoc">Specifies the type of primitive to render in draw calls.</div><div class="ttdef"><b>Definition:</b> nvn.h:2120</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6"><div class="ttname"><a href="group__nvn__c__enum.html#gga9c68350bf64f2e7a90a23290c26872d3ac002cdaba27241c296213d4722dad0a6">NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</a></div><div class="ttdeci">@ NVN_DEVICE_FLAG_DEBUG_ENABLE_LEVEL_2_BIT</div><div class="ttdoc">Enable (TRUE) or disable (FALSE) level 2 debug layer for the device.</div><div class="ttdef"><b>Definition:</b> nvn.h:2828</div></div>
<div class="ttc" id="agroup__nvn__c__funcptrs_html_ga6d548eaff5d46c83d72a818154476b84"><div class="ttname"><a href="group__nvn__c__funcptrs.html#ga6d548eaff5d46c83d72a818154476b84">PFNNVNBOOTSTRAPLOADERPROC</a></div><div class="ttdeci">PFNNVNGENERICFUNCPTRPROC(* PFNNVNBOOTSTRAPLOADERPROC)(const char *name)</div><div class="ttdoc">Function pointer type used to retreive main API entry points such as nvnDeviceInitialize and nvnDevic...</div><div class="ttdef"><b>Definition:</b> nvn.h:4646</div></div>
<div class="ttc" id="agroup__nvn__c__funcptrs_html_gab106acc34961bf1c3a43514686dbfc4b"><div class="ttname"><a href="group__nvn__c__funcptrs.html#gab106acc34961bf1c3a43514686dbfc4b">PFNNVNDEBUGCALLBACKPROC</a></div><div class="ttdeci">void(* PFNNVNDEBUGCALLBACKPROC)(NVNdebugCallbackSource source, NVNdebugCallbackType type, int id, NVNdebugCallbackSeverity severity, const char *message, void *userParam)</div><div class="ttdoc">Function pointer type used to specify a function to call for debug callbacks.</div><div class="ttdef"><b>Definition:</b> nvn.h:4674</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_ga067da3a838f115226c89fad655278f80"><div class="ttname"><a href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a></div><div class="ttdeci">uint64_t NVNbufferAddress</div><div class="ttdoc">GPU address of memory inside a buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:434</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gaa1a1fc7a9e690ce93870bcd71ea6b446"><div class="ttname"><a href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a></div><div class="ttdeci">uint64_t NVNtextureHandle</div><div class="ttdoc">GPU handle used to refer to a texture object for texture mapping operations.</div><div class="ttdef"><b>Definition:</b> nvn.h:441</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gab7f10945ffe1f6161c87238c75ae411d"><div class="ttname"><a href="group__nvn__c__handle.html#gab7f10945ffe1f6161c87238c75ae411d">NVNcommandHandle</a></div><div class="ttdeci">uint64_t NVNcommandHandle</div><div class="ttdoc">GPU handle used to refer to a command buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:437</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a2e453fe1fbf8f818dc45bbd2897105cd"><div class="ttname"><a href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a></div><div class="ttdeci">Result MountRom(const char *name, void *pFileSystemCacheBuffer, size_t fileSystemCacheBufferSize) NN_NOEXCEPT</div><div class="ttdoc">Mounts ROM resource data.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5df6e3385c795a5bd046790ef7f17f2d"><div class="ttname"><a href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a></div><div class="ttdeci">Result QueryMountRomCacheSize(size_t *pOutValue) NN_NOEXCEPT</div><div class="ttdoc">Get the size needed for the nn::fs::MountRom file system cache.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8a95249afd4a87a55d319dfecb0466c"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></div><div class="ttdeci">void Unmount(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Unmounts a mounted file system and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_ad620d8208dd309eb7c4dd5973a6aeee5"><div class="ttname"><a href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">nn::gfx::MemoryPool</a></div><div class="ttdeci">TMemoryPool&lt; TargetConfig::Variation &gt; MemoryPool</div><div class="ttdoc">The type definition representing a memory pool.</div><div class="ttdef"><b>Definition:</b> gfx_Types.h:116</div></div>
<div class="ttc" id="anamespacenn_1_1socket_html_a895595468f09d14293edd099a8ff7dc5"><div class="ttname"><a href="namespacenn_1_1socket.html#a895595468f09d14293edd099a8ff7dc5">nn::socket::Shutdown</a></div><div class="ttdeci">int Shutdown(int socket, ShutdownMethod how) NN_NOEXCEPT</div><div class="ttdoc">Disable sends and/or receives on a socket.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___assert_8h_html_a0473ebccccc250efd6100a9bbfec406b"><div class="ttname"><a href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a></div><div class="ttdeci">#define NN_ASSERT_NOT_NULL(pointer)</div><div class="ttdoc">Tests whether the pointer is not a null pointer.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:140</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_a82564079f8f8c6547726002a9b168bdb"><div class="ttname"><a href="nn___macro_8h.html#a82564079f8f8c6547726002a9b168bdb">NN_DISALLOW_COPY</a></div><div class="ttdeci">#define NN_DISALLOW_COPY(type)</div><div class="ttdoc">Prohibits copy constructors and copy assignment operators.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:507</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="ann___windows_8h_html"><div class="ttname"><a href="nn___windows_8h.html">nn_Windows.h</a></div><div class="ttdoc">A header file that enables &lt;Windows.h&gt; to be included safely.</div></div>
<div class="ttc" id="anvn___func_ptr_impl_8h_html"><div class="ttname"><a href="nvn___func_ptr_impl_8h.html">nvn_FuncPtrImpl.h</a></div><div class="ttdoc">Definition of the global function pointer variables implementing the entry points of the NVN C interf...</div></div>
<div class="ttc" id="anvn___func_ptr_inline_8h_html"><div class="ttname"><a href="nvn___func_ptr_inline_8h.html">nvn_FuncPtrInline.h</a></div><div class="ttdoc">Implementation of the NVN C interface entry points as inline functions that call through global funct...</div></div>
<div class="ttc" id="astruct_n_v_nblend_state_html"><div class="ttname"><a href="struct_n_v_nblend_state.html">NVNblendState</a></div><div class="ttdoc">API state object controlling blending for one color target.</div><div class="ttdef"><b>Definition:</b> nvn.h:241</div></div>
<div class="ttc" id="astruct_n_v_nbuffer_builder_html"><div class="ttname"><a href="struct_n_v_nbuffer_builder.html">NVNbufferBuilder</a></div><div class="ttdoc">Object specifying state used to construct new buffer objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:313</div></div>
<div class="ttc" id="astruct_n_v_nchannel_mask_state_html"><div class="ttname"><a href="struct_n_v_nchannel_mask_state.html">NVNchannelMaskState</a></div><div class="ttdoc">API state object holding per-channel write masks for all color buffers.</div><div class="ttdef"><b>Definition:</b> nvn.h:247</div></div>
<div class="ttc" id="astruct_n_v_ncolor_state_html"><div class="ttname"><a href="struct_n_v_ncolor_state.html">NVNcolorState</a></div><div class="ttdoc">API state object controlling processing of color values.</div><div class="ttdef"><b>Definition:</b> nvn.h:252</div></div>
<div class="ttc" id="astruct_n_v_ncommand_buffer_html"><div class="ttname"><a href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn.h:236</div></div>
<div class="ttc" id="astruct_n_v_ndepth_stencil_state_html"><div class="ttname"><a href="struct_n_v_ndepth_stencil_state.html">NVNdepthStencilState</a></div><div class="ttdoc">API state object controlling depth and stencil testing operations.</div><div class="ttdef"><b>Definition:</b> nvn.h:258</div></div>
<div class="ttc" id="astruct_n_v_ndevice_builder_html"><div class="ttname"><a href="struct_n_v_ndevice_builder.html">NVNdeviceBuilder</a></div><div class="ttdoc">Object specifying state used to construct new device objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:216</div></div>
<div class="ttc" id="astruct_n_v_ndevice_html"><div class="ttname"><a href="struct_n_v_ndevice.html">NVNdevice</a></div><div class="ttdoc">API class used to represent a specific GPU/device.</div><div class="ttdef"><b>Definition:</b> nvn.h:221</div></div>
<div class="ttc" id="astruct_n_v_nmultisample_state_html"><div class="ttname"><a href="struct_n_v_nmultisample_state.html">NVNmultisampleState</a></div><div class="ttdoc">API state object controlling multisample rasterization and sample processing.</div><div class="ttdef"><b>Definition:</b> nvn.h:264</div></div>
<div class="ttc" id="astruct_n_v_npolygon_state_html"><div class="ttname"><a href="struct_n_v_npolygon_state.html">NVNpolygonState</a></div><div class="ttdoc">API state object controlling rasterization of polygons.</div><div class="ttdef"><b>Definition:</b> nvn.h:269</div></div>
<div class="ttc" id="astruct_n_v_nqueue_builder_html"><div class="ttname"><a href="struct_n_v_nqueue_builder.html">NVNqueueBuilder</a></div><div class="ttdoc">Object specifying state used to construct new queue objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:226</div></div>
<div class="ttc" id="astruct_n_v_nqueue_html"><div class="ttname"><a href="struct_n_v_nqueue.html">NVNqueue</a></div><div class="ttdoc">API class used to send commands to the GPU.</div><div class="ttdef"><b>Definition:</b> nvn.h:231</div></div>
<div class="ttc" id="astruct_n_v_nsampler_builder_html"><div class="ttname"><a href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a></div><div class="ttdoc">Object specifying state used to construct new sampler objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:352</div></div>
<div class="ttc" id="astruct_n_v_nsync_html"><div class="ttname"><a href="struct_n_v_nsync.html">NVNsync</a></div><div class="ttdoc">Synchronization primitive object used to order execution of commands and track progress.</div><div class="ttdef"><b>Definition:</b> nvn.h:364</div></div>
<div class="ttc" id="astruct_n_v_ntexture_builder_html"><div class="ttname"><a href="struct_n_v_ntexture_builder.html">NVNtextureBuilder</a></div><div class="ttdoc">Object specifying state used to construct new texture objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:330</div></div>
<div class="ttc" id="astruct_n_v_ntexture_html"><div class="ttname"><a href="struct_n_v_ntexture.html">NVNtexture</a></div><div class="ttdoc">Block of GPU-accessible memory and related state used to hold image data.</div><div class="ttdef"><b>Definition:</b> nvn.h:325</div></div>
<div class="ttc" id="astruct_n_v_nwindow_builder_html"><div class="ttname"><a href="struct_n_v_nwindow_builder.html">NVNwindowBuilder</a></div><div class="ttdoc">Object specifying state used to construct new window objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:375</div></div>
<div class="ttc" id="astruct_n_v_nwindow_html"><div class="ttname"><a href="struct_n_v_nwindow.html">NVNwindow</a></div><div class="ttdoc">Object that manages texture presentation to the platform windowing system.</div><div class="ttdef"><b>Definition:</b> nvn.h:370</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_float_row_major4x4_html"><div class="ttname"><a href="structnn_1_1util_1_1_float_row_major4x4.html">nn::util::FloatRowMajor4x4</a></div><div class="ttdoc">Represents a four-row, four-column, row-major matrix using a single precision floating point array.</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:198</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_matrix_row_major4x3f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::MatrixRowMajor4x3fType</a></div><div class="ttdoc">Represents a four-row, three-column, row-major matrix using a single precision floating point data ty...</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:394</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_matrix_row_major4x4f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::MatrixRowMajor4x4fType</a></div><div class="ttdoc">Represents a four-row, four-column, row-major matrix using a single precision floating point data typ...</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:422</div></div>
<div class="ttc" id="astructnn_1_1util_1_1_vector3f_type_html"><div class="ttname"><a href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a></div><div class="ttdoc">Represents a three-dimensional vector using a single precision floating point data type.</div><div class="ttdef"><b>Definition:</b> util_MathTypes.h:306</div></div>
<div class="ttc" id="autil___matrix_8h_html"><div class="ttname"><a href="util___matrix_8h.html">util_Matrix.h</a></div><div class="ttdoc">Provides matrix calculations.</div></div>
<div class="ttc" id="autil___vector_8h_html"><div class="ttname"><a href="util___vector_8h.html">util_Vector.h</a></div><div class="ttdoc">Provides vector calculations.</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
