<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NvnSimple/NvnSimpleShaderCompiler/ShaderCompiler.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NvnSimple/NvnSimpleShaderCompiler/ShaderCompiler.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_nvn_simple_shader_compiler.html">Nvn Simple Shader Compiler</a> and <tt>NvnSimple/NvnSimpleShaderCompiler/ShaderCompiler.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___macro_8h.html">nn/nn_Macro.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nvn_8h.html">nvn/nvn.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nvn_tool___glslc_interface_8h.html">nvnTool/nvnTool_GlslcInterface.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*************************************************************************************************</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * NvnSimpleShaderCompiler.exe:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  A simple GLSL compiler for NVN applications, built using GLSLC.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Definitions</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> PrintUsage() <a name="a0"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;Usage: NvnSimpleShaderCompiler.exe &lt;vertex shader path&gt; &lt;fragment shader path&gt; -o &lt;output shader binary path&gt;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// assumes the string pointed to by fileContent is empty</span></div>
<div class="line"><span class="keywordtype">bool</span> LoadTextFile(<span class="keyword">const</span> <span class="keywordtype">char</span>* filePath, std::string* fileContent) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    std::ifstream file;</div>
<div class="line">    file.open(filePath);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!file.is_open())</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not open file %s\n&quot;</span>, filePath);</div>
<div class="line">        PrintUsage();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> bufferSize = 1024;</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">char</span> line[bufferSize];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!file.eof())</div>
<div class="line">    {</div>
<div class="line">        file.getline(line, bufferSize);</div>
<div class="line">        fileContent-&gt;append(line);</div>
<div class="line">        fileContent-&gt;append(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load a file in binary format (such as SPIR-V)</span></div>
<div class="line"><span class="comment">// assumes the string pointed to by fileContent is non-empty</span></div>
<div class="line"><span class="keywordtype">bool</span> LoadBinaryFile( <span class="keyword">const</span> <span class="keywordtype">char</span>* filePath, std::string* fileContent ) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> c;</div>
<div class="line">    std::ifstream file;</div>
<div class="line">    file.open( filePath, std::ios_base::binary | std::ios_base::in );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!file.is_open())</div>
<div class="line">    {</div>
<div class="line">        printf( <span class="stringliteral">&quot;Could not open file %s\n&quot;</span>, filePath );</div>
<div class="line">        PrintUsage();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    fileContent-&gt;clear();</div>
<div class="line">    <span class="keywordflow">while</span> (!file.eof())</div>
<div class="line">    {</div>
<div class="line">        c = file.get();</div>
<div class="line">        <span class="keywordflow">if</span> (c != EOF) {</div>
<div class="line">            fileContent-&gt;push_back(c);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultEntryNames[] = {</div>
<div class="line">    <span class="stringliteral">&quot;VSMain&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;VsMain&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;PSMain&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;PsMain&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Main&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// main</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (argc != 5 || strcmp(argv[3], <span class="stringliteral">&quot;-o&quot;</span>) != 0)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Unrecognized command arguments.\n&quot;</span>);</div>
<div class="line">        PrintUsage();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* vsFile = argv[1];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* fsFile = argv[2];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* outputFilePath = argv[4];</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;NvnSimpleShaderCompiler: compiling shaders %s and %s into %s\n&quot;</span>, vsFile, fsFile, outputFilePath);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// load the source files</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> numSourceFiles = 2;</div>
<div class="line">    <span class="keywordtype">size_t</span> numSpirvFiles = 0;</div>
<div class="line">    std::string sourceFiles[numSourceFiles];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* sourceFilePointers[numSourceFiles];</div>
<div class="line">    uint32_t sourceFileSizes[numSourceFiles];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* entryPointNames[numSourceFiles];</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__nvn__c__enum.html#gac99deb2b11df8b0358f73a92e2a2abdd">NVNshaderStage</a> shaderStages[numSourceFiles];</div>
<div class="line">    shaderStages[0] = <a class="code" href="group__nvn__c__enum.html#ggac99deb2b11df8b0358f73a92e2a2abdda5a6e5f69e0f338221cc5acf7882a21c7">NVN_SHADER_STAGE_VERTEX</a>;</div>
<div class="line">    shaderStages[1] = <a class="code" href="group__nvn__c__enum.html#ggac99deb2b11df8b0358f73a92e2a2abddaf979f751d1526164abb522c640c8eb06">NVN_SHADER_STAGE_FRAGMENT</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numSourceFiles; ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span>* data;</div>
<div class="line">        <span class="keywordflow">if</span> (!LoadTextFile(argv[i + 1], &amp;sourceFiles[i]))</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">        entryPointNames[i] = <span class="stringliteral">&quot;main&quot;</span>;</div>
<div class="line">        data = sourceFilePointers[i] = sourceFiles[i].c_str();</div>
<div class="line">        <span class="keywordflow">if</span> (data[0] == 0x03 &amp;&amp; data[1] == 0x02 &amp;&amp; data[2] == 0x23 &amp;&amp; data[3] == 0x07)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// data signature indicates SPIR-V file</span></div>
<div class="line">            <span class="comment">// so re-load as a binary file</span></div>
<div class="line">            numSpirvFiles++;</div>
<div class="line">            <span class="keywordflow">if</span> (!LoadBinaryFile(argv[i + 1], &amp;sourceFiles[i]))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line">            sourceFilePointers[i] = sourceFiles[i].data();</div>
<div class="line">            <span class="comment">// HLSL entry point names may differ from &quot;main&quot;</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; _countof( defaultEntryNames ); j++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (sourceFiles[i].find( defaultEntryNames[j]) != std::string::npos)</div>
<div class="line">                {</div>
<div class="line">                    entryPointNames[i] = defaultEntryNames[j];</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        sourceFileSizes[i] = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(sourceFiles[i].size());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// compile the source files</span></div>
<div class="line">    <a name="_a1"></a><a class="code" href="struct_g_l_s_l_ccompile_object.html">GLSLCcompileObject</a> compileObject;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="nvn_tool___glslc_interface_8h.html#a648dfc0b503357a72dad03652fc31e57">glslcInitialize</a>(&amp;compileObject))</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;glslcInitialize failed.\n&quot;</span>);</div>
<div class="line">        PrintUsage();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    compileObject.<a name="a2"></a><a class="code" href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">input</a>.sources = sourceFilePointers;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">input</a>.stages = shaderStages;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">input</a>.<a name="a3"></a><a class="code" href="struct_g_l_s_l_cinput.html#a2dd94f2657ef155e688d6a9927c6c381">count</a> = numSourceFiles;</div>
<div class="line">    <span class="comment">// NOTE: SPIR-V parameters are only used if source langauge is SPIR-V</span></div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">input</a>.spirvModuleSizes = sourceFileSizes;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">input</a>.spirvEntryPointNames = entryPointNames;</div>
<div class="line"> </div>
<div class="line">    compileObject.<a name="a4"></a><a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a name="a5"></a><a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a6"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#ac0396d28c3ec928aaa280cb90e71f485">outputAssembly</a> = <span class="keyword">true</span>;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a7"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#aec0779a250ad31f6deafe470820ffbb8">outputGpuBinaries</a> = <span class="keyword">true</span>;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a8"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#af673dc6b82db05442d203619be5a022d">glslSeparable</a> = <span class="keyword">false</span>;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a9"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#ad57cedc549a410a87a8b5e667afd31b9">outputPerfStats</a> = <span class="keyword">true</span>;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a10"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#a723afb9e18cdf4c92bfe315c94e37c96">outputShaderReflection</a> = <span class="keyword">true</span>;</div>
<div class="line">    compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a11"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#af2b81192a389ab5093f074ced7ceea29">outputDebugInfo</a> = <a class="code" href="nvn_tool___glslc_interface_8h.html#a238b82c174a58d9f9e2be6aa3e8a5bfea3fb18b78416959d12a0df4cdf408c0ae">GLSLC_DEBUG_LEVEL_G2</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (numSpirvFiles == numSourceFiles)</div>
<div class="line">    {</div>
<div class="line">        compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a name="a12"></a><a class="code" href="struct_g_l_s_l_coption_flags.html#ac8db49e611084ad2bf89db26904fe4d4">language</a> = <a class="code" href="nvn_tool___glslc_interface_8h.html#a2d6ec24544353b8978008330e2a1f52ba7de6685da3123976fc56e312e02e92fd">GLSLC_LANGUAGE_SPIRV</a>;</div>
<div class="line">        compileObject.<a class="code" href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">options</a>.<a class="code" href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">optionFlags</a>.<a class="code" href="struct_g_l_s_l_coption_flags.html#af2b81192a389ab5093f074ced7ceea29">outputDebugInfo</a> = <a class="code" href="nvn_tool___glslc_interface_8h.html#a238b82c174a58d9f9e2be6aa3e8a5bfea6aa278f2aac6b0ff1b449861c069423b">GLSLC_DEBUG_LEVEL_NONE</a>;  <span class="comment">// no source info available</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numSpirvFiles)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR: some input files appear to be SPIR-V, but others do not.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="nvn_tool___glslc_interface_8h.html#ad0fd458cbbcd554a1dc81ac61fdcf7e3">glslcCompile</a>(&amp;compileObject))</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;glslcCompile failed.\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Vertex shader: %s\n&quot;</span>, vsFile);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Fragment shader: %s\n&quot;</span>, fsFile);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Info log: %s\n&quot;</span>, compileObject.lastCompiledResults-&gt;compilationStatus-&gt;infoLog);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// write the compiled output to file</span></div>
<div class="line">    std::ofstream outputFile;</div>
<div class="line">    outputFile.open(outputFilePath, std::ofstream::out | std::ofstream::binary);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!outputFile.is_open())</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not open file %s for writing\n&quot;</span>, outputFilePath);</div>
<div class="line">        PrintUsage();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <a name="_a13"></a><a class="code" href="struct_g_l_s_l_coutput.html">GLSLCoutput</a>* compileOutput = compileObject.lastCompiledResults-&gt;glslcOutput;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Note that we are writing out the byte stream as-is, so the endianness of the machine where</span></div>
<div class="line">    <span class="comment">// this tool is being used must match the endianness of the target platform from which the output file</span></div>
<div class="line">    <span class="comment">// will be loaded.</span></div>
<div class="line">    outputFile.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(compileOutput), compileOutput-&gt;<a name="a14"></a><a class="code" href="struct_g_l_s_l_coutput.html#ac6e8159c6357796e5c51b6eb91f279b7">size</a>);</div>
<div class="line">    outputFile.close();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// cleanup and exit</span></div>
<div class="line">    <a class="code" href="nvn_tool___glslc_interface_8h.html#a05b2032c99f789df2a34ebf32271c320">glslcFinalize</a>(&amp;compileObject);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__nvn__c__enum_html_gac99deb2b11df8b0358f73a92e2a2abdd"><div class="ttname"><a href="group__nvn__c__enum.html#gac99deb2b11df8b0358f73a92e2a2abdd">NVNshaderStage</a></div><div class="ttdeci">NVNshaderStage</div><div class="ttdoc">Specifies a programmable shader stage.</div><div class="ttdef"><b>Definition:</b> nvn.h:2685</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ggac99deb2b11df8b0358f73a92e2a2abdda5a6e5f69e0f338221cc5acf7882a21c7"><div class="ttname"><a href="group__nvn__c__enum.html#ggac99deb2b11df8b0358f73a92e2a2abdda5a6e5f69e0f338221cc5acf7882a21c7">NVN_SHADER_STAGE_VERTEX</a></div><div class="ttdeci">@ NVN_SHADER_STAGE_VERTEX</div><div class="ttdoc">Specifies the vertex shader stage.</div><div class="ttdef"><b>Definition:</b> nvn.h:2688</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ggac99deb2b11df8b0358f73a92e2a2abddaf979f751d1526164abb522c640c8eb06"><div class="ttname"><a href="group__nvn__c__enum.html#ggac99deb2b11df8b0358f73a92e2a2abddaf979f751d1526164abb522c640c8eb06">NVN_SHADER_STAGE_FRAGMENT</a></div><div class="ttdeci">@ NVN_SHADER_STAGE_FRAGMENT</div><div class="ttdoc">Specifies the fragment shader stage.</div><div class="ttdef"><b>Definition:</b> nvn.h:2691</div></div>
<div class="ttc" id="ann___macro_8h_html"><div class="ttname"><a href="nn___macro_8h.html">nn_Macro.h</a></div><div class="ttdoc">Defines the macros used throughout all libraries.</div></div>
<div class="ttc" id="ann___macro_8h_html_a0e31cc4dc24d85253a31e48b1a85ab33"><div class="ttname"><a href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div><div class="ttdeci">#define NN_NOEXCEPT</div><div class="ttdoc">Declares that the function does not throw exceptions.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:196</div></div>
<div class="ttc" id="anvn_8h_html"><div class="ttname"><a href="nvn_8h.html">nvn.h</a></div><div class="ttdoc">C headers for the NVN 3D API.</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html">nvnTool_GlslcInterface.h</a></div><div class="ttdoc">API data type and function definitions for the GLSLC shader compiler tool.</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_a05b2032c99f789df2a34ebf32271c320"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#a05b2032c99f789df2a34ebf32271c320">glslcFinalize</a></div><div class="ttdeci">GLSLCAPI void glslcFinalize(GLSLCcompileObject *compileObject)</div><div class="ttdoc">Cleans up any internal memory associated with a GLSLC compile.</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_a238b82c174a58d9f9e2be6aa3e8a5bfea3fb18b78416959d12a0df4cdf408c0ae"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#a238b82c174a58d9f9e2be6aa3e8a5bfea3fb18b78416959d12a0df4cdf408c0ae">GLSLC_DEBUG_LEVEL_G2</a></div><div class="ttdeci">@ GLSLC_DEBUG_LEVEL_G2</div><div class="ttdoc">Full debug information, no optimizations.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:308</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_a238b82c174a58d9f9e2be6aa3e8a5bfea6aa278f2aac6b0ff1b449861c069423b"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#a238b82c174a58d9f9e2be6aa3e8a5bfea6aa278f2aac6b0ff1b449861c069423b">GLSLC_DEBUG_LEVEL_NONE</a></div><div class="ttdeci">@ GLSLC_DEBUG_LEVEL_NONE</div><div class="ttdoc">No debug information generated.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:299</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_a2d6ec24544353b8978008330e2a1f52ba7de6685da3123976fc56e312e02e92fd"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#a2d6ec24544353b8978008330e2a1f52ba7de6685da3123976fc56e312e02e92fd">GLSLC_LANGUAGE_SPIRV</a></div><div class="ttdeci">@ GLSLC_LANGUAGE_SPIRV</div><div class="ttdoc">SPIR-V compilation.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:320</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_a648dfc0b503357a72dad03652fc31e57"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#a648dfc0b503357a72dad03652fc31e57">glslcInitialize</a></div><div class="ttdeci">GLSLCAPI uint8_t glslcInitialize(GLSLCcompileObject *compileObject)</div><div class="ttdoc">Initializes the compile objects, setting up internal structures.</div></div>
<div class="ttc" id="anvn_tool___glslc_interface_8h_html_ad0fd458cbbcd554a1dc81ac61fdcf7e3"><div class="ttname"><a href="nvn_tool___glslc_interface_8h.html#ad0fd458cbbcd554a1dc81ac61fdcf7e3">glslcCompile</a></div><div class="ttdeci">GLSLCAPI uint8_t glslcCompile(GLSLCcompileObject *compileObject)</div><div class="ttdoc">Compile source shaders using a previously initialized GLSLCcompileObject.</div></div>
<div class="ttc" id="astruct_g_l_s_l_ccompile_object_html"><div class="ttname"><a href="struct_g_l_s_l_ccompile_object.html">GLSLCcompileObject</a></div><div class="ttdoc">The main object that holds input/output variables for compilation.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1577</div></div>
<div class="ttc" id="astruct_g_l_s_l_ccompile_object_html_a1439e7a28e5232e1dc82924e8c4d063d"><div class="ttname"><a href="struct_g_l_s_l_ccompile_object.html#a1439e7a28e5232e1dc82924e8c4d063d">GLSLCcompileObject::input</a></div><div class="ttdeci">GLSLCinput input</div><div class="ttdoc">Input shaders.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1603</div></div>
<div class="ttc" id="astruct_g_l_s_l_ccompile_object_html_a6cc042ea5fe41d3aa6c9fac773a447b8"><div class="ttname"><a href="struct_g_l_s_l_ccompile_object.html#a6cc042ea5fe41d3aa6c9fac773a447b8">GLSLCcompileObject::options</a></div><div class="ttdeci">GLSLCoptions options</div><div class="ttdoc">Compilation options.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1600</div></div>
<div class="ttc" id="astruct_g_l_s_l_cinput_html_a2dd94f2657ef155e688d6a9927c6c381"><div class="ttname"><a href="struct_g_l_s_l_cinput.html#a2dd94f2657ef155e688d6a9927c6c381">GLSLCinput::count</a></div><div class="ttdeci">uint8_t count</div><div class="ttdoc">Number of entries in both the sources and stages arrays.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1017</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_a723afb9e18cdf4c92bfe315c94e37c96"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#a723afb9e18cdf4c92bfe315c94e37c96">GLSLCoptionFlags::outputShaderReflection</a></div><div class="ttdeci">uint32_t outputShaderReflection</div><div class="ttdoc">Output shader reflection data.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:814</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_ac0396d28c3ec928aaa280cb90e71f485"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#ac0396d28c3ec928aaa280cb90e71f485">GLSLCoptionFlags::outputAssembly</a></div><div class="ttdeci">uint32_t outputAssembly</div><div class="ttdoc">Include an assembly dump section in the GLSLCoutput.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:804</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_ac8db49e611084ad2bf89db26904fe4d4"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#ac8db49e611084ad2bf89db26904fe4d4">GLSLCoptionFlags::language</a></div><div class="ttdeci">GLSLClanguageTypeEnum language</div><div class="ttdoc">Specify the language of the input shaders.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:817</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_ad57cedc549a410a87a8b5e667afd31b9"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#ad57cedc549a410a87a8b5e667afd31b9">GLSLCoptionFlags::outputPerfStats</a></div><div class="ttdeci">uint32_t outputPerfStats</div><div class="ttdoc">Output individual perf statistics for each compiled binary.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:811</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_aec0779a250ad31f6deafe470820ffbb8"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#aec0779a250ad31f6deafe470820ffbb8">GLSLCoptionFlags::outputGpuBinaries</a></div><div class="ttdeci">uint32_t outputGpuBinaries</div><div class="ttdoc">Output individual program binary sections in the GLSLCoutput.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:808</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_af2b81192a389ab5093f074ced7ceea29"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#af2b81192a389ab5093f074ced7ceea29">GLSLCoptionFlags::outputDebugInfo</a></div><div class="ttdeci">GLSLCdebugInfoLevelEnum outputDebugInfo</div><div class="ttdoc">Level of debug information to generate.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:820</div></div>
<div class="ttc" id="astruct_g_l_s_l_coption_flags_html_af673dc6b82db05442d203619be5a022d"><div class="ttname"><a href="struct_g_l_s_l_coption_flags.html#af673dc6b82db05442d203619be5a022d">GLSLCoptionFlags::glslSeparable</a></div><div class="ttdeci">uint32_t glslSeparable</div><div class="ttdoc">Treat the GLSLC object as separable.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:800</div></div>
<div class="ttc" id="astruct_g_l_s_l_coptions_html_a2b07e6d6a4984f7922cab3efbf8caf16"><div class="ttname"><a href="struct_g_l_s_l_coptions.html#a2b07e6d6a4984f7922cab3efbf8caf16">GLSLCoptions::optionFlags</a></div><div class="ttdeci">GLSLCoptionFlags optionFlags</div><div class="ttdoc">A structure used for controlling which outputs are emitted in the GLSLCoutput section and for specify...</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:934</div></div>
<div class="ttc" id="astruct_g_l_s_l_coutput_html"><div class="ttname"><a href="struct_g_l_s_l_coutput.html">GLSLCoutput</a></div><div class="ttdoc">Main GLSLC output structure.</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1474</div></div>
<div class="ttc" id="astruct_g_l_s_l_coutput_html_ac6e8159c6357796e5c51b6eb91f279b7"><div class="ttname"><a href="struct_g_l_s_l_coutput.html#ac6e8159c6357796e5c51b6eb91f279b7">GLSLCoutput::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Total size of the output (in bytes).</div><div class="ttdef"><b>Definition:</b> nvnTool_GlslcInterface.h:1490</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
