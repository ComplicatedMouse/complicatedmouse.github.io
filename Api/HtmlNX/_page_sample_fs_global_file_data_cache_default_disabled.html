<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Example of Preventing Automatic Enablement of Global File Data Caching | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_fs.html">File System Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example of Preventing Automatic Enablement of Global File Data Caching </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This sample program prevents automatically enabling global file caching when starting the application.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionBrief"></a>
Overview</h1>
<p>This sample program shows an example of defining <code>nninitStartup()</code> to prevent automatically enabling global file data caching when starting the application. To revert the size of the memory heap available to the application and the file access behavior to match NX Add-On 9.x.x or earlier, refer to this sample program to define <code>nninitStartup()</code> in the application.</p>
<p>This sample program performs a simple benchmark using the resource data (ROM) files. The contents of the benchmark is the same as the <a class="el" href="_page_sample_fs_global_file_data_cache_manually_enabled.html">FsGlobalFileDataCacheManuallyEnabled</a> sample program. The benchmark results can be used in ways such as the following.</p>
<ul>
<li>Use the file load speed to verify switching between enabling and disabling global file data caching based on whether <code>nninitStartup()</code> is defined.</li>
<li>Compare the benchmark results with those of the <a class="el" href="_page_sample_fs_global_file_data_cache_manually_enabled.html">FsGlobalFileDataCacheManuallyEnabled</a> sample program that uses global file data caching.</li>
</ul>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_652aea0c2569a2fabd0d8d6396276009.html">Samples/Sources/Applications/FsFileDataCache/FsGlobalFileDataCacheDefaultDisabled/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>The NX development hardware is required for running this sample program.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<p>This sample program assumes that it is started from an NSP format application image. If the result of running this program differs widely from expectation, confirm that the application was built in NSP format.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_fs_global_file_data_cache_default_disabled_8cpp.html" title="Example of Preventing Automatic Enablement of Global File Data Caching.">FsGlobalFileDataCacheDefaultDisabled.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &lt;nn/nn_Common.h&gt;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="init_8h.html">nn/init.h</a>&gt;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="util___bit_util_8h.html">nn/util/util_BitUtil.h</a>&gt;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;Common.h&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">*  This is the definition for nninitStartup(), which initializes the memory management functionality of the application.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">*  This sample allocates all of the memory heaps available to the application to the default</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">*  malloc() function provided by NintendoSDK. Initialize the application-specific memory management features as needed,</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">*  such as enabling the virtual memory address management feature.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">*  For more information, see Features &gt; Program Flow &gt; Starting and Initializing Programs.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// Global file data caching is not automatically enabled in the Windows environment.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// nninitStartup() is only defined when the application operating environment is the operating system of the NX development hardware.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#if defined(NN_BUILD_TARGET_PLATFORM_OS_NN)</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a>()</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Gets the information for the memory available to the application.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="structnn_1_1os_1_1_memory_info.html">nn::os::MemoryInfo</a> memInfo;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="namespacenn_1_1os.html#a79f2a489da0a124ebdc8130595c70b94">nn::os::QueryMemoryInfo</a>(&amp;memInfo);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">size_t</span> size = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(memInfo.<a class="code" href="structnn_1_1os_1_1_memory_info.html#a456fd92870975fcf020ad08f8bf7f908">totalAvailableMemorySize</a>) - memInfo.<a class="code" href="structnn_1_1os_1_1_memory_info.html#a179fcdecd518686555036d0db3a5014c">totalUsedMemorySize</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Along with the preconditions for nn::os::SetMemoryHeapSize(), rounds down size as an integer multiplier of nn::os::MemoryBlockUnitSize.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    size = <a class="code" href="namespacenn_1_1util.html#ac7655ccdb1f67a75ae553c06dec485b3">nn::util::align_down</a>(size, <a class="code" href="namespacenn_1_1os.html#ade84ad9f438e76820510ca0623c5a823">nn::os::MemoryBlockUnitSize</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Sets the memory heap size.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a>(size));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// From the memory heap, allocates the memory region to be used by malloc().</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    uintptr_t p;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a>(&amp;p, size));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Sets a memory region for malloc() use.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(p), size, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// Registers the memory allocator to use by implementation of the thread_local specifier.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="namespacenn_1_1os.html#a347a69381452967e4a51b3c18aae7807">nn::os::SetMemoryAllocatorForThreadLocal</a>(</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        [](<span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span>) { <span class="keywordflow">return</span> std::malloc(size); },</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        [](<span class="keywordtype">void</span>* ptr, size_t) { std::free(ptr); }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    );</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// The default nninitStartup() initializes the memory management functionality and then enables global file data caching.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// This sample does not use global file data caching, so it only initializes the memory management functionality.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(NN_BUILD_TARGET_PLATFORM_OS_NN)</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">*  The application entry point.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// Before calling nnMain(), the nninitStartup() defined in this sample program is called.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// The nninitStartup() was rewritten, so global file data caching is not enabled.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Uses the resource data (ROM) to perform a benchmark.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// Global file data caching is disabled.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    RunRomAccessBenchmark();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="ttc" id="ainit_8h_html"><div class="ttname"><a href="init_8h.html">init.h</a></div><div class="ttdoc">Declaration of API resources for the initialization library.</div></div>
<div class="ttc" id="ainit___startup_8h_html_ac781c07f35d3d9e7a71d21ad25e25f8f"><div class="ttname"><a href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a></div><div class="ttdeci">void nninitStartup(void)</div><div class="ttdoc">Startup initialization routine.</div></div>
<div class="ttc" id="anamespacenn_1_1init_html_a216ae7a5ca53a1c1e6dc0514f7283974"><div class="ttname"><a href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a></div><div class="ttdeci">void InitializeAllocator(void *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Initializes a memory allocator.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a2be8bac50d8d37a91f866d9e0c55886e"><div class="ttname"><a href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a></div><div class="ttdeci">nn::Result SetMemoryHeapSize(size_t size) NN_NOEXCEPT</div><div class="ttdoc">Changes the size of the memory heap region.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a347a69381452967e4a51b3c18aae7807"><div class="ttname"><a href="namespacenn_1_1os.html#a347a69381452967e4a51b3c18aae7807">nn::os::SetMemoryAllocatorForThreadLocal</a></div><div class="ttdeci">void SetMemoryAllocatorForThreadLocal(nn::AlignedAllocateFunction allocator, nn::DeallocateFunction deallocator) NN_NOEXCEPT</div><div class="ttdoc">Registers the compiler thread local implementation memory allocator and memory deallocator.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a79f2a489da0a124ebdc8130595c70b94"><div class="ttname"><a href="namespacenn_1_1os.html#a79f2a489da0a124ebdc8130595c70b94">nn::os::QueryMemoryInfo</a></div><div class="ttdeci">void QueryMemoryInfo(MemoryInfo *info) NN_NOEXCEPT</div><div class="ttdoc">Gets information including the amount of memory currently being used by this program.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a875bf6b3129f06654e641513c63017dd"><div class="ttname"><a href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a></div><div class="ttdeci">nn::Result AllocateMemoryBlock(uintptr_t *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Allocates a memory block from the memory heap.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_ade84ad9f438e76820510ca0623c5a823"><div class="ttname"><a href="namespacenn_1_1os.html#ade84ad9f438e76820510ca0623c5a823">nn::os::MemoryBlockUnitSize</a></div><div class="ttdeci">const size_t MemoryBlockUnitSize</div><div class="ttdoc">This constant stores the minimum unit of a memory block.</div><div class="ttdef"><b>Definition:</b> os_MemoryHeapCommon.h:39</div></div>
<div class="ttc" id="anamespacenn_1_1util_html_ac7655ccdb1f67a75ae553c06dec485b3"><div class="ttname"><a href="namespacenn_1_1util.html#ac7655ccdb1f67a75ae553c06dec485b3">nn::util::align_down</a></div><div class="ttdeci">constexpr T align_down(T x, size_t align) NN_NOEXCEPT</div><div class="ttdoc">Rounds down a value so that it fits the specified alignment.</div><div class="ttdef"><b>Definition:</b> util_BitUtil.h:126</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="astructnn_1_1os_1_1_memory_info_html"><div class="ttname"><a href="structnn_1_1os_1_1_memory_info.html">nn::os::MemoryInfo</a></div><div class="ttdoc">The structure for storing the obtained memory information.</div><div class="ttdef"><b>Definition:</b> os_DebugTypes.h:52</div></div>
<div class="ttc" id="astructnn_1_1os_1_1_memory_info_html_a179fcdecd518686555036d0db3a5014c"><div class="ttname"><a href="structnn_1_1os_1_1_memory_info.html#a179fcdecd518686555036d0db3a5014c">nn::os::MemoryInfo::totalUsedMemorySize</a></div><div class="ttdeci">size_t totalUsedMemorySize</div><div class="ttdoc">The total amount of memory being used.</div><div class="ttdef"><b>Definition:</b> os_DebugTypes.h:54</div></div>
<div class="ttc" id="astructnn_1_1os_1_1_memory_info_html_a456fd92870975fcf020ad08f8bf7f908"><div class="ttname"><a href="structnn_1_1os_1_1_memory_info.html#a456fd92870975fcf020ad08f8bf7f908">nn::os::MemoryInfo::totalAvailableMemorySize</a></div><div class="ttdeci">uint64_t totalAvailableMemorySize</div><div class="ttdoc">The total amount of available memory.</div><div class="ttdef"><b>Definition:</b> os_DebugTypes.h:53</div></div>
<div class="ttc" id="autil___bit_util_8h_html"><div class="ttname"><a href="util___bit_util_8h.html">util_BitUtil.h</a></div><div class="ttdoc">API declarations for handling bit operations.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleFsGlobalFileDataCacheDefaultDisabled_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>The default <code>nninitStartup()</code> defined by the <code>init</code> library enables global file data caching when starting the application. The definition of <code>nninitStartup()</code> can be rewritten by the application. This allows you to stop automatically enabling global file data caching.</p>
<p>This sample program defines <code>nninitStartup()</code> and is called at program startup before <code>nnMain()</code>. Within <code>nninitStartup()</code>, <code><a class="el" href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974" title="Initializes a memory allocator.">nn::init::InitializeAllocator()</a></code> is called to have all of the memory heaps available to the application used by the default <code>malloc()</code> function defined by NintendoSDK.</p>
<p>The sample program defines <code>nninitStartup()</code> to stop automatically enabling global file data caching, so global file data caching is not enabled at the point when <code>nnMain()</code> is called. In addition, all memory heaps can be used from the application.</p>
<p>This sample program performs the following benchmark. The benchmark implementation is in <code>Common.cpp</code>.</p>
<ul>
<li>Sequential read of all files in the resource data (ROM), using a 4-KB file buffer</li>
<li>Random read of files in the resource data (ROM), with a combined total size of 4 MB, using a 4-KB file buffer</li>
</ul>
<p>The run time for each access pattern is calculated twice, and the results saved to a log.</p>
<p>The following example shows the execution results of this sample program. The results vary a little each time the sample program is run.</p>
<pre class="fragment">rom sequential reading test
  1st time = 1099 ms.
  2nd time = 1052 ms.

rom random reading test
  1st time = 3745 ms.
  2nd time = 3725 ms.
</pre><p>Because global file data caching is not enabled, the file load time is longer than for the <a class="el" href="_page_sample_fs_global_file_data_cache_manually_enabled.html#PageSampleFsGlobalFileDataCacheManuallyEnabled_SectionSampleDetail">FsGlobalFileDataCacheManuallyEnabled</a> sample program. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
