<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UnitTestWithGoogleTest | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">UnitTestWithGoogleTest </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleUnitTestWithGoogleTest_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleUnitTestWithGoogleTest_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleUnitTestWithGoogleTest_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This page describes the googletest sample program.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionBrief"></a>
Overview</h1>
<p>This section describes a sample program for an individual test using googletest. A batch file that builds and runs the test is included as a sample for creating the automated test.</p>
<p>For more information about how to use googletest, see <a href="https://github.com/google/googletest/blob/release-1.10.0/googletest/docs/primer.md">Googletest Primer documentation</a>.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_895abef1209ea31058bf2325d93c365a.html">Samples/Sources/Applications/UnitTestWithGoogletest/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<p>You can also use batches for the following automated testing.</p><ul>
<li>If you are using Generic: Run <code>RunWindows.bat</code> to build the sample program and execute it. Enter parameters as described later, and specify the build type, platform, output destination of the test result files, and path to the solution file. <div class="fragment"><div class="line">./RunWindows.bat Develop Win32 OutputDirectory Sample.sln</div>
</div><!-- fragment --> The available build types are Debug, Develop, and Release. The available platforms are Win32 and x64. You can specify a path to any solution for the solution file.</li>
<li>For NX Run <code>RunNX.bat</code> to build the sample program and execute it. Enter parameters as described later, and specify the build type, platform, output destination of the test result files, and path to the solution file. <div class="fragment"><div class="line">./RunNX.bat Develop NX32 OutputDirectory Sample.sln</div>
</div><!-- fragment --> The available build types are Debug, Develop, and Release. The available platforms are NX32 and NX64. You can specify a path to any solution for the solution file.</li>
<li>If you are using NXOnWindows: Run <code>RunNXOnWindows.bat</code> to build the sample program and execute it. Enter parameters as described later, and specify the build type, platform, output destination of the test result files, and path to the solution file. <div class="fragment"><div class="line">./RunNXOnWindows.bat Develop Win32 OutputDirectory Sample.sln</div>
</div><!-- fragment --> The available build types are Debug, Develop, and Release. The available platforms are Win32 and x64. You can specify a path to any solution for the solution file.</li>
</ul>
<h1><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_unit_test_with_googletest_8cpp.html" title="Sample program for googletest.">UnitTestWithGoogletest.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="init_8h.html">nn/init.h</a>&gt;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="util___string_util_8h.html">nn/util/util_StringUtil.h</a>&gt;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#include &lt;gtest/gtest.h&gt;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keywordtype">void</span> InitialzeCurrentDirectory()</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#if defined(NN_BUILD_TARGET_PLATFORM_NX)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Get the command-line argument.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">int</span> argc = <a class="code" href="namespacenn_1_1os.html#acf2fa6b7b7074a51d0b2de1664cc7bb5">nn::os::GetHostArgc</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">char</span>** argv = <a class="code" href="namespacenn_1_1os.html#abd77e6bf19be140867869cc759fa492c">nn::os::GetHostArgv</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">char</span> currentDirectory[<a class="code" href="namespacenn_1_1fs.html#a5bc5a4754186c3d3e0af88ad84db2095">nn::fs::EntryNameLengthMax</a>] = {};</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; argc; ++i) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;--current_directory&quot;</span>, argv[i]) == 0) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (i &lt; argc - 1)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="namespacenn_1_1util.html#a9a369852b1204085d96a7cc4f26c880b">nn::util::Strlcpy</a>(currentDirectory, argv[i + 1], <a class="code" href="namespacenn_1_1fs.html#a5bc5a4754186c3d3e0af88ad84db2095">nn::fs::EntryNameLengthMax</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Abort if the current directory is not set with the options.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacenn_1_1util.html#a9687192252f37e1984e628b8bf796e22">nn::util::Strncmp</a>(currentDirectory, <span class="stringliteral">&quot;\0&quot;</span>, <a class="code" href="namespacenn_1_1fs.html#a5bc5a4754186c3d3e0af88ad84db2095">nn::fs::EntryNameLengthMax</a>) == 0)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;Please set current directory using --current_directory option\n&quot;</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Initialization that should be performed before GoogleTest static objects are initialized.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// Set the current directory for GoogleTest.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    chdir(currentDirectory);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">// Startup Functions</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a>()</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// Change the size of the memory heap region.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> MemoryHeapSize = 2ull * 1024 * 1024;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a>(MemoryHeapSize));</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Get the memory block from the memory heap.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    uintptr_t address;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a>(&amp;address, MemoryHeapSize));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(address), MemoryHeapSize);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    InitialzeCurrentDirectory();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// First test</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;TEST(AssertTest, SuccessTest)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Test for whether ASSERT succeeds.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ASSERT_EQ(10, 10);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// Second test</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;TEST(AssertTest, FailTest)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Test for whether ASSERT fails.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    ASSERT_EQ(10, 20);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Get the command-line argument.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">int</span> argc = <a class="code" href="namespacenn_1_1os.html#acf2fa6b7b7074a51d0b2de1664cc7bb5">nn::os::GetHostArgc</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">char</span>** argv = <a class="code" href="namespacenn_1_1os.html#abd77e6bf19be140867869cc759fa492c">nn::os::GetHostArgv</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// Mount the file system on the host PC.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1fs.html#a2ea39d2487ac28bc767cd699eeeebe11">nn::fs::MountHostRoot</a>());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Initialize GoogleTest.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    testing::InitGoogleTest(&amp;argc, argv);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// Run the defined TEST.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Return 0 if all tests are successful, and 1 otherwise.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">int</span> testResult = RUN_ALL_TESTS();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// Unmount the file system mounted with MountHostRoot().</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="namespacenn_1_1fs.html#ade5d6e6459dca7d8274564bcfc5de757">nn::fs::UnmountHostRoot</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    std::quick_exit(testResult);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="ainit_8h_html"><div class="ttname"><a href="init_8h.html">init.h</a></div><div class="ttdoc">Declaration of API resources for the initialization library.</div></div>
<div class="ttc" id="ainit___startup_8h_html_ac781c07f35d3d9e7a71d21ad25e25f8f"><div class="ttname"><a href="init___startup_8h.html#ac781c07f35d3d9e7a71d21ad25e25f8f">nninitStartup</a></div><div class="ttdeci">void nninitStartup(void)</div><div class="ttdoc">Startup initialization routine.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a2ea39d2487ac28bc767cd699eeeebe11"><div class="ttname"><a href="namespacenn_1_1fs.html#a2ea39d2487ac28bc767cd699eeeebe11">nn::fs::MountHostRoot</a></div><div class="ttdeci">Result MountHostRoot() NN_NOEXCEPT</div><div class="ttdoc">Mounts the file system of the host PC and enables operations using the same paths as in Windows.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a5bc5a4754186c3d3e0af88ad84db2095"><div class="ttname"><a href="namespacenn_1_1fs.html#a5bc5a4754186c3d3e0af88ad84db2095">nn::fs::EntryNameLengthMax</a></div><div class="ttdeci">constexpr const int EntryNameLengthMax</div><div class="ttdoc">Maximum length (in bytes) of the name of an entry in the file system.</div><div class="ttdef"><b>Definition:</b> fs_Directory.h:39</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ade5d6e6459dca7d8274564bcfc5de757"><div class="ttname"><a href="namespacenn_1_1fs.html#ade5d6e6459dca7d8274564bcfc5de757">nn::fs::UnmountHostRoot</a></div><div class="ttdeci">void UnmountHostRoot() NN_NOEXCEPT</div><div class="ttdoc">Unmounts a file system mounted with MountHostRoot() and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1init_html_a216ae7a5ca53a1c1e6dc0514f7283974"><div class="ttname"><a href="namespacenn_1_1init.html#a216ae7a5ca53a1c1e6dc0514f7283974">nn::init::InitializeAllocator</a></div><div class="ttdeci">void InitializeAllocator(void *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Initializes a memory allocator.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a2be8bac50d8d37a91f866d9e0c55886e"><div class="ttname"><a href="namespacenn_1_1os.html#a2be8bac50d8d37a91f866d9e0c55886e">nn::os::SetMemoryHeapSize</a></div><div class="ttdeci">nn::Result SetMemoryHeapSize(size_t size) NN_NOEXCEPT</div><div class="ttdoc">Changes the size of the memory heap region.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a875bf6b3129f06654e641513c63017dd"><div class="ttname"><a href="namespacenn_1_1os.html#a875bf6b3129f06654e641513c63017dd">nn::os::AllocateMemoryBlock</a></div><div class="ttdeci">nn::Result AllocateMemoryBlock(uintptr_t *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Allocates a memory block from the memory heap.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_abd77e6bf19be140867869cc759fa492c"><div class="ttname"><a href="namespacenn_1_1os.html#abd77e6bf19be140867869cc759fa492c">nn::os::GetHostArgv</a></div><div class="ttdeci">char ** GetHostArgv() NN_NOEXCEPT</div><div class="ttdoc">Gets the array of pointers (argc) to the strings for the host-specified command-line arguments.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_acf2fa6b7b7074a51d0b2de1664cc7bb5"><div class="ttname"><a href="namespacenn_1_1os.html#acf2fa6b7b7074a51d0b2de1664cc7bb5">nn::os::GetHostArgc</a></div><div class="ttdeci">int GetHostArgc() NN_NOEXCEPT</div><div class="ttdoc">Gets the number of host-specified command-line arguments (argc).</div></div>
<div class="ttc" id="anamespacenn_1_1util_html_a9687192252f37e1984e628b8bf796e22"><div class="ttname"><a href="namespacenn_1_1util.html#a9687192252f37e1984e628b8bf796e22">nn::util::Strncmp</a></div><div class="ttdeci">int Strncmp(const T *pStr1, const T *pStr2, int count) NN_NOEXCEPT</div><div class="ttdoc">Compares strings, taking into account the number of elements in the buffer and the terminator.</div><div class="ttdef"><b>Definition:</b> util_StringUtil.h:180</div></div>
<div class="ttc" id="anamespacenn_1_1util_html_a9a369852b1204085d96a7cc4f26c880b"><div class="ttname"><a href="namespacenn_1_1util.html#a9a369852b1204085d96a7cc4f26c880b">nn::util::Strlcpy</a></div><div class="ttdeci">int Strlcpy(T *pOutDst, const T *pSrc, int count) NN_NOEXCEPT</div><div class="ttdoc">Copies strings, accounting for the number of elements in the copy destination buffer and termination.</div><div class="ttdef"><b>Definition:</b> util_StringUtil.h:95</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_a205eaac89c47d49cb982bf136e113de2"><div class="ttname"><a href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a></div><div class="ttdeci">#define NN_ABORT(...)</div><div class="ttdoc">Stops execution.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:29</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="autil___string_util_8h_html"><div class="ttname"><a href="util___string_util_8h.html">util_StringUtil.h</a></div><div class="ttdoc">API declarations for handling string operations.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleUnitTestWithGoogleTest_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program has the following flow.</p>
<p><code><a class="el" href="_unit_test_with_googletest_8cpp.html" title="Sample program for googletest.">UnitTestWithGoogletest.cpp</a></code> is provided as sample code for individual tests using googletest. To use googletest on the NX platform, you must set the current directory before initializing the static object, so run <code>chdir()</code> in <code>nninitStartup()</code>.</p>
<ul>
<li>Example of using <code><a class="el" href="_unit_test_with_googletest_8cpp.html" title="Sample program for googletest.">UnitTestWithGoogletest.cpp</a></code> to run an individual test with googletest.<ul>
<li>Set the XML output directory using <code>chdir()</code> in <code>InitialzeCurrentDirectory()</code>.</li>
<li>Define the test using the <code>TEST</code> macro.</li>
<li>Initialize googletest in <code>nnMain()</code>.</li>
<li>Run the test in <code>nnMain()</code>.</li>
</ul>
</li>
</ul>
<p><code>BuildUnitTest.bat</code> is provided as a sample that automatically builds the test. This is the BAT file that uses MSBuild to build the googletest sample.</p>
<ul>
<li>Example of an automatic build using <code>BuildUnitTest.bat</code><ul>
<li>Use vswhere to search for vs2017 with MSBuild.</li>
<li>Use the command prompt for developers in vs2017 to set the environment.</li>
<li>Build using MSBuild.</li>
</ul>
</li>
<li>Build using all patterns.<ul>
<li>Run <code>BuildAll.bat</code> to run <code>BuildUnitTest.bat</code> for all build types and platforms.</li>
</ul>
</li>
</ul>
<p>Three BAT files are provided as samples for the automated test. These BAT files call <code>BuildUnitTest.bat</code>, build the sample, and run the built sample.</p>
<ul>
<li>RunWindows.bat BAT for automated test for Windows. Set the current directory to set the XML file output destination.</li>
<li>RunNX.bat BAT for automated test for NX. Use <code>RunOnTarget</code> to execute. The application will exit normally even if googletest fails, so use the <code>&ndash;pattern-failure-exit</code> option in <code>RunOnTarget</code> to detect failure.</li>
<li>RunNXOnWindows.bat BAT for automated test for NXOnWindows. Set the current directory to set the XML file output destination.</li>
<li>Common items for BAT files that perform automated tests The <code>&ndash;gtest_filter</code> option is used to specify the test case to run. The <code>&ndash;gtest_output</code> option is used to output the test results to XML. To output to XML, use <code>&ndash;gtest_output</code> to specify a relative path and output the file to the relative path destination from the current directory. To match both the NintendoSDK path format and googletest path processing method, pass the current directory, set by the <code>current_directory</code> option, to the program.</li>
<li>Run automated test for all patterns Run <code>RunAll.bat</code> to build and run the automated test for all build types, platforms, and solution files.</li>
</ul>
<p>The following shows the results of running this sample program, as well as the results of running <code>RunWindows.bat x64 Debug OutputDirectory UnitTestWithGoogleTest-spec.Generic.autogen.vs2017.sln</code>.</p>
<pre class="fragment">Note: Google Test filter = AssertTest.SuccessTest
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from AssertTest
[ RUN      ] AssertTest.SuccessTest
[       OK ] AssertTest.SuccessTest (0 ms)
[----------] 1 test from AssertTest (1 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (6 ms total)
[  PASSED  ] 1 test.
Note: Google Test filter = AssertTest.FailTest
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from AssertTest
[ RUN      ] AssertTest.FailTest
c:\nintendo\sdk10.3.0\nintendosdk\samples\sources\applications\unittestwithgoogletest\unittestwithgoogletest.cpp(205): error: Expected equality of these values:
  10
  20
[  FAILED  ] AssertTest.FailTest (2 ms)
[----------] 1 test from AssertTest (2 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (7 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] AssertTest.FailTest

 1 FAILED TEST</pre><p>The following shows the XML file output for a failed test case for <code>RunWindows.bat x64 Debug OutputDirectory UnitTestWithGoogleTest-spec.Generic.autogen.vs2017.sln</code>.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;testsuites tests="1" failures="1" disabled="0" errors="0" time="0.007" timestamp="2020-06-25T11:59:35" name="AllTests"&gt;
  &lt;testsuite name="AssertTest" tests="1" failures="1" disabled="0" errors="0" time="0.002" timestamp="2020-06-25T11:59:35"&gt;
    &lt;testcase name="FailTest" status="run" result="completed" time="0.002" timestamp="2020-06-25T11:59:35" classname="AssertTest"&gt;
      &lt;failure message="c:\nintendo\sdk10.3.0\nintendosdk\samples\sources\applications\unittestwithgoogletest\unittestwithgoogletest.cpp:205&amp;#x0A;Expected equality of these values:&amp;#x0A;  10&amp;#x0A;  20" type=""&gt;&lt;![CDATA[c:\nintendo\sdk10.3.0\nintendosdk\samples\sources\applications\unittestwithgoogletest\unittestwithgoogletest.cpp:205
Expected equality of these values:
  10
  20]]&gt;&lt;/failure&gt;
    &lt;/testcase&gt;
  &lt;/testsuite&gt;
&lt;/testsuites&gt;
</pre><p>The following shows the XML file output for a successful test case for <code>RunWindows.bat x64 Debug OutputDirectory UnitTestWithGoogleTest-spec.Generic.autogen.vs2017.sln</code>.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;testsuites tests="1" failures="0" disabled="0" errors="0" time="0.006" timestamp="2020-06-25T11:59:35" name="AllTests"&gt;
  &lt;testsuite name="AssertTest" tests="1" failures="0" disabled="0" errors="0" time="0.001" timestamp="2020-06-25T11:59:35"&gt;
    &lt;testcase name="SuccessTest" status="run" result="completed" time="0" timestamp="2020-06-25T11:59:35" classname="AssertTest" /&gt;
  &lt;/testsuite&gt;
&lt;/testsuites&gt;
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
