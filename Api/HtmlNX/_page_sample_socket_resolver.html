<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resolver sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_socket.html">Socket Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Resolver sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleSocketResolver_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionLocation">Sample Location</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionNecessaryEnvironment">System Requirements</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionHowToOperate">Operation Procedure</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionPrecaution">Precautions</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleSocketResolver_SectionDetail">Detail</a></li>
</ul>
</div>
<div class="textblock"><p>Sample which demonstrates the use of the resolver.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionBrief"></a>
Overview</h1>
<p>First this sample prepares network connection by using the NIFM library. If network can be used, it queries for the provided hostname or IP via:</p>
<ul>
<li><a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a></li>
<li><a class="el" href="namespacenn_1_1socket.html#aaace32e2780295ca03bc72efa4b49406" title="Look up the address value for a host for Family::Af_Inet.">nn::socket::GetHostEntByAddr()</a></li>
<li><a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a></li>
<li><a class="el" href="namespacenn_1_1socket.html#a27ecfbc5167401b34339e6a5085686b3" title="Convert a SockAddr structure to a pair of host name and service strings.">nn::socket::GetNameInfo()</a></li>
</ul>
<p>Furthermore, <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a> &amp; <a class="el" href="namespacenn_1_1socket.html#aaace32e2780295ca03bc72efa4b49406" title="Look up the address value for a host for Family::Af_Inet.">nn::socket::GetHostEntByAddr()</a> were earlier resolver standards whereas <a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a> &amp; <a class="el" href="namespacenn_1_1socket.html#a27ecfbc5167401b34339e6a5085686b3" title="Convert a SockAddr structure to a pair of host name and service strings.">nn::socket::GetNameInfo()</a> are from later standards. The earlier standards differ from the latter on matters of semantics and use contracts. For example, you do not free the structure returned by <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a> but you do free the structure returned by <a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a>.</p>
<p>Proper use is as follows:</p>
<p>Earlier:</p><ul>
<li>The <a class="el" href="structnn_1_1socket_1_1_host_ent.html" title="Structures returned by network data base library.">nn::socket::HostEnt</a> pointer returned by <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a> is a thread local value and may change between calls.</li>
<li>To avoid race conditions, the <a class="el" href="structnn_1_1socket_1_1_host_ent.html" title="Structures returned by network data base library.">nn::socket::HostEnt</a> structure returned by <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a> is thread-localized. Simply referring to a global <a class="el" href="structnn_1_1socket_1_1_host_ent.html" title="Structures returned by network data base library.">nn::socket::HostEnt</a> is not supported.</li>
<li>To preserve the <a class="el" href="structnn_1_1socket_1_1_host_ent.html" title="Structures returned by network data base library.">nn::socket::HostEnt</a> the developer must copy it before calling <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a> or <a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a>.</li>
<li>The developer must not free the structure returned by <a class="el" href="namespacenn_1_1socket.html#a358030926e9e63c2e322de2bd3d26719" title="Look up Family::Af_Inet host IP address by hostname.">nn::socket::GetHostEntByName()</a>, as it is managed internally.</li>
<li>Errors are provided by the <em>h_errno</em> facility by dereferencing <a class="el" href="namespacenn_1_1socket.html#ad0a68baef0699e3e0063d3b686176b4c" title="Return pointer to host errno (h_errno) for GetHostEntByName() and GetHostEntByAddr().">nn::socket::GetHError()</a>.</li>
<li>Strings are provided by <a class="el" href="namespacenn_1_1socket.html#aba34614a3ddfe25e5bf3e5a77613832e" title="Return a human-readable version of h_error / GetHError().">nn::socket::HStrError()</a>.</li>
</ul>
<p>Later:</p><ul>
<li><a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a> is inherently re-entrant and therefore does not use thread-localized values.</li>
<li>The <a class="el" href="structnn_1_1socket_1_1_addr_info.html" title="Structure used by nn::socket::GetAddrInfo() to hold host address information.">nn::socket::AddrInfo</a> pointer is allocated from the socket heap.</li>
<li>The developer must free it back to the heap via <a class="el" href="namespacenn_1_1socket.html#a243828270d581fb029a86292031a30cf" title="Free the address info structure.">nn::socket::FreeAddrInfo()</a>.</li>
<li>The return value from <a class="el" href="namespacenn_1_1socket.html#aba7c9ca6a33baa3c3216c2de2c320f60" title="Get a list of IP addresses and port numbers.">nn::socket::GetAddrInfo()</a> &amp; <a class="el" href="namespacenn_1_1socket.html#a27ecfbc5167401b34339e6a5085686b3" title="Convert a SockAddr structure to a pair of host name and service strings.">nn::socket::GetNameInfo()</a> is a <a class="el" href="namespacenn_1_1socket.html#af622578590c2fb499d0c41023de4952a" title="Error return codes from nn::socket::GetAddrInfo() and nn::socket::GetNameInfo()">nn::socket::AiErrno</a> value.</li>
<li>Error to string constants are provided by <a class="el" href="namespacenn_1_1socket.html#a790112f00a11cf992ba2e04795c9590f" title="Return a human-readable version of the return value from GetAddrInfo() or GetNameInfo().">nn::socket::GAIStrError()</a>.</li>
</ul>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionLocation"></a>
Sample Location</h1>
<p>This sample program can be found at <a class="el" href="dir_e89614567eed155315cf43777cecfd10.html">Samples/Sources/Applications/SocketResolver </a>.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionNecessaryEnvironment"></a>
System Requirements</h1>
<p>It is a requirement to import network settings via SettingsManager prior to running this sample. Please refer to <a href="../../Package/contents/Pages/Page_104465190.html#Anchor_104465190_SettingsManager_network">ネットワーク接続設定の登録</a> for further information.</p>
<p>This sample requires a host name and an IP address to be passed via the command line. Note that "https://" should not be included when passing the host name in the argument because this sample doesn't parse it.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionHowToOperate"></a>
Operation Procedure</h1>
<p>None.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionPrecaution"></a>
Precautions</h1>
<p>None.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the Visual Studio Solution in the desired configuration and run it.</p>
<h1><a class="anchor" id="PageSampleSocketResolver_SectionDetail"></a>
Detail</h1>
<p>Here is the sequence of this sample program.</p>
<ul>
<li>Sends request to use network connection by the NIFM library.</li>
<li>Initializes the socket library.</li>
<li>Resolves host name or IP address, on error use appropriate error constant and string function, print results.</li>
<li>Finalizes the socket library.</li>
<li>Finalizes the NIFM library.</li>
</ul>
<p>Here is the expected output log of this sample program. Please note that it will not be printed in the Release build.</p>
<pre class="fragment">Waiting for network interface availability...
Waiting for network interface availability...
Waiting for network interface availability...
Waiting for network interface availability...
Waiting for network interface availability...
Waiting for network interface availability...
Waiting for network interface availability...
============ DemonstrateGetHostByName(www.google.com) ============
Host name: www.google.com
IP address: 74.125.28.99
IP address: 74.125.28.106
IP address: 74.125.28.105
IP address: 74.125.28.147
IP address: 74.125.28.104
IP address: 74.125.28.103
============ DemonstrateGetHostByAddr(74.125.28.147) ============
Host name: pc-in-f147.1e100.net
IP address: 74.125.28.147
============ DemonstrateGetAddrInfo(www.google.com) ============
IP address: 74.125.28.106
IP address: 74.125.28.105
IP address: 74.125.28.147
IP address: 74.125.28.104
IP address: 74.125.28.103
IP address: 74.125.28.99
============ DemonstrateGetAddrInfo(74.125.28.147) ============
IP address: 74.125.28.147
============ DemonstrateGetNameInfo(74.125.28.147) ============
  Host: pc-in-f147.1e100.net
  Service: http
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
