<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NvnTutorial/AssetFileDataHolder.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NvnTutorial/AssetFileDataHolder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_nvn_tutorial_library.html">NVN Tutorial Library</a> and <tt>NvnTutorial/AssetFileDataHolder.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_asset_file_data_holder_8h.html">nvntutorial/AssetFileDataHolder.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_texture_i_d_manager_8h.html">nvntutorial/TextureIDManager.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_memory_pool_8h.html">nvntutorial/MemoryPool.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNProgramData::Initialize</span></div>
<div class="line"><span class="comment"> * --------------------------</span></div>
<div class="line"><span class="comment"> * Sets up some default values for the structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNProgramData::Initialize()</div>
<div class="line">{</div>
<div class="line">    m_pProgramName = NULL;</div>
<div class="line">    m_ShaderStages = 0;</div>
<div class="line">    m_ShaderType = ShaderTypes::ShaderType_Num;</div>
<div class="line">    m_ShaderScratchMemorySize = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNProgramData::SetName</span></div>
<div class="line"><span class="comment"> * -----------------------</span></div>
<div class="line"><span class="comment"> * Sets the name of the shader program.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNProgramData::SetName(<span class="keyword">const</span> <span class="keywordtype">char</span>* pName, <span class="keywordtype">int</span> length)</div>
<div class="line">{</div>
<div class="line">    m_pProgramName = <span class="keyword">new</span> <span class="keywordtype">char</span>[length + 1];</div>
<div class="line">    memset(m_pProgramName, 0, length + 1);</div>
<div class="line">    memcpy(m_pProgramName, pName, length);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNProgramData::Finalize</span></div>
<div class="line"><span class="comment"> * ------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up the memory allocated for the object</span></div>
<div class="line"><span class="comment"> * and any NVN objects associated with it.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNProgramData::Finalize()</div>
<div class="line">{</div>
<div class="line">    nvnProgramFinalize(&amp;m_Program);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_pProgramName)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span>[] m_pProgramName;</div>
<div class="line">        m_pProgramName = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_ShaderBuffers.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(m_ShaderBuffers[i]);</div>
<div class="line">        <span class="keyword">delete</span> m_ShaderBuffers[i];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_ShaderBuffers.clear();</div>
<div class="line">    m_ShaderStages = 0;</div>
<div class="line"> </div>
<div class="line">    m_ShaderMemoryPool.Shutdown();</div>
<div class="line"> </div>
<div class="line">    m_ShaderScratchMemorySize = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNProgramData::BindShaderProgram</span></div>
<div class="line"><span class="comment"> * ---------------------------------</span></div>
<div class="line"><span class="comment"> * Binds the shader program.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNProgramData::BindShaderProgram(<a name="_a0"></a><a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>* pCommandBuffer)</div>
<div class="line">{</div>
<div class="line">    nvnCommandBufferBindProgram(pCommandBuffer, &amp;m_Program, m_ShaderStages);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNSpecializedProgramData::Initialize</span></div>
<div class="line"><span class="comment"> * -------------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up some default values for the structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNSpecializedProgramData::Initialize()</div>
<div class="line">{</div>
<div class="line">    m_pProgramName = NULL;</div>
<div class="line">    m_ShaderStages = 0;</div>
<div class="line">    m_ShaderScratchMemorySize = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNSpecializedProgramData::SetName</span></div>
<div class="line"><span class="comment"> * ----------------------------------</span></div>
<div class="line"><span class="comment"> * Sets the name of the shader program.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNSpecializedProgramData::SetName(<span class="keyword">const</span> <span class="keywordtype">char</span>* pName, <span class="keywordtype">int</span> length)</div>
<div class="line">{</div>
<div class="line">    m_pProgramName = <span class="keyword">new</span> <span class="keywordtype">char</span>[length + 1];</div>
<div class="line">    memset(m_pProgramName, 0, length + 1);</div>
<div class="line">    memcpy(m_pProgramName, pName, length);</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNProgramData::Finalize</span></div>
<div class="line"><span class="comment"> * ------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up the memory allocated for the object</span></div>
<div class="line"><span class="comment"> * and any NVN objects associated with it.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNSpecializedProgramData::Finalize()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; m_Variations.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        nvnProgramFinalize(m_Variations[i]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_Variations.clear();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_pProgramName)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span>[] m_pProgramName;</div>
<div class="line">        m_pProgramName = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_ShaderBuffers.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(m_ShaderBuffers[i]);</div>
<div class="line">        <span class="keyword">delete</span> m_ShaderBuffers[i];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_ShaderBuffers.clear();</div>
<div class="line">    m_ShaderStages = 0;</div>
<div class="line"> </div>
<div class="line">    m_ShaderMemoryPool.Shutdown();</div>
<div class="line"> </div>
<div class="line">    m_ShaderScratchMemorySize = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNSpecializedProgramData::BindShaderProgram</span></div>
<div class="line"><span class="comment"> * --------------------------------------------</span></div>
<div class="line"><span class="comment"> * Binds the shader program at the specified variation index.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNSpecializedProgramData::BindShaderProgram(<a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>* pCommandBuffer, <span class="keywordtype">unsigned</span> index)</div>
<div class="line">{</div>
<div class="line">    nvnCommandBufferBindProgram(pCommandBuffer, m_Variations[index], m_ShaderStages);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNModelData::Initialize</span></div>
<div class="line"><span class="comment"> * ------------------------</span></div>
<div class="line"><span class="comment"> * Sets up some default values for the structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNModelData::Initialize()</div>
<div class="line">{</div>
<div class="line">    m_pModelName = NULL;</div>
<div class="line">    m_VertexBufferSize = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNModelData::SetName</span></div>
<div class="line"><span class="comment"> * ---------------------</span></div>
<div class="line"><span class="comment"> * Sets the model&#39;s name.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNModelData::SetName(<span class="keyword">const</span> <span class="keywordtype">char</span>* pName, <span class="keywordtype">int</span> length)</div>
<div class="line">{</div>
<div class="line">    m_pModelName = <span class="keyword">new</span> <span class="keywordtype">char</span>[length + 1];</div>
<div class="line">    memset(m_pModelName, 0, length + 1);</div>
<div class="line">    memcpy(m_pModelName, pName, length);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNModelData::Finalize</span></div>
<div class="line"><span class="comment"> * ----------------------</span></div>
<div class="line"><span class="comment"> * Cleans up the memory allocated for the object</span></div>
<div class="line"><span class="comment"> * and any NVN objects associated with it.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNModelData::Finalize()</div>
<div class="line">{</div>
<div class="line">    nvnBufferFinalize(&amp;m_VertexBuffer);</div>
<div class="line"> </div>
<div class="line">    nvnBufferFinalize(&amp;m_IndexBuffer);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pModelName)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span>[] m_pModelName;</div>
<div class="line">        m_pModelName = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_BufferMemoryPool.Shutdown();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_Model.m_VertexAttributes.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        VertexAttribute&amp; attr = m_Model.m_VertexAttributes[i];</div>
<div class="line">        <span class="keywordflow">if</span>(attr.m_pData)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">delete</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(attr.m_pData);</div>
<div class="line">            attr.m_pData = NULL;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_Model.m_IndexData.m_pData)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(m_Model.m_IndexData.m_pData);</div>
<div class="line">        m_Model.m_IndexData.m_pData = NULL;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNModelData::AddVertexAttribute</span></div>
<div class="line"><span class="comment"> * --------------------------------</span></div>
<div class="line"><span class="comment"> * Copies the given vertex attribute data into</span></div>
<div class="line"><span class="comment"> * the model data structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNModelData::AddVertexAttribute(<span class="keyword">const</span> VertexAttributeHeader&amp; header)</div>
<div class="line">{</div>
<div class="line">    VertexAttribute attribute;</div>
<div class="line">    attribute.m_Name = std::string(header.m_pAttributeName, header.m_AttributeNameLength);</div>
<div class="line">    attribute.m_DataSize = header.m_AttributeDataSize;</div>
<div class="line">    attribute.m_ElementSize = header.m_AttributeDataSize / header.m_AttributeStride;</div>
<div class="line">    attribute.m_Stride = header.m_AttributeStride;</div>
<div class="line">    attribute.m_NvnFormat = header.m_NvnFormat;</div>
<div class="line">    attribute.m_Location = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(-1);</div>
<div class="line">    attribute.m_pData = <span class="keyword">new</span> <span class="keywordtype">char</span>[header.m_AttributeDataSize];</div>
<div class="line"> </div>
<div class="line">    memcpy(attribute.m_pData, header.m_AttributeData, header.m_AttributeDataSize);</div>
<div class="line">    m_Model.m_VertexAttributes.push_back(attribute);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNModelData::SetupAttributeStatesNVN</span></div>
<div class="line"><span class="comment"> * -------------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up NVNvertexAttibState and NVNvertexStream state</span></div>
<div class="line"><span class="comment"> * classes for each of the loaded vertex attributes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNModelData::SetupAttributeStatesNVN(int32_t (*GetLocation)(<span class="keyword">const</span> std::string&amp;))</div>
<div class="line">{</div>
<div class="line">    m_VertexAttributeStates.resize(m_Model.m_NumVertexAttributes);</div>
<div class="line">    m_VertexStreamStates.resize(m_Model.m_NumVertexAttributes);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; m_Model.m_NumVertexAttributes; ++i)</div>
<div class="line">    {</div>
<div class="line">        VertexAttribute&amp; attribute = m_Model.m_VertexAttributes[i];</div>
<div class="line">        uint32_t location = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(GetLocation(attribute.m_Name));</div>
<div class="line"> </div>
<div class="line">        attribute.m_Location = location;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (location &gt;= m_Model.m_NumVertexAttributes)</div>
<div class="line">            <a name="a1"></a><a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;location outside of vector range.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * NVN Vertex Attribute and Stream States</span></div>
<div class="line"><span class="comment">             * --------------------------------------</span></div>
<div class="line"><span class="comment">             * The NVNvertexAttributeState object is used to</span></div>
<div class="line"><span class="comment">             * define the format of a given vertex attribute. It</span></div>
<div class="line"><span class="comment">             * is also associated with an NVNvertexStreamState</span></div>
<div class="line"><span class="comment">             * object. The stream state controls the stride and</span></div>
<div class="line"><span class="comment">             * the divisor of the attribute. The attribute state</span></div>
<div class="line"><span class="comment">             * and stream state objects are bound to a command</span></div>
<div class="line"><span class="comment">             * buffer in arrays. The index into the attribute</span></div>
<div class="line"><span class="comment">             * state array of a given attribute determines it&#39;s</span></div>
<div class="line"><span class="comment">             * binding location in the shader. The stream index</span></div>
<div class="line"><span class="comment">             * held by the attribute state is an index into the</span></div>
<div class="line"><span class="comment">             * bound stream state array.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">        <a name="_a2"></a><a class="code" href="struct_n_v_nvertex_attrib_state.html">NVNvertexAttribState</a>* pAttributeState = &amp;m_VertexAttributeStates[location];</div>
<div class="line"> </div>
<div class="line">        nvnVertexAttribStateSetDefaults(pAttributeState);</div>
<div class="line">        nvnVertexAttribStateSetStreamIndex(pAttributeState, location);</div>
<div class="line">        nvnVertexAttribStateSetFormat(pAttributeState, <span class="keyword">static_cast&lt;</span><a class="code" href="group__nvn__c__enum.html#ga99463f5b9af6151e604b01dfdd5fecab">NVNformat</a><span class="keyword">&gt;</span>(attribute.m_NvnFormat), 0);</div>
<div class="line"> </div>
<div class="line">        <a name="_a3"></a><a class="code" href="struct_n_v_nvertex_stream_state.html">NVNvertexStreamState</a>* pStreamState = &amp;m_VertexStreamStates[location];</div>
<div class="line">        nvnVertexStreamStateSetDefaults(pStreamState);</div>
<div class="line">        nvnVertexStreamStateSetStride(pStreamState, attribute.m_Stride);</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNTextureData::Initialize</span></div>
<div class="line"><span class="comment"> * --------------------------</span></div>
<div class="line"><span class="comment"> * Sets up some default values for the structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNTextureData::Initialize()</div>
<div class="line">{</div>
<div class="line">    m_TextureID = 0;</div>
<div class="line">    m_SamplerID = 0;</div>
<div class="line">    m_TextureInitialized = <span class="keyword">false</span>;</div>
<div class="line">    m_SamplerInitialized = <span class="keyword">false</span>;</div>
<div class="line">    m_TextureHandle = NULL;</div>
<div class="line">    m_pTextureName = NULL;</div>
<div class="line">    m_TextureDataSize = 0;</div>
<div class="line">    m_GpuVersion = 0;</div>
<div class="line">    m_Alignment = 0;</div>
<div class="line">    m_Width = 0;</div>
<div class="line">    m_Height = 0;</div>
<div class="line">    m_Depth = 0;</div>
<div class="line">    m_NvnTextureTarget = <a class="code" href="group__nvn__c__enum.html#gga7f247010f53480c7dd1f3b2ad638c431a856184892b54a04cd16ec7848108ec53">NVN_TEXTURE_TARGET_2D</a>;</div>
<div class="line">    m_NvnFormat = <a class="code" href="group__nvn__c__enum.html#gga99463f5b9af6151e604b01dfdd5fecaba7c782a722996d27efbfc6f9128f32d73">NVN_FORMAT_NONE</a>;</div>
<div class="line">    m_MipLevels = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNTextureData::SetName</span></div>
<div class="line"><span class="comment"> * -----------------------</span></div>
<div class="line"><span class="comment"> * Sets the name of the texture.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNTextureData::SetName(<span class="keyword">const</span> <span class="keywordtype">char</span>* pName, <span class="keywordtype">int</span> length)</div>
<div class="line">{</div>
<div class="line">    m_pTextureName = <span class="keyword">new</span> <span class="keywordtype">char</span>[length + 1];</div>
<div class="line">    memset(m_pTextureName, 0, length + 1);</div>
<div class="line">    memcpy(m_pTextureName, pName, length);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * NVNTextureData::Finalize</span></div>
<div class="line"><span class="comment"> * ------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up the memory allocated for the object</span></div>
<div class="line"><span class="comment"> * and any NVN objects associated with it.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> NVNTextureData::Finalize()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (m_TextureInitialized)</div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(&amp;m_Texture);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_SamplerInitialized)</div>
<div class="line">    {</div>
<div class="line">        nvnSamplerFinalize(&amp;m_Sampler);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_TextureMemoryPool.Shutdown();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_pTextureName)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span>[] m_pTextureName;</div>
<div class="line">        m_pTextureName = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_TextureHandle = NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder Constructor</span></div>
<div class="line"><span class="comment"> * -------------------------------</span></div>
<div class="line"><span class="comment"> * Empty default constuctor.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">AssetFileDataHolder::AssetFileDataHolder()</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder Destructor</span></div>
<div class="line"><span class="comment"> * ------------------------------</span></div>
<div class="line"><span class="comment"> * Calls the Finalize funcion to clean up if needed.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">AssetFileDataHolder::~AssetFileDataHolder()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacenn_1_1htc.html#a8337c461b81d43d85571e7fa4e574c48">Finalize</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::Finalize</span></div>
<div class="line"><span class="comment"> * -----------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up the memory allocated for the objects.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::Finalize()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_ProgramData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_ProgramData[i])</div>
<div class="line">        {</div>
<div class="line">            m_ProgramData[i]-&gt;Finalize();</div>
<div class="line">            <span class="keyword">delete</span> m_ProgramData[i];</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_SpecializedProgramData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_SpecializedProgramData[i])</div>
<div class="line">        {</div>
<div class="line">            m_SpecializedProgramData[i]-&gt;Finalize();</div>
<div class="line">            <span class="keyword">delete</span> m_SpecializedProgramData[i];</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_ModelData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_ModelData[i])</div>
<div class="line">        {</div>
<div class="line">            m_ModelData[i]-&gt;Finalize();</div>
<div class="line">            <span class="keyword">delete</span> m_ModelData[i];</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_TextureData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_TextureData[i])</div>
<div class="line">        {</div>
<div class="line">            m_TextureData[i]-&gt;Finalize();</div>
<div class="line">            <span class="keyword">delete</span> m_TextureData[i];</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::AddProgramData</span></div>
<div class="line"><span class="comment"> * -----------------------------------</span></div>
<div class="line"><span class="comment"> * Adds a shader program data structure to the data holder.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::AddProgramData(NVNProgramData* pProgramData)</div>
<div class="line">{</div>
<div class="line">    m_ProgramData.push_back(pProgramData);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::AddSpecializedProgramData</span></div>
<div class="line"><span class="comment"> * ----------------------------------------------</span></div>
<div class="line"><span class="comment"> * Adds a specialized shader program data structure to the data holder.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::AddSpecializedProgramData(NVNSpecializedProgramData* pSpecializedProgramData)</div>
<div class="line">{</div>
<div class="line">    m_SpecializedProgramData.push_back(pSpecializedProgramData);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::AddModelData</span></div>
<div class="line"><span class="comment"> * ---------------------------------</span></div>
<div class="line"><span class="comment"> * Adds a model data structure to the data holder.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::AddModelData(NVNModelData* pModelData)</div>
<div class="line">{</div>
<div class="line">    m_ModelData.push_back(pModelData);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::AddTextureData</span></div>
<div class="line"><span class="comment"> * -----------------------------------</span></div>
<div class="line"><span class="comment"> * Adds a texture data structure to the data holder.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::AddTextureData(NVNTextureData* pTextureData)</div>
<div class="line">{</div>
<div class="line">    m_TextureData.push_back(pTextureData);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::GetProgramData</span></div>
<div class="line"><span class="comment"> * -----------------------------------</span></div>
<div class="line"><span class="comment"> * Get the list of shader program data structures.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">std::vector&lt;NVNProgramData*&gt;&amp; AssetFileDataHolder::GetProgramData()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> m_ProgramData;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::GetSpecializedProgramData</span></div>
<div class="line"><span class="comment"> * ----------------------------------------------</span></div>
<div class="line"><span class="comment"> * Get the list of specialized shader program data structures.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">std::vector&lt;NVNSpecializedProgramData*&gt;&amp; AssetFileDataHolder::GetSpecializedProgramData()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> m_SpecializedProgramData;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::GetModelData</span></div>
<div class="line"><span class="comment"> * ---------------------------------</span></div>
<div class="line"><span class="comment"> * Get the list of model data structures.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">std::vector&lt;NVNModelData*&gt;&amp; AssetFileDataHolder::GetModelData()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> m_ModelData;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::GetTextureData</span></div>
<div class="line"><span class="comment"> * -----------------------------------</span></div>
<div class="line"><span class="comment"> * Get the list of texture data structures.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">std::vector&lt;NVNTextureData*&gt;&amp; AssetFileDataHolder::GetTextureData()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> m_TextureData;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::SetupAttributeStatesNVN</span></div>
<div class="line"><span class="comment"> * --------------------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up the vertex attribute states and vertex stream</span></div>
<div class="line"><span class="comment"> * states for each model.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::SetupAttributeStatesNVN(int32_t(*GetLocation)(<span class="keyword">const</span> std::string&amp;))</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_ModelData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        m_ModelData[i]-&gt;SetupAttributeStatesNVN(GetLocation);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * AssetFileDataHolder::SetupTextureSamplerHandle</span></div>
<div class="line"><span class="comment"> * ----------------------------------------------</span></div>
<div class="line"><span class="comment"> * Builds a sampler using the passed in NVNsamplerBuilder,</span></div>
<div class="line"><span class="comment"> * registers the sampler for each texture, and creates</span></div>
<div class="line"><span class="comment"> * the texture handle.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> AssetFileDataHolder::SetupTextureSamplerHandle(<a name="_a4"></a><a class="code" href="struct_n_v_ndevice.html">NVNdevice</a>* pDevice, TextureIDManager* pTextureIDManager, <a name="_a5"></a><a class="code" href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a>* pSamplerBuilder)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; m_TextureData.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* Initialize the sampler used for the texture and register it with the pool. */</span></div>
<div class="line">        <a class="code" href="group__nvn__c__api__typedefs.html#ga645eaacf47907468e5df6be7f9f63352">NVNboolean</a> samplerSuccess = nvnSamplerInitialize(&amp;m_TextureData[i]-&gt;m_Sampler, pSamplerBuilder);</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(samplerSuccess, <span class="stringliteral">&quot;Failed to initialize sampler\n&quot;</span>);</div>
<div class="line">        <a name="a6"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(samplerSuccess);</div>
<div class="line">        m_TextureData[i]-&gt;m_SamplerInitialized = <span class="keyword">true</span>;</div>
<div class="line">        m_TextureData[i]-&gt;m_SamplerID = pTextureIDManager-&gt;RegisterSampler(&amp;m_TextureData[i]-&gt;m_Sampler);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Combine the texture ID and the sampler ID to make a 64-bit texture handle. */</span></div>
<div class="line">        m_TextureData[i]-&gt;m_TextureHandle = nvnDeviceGetTextureHandle(pDevice, m_TextureData[i]-&gt;m_TextureID, m_TextureData[i]-&gt;m_SamplerID);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="a_asset_file_data_holder_8h_html"><div class="ttname"><a href="_asset_file_data_holder_8h.html">AssetFileDataHolder.h</a></div><div class="ttdoc">This files defines some structures that hold the data provided by an asset file created by Tutorial02...</div></div>
<div class="ttc" id="a_memory_pool_8h_html"><div class="ttname"><a href="_memory_pool_8h.html">MemoryPool.h</a></div><div class="ttdoc">This file defines a wrapper around the NVNmemoryPool object that keeps track of the memory allocated ...</div></div>
<div class="ttc" id="a_texture_i_d_manager_8h_html"><div class="ttname"><a href="_texture_i_d_manager_8h.html">TextureIDManager.h</a></div><div class="ttdoc">This file defines a class that wraps the texture and sampler registering process.</div></div>
<div class="ttc" id="agroup__nvn__c__api__typedefs_html_ga645eaacf47907468e5df6be7f9f63352"><div class="ttname"><a href="group__nvn__c__api__typedefs.html#ga645eaacf47907468e5df6be7f9f63352">NVNboolean</a></div><div class="ttdeci">uint8_t NVNboolean</div><div class="ttdoc">Basic Boolean type.</div><div class="ttdef"><b>Definition:</b> nvn.h:156</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga99463f5b9af6151e604b01dfdd5fecab"><div class="ttname"><a href="group__nvn__c__enum.html#ga99463f5b9af6151e604b01dfdd5fecab">NVNformat</a></div><div class="ttdeci">NVNformat</div><div class="ttdoc">Identifies how data elements stored in texture or buffer objects are encoded.</div><div class="ttdef"><b>Definition:</b> nvn.h:1175</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga7f247010f53480c7dd1f3b2ad638c431a856184892b54a04cd16ec7848108ec53"><div class="ttname"><a href="group__nvn__c__enum.html#gga7f247010f53480c7dd1f3b2ad638c431a856184892b54a04cd16ec7848108ec53">NVN_TEXTURE_TARGET_2D</a></div><div class="ttdeci">@ NVN_TEXTURE_TARGET_2D</div><div class="ttdoc">Two-dimensional texture.</div><div class="ttdef"><b>Definition:</b> nvn.h:1087</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga99463f5b9af6151e604b01dfdd5fecaba7c782a722996d27efbfc6f9128f32d73"><div class="ttname"><a href="group__nvn__c__enum.html#gga99463f5b9af6151e604b01dfdd5fecaba7c782a722996d27efbfc6f9128f32d73">NVN_FORMAT_NONE</a></div><div class="ttdeci">@ NVN_FORMAT_NONE</div><div class="ttdoc">Placeholder enum indicating no defined format; never valid.</div><div class="ttdef"><b>Definition:</b> nvn.h:1178</div></div>
<div class="ttc" id="anamespacenn_1_1htc_html_a8337c461b81d43d85571e7fa4e574c48"><div class="ttname"><a href="namespacenn_1_1htc.html#a8337c461b81d43d85571e7fa4e574c48">nn::htc::Finalize</a></div><div class="ttdeci">void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the htc library.</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="astruct_n_v_ncommand_buffer_html"><div class="ttname"><a href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn.h:236</div></div>
<div class="ttc" id="astruct_n_v_ndevice_html"><div class="ttname"><a href="struct_n_v_ndevice.html">NVNdevice</a></div><div class="ttdoc">API class used to represent a specific GPU/device.</div><div class="ttdef"><b>Definition:</b> nvn.h:221</div></div>
<div class="ttc" id="astruct_n_v_nsampler_builder_html"><div class="ttname"><a href="struct_n_v_nsampler_builder.html">NVNsamplerBuilder</a></div><div class="ttdoc">Object specifying state used to construct new sampler objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:352</div></div>
<div class="ttc" id="astruct_n_v_nvertex_attrib_state_html"><div class="ttname"><a href="struct_n_v_nvertex_attrib_state.html">NVNvertexAttribState</a></div><div class="ttdoc">API state object controlling vertex attrib state.</div><div class="ttdef"><b>Definition:</b> nvn.h:274</div></div>
<div class="ttc" id="astruct_n_v_nvertex_stream_state_html"><div class="ttname"><a href="struct_n_v_nvertex_stream_state.html">NVNvertexStreamState</a></div><div class="ttdoc">API state object controlling vertex stream state.</div><div class="ttdef"><b>Definition:</b> nvn.h:279</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
