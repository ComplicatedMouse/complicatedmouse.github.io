<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ClaimPeriodicBenefitWithUserSystemClock | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_time.html">Time Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ClaimPeriodicBenefitWithUserSystemClock </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ClaimPeriodicBenefitWithUserSystemClock_SectionBrief">Overview</a></li>
<li class="level1"><a href="#ClaimPeriodicBenefitWithUserSystemClock_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionDetail">Description</a><ul><li class="level2"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#TimeClaimPeriodicBenefitWithUserSystemClock_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This sample program demonstrates how to use the user clock time (<code><a class="el" href="classnn_1_1time_1_1_standard_user_system_clock.html">nn::time::StandardUserSystemClock</a></code>) to perform a clock-operation aware determination of whether a periodic benefit can be claimed.</p>
<h1><a class="anchor" id="ClaimPeriodicBenefitWithUserSystemClock_SectionBrief"></a>
Overview</h1>
<p>This sample program demonstrates how to use the <code><a class="el" href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7" title="Performs a user clock operation-aware determination of whether a periodic benefit can be claimed.">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a></code> function to use user clock time values to manage events that are periodically triggered on the basis of date and time criteria, such as for benefits that can be claimed every day after the date changes and events that only occur on particular days of the week every week.</p>
<p>For more information, see <code><a class="el" href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">ClaimPeriodicBenefitWithUserSystemClock</a></code>.</p>
<h1><a class="anchor" id="ClaimPeriodicBenefitWithUserSystemClock_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_a849532f866384c691511d3ba438df6e.html">Samples/Sources/Applications/TimeClaimPeriodicBenefit/ </a> </code>.</p>
<h1><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<h1><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_time_claim_periodic_benefit_8cpp.html" title="Sample program demonstrating how to use the user clock time (nn::time::StandardUserSystemClock) to de...">TimeClaimPeriodicBenefit.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">nn/time.h</a>&gt;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="os___thread_api_8h.html">nn/os/os_ThreadApi.h</a>&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// Time verification callback class for claiming a benefit once per minute (each time the minute component of the user clock time changes).</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">class </span>PerMinuteBenefitCheckCallback : <span class="keyword">public</span> <a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html">nn::time::CheckCalendarTimeCallback</a></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#a5da78723e0f8e2f9af19616d689f8aaf">IsSameTiming</a>(</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; lhs,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; rhs) <span class="keyword">const</span> <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// This function determines whether two times represent the same time at which a benefit was claimed.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">        // For example, for benefits that can only be claimed once each time the date changes, this function must return true when the dates (day, month, and year) are the same, as follows.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">        return</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">            lhs.year == rhs.year &amp;&amp;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">            lhs.month == rhs.month &amp;&amp;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">            lhs.day == rhs.day;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">        // For example, to allow a benefit to be claimed again every day after 04:00, do the following.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">        nn::time::CalendarTime lhsCalendar = lhs - nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">        nn::time::CalendarTime rhsCalendar = rhs-nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">        // If the day, month, and year components of a date and time object from 4 hours ago are the same as the current day, month, and year, treat it as being the same benefit receipt timing.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">        return</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">            lhsCalendar.year == rhsCalendar.year &amp;&amp;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">            lhsCalendar.month == rhsCalendar.month &amp;&amp;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">            lhsCalendar.day == rhsCalendar.day;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// This sample defines time objects for which the minute, hour, day, month, and year components are the same to represent the same benefit receipt timing, and returns true when this condition is satisfied.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            lhs.year == rhs.year &amp;&amp;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            lhs.month == rhs.month &amp;&amp;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            lhs.day == rhs.day &amp;&amp;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            lhs.hour == rhs.hour &amp;&amp;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            lhs.minute == rhs.minute;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#adcd6eeb5f2b7acb924edf766bec8fd44">IsMatched</a>(</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; calendarTime) <span class="keyword">const</span> <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">// This function determines whether the specified CalendarTime object represents a valid time at which the benefit can be claimed.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">        // To only allow a benefit to be claimed on Wednesdays, for example, only return true when calendarTime represents a Wednesday, as follows.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">        nn::time::DayOfWeek dayOfWeek = nn::time::GetDayOfWeek(calendarTime.year, calendarTime.month, calendarTime.day);</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">        return dayOfWeek == nn :: time :: DayOfWeek_Wednesday;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// In this sample, the benefit can be claimed at any time regardless of the date, so this function does not do anything and simply returns true.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(calendarTime);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;};</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// Initialize the time library.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a class="code" href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a>());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Initialize\n&quot;</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;---- Sample of claiming a periodic benefit with nn::time::StandardUserSystemClock.\n&quot;</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// The PeriodicBenefitClaimContext context for nn::time::ClaimPeriodicBenefitWithUserSystemClock().</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// (The required number of instances of this PeriodicBenefitClaimContext object is equal to the number of types of periodic events you want to support.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// On the first determination, pass the instance of this object initialized by the constructor to ClaimPeriodicBenefitWithUserSystemClock() as is.)</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="structnn_1_1time_1_1_periodic_benefit_claim_context.html">nn::time::PeriodicBenefitClaimContext</a> handoverContext;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// The maximum penalty period.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// (The maximum penalty period incurred when a clock operation is detected. The benefit cannot be claimed during this penalty period.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// In this sample, the benefit can be claimed once per minute (each time the minute component of the clock time changes), so the maximum penalty period is set to one minute.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// For more information, see the API Reference.)</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">const</span> <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> MaxPenaltyTimeSpan = <a class="code" href="classnn_1_1_time_span.html#aa00b1f4275afe5351321caaa3679b4df">nn::TimeSpan::FromMinutes</a>(1);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// The amount of by which the clock can be rolled forward without incurring a penalty.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// (Even when the clock is rolled forward, as long as the magnitude of the change is less than or equal to this value, the clock operation is ignored.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// In this sample, this value is simply set to 0 for simplicity.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// For more information, see the API Reference.)</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">const</span> <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> AcceptableOperationTimeSpan(0);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Time verification class.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// (Must be internally implemented and inherit the nn::time::CheckCalendarTimeCallback class.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// For more information about implementation, see the API Reference.)</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    PerMinuteBenefitCheckCallback perMinuteBenefitCheckCallback;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> TryCount = 3;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1 ; i &lt;= TryCount ; i++)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">// Create a current ClockSnapshot object for determining whether the benefit can be claimed.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a> currentSnapshot;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a>(&amp;currentSnapshot);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> c = currentSnapshot.<a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#a7f42d9ee4a86b79cd6c7905920483150">GetStandardUserSystemClockCalendarTime</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;[Claim Benefit (%d/%d) at %04d/%02d/%02d %02d:%02d:%02d]\n&quot;</span>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                i, TryCount,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                c.year, c.month, c.day, c.hour, c.minute, c.second);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keyword">auto</span> backup = handoverContext; <span class="comment">// This is used to detect updates to handoverContext in subsequent calls to ClaimPeriodicBenefitWithUserSystemClock().</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keyword">auto</span> result = <a class="code" href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a>(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            &amp;handoverContext,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            currentSnapshot,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            MaxPenaltyTimeSpan,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            AcceptableOperationTimeSpan,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            &amp;perMinuteBenefitCheckCallback);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span>(result == <a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39">nn::time::PeriodicBenefitClaimResult_Success</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">// The periodic benefit can be claimed.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="comment">// These benefits can be used to give users items or points or to trigger some kind of</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">// periodic event (whatever is appropriate for the application).</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; I can receive a benefit!\n&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8">nn::time::PeriodicBenefitClaimResult_NotReceivableTiming</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="comment">// The time interval after which the benefit can be claimed again (starting from when the benefit was previously claimed) has not yet occurred, so the benefit cannot be claimed.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed. (nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)\n&quot;</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc">nn::time::PeriodicBenefitClaimResult_Penalty</a>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="comment">// A penalty period during which the benefit cannot be claimed is currently in effect because a clock operation was detected.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// The penalty period starts from the moment at which the clock was changed.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed. (nn::time::PeriodicBenefitClaimResult_Penalty)\n&quot;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">// Result values not in the preceding list are never returned.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;Unexpected result(%d)&quot;</span>, result);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// For example, keeping this handoverContext object for use next time by saving it to save data makes it possible to</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// manage how periodic benefits are claimed even across application exit or system shutdown events.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// Note that regardless of the result returned by nn::time::ClaimPeriodicBenefitWithUserSystemClock() (success or failure),</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">// this handoverContext object must be kept for the next call to the function.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// Also, to prevent inconsistent data states from occurring when working with benefits that apply permanent effects within the application,</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// we strongly recommend that you save the PeriodicBenefitClaimContext (handoverContext) object used to make the determination together</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// with the application-side result of claiming the benefit.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// PeriodicBenefitClaimContext objects satisfy the standard C++ requirements for being trivially copyable and can be copied with std::memcpy(),</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// so you can save them to save data or similar as is.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">// The following pseudocode shows one recommended implementation.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">        bool isCommitRequired = false;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">        if(backup != handoverContext) // It must be saved if updated, regardless of whether the result is success or failure.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">            WriteContext(handoverContext); // Save handoverContext.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">        // Here, no inconsistencies will occur even if the application is closed or the system is powered off.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">        if(result.IsSuccess())</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">            WriteBenefit(...); // Save the application-side result of claiming the benefit.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">        // Here, no inconsistencies will occur even if the application is closed or the system is powered off.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">        if(isCommitRequired)</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">            CommitSaveData(); // Save both of these to save data at the same time.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(backup);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; Waiting three seconds.\n&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a>(3));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// During this sleep period, press the HOME Button to display DevMenu or the HOME Menu, and then change the time or the time zone setting.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="comment">// Subsequent determinations will then be performed on the branch when clock operations are detected.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// After changing the clock time, if you return to the sample application within one minute, you can confirm that a penalty period is in effect and that the benefit cannot be claimed.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// Meanwhile, if you stay in DevMenu or the HOME Menu after changing the clock, for example, and allow at least one minute to elapse before returning to the sample application (that is, a period of time of at least</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// MaxPenaltyTimeSpan has elapsed after the clock operation), you can confirm that the benefit can be claimed again.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// Finalize the time library.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a class="code" href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a>() );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Finalize\n&quot;</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="ttc" id="aclassnn_1_1_time_span_html"><div class="ttname"><a href="classnn_1_1_time_span.html">nn::TimeSpan</a></div><div class="ttdoc">This class represents a length of time.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:456</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_a8e74f5ceb64fc02aa614eed3cc148e82"><div class="ttname"><a href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a></div><div class="ttdeci">static constexpr TimeSpan FromSeconds(int64_t seconds) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in seconds.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:563</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_aa00b1f4275afe5351321caaa3679b4df"><div class="ttname"><a href="classnn_1_1_time_span.html#aa00b1f4275afe5351321caaa3679b4df">nn::TimeSpan::FromMinutes</a></div><div class="ttdeci">static constexpr TimeSpan FromMinutes(int64_t minutes) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in minutes.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:576</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html">nn::time::CheckCalendarTimeCallback</a></div><div class="ttdoc">Callback class for checking the time.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:41</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html_a5da78723e0f8e2f9af19616d689f8aaf"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html#a5da78723e0f8e2f9af19616d689f8aaf">nn::time::CheckCalendarTimeCallback::IsSameTiming</a></div><div class="ttdeci">virtual bool IsSameTiming(const CalendarTime &amp;lhs, const CalendarTime &amp;rhs) const NN_NOEXCEPT=0</div><div class="ttdoc">Determines whether two times represent the same benefit receipt timing.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html_adcd6eeb5f2b7acb924edf766bec8fd44"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html#adcd6eeb5f2b7acb924edf766bec8fd44">nn::time::CheckCalendarTimeCallback::IsMatched</a></div><div class="ttdeci">virtual bool IsMatched(const CalendarTime &amp;calendarTime) const NN_NOEXCEPT=0</div><div class="ttdoc">Determines whether the specified time represents a valid time when benefits can be claimed.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a></div><div class="ttdoc">Class for storing various types of time information.</div><div class="ttdef"><b>Definition:</b> time_ClockSnapshot.h:46</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_a7f42d9ee4a86b79cd6c7905920483150"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#a7f42d9ee4a86b79cd6c7905920483150">nn::time::ClockSnapshot::GetStandardUserSystemClockCalendarTime</a></div><div class="ttdeci">nn::time::CalendarTime GetStandardUserSystemClockCalendarTime() const NN_NOEXCEPT</div><div class="ttdoc">Gets the user clock calendar information stored by the object.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_ab46c9996752e49c22634b140a99deee6"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a></div><div class="ttdeci">static void CreateWithStandardSystemClock(ClockSnapshot *pOut) NN_NOEXCEPT</div><div class="ttdoc">Creates the object with the latest system time.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">Puts the current thread to sleep for the specified amount of time.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_a316a48243971bfac1dfcc1ea07466563"><div class="ttname"><a href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a></div><div class="ttdeci">Result Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the use of the time library.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_aa5e24f241a0806d6ac316075b655b3f7"><div class="ttname"><a href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a></div><div class="ttdeci">PeriodicBenefitClaimResult ClaimPeriodicBenefitWithUserSystemClock(PeriodicBenefitClaimContext *pHandover, const ClockSnapshot &amp;currentSnapshot, const nn::TimeSpan &amp;maxPenaltyTimeSpan, const nn::TimeSpan &amp;acceptableOperationTimeSpan, const CheckCalendarTimeCallback *pCheckCalendarTimeCallback) NN_NOEXCEPT</div><div class="ttdoc">Performs a user clock operation-aware determination of whether a periodic benefit can be claimed.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8">nn::time::PeriodicBenefitClaimResult_NotReceivableTiming</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_NotReceivableTiming</div><div class="ttdoc">The benefit cannot be claimed at this time.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:228</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc">nn::time::PeriodicBenefitClaimResult_Penalty</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_Penalty</div><div class="ttdoc">The benefit cannot be claimed due to a penalty.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:229</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39">nn::time::PeriodicBenefitClaimResult_Success</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_Success</div><div class="ttdoc">The benefit can be claimed.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:227</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_af3d5226ce5093e581b3892fbb2fbc34c"><div class="ttname"><a href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a></div><div class="ttdeci">Result Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the time library, making its features available to use.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_a205eaac89c47d49cb982bf136e113de2"><div class="ttname"><a href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a></div><div class="ttdeci">#define NN_ABORT(...)</div><div class="ttdoc">Stops execution.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:29</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_a0e31cc4dc24d85253a31e48b1a85ab33"><div class="ttname"><a href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div><div class="ttdeci">#define NN_NOEXCEPT</div><div class="ttdoc">Declares that the function does not throw exceptions.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:196</div></div>
<div class="ttc" id="ann___macro_8h_html_a5b950a1a9c5f9b57d49185d8fb4cd4ab"><div class="ttname"><a href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div><div class="ttdeci">#define NN_OVERRIDE</div><div class="ttdoc">Declares that the function overrides a virtual function.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:210</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="aos___thread_api_8h_html"><div class="ttname"><a href="os___thread_api_8h.html">os_ThreadApi.h</a></div><div class="ttdoc">Declarations for API resources for threads.</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a></div><div class="ttdoc">The structure that handles calendar information.</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:37</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_periodic_benefit_claim_context_html"><div class="ttname"><a href="structnn_1_1time_1_1_periodic_benefit_claim_context.html">nn::time::PeriodicBenefitClaimContext</a></div><div class="ttdoc">Structure for storing information used to determine whether a periodic benefit can be claimed.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:106</div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div><div class="ttdoc">Declarations of API resources for the time library.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="TimeClaimPeriodicBenefitWithUserSystemClock_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program has the following flow.</p>
<ul>
<li>Initialize the time library.</li>
<li>Determine whether a periodic benefit can be claimed (three times).</li>
<li>Finalize the time library.</li>
</ul>
<p>This sample uses an example of managing a periodic event that allows a benefit to be claimed again each time the minute component of the user clock time changes.</p>
<p>Note that this sample only uses an implementation where the benefit can be claimed again each time the minute component of the user clock time changes so that the functionality of the library can be observed in a short amount of time. In real applications, use cases where the time intervals are longer than a minute are more likely to be useful, such as when allowing a benefit to be claimed again each time the date changes or allowing a benefit to be claimed once every week on Wednesday, for example.</p>
<p>If you simply want to allow a benefit to be claimed again after x hours have elapsed since the previous time the benefit was claimed (that is, regardless of the user clock time), use the <code><a class="el" href="namespacenn_1_1time.html#a992889d77943f2f8f8d0c827ebd7eef1" title="Calculates the actual elapsed time between two nn::time::ClockSnapshot objects.">nn::time::CalculateSpanBetween()</a></code> function to calculate the time elapsed since the previous time the benefit was claimed, and then determine whether at least the desired amount of time has elapsed. For more information about using <code><a class="el" href="namespacenn_1_1time.html#a992889d77943f2f8f8d0c827ebd7eef1" title="Calculates the actual elapsed time between two nn::time::ClockSnapshot objects.">nn::time::CalculateSpanBetween()</a></code> to calculate elapsed time, see the <a class="el" href="_page_sample_time_calculate_span_between.html">CalculateSpanBetween</a> sample.</p>
<p>The approach of using the raw wall time elapsed since the benefit was previously claimed significantly simplifies program implementation and behavior in comparison to this sample and can dramatically reduce the associated development and testing costs. For this reason, we strongly recommend this approach during the application planning phase, at least as an initial solution.</p>
<p>For functions that return <code><a class="el" href="classnn_1_1_result.html" title="Represents the generic result of an operation.">nn::Result</a></code>, <code><a class="el" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></code> is used to handle cases where success always occurs because the pre-conditions are met.</p>
<p>The following file shows the execution results of this sample. However, the displayed date value will be different each time you run the sample. </p><pre class="fragment">nn::time::Initialize
---- Sample of claim periodic benefit with nn::time::StandardUserSystemClock.
[Claim Benefit (1/3) at 2017/10/18 09:22:34]
    I can receive benefit!
    Waiting 3 seconds.
[Claim Benefit (2/3) at 2017/10/18 09:22:37]
    nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed.(nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)
    Waiting 3 seconds.
[Claim Benefit (3/3) at 2017/10/18 09:22:40]
    nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed.(nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)
    Waiting 3 seconds.
nn::time::Finalize
</pre><p>Also, if it takes longer than one minute to determine whether the benefit can be claimed, the "I can receive a benefit!" message may be displayed multiple times, as shown in the following example. </p><pre class="fragment">nn::time::Initialize
---- Sample of claim periodic benefit with nn::time::StandardUserSystemClock.
[Claim Benefit (1/3) at 2017/10/18 09:25:59]
    I can receive benefit!
    Waiting 3 seconds.
[Claim Benefit (2/3) at 2017/10/18 09:26:02]
    I can receive benefit!
    Waiting 3 seconds.
[Claim Benefit (3/3) at 2017/10/18 09:26:05]
    nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed.(nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)
    Waiting 3 seconds.
nn::time::Finalize
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
