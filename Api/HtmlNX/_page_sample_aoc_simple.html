<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Downloadable Content Operation Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_aoc.html">Downloadable Content Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Downloadable Content Operation Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleAocSimple_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleAocSimple_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleAocSimple_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleAocSimple_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This sample program shows how to use downloadable content operations.</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionBrief"></a>
Overview</h1>
<p>This sample uses downloadable content by using the downloadable content library.</p>
<p>The downloadable content library manages downloadable content installed on the system. Note that to actually load downloadable content, you must use the file system library.</p>
<p><a class="el" href="namespacenn_1_1aoc.html">Downloadable Content Library API Reference</a> <a class="el" href="namespacenn_1_1fs.html">File System Library API Reference</a></p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <a class="el" href="dir_4ac31836cdc3097aaeb80a29b6218e28.html">Samples/Sources/Applications/AocSimple </a> .</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>You must have installed downloadable content to the development hardware with an <code>ApplicationId</code> of <code>0x0100cb3000062000</code>. To install the downloadable content, run <code>InstallAoc.bat</code> within the <code>AocSimple</code> directory.</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionHowToOperate"></a>
How to Use</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionPrecaution"></a>
Important Information</h1>
<p>This sample program does not display anything on the screen. The execution results are output to a log.</p>
<p>Note that when downloadable content with an <code>ApplicationId</code> of <code>0x0100cb3000062000</code> has not been installed, the output of <code><a class="el" href="namespacenn_1_1aoc.html#a7bf46af3290e1bce2fe5abec7b51e47a">nn::aoc::CountAddOnContent</a></code> is <code>0</code>, and no longer matches the expected output. Install the downloadable content by calling <code>InstallAoc.bat</code> with the SDEV connected. <code>InstallAoc.bat</code> builds and installs the downloadable content. <code>SampleAoc/SampleAoc.nmeta</code> is referenced at build time. For more information about the items configured in this file, see <b>NintendoSDK Documents</b> &gt; <b>Features</b> &gt; <b>Aoc Library</b>.</p>
<p>The <code>ApplicationId</code> for the program and the downloadable content must match. The <code>ApplicationId</code> is automatically <code>0x0100cb3000062000</code> when using a Visual Studio project within the folder. If you are using a proprietary build system, explicitly specify the <code>ApplicationId</code> for the program by referencing the NMETA file located in the same folder.</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Run <code>InstallAoc.bat</code> within the <code>AocSimple</code> directory while the development hardware is connected. Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleAocSimple_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleAocSimple_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_aoc_simple_8cpp.html" title="Sample program for downloadable content operations.">AocSimple.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &lt;new&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="aoc_8h.html">nn/aoc.h</a>&gt;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="fs___add_on_content_8h.html">nn/fs/fs_AddOnContent.h</a>&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Buffer for listing the downloadable content indices.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> MaxListupCount = 256;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="namespacenn_1_1aoc.html#a034a2abde78298e64250210a18f400ba">nn::aoc::AddOnContentIndex</a> g_AocListupBuffer[MaxListupCount];</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Buffer for loading the content of files within downloadable content.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ReadBufferSize = 1024;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    nn::Bit8 g_ReadBuffer[ReadBufferSize] = {};</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="classnn_1_1_result.html">nn::Result</a> result;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;AocSimple\n&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Get the number of downloadable content instances.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">int</span> aocCount = <a class="code" href="namespacenn_1_1aoc.html#a7bf46af3290e1bce2fe5abec7b51e47a">nn::aoc::CountAddOnContent</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;CountAddOnCountent -&gt; %d\n&quot;</span>, aocCount);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// List the number of downloadable content instances.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">int</span> listupCount = <a class="code" href="namespacenn_1_1aoc.html#ac8568137ce6fd7208bf660aec2e54c7d">nn::aoc::ListAddOnContent</a>(g_AocListupBuffer, 0, MaxListupCount);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;ListAddOnCountent -&gt; %d\n&quot;</span>, listupCount);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; listupCount; ++i)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; Index[%d]: %d\n&quot;</span>, i, g_AocListupBuffer[i]);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Load and display the listed downloadable content.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; listupCount; ++i)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// The index to access.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">auto</span> index = g_AocListupBuffer[i];</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// Mount downloadable content.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordtype">size_t</span> cacheSize = 0;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        result = <a class="code" href="namespacenn_1_1fs.html#afcb1fa310028d36752df80ff69beec4c">nn::fs::QueryMountAddOnContentCacheSize</a>(&amp;cacheSize, index);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result.IsSuccess());</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordtype">char</span>* mountCacheBuffer = <span class="keyword">new</span>(std::nothrow) <span class="keywordtype">char</span>[cacheSize];</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a>(mountCacheBuffer);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> MountName[] = <span class="stringliteral">&quot;aoc&quot;</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        result = <a class="code" href="namespacenn_1_1fs.html#ad92caf5815857651653369e760f85a66">nn::fs::MountAddOnContent</a>(</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            MountName, index, mountCacheBuffer, cacheSize</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">// Access files from mounted downloadable content.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> fileHandle;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        result = <a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>(&amp;fileHandle, <span class="stringliteral">&quot;aoc:/testdata&quot;</span>, nn::fs::OpenMode::OpenMode_Read);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result.IsSuccess());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordtype">size_t</span> readSize;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        result = <a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>(&amp;readSize, fileHandle, 0, g_ReadBuffer, <span class="keyword">sizeof</span>(g_ReadBuffer));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(result.IsSuccess());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>(fileHandle);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        g_ReadBuffer[readSize] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;testdata(Index = %d)\n&quot;</span>, index);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, g_ReadBuffer);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// Unmount downloadable content.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(MountName);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keyword">delete</span>[] mountCacheBuffer;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="ttc" id="aaoc_8h_html"><div class="ttname"><a href="aoc_8h.html">aoc.h</a></div><div class="ttdoc">API declarations for downloadable content.</div></div>
<div class="ttc" id="aclassnn_1_1_result_html"><div class="ttname"><a href="classnn_1_1_result.html">nn::Result</a></div><div class="ttdoc">Represents the generic result of an operation.</div><div class="ttdef"><b>Definition:</b> nn_Result.h:32</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div><div class="ttdoc">Declarations of API resources for the file system.</div></div>
<div class="ttc" id="afs___add_on_content_8h_html"><div class="ttname"><a href="fs___add_on_content_8h.html">fs_AddOnContent.h</a></div><div class="ttdoc">Declarations of APIs for downloadable content.</div></div>
<div class="ttc" id="anamespacenn_1_1aoc_html_a034a2abde78298e64250210a18f400ba"><div class="ttname"><a href="namespacenn_1_1aoc.html#a034a2abde78298e64250210a18f400ba">nn::aoc::AddOnContentIndex</a></div><div class="ttdeci">int AddOnContentIndex</div><div class="ttdoc">Type that represents the downloadable content index.</div><div class="ttdef"><b>Definition:</b> aoc_Types.h:18</div></div>
<div class="ttc" id="anamespacenn_1_1aoc_html_a7bf46af3290e1bce2fe5abec7b51e47a"><div class="ttname"><a href="namespacenn_1_1aoc.html#a7bf46af3290e1bce2fe5abec7b51e47a">nn::aoc::CountAddOnContent</a></div><div class="ttdeci">int CountAddOnContent() NN_NOEXCEPT</div><div class="ttdoc">Returns the number of licensed downloadable content instances that are installed.</div></div>
<div class="ttc" id="anamespacenn_1_1aoc_html_ac8568137ce6fd7208bf660aec2e54c7d"><div class="ttname"><a href="namespacenn_1_1aoc.html#ac8568137ce6fd7208bf660aec2e54c7d">nn::aoc::ListAddOnContent</a></div><div class="ttdeci">int ListAddOnContent(AddOnContentIndex *outIndices, int offset, int count) NN_NOEXCEPT</div><div class="ttdoc">Lists the downloadable content indices for installed and licensed downloadable content instances.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a0f2b5b30657b1ffaf1dec49bfb36462b"><div class="ttname"><a href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></div><div class="ttdeci">Result OpenFile(FileHandle *outValue, const char *path, int mode) NN_NOEXCEPT</div><div class="ttdoc">Opens a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_a81801a404563984f8c6cc1483cc6d730"><div class="ttname"><a href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></div><div class="ttdeci">Result ReadFile(FileHandle handle, int64_t offset, void *buffer, size_t size, const ReadOption &amp;option) NN_NOEXCEPT</div><div class="ttdoc">Loads the content of the file into the specified memory.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8a95249afd4a87a55d319dfecb0466c"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></div><div class="ttdeci">void Unmount(const char *name) NN_NOEXCEPT</div><div class="ttdoc">Unmounts a mounted file system and frees the resources.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ac8bd9e828751bd4f953acfa765278f84"><div class="ttname"><a href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a></div><div class="ttdeci">void CloseFile(FileHandle handle) NN_NOEXCEPT</div><div class="ttdoc">Closes a file.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_ad92caf5815857651653369e760f85a66"><div class="ttname"><a href="namespacenn_1_1fs.html#ad92caf5815857651653369e760f85a66">nn::fs::MountAddOnContent</a></div><div class="ttdeci">Result MountAddOnContent(const char *name, nn::aoc::AddOnContentIndex targetIndex, void *pFileSystemCacheBuffer, size_t fileSystemCacheBufferSize) NN_NOEXCEPT</div><div class="ttdoc">Mounts a read-only file system to handle downloadable content.</div></div>
<div class="ttc" id="anamespacenn_1_1fs_html_afcb1fa310028d36752df80ff69beec4c"><div class="ttname"><a href="namespacenn_1_1fs.html#afcb1fa310028d36752df80ff69beec4c">nn::fs::QueryMountAddOnContentCacheSize</a></div><div class="ttdeci">Result QueryMountAddOnContentCacheSize(size_t *pOutValue, nn::aoc::AddOnContentIndex targetIndex) NN_NOEXCEPT</div><div class="ttdoc">Get the size needed for the MountAddOnContent file system cache.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_a0473ebccccc250efd6100a9bbfec406b"><div class="ttname"><a href="nn___assert_8h.html#a0473ebccccc250efd6100a9bbfec406b">NN_ASSERT_NOT_NULL</a></div><div class="ttdeci">#define NN_ASSERT_NOT_NULL(pointer)</div><div class="ttdoc">Tests whether the pointer is not a null pointer.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:140</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="astructnn_1_1fs_1_1_file_handle_html"><div class="ttname"><a href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a></div><div class="ttdoc">Handle for working with a file.</div><div class="ttdef"><b>Definition:</b> fs_File.h:90</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleAocSimple_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample program has the following flow.</p>
<ul>
<li>Example of operations on downloadable content using the downloadable content library.</li>
</ul>
<p>This program performs operations to list the installed downloadable content and then load that content. The following file shows the execution results of this sample program.</p>
<pre class="fragment">AocSimple
CountAddOnCountent -&gt; 2
ListAddOnCountent  -&gt; 2
  Index[0]: 1
  Index[1]: 2
testdata(Index = 1)
This is index 1 data.

testdata(Index = 2)
This is index 2 data.
</pre><p>Broadly speaking, processing occurs in the following order to load the content of the files in the downloadable content.</p>
<ul>
<li>Get the number of downloadable content instances (<code><a class="el" href="namespacenn_1_1aoc.html#a7bf46af3290e1bce2fe5abec7b51e47a">nn::aoc::CountAddOnContent</a></code>).</li>
<li>List the number of downloadable content instances (<code><a class="el" href="namespacenn_1_1aoc.html#ac8568137ce6fd7208bf660aec2e54c7d">nn::aoc::ListAddOnContent</a></code>).</li>
<li>Mount downloadable content (<code><a class="el" href="namespacenn_1_1fs.html#ad92caf5815857651653369e760f85a66">nn::fs::MountAddOnContent</a></code>).</li>
<li>Load files within downloadable content (<code><a class="el" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a></code>, <code><a class="el" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a></code>).</li>
<li>Unmount downloadable content (<code><a class="el" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a></code>).</li>
</ul>
<p>For more information about these functions, see the API Reference. Note that data is accessed using preset filenames after mounting the downloadable content to simplify the sample program processing. In actual applications, <code><a class="el" href="namespacenn_1_1fs.html#acae21d0f79e4d074e120c814a8936a42">nn::fs::OpenDirectory</a></code> and <code><a class="el" href="namespacenn_1_1fs.html#af1ecb9478fe0f9dee627b65111cdbe29">nn::fs::ReadDirectory</a></code> are usually used together to access data after downloadable content has been mounted. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
