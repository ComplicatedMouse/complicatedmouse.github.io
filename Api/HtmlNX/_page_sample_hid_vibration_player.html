<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Controlling the Vibration Motor Using a Vibration File Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_hid.html">Human Input Device Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Controlling the Vibration Motor Using a Vibration File Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleHidVibrationPlayer_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>This sample program shows how to control the vibration motors using a vibration file.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionBrief"></a>
Overview</h1>
<p>This sample shows how to use vibration nodes by using <code>VibrationNodeFramework</code> (a simple framework for using vibration nodes) and vibration processing threads. This framework has the following functionality.</p><ul>
<li>Getting and initializing <code><a class="el" href="structnn_1_1hid_1_1_vibration_device_handle.html" title="The vibration motor&#39;s handle.">nn::hid::VibrationDeviceHandle</a></code> from <code><a class="el" href="structnn_1_1hid_1_1_npad_id.html" title="Defines an Npad ID for identifying an Npad.">nn::hid::NpadId</a></code> and using it to configure <code><a class="el" href="classnn_1_1hid_1_1_vibration_target.html" title="The vibration node that functions as the recipient of vibration values.">nn::hid::VibrationTarget</a></code></li>
<li>Setting the vibration file to play with <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html" title="The vibration node that provides functionality as a source for vibration values by playing back vibra...">nn::hid::VibrationPlayer</a></code></li>
<li>Using <code><a class="el" href="classnn_1_1hid_1_1_vibration_node_connection.html" title="The class representing connections between vibration nodes.">nn::hid::VibrationNodeConnection</a></code> to connect multiple instances of <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html" title="The vibration node that provides functionality as a source for vibration values by playing back vibra...">nn::hid::VibrationPlayer</a></code> and <code><a class="el" href="classnn_1_1hid_1_1_vibration_target.html" title="The vibration node that functions as the recipient of vibration values.">nn::hid::VibrationTarget</a></code></li>
<li>Playing multiple vibration files using <code><a class="el" href="classnn_1_1hid_1_1_vibration_mixer.html" title="The vibration node that provides the features of a mixer for mixing vibration values.">nn::hid::VibrationMixer</a></code></li>
<li>Changing playback speed using <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html#a0f686a8ee1e18b26d8af8aca510182e6" title="Sets the playback speed when VibrationPlayer plays the vibration file.">nn::hid::VibrationPlayer::SetPlaySpeed</a></code></li>
<li>Delaying playback using <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html#a12eb7b35d9fd8de019459fb605505521" title="Sets the delay time when VibrationPlayer plays the vibration file.">nn::hid::VibrationPlayer::SetDelayTime</a></code>.</li>
<li>Setting the replay parameters such as gain, pitch, and panning, using <code><a class="el" href="structnn_1_1hid_1_1_vibration_modulation.html" title="Structure representing vibration value modulation factors.">nn::hid::VibrationModulation</a></code>.</li>
<li>Compressor functionality to suppress strong vibrations, using <code><a class="el" href="structnn_1_1hid_1_1_vibration_mixer_1_1_compressor_parameter.html" title="This structure represents the compressor coefficient.">nn::hid::VibrationMixer::CompressorParameter</a></code></li>
</ul>
<p>In <code>ControllerManager</code>, a vibration processing thread is generated and <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a73ea3eaf1cd9063985edcfa008e6796f" title="Updates the entire directed graph for the vibration value flow, and transmits vibration values from t...">nn::hid::VibrationNode::Update</a></code> is updated for each <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a86dbfc4b0d07247170570f9cf8d2456a" title="The default interval for updating the vibration values.">nn::hid::VibrationNode::DefaultVibrationSampleInterval</a></code>. The vibration value is calculated and transmitted to the controller.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_1d81e334f253f765150b26b74befd962.html">Samples/Sources/Applications/HidVibrationPlayer</a> </code>.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>When running in a Windows environment, connect the Bluetooth dongle to the computer ahead of time, and pair the controller to the computer. When running in an SDEV or EDEV environment, pair the controller to the SDEV or EDEV ahead of time. One controller must be connected wirelessly.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionHowToOperate"></a>
How to Use</h1>
<p>Run the sample program and press any of the controller buttons. After the Bluetooth connection is made, the LED on the controller stops flashing and remains lit.</p>
<p>Press up or down on the controller to select the item, and press the A Button to send the vibration value corresponding to each item and vibrate the controller. Press the B Button to stop the vibration. A different vibration pattern occurs for each of the following items.</p><ul>
<li>Play vibration.</li>
<li>Play vibration at 2x speed.</li>
<li>Play vibration at 0.5x speed.</li>
<li>Play vibration strongly.</li>
<li>Play vibration weakly.</li>
<li>Play loop vibration strongly only on the left side.</li>
<li>Play loop vibration strongly only on the right side.</li>
<li>Play loop vibration weakly only on the left side.</li>
<li>Play loop vibration weakly only on the right side.</li>
<li>Play stereo vibration from left to right.</li>
<li>Play stereo vibration from right to left.</li>
</ul>
<p>Selecting <b>Play vibration</b> after <b>Play loop vibration weakly only on the left side</b> enables you to play multiple vibration files simultaneously. In addition, <b>Play stereo vibration from left to right</b> plays a vibration with a time difference between the left and right controller. Press the B Button to stop the vibration.</p>
<p>The vibration that actually occurs is shown on the right side of the screen. Press the Y Button to show the file information for the vibration file that is being played. Press the X Button to enable the compressor functionality that suppresses strong vibrations. The compressor functionality is enabled in advance in handheld mode.</p>
<p>To end the sample program, press the + Button and the - Button at the same time.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionPrecaution"></a>
Important Information</h1>
<p>Make sure that the controller is sufficiently charged before using it.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleHidVibrationPlayer_SectionDetail"></a>
Description</h1>
<p>This sample program has the following flow.</p><ul>
<li>Initialize Npad and generate <code>VibrationNodeFramework</code>. (<code>ControllerManager::Initialize</code>)</li>
<li>Start the vibration processing thread. (<code>ControllerManager::StartVibrationThread</code>)</li>
<li>In the vibration processing thread, update <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a73ea3eaf1cd9063985edcfa008e6796f" title="Updates the entire directed graph for the vibration value flow, and transmits vibration values from t...">nn::hid::VibrationNode::Update</a></code> for each <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a86dbfc4b0d07247170570f9cf8d2456a" title="The default interval for updating the vibration values.">nn::hid::VibrationNode::DefaultVibrationSampleInterval</a></code> and send the vibration value to the vibration motor. (<code>ControllerManager::VibrationThreadFunc</code>)</li>
<li>Detect controller connections. (<code>NpadController::UpdateNpadState</code>)</li>
<li>Get <code><a class="el" href="structnn_1_1hid_1_1_vibration_device_handle.html" title="The vibration motor&#39;s handle.">nn::hid::VibrationDeviceHandle</a></code> from <code><a class="el" href="namespacenn_1_1hid.html#a2950ca0147b2bbb09a2c34aeaf527ca2" title="Gets the handles for operating the vibration motor built into the Npads.">nn::hid::GetVibrationDeviceHandles</a></code>. (<code>VibrationNodeFramework::Initialize</code>)</li>
<li>Set <code><a class="el" href="structnn_1_1hid_1_1_vibration_device_handle.html" title="The vibration motor&#39;s handle.">nn::hid::VibrationDeviceHandle</a></code> for <code><a class="el" href="classnn_1_1hid_1_1_vibration_target.html#a8cb479ce55854647088b51c9c93670b1" title="Sets the corresponding vibration motor&#39;s handle.">nn::hid::VibrationTarget::SetVibrationDeviceHandle</a></code>. (<code>VibrationNodeFramework::Connect</code>)</li>
<li>Use <code><a class="el" href="classnn_1_1hid_1_1_vibration_node_connection.html#aeb4436cce72e93c714fe037a1565a233" title="Makes a connection between vibration nodes.">nn::hid::VibrationNodeConnection::Connect</a></code> to connect <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html" title="The vibration node that provides functionality as a source for vibration values by playing back vibra...">nn::hid::VibrationPlayer</a></code> and <code><a class="el" href="classnn_1_1hid_1_1_vibration_target.html" title="The vibration node that functions as the recipient of vibration values.">nn::hid::VibrationTarget</a></code>. (<code>VibrationNodeFramework::Connect</code>)</li>
<li>Press the A Button to play specific vibration patterns. (<code>Demo::DoCommand</code>)</li>
<li>Use <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html#a122b9bc25b847e41738ac9a7d1dba52c" title="Sets the vibration file for VibrationPlayer to reference.">nn::hid::VibrationPlayer::SetVibrationFileAddress</a></code> to get the vibration value from the vibration file. (<code>VibrationNodeFramework::Play</code>)</li>
<li>Execute <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html#a998b9abac8dec9e28679982c650d8479" title="Begins playback of the vibration file that was referenced by VibrationPlayer.">nn::hid::VibrationPlayer::Play</a></code>. (<code>VibrationNodeFramework::Play</code>)</li>
<li>Press the B Button to execute <code><a class="el" href="classnn_1_1hid_1_1_vibration_player.html#a9a1b5e13e5af516a55d4a1cfc876a7ca" title="Stops playback of the vibration file that was loaded for reference by VibrationPlayer">nn::hid::VibrationPlayer::Stop</a></code>. (<code>VibrationNodeFramework::Stop</code>)</li>
<li>Press the + and - Buttons to run termination processing.</li>
<li>Terminate the vibration processing thread. (<code>ControllerManager::StopVibrationThread</code>)</li>
<li>Delete <code>VibrationNodeFramework</code>. (<code>ControllerManager::Finalize</code>)</li>
</ul>
<p>The constructor and destructor for <code>VibrationNodeFramework</code> (<code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html" title="The base class for the vibration node.">nn::hid::VibrationNode</a></code> and the constructors and destructors for its derived classes) are not thread-safe, so do not call <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a73ea3eaf1cd9063985edcfa008e6796f" title="Updates the entire directed graph for the vibration value flow, and transmits vibration values from t...">nn::hid::VibrationNode::Update</a></code> at the same time. In this sample, <code><a class="el" href="classnn_1_1hid_1_1_vibration_node.html#a73ea3eaf1cd9063985edcfa008e6796f" title="Updates the entire directed graph for the vibration value flow, and transmits vibration values from t...">nn::hid::VibrationNode::Update</a></code> is called in the vibration control thread after generating the instance. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
