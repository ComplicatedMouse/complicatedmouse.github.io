<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Playing Stream Sounds | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_atk.html">Audio Toolkit Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Playing Stream Sounds </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleAtkStreamSound_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleAtkStreamSound_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetail">Sample Program Description</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForOpus">Additional information for Opus Playback</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForHardwareOpus">Additional Information About Playing Back Opus Files That Use the Hardware Accelerator</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForPrefetch">Additional Information About the Prefetch Feature</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForStreamJump">Additional Information About the Stream Jump Feature</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForFileReadCache">Additional information about the file read cache feature</a></li>
<li class="level2"><a href="#PageSampleAtkStreamSound_SectionSampleDetailForMultiTrack">Additional Information About the Multi-Track Feature</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This is a description of the sample program that uses stream sound in the <code><a class="el" href="namespacenn_1_1atk.html" title="Namespace for the audio toolkit.">nn::atk</a></code> library to play sound.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionBrief"></a>
Overview</h1>
<p>This sample program uses stream sound in the <code><a class="el" href="namespacenn_1_1atk.html" title="Namespace for the audio toolkit.">nn::atk</a></code> library for playback.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_ac76584a3e399004de6f63c97f40d8f9.html">Samples/Sources/Applications/AtkStreamSound/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionHowToOperate"></a>
How to Use</h1>
<p>Operation instructions are displayed in the console.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionPrecaution"></a>
Important Information</h1>
<p>A log is displayed on the screen and on the console during execution, and immediately after startup this log is used to display the operation guide.</p>
<p>Note that in the PC version, a window does not open and the log is displayed only on the console screen.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleAtkStreamSound_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleProgram"></a>
Sample Program</h2>
<p>This sample program uses the following source code.</p>
<p><a class="el" href="_atk_stream_sound_8cpp.html" title="This sample program uses stream sound in the nn::atk library for playback.">AtkStreamSound.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#include &quot;Common.fsid&quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#include &lt;nn/atk.h&gt;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#include &lt;nns/atk/atk_SampleCommon.h&gt;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#include &lt;nns/nns_Log.h&gt;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">namespace</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> Title[] = <span class="stringliteral">&quot;AtkStreamSound&quot;</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> ArchiveRelativePath[] = <span class="stringliteral">&quot;Common.bfsar&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> SoundHeapSize = 4 * 1024 * 1024;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_heap.html">nn::atk::SoundHeap</a>          g_SoundHeap;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_fs_sound_archive.html">nn::atk::FsSoundArchive</a>     g_SoundArchive;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_archive_player.html">nn::atk::SoundArchivePlayer</a> g_SoundArchivePlayer;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_data_manager.html">nn::atk::SoundDataManager</a>   g_SoundDataManager;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="structnn_1_1audio_1_1_memory_pool_type.html">nn::audio::MemoryPoolType</a>   g_MemoryPool;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForSoundSystem;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForSoundHeap;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForInfoBlock;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForSoundDataManager;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForSoundArchivePlayer;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForStreamBuffer;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForStreamCacheBuffer;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForOpusDecoder;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">void</span>* g_pMemoryForHardwareOpusDecoder;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_handle.html">nn::atk::SoundHandle</a>        g_SoundHandle;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_handle.html">nn::atk::SoundHandle</a>        g_SoundHandleHold;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">enum</span> StreamRegion {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        StreamRegionIntro = 0,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        StreamRegionA = 1,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        StreamRegionB = 2</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    };</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> RegionList[] = {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        StreamRegionIntro,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        StreamRegionA,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        StreamRegionA,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        StreamRegionB,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        StreamRegionA,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        StreamRegionB</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    };</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">int</span> g_RegionListIndex = 0;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* RegionNameList[] =</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="stringliteral">&quot;Intro&quot;</span>,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="stringliteral">&quot;RegionA&quot;</span>,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="stringliteral">&quot;RegionB&quot;</span>,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="stringliteral">&quot;RegionA&quot;</span>,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="stringliteral">&quot;RegionA&quot;</span>,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="stringliteral">&quot;RegionB&quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    };</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">int</span> g_RegionNameListIndex = 0;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">// Sample for callback function processing that specifies the jump target with an index.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4">nn::atk::StreamRegionCallbackResult</a> StreamRegionCallbackSample1( <a class="code" href="structnn_1_1atk_1_1_stream_region_callback_param.html">nn::atk::StreamRegionCallbackParam</a>* param, <span class="keywordtype">void</span>* args )</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(args);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(g_RegionListIndex &gt;= 0);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> ( g_RegionListIndex &gt;= <span class="keyword">sizeof</span>(RegionList) / <span class="keyword">sizeof</span>(RegionList[0]) )</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        NNS_LOG(<span class="stringliteral">&quot;[%s] g_RegionListIndex(%d) =&gt; FINISH\n&quot;</span>, __FUNCTION__, g_RegionListIndex);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a40468ee57d47c2430fcb0e4cd3f1b7aa">nn::atk::StreamRegionCallbackResult_Finish</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    param-&gt;regionNo = RegionList[g_RegionListIndex];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="nn___abort_8h.html#ab38b300ab7c6ee59fa0e6728d3f7aa25">NN_ABORT_UNLESS_LESS</a>(param-&gt;regionNo, param-&gt;regionCount);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[%s] g_RegionListIndex(%d) =&gt; CONTINUE\n&quot;</span>, __FUNCTION__, g_RegionListIndex);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    g_RegionListIndex++;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a2e582474857723b48186d81ede204fa1">nn::atk::StreamRegionCallbackResult_Continue</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">// Sample for callback function processing that specifies the jump target with a string.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4">nn::atk::StreamRegionCallbackResult</a> StreamRegionCallbackSample2( <a class="code" href="structnn_1_1atk_1_1_stream_region_callback_param.html">nn::atk::StreamRegionCallbackParam</a>* param, <span class="keywordtype">void</span>* args)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(args);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(g_RegionNameListIndex &gt;= 0);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (g_RegionNameListIndex &gt;= <span class="keyword">sizeof</span>(RegionNameList) / <span class="keyword">sizeof</span>(RegionNameList[0]))</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        NNS_LOG(<span class="stringliteral">&quot;[%s] %s =&gt; FINISH\n&quot;</span>, __FUNCTION__, param-&gt;regionName);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a40468ee57d47c2430fcb0e4cd3f1b7aa">nn::atk::StreamRegionCallbackResult_Finish</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    param-&gt;isRegionNameEnabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    std::strncpy(param-&gt;regionName, RegionNameList[g_RegionNameListIndex], <a class="code" href="namespacenn_1_1atk.html#a83f91c89d57df161a36010600564f85b">nn::atk::RegionNameLengthMax</a> + 1);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[%s] %s =&gt; CONTINUE\n&quot;</span>, __FUNCTION__, param-&gt;regionName);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    g_RegionNameListIndex++;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a2e582474857723b48186d81ede204fa1">nn::atk::StreamRegionCallbackResult_Continue</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keywordtype">void</span> SetupOpusDecoder()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">int</span> decoderCount = 2;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    std::size_t memSizeForOpusDecoder = <a class="code" href="namespacenn_1_1atk.html#ac0b734b81efc270dd38a22008f39c8ab">nn::atk::GetRequiredOpusDecoderBufferSize</a>(decoderCount);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    g_pMemoryForOpusDecoder = nns::atk::Allocate(memSizeForOpusDecoder);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="namespacenn_1_1atk.html#a4c7c4f26febb6a7de6ae75c9dff280fc">nn::atk::InitializeOpusDecoder</a>(g_pMemoryForOpusDecoder, memSizeForOpusDecoder, decoderCount);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keywordtype">void</span> UnsetupOpusDecoder()</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="namespacenn_1_1atk.html#a0493faa4abcd062c5affabb7f9a1fc16">nn::atk::FinalizeOpusDecoder</a>();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    nns::atk::Free(g_pMemoryForOpusDecoder);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keywordtype">void</span> SetupHardwareOpusDecoder()</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">int</span> decoderCount = 2;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    std::size_t memSizeForHardwareOpusDecoder = <a class="code" href="namespacenn_1_1atk.html#a07bcb5d9b9780384b5c0ff8b4cd2b41a">nn::atk::GetRequiredHardwareOpusDecoderBufferSize</a>(decoderCount);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    g_pMemoryForHardwareOpusDecoder = nns::atk::Allocate(memSizeForHardwareOpusDecoder);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="namespacenn_1_1atk.html#a238c8ce9cce97ff9c05dd9feda413090">nn::atk::InitializeHardwareOpusDecoder</a>(g_pMemoryForHardwareOpusDecoder, memSizeForHardwareOpusDecoder, decoderCount);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="keywordtype">void</span> UnsetupHardwareOpusDecoder()</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="namespacenn_1_1atk.html#a4de9927ea724301d8ba4b4aa5432921d">nn::atk::FinalizeHardwareOpusDecoder</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    nns::atk::Free(g_pMemoryForHardwareOpusDecoder);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">Initialize</a>()</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    nns::atk::InitializeHeap();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    nns::atk::InitializeFileSystem();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    nns::atk::InitializeHidDevices();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacenn_1_1htc.html#a8337c461b81d43d85571e7fa4e574c48">Finalize</a>()</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    nns::atk::FinalizeHidDevices();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    nns::atk::FinalizeFileSystem();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    nns::atk::FinalizeHeap();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordtype">void</span> InitializeAtk()</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">bool</span> isSuccess = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Initialize OpusDecoder.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    SetupOpusDecoder();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Initializes the HardwareOpusDecoder.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    SetupHardwareOpusDecoder();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Initialize SoundSystem.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="structnn_1_1atk_1_1_sound_system_1_1_sound_system_param.html">nn::atk::SoundSystem::SoundSystemParam</a> param;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    std::size_t memSizeForSoundSystem = <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a67118a2bc91146f4fb6e4c8f550db8be">nn::atk::SoundSystem::GetRequiredMemSize</a>( param );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    g_pMemoryForSoundSystem = nns::atk::Allocate( memSizeForSoundSystem, <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a30ab524c42539c302be8e76a3c57e5fe">nn::atk::SoundSystem::WorkMemoryAlignSize</a> );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    isSuccess = <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a3dbeeceef71d2c2a527732d82d923671">nn::atk::SoundSystem::Initialize</a>(</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        param,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>( g_pMemoryForSoundSystem ),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        memSizeForSoundSystem );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot initialize SoundSystem&quot;</span> );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Initialize SoundHeap.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    g_pMemoryForSoundHeap = nns::atk::Allocate( SoundHeapSize );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    isSuccess = g_SoundHeap.Create( g_pMemoryForSoundHeap, SoundHeapSize );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot create SoundHeap&quot;</span> );</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Initialize SoundArchive.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* archiveAbsolutePath = nns::atk::GetAbsolutePath(ArchiveRelativePath);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    isSuccess = g_SoundArchive.Open(archiveAbsolutePath);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot open SoundArchive(%s)\n&quot;</span>, archiveAbsolutePath );</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// Load the parameter data for SoundArchive into memory.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    std::size_t infoBlockSize = g_SoundArchive.GetHeaderSize();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    g_pMemoryForInfoBlock = nns::atk::Allocate(  infoBlockSize, <a class="code" href="classnn_1_1atk_1_1_fs_sound_archive.html#a8aed39dcd230826f39f1bfba791126c6">nn::atk::FsSoundArchive::BufferAlignSize</a> );</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    isSuccess = g_SoundArchive.LoadHeader( g_pMemoryForInfoBlock, infoBlockSize );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot load InfoBlock&quot;</span> );</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// Initialize SoundDataManager.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    std::size_t memSizeForSoundDataManager = g_SoundDataManager.GetRequiredMemSize( &amp;g_SoundArchive );</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    g_pMemoryForSoundDataManager = nns::atk::Allocate( memSizeForSoundDataManager, <a class="code" href="classnn_1_1atk_1_1_sound_data_manager.html#a2ae5b623c103452245affa706b6d48a9">nn::atk::SoundDataManager::BufferAlignSize</a> );</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    isSuccess = g_SoundDataManager.Initialize(</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        &amp;g_SoundArchive,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        g_pMemoryForSoundDataManager,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        memSizeForSoundDataManager );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot initialize SoundDataManager&quot;</span> );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Initialize the stream buffer for use with SoundArchivePlayer.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// This stream buffer must be allocated from the heap managed by the memory pool.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    std::size_t memSizeForStreamBuffer = g_SoundArchivePlayer.GetRequiredStreamBufferSize( &amp;g_SoundArchive );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    g_pMemoryForStreamBuffer = nns::atk::AllocateForMemoryPool(memSizeForStreamBuffer);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Attach the specialized heap to the memory pool.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a09de4d6f343fc5220cb5bad8be09c080">nn::atk::SoundSystem::AttachMemoryPool</a>(&amp;g_MemoryPool, nns::atk::GetPoolHeapAddress(), nns::atk::GetPoolHeapSize());</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// Configure the buffer for the file read cache.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> CacheBufferSize = 128 * 1024;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    std::size_t memSizeForStreamCacheBuffer = g_SoundArchivePlayer.GetRequiredStreamCacheSize( &amp;g_SoundArchive, CacheBufferSize );</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    g_pMemoryForStreamCacheBuffer = nns::atk::Allocate( memSizeForStreamCacheBuffer, <a class="code" href="classnn_1_1atk_1_1_fs_sound_archive.html#a8aed39dcd230826f39f1bfba791126c6">nn::atk::FsSoundArchive::BufferAlignSize</a> );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// Initialize SoundArchivePlayer.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    std::size_t memSizeForSoundArchivePlayer = g_SoundArchivePlayer.GetRequiredMemSize( &amp;g_SoundArchive );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    g_pMemoryForSoundArchivePlayer = nns::atk::Allocate( memSizeForSoundArchivePlayer, <a class="code" href="classnn_1_1atk_1_1_sound_archive_player.html#a9ae6957bb9012107e356845451a8ce84">nn::atk::SoundArchivePlayer::BufferAlignSize</a>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html">nn::atk::SoundArchivePlayer::InitializeParam</a> initializeParam;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a9857957f6dbb80572946bbbe6721d6ed">pSoundArchive</a> = &amp;g_SoundArchive;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a38da8b72fd38c2e11f749db3343955f0">pSoundDataManager</a> = &amp;g_SoundDataManager;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#ae3247345845a2034158ca2ed8a3285be">pSetupBuffer</a> = g_pMemoryForSoundArchivePlayer;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#af6bbee2caa992e8632fffdc164e00fb7">setupBufferSize</a> = memSizeForSoundArchivePlayer;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#aa6c9612a5f970ec1d061b59d6a9c58e4">pStreamBuffer</a> = g_pMemoryForStreamBuffer;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a43f0f8630ef76b6dffb38c05afe598a0">streamBufferSize</a> = memSizeForStreamBuffer;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a7bbfaa74a6ae6fc146bfd7249fa24e88">pStreamCacheBuffer</a> = g_pMemoryForStreamCacheBuffer;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    initializeParam.<a class="code" href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a188c0f1a6575af182787bee6766b9393">streamCacheSize</a> = memSizeForStreamCacheBuffer;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    isSuccess = g_SoundArchivePlayer.Initialize(initializeParam);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;cannot initialize SoundArchivePlayer&quot;</span> );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// Sample code for getting and dumping STRM marker information.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> MarkerInfoCountMax = 16;     <span class="comment">// Specify a large size.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="structnn_1_1atk_1_1_stream_sound_marker_info.html">nn::atk::StreamSoundMarkerInfo</a> markerInfos[MarkerInfoCountMax];</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">int</span> actualMarkerInfoCount = 0;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    g_SoundArchivePlayer.ReadMarkerInfoArray(markerInfos, &amp;actualMarkerInfoCount, MarkerInfoCountMax, STRM_MARIOKART_STREAMJUMP);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(actualMarkerInfoCount &lt;= MarkerInfoCountMax);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; actualMarkerInfoCount; ++i)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        NNS_LOG(<span class="stringliteral">&quot;[Marker%d]\n&quot;</span>, i);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        NNS_LOG(<span class="stringliteral">&quot;   name = %s\n&quot;</span>, markerInfos[i].name);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        NNS_LOG(<span class="stringliteral">&quot;   position = %d\n&quot;</span>, markerInfos[i].position);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="keywordtype">void</span> FinalizeAtk()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    g_SoundArchivePlayer.Finalize();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// Detach the specialized heap from the memory pool.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a6140e3c94ee4ec89b3a3dd19707ff492">nn::atk::SoundSystem::DetachMemoryPool</a>(&amp;g_MemoryPool);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    g_SoundDataManager.Finalize();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    g_SoundArchive.Close();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    g_SoundHeap.Destroy();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="classnn_1_1atk_1_1_sound_system.html#a886dcd68a20e0dbb8dd7e3fe312bb069">nn::atk::SoundSystem::Finalize</a>();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    nns::atk::FreeForMemoryPool(g_pMemoryForStreamBuffer);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    nns::atk::Free(g_pMemoryForSoundArchivePlayer);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    nns::atk::Free(g_pMemoryForSoundDataManager);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    nns::atk::Free(g_pMemoryForInfoBlock);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    nns::atk::Free(g_pMemoryForSoundHeap);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    nns::atk::Free(g_pMemoryForSoundSystem);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    UnsetupHardwareOpusDecoder();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    UnsetupOpusDecoder();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keywordtype">void</span> LoadData()</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">bool</span> isSuccess = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    isSuccess = g_SoundDataManager.LoadData( SEQ_MARIOKART, &amp;g_SoundHeap );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;LoadData(SEQ_MARIOKART) failed.&quot;</span> );</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    isSuccess = g_SoundDataManager.LoadData( SE_YOSHI, &amp;g_SoundHeap );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;LoadData(SE_YOSHI) failed.&quot;</span> );</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Loading prefetch stream data.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// This procedure is not required for standard stream sound.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    isSuccess = g_SoundDataManager.LoadData( STRM_MARIOKART_PREFETCH, &amp;g_SoundHeap );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( isSuccess, <span class="stringliteral">&quot;LoadData(STRM_MARIOKART_PREFETCH) failed.&quot;</span> );</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keywordtype">void</span> PlayWithStartSound(<a class="code" href="classnn_1_1atk_1_1_sound_archive.html#a37cf194dfc6867618c3d90711df0ec07">nn::atk::SoundArchive::ItemId</a> soundId, <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html">nn::atk::SoundStartable::StartInfo</a>* pStartInfo, <span class="keyword">const</span> <span class="keywordtype">char</span>* debugLabelName)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    g_SoundHandle.Stop( 0 );</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (pStartInfo == NULL)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        result = g_SoundArchivePlayer.StartSound( &amp;g_SoundHandle, soundId ).IsSuccess();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        result = g_SoundArchivePlayer.StartSound( &amp;g_SoundHandle, soundId, pStartInfo ).IsSuccess();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;StartSound(%s) ... (%d)\n&quot;</span>, debugLabelName, result);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keywordtype">void</span> PlayWithStartSound(<a class="code" href="classnn_1_1atk_1_1_sound_archive.html#a37cf194dfc6867618c3d90711df0ec07">nn::atk::SoundArchive::ItemId</a> soundId, <span class="keyword">const</span> <span class="keywordtype">char</span>* debugLabelName)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    PlayWithStartSound(soundId, NULL, debugLabelName);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keywordtype">void</span> PrintUsage()</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;%s Sample\n&quot;</span>, Title);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[A]              StartSound STRM (STRM_MARIOKART_OPUS)[OpusDecoder]\n&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[R+A]            StartSound STRM (STRM_MARIOKART_OPUS)[HardwareOpusDecoder]\n&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[X]              StartSound STRM (STRM_MARIOKART_STREAMJUMP[String])\n&quot;</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[R+X]            StartSound STRM (STRM_MARIOKART_STREAMJUMP[Index])\n&quot;</span>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[Y]              StartSound STRM (STRM_MARIOKART)\n&quot;</span>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[R+Y]            StartSound STRM (STRM_MARIOKART_PREFETCH)\n&quot;</span>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[DOWN]           StartSound STRM (STRM_MULTITRACK)\n&quot;</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[B]              Stop Sound\n&quot;</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[RIGHT]          StartSound SEQ  (SEQ_MARIOKART)\n&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[UP]             StartSound WSD  (SE_YOSHI)\n&quot;</span>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[L]              Print Usage\n&quot;</span>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;[+/Start][Space] Exit Application\n&quot;</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    NNS_LOG(<span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keywordtype">bool</span> UpdateAtk()</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// StartSound / Stop</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::A &gt;() )</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (nns::atk::IsHold&lt; ::nn::hid::DebugPadButton::R &gt;())</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html">nn::atk::SoundStartable::StartInfo</a> info;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2e503582d107885738d2cefbab5c2e24">enableFlag</a> |= <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a5adb7f64ee94195f797036239d39a1f5ab4788201497337d619c8edc28d3e7b4a">nn::atk::SoundStartable::StartInfo::EnableFlagBit_StreamSoundMetaInfo</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keyword">const</span> <a class="code" href="classnn_1_1atk_1_1_sound_archive.html">nn::atk::SoundArchive</a>&amp; archive = g_SoundArchivePlayer.GetSoundArchive();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="comment">// Copies the metadata of the label for which you are using Opus playback using the hardware accelerator.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            archive.<a class="code" href="classnn_1_1atk_1_1_sound_archive.html#a6488d8370e994778cf71fbf9ead6d2af">ReadStreamSoundInfo</a>(&amp;info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2d67cbc1ef830829cb8243a859bf075a">streamSoundMetaInfo</a>, STRM_MARIOKART_OPUS);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="comment">// Changes the decoding format to Opus (playback using the hardware accelerator).</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2d67cbc1ef830829cb8243a859bf075a">streamSoundMetaInfo</a>.<a class="code" href="structnn_1_1atk_1_1_sound_archive_1_1_stream_sound_info.html#a0aff6ed3a2c07696fcbd0d29235398dc">decodeMode</a> = <a class="code" href="classnn_1_1atk_1_1_sound_archive.html#a50d647762730e28e422ebc167116fb97aae188da818d928deda4435d9549cb598">nn::atk::SoundArchive::DecodeMode_Accelerator</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            PlayWithStartSound(STRM_MARIOKART_OPUS, &amp;info, <span class="stringliteral">&quot;STRM_MARIOKART_OPUS[HardwareOpusDecoder]&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            PlayWithStartSound(STRM_MARIOKART_OPUS, <span class="stringliteral">&quot;STRM_MARIOKART_OPUS[OpusDecoder]&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::X &gt;() )</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (nns::atk::IsHold&lt; ::nn::hid::DebugPadButton::R &gt;())</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            g_RegionListIndex = 0;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html">nn::atk::SoundStartable::StartInfo</a> info;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2e503582d107885738d2cefbab5c2e24">enableFlag</a> |= <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a5adb7f64ee94195f797036239d39a1f5ab8e3641ca2e08b1c573067b0aed9105b">nn::atk::SoundStartable::StartInfo::EnableFlagBit_StreamSoundInfo</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a9cb1d68eef583be5a37bbb278a7e9d3e">streamSoundInfo</a>.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a6352dbe3eafa240ba170b9614278ae59">regionCallback</a> = StreamRegionCallbackSample1;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a9cb1d68eef583be5a37bbb278a7e9d3e">streamSoundInfo</a>.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a720b5163c9afc96a0192990d9c95aa4d">regionCallbackArg</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            PlayWithStartSound(STRM_MARIOKART_STREAMJUMP, &amp;info, <span class="stringliteral">&quot;STRM_MARIOKART_STREAMJUMP[Index]&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            g_RegionNameListIndex = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html">nn::atk::SoundStartable::StartInfo</a> info;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2e503582d107885738d2cefbab5c2e24">enableFlag</a> |= <a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a5adb7f64ee94195f797036239d39a1f5ab8e3641ca2e08b1c573067b0aed9105b">nn::atk::SoundStartable::StartInfo::EnableFlagBit_StreamSoundInfo</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a9cb1d68eef583be5a37bbb278a7e9d3e">streamSoundInfo</a>.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a6352dbe3eafa240ba170b9614278ae59">regionCallback</a> = StreamRegionCallbackSample2;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            info.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a9cb1d68eef583be5a37bbb278a7e9d3e">streamSoundInfo</a>.<a class="code" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a720b5163c9afc96a0192990d9c95aa4d">regionCallbackArg</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            PlayWithStartSound(STRM_MARIOKART_STREAMJUMP, &amp;info, <span class="stringliteral">&quot;STRM_MARIOKART_STREAMJUMP[String]&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::Y &gt;() )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">if</span> (nns::atk::IsHold&lt; ::nn::hid::DebugPadButton::R &gt;())</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            PlayWithStartSound(STRM_MARIOKART_PREFETCH, <span class="stringliteral">&quot;STRM_MARIOKART_PREFETCH&quot;</span>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            PlayWithStartSound(STRM_MARIOKART, <span class="stringliteral">&quot;STRM_MARIOKART&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::Down &gt;() )</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        PlayWithStartSound(STRM_MULTITRACK, <span class="stringliteral">&quot;STRM_MULTITRACK&quot;</span>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::B &gt;() )</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        g_SoundHandle.Stop( 0 );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::Right &gt;() )</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        PlayWithStartSound(SEQ_MARIOKART, <span class="stringliteral">&quot;SEQ_MARIOKART&quot;</span>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::Up &gt;() )</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        PlayWithStartSound(SE_YOSHI, <span class="stringliteral">&quot;SE_YOSHI&quot;</span>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Print usage.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::L &gt;() )</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        PrintUsage();</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// Exit.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> ( nns::atk::IsTrigger&lt; ::nn::hid::DebugPadButton::Start &gt;() )</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    g_SoundArchivePlayer.Update();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">Initialize</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    InitializeAtk();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    LoadData();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    PrintUsage();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">for</span> ( ;; )</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        nns::atk::UpdateHidDevices();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> ( !UpdateAtk() )</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="comment">// Replacement for Vsync.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#a2441d3c84cc24b901342ce11f87cd39c">nn::TimeSpan::FromMilliSeconds</a>(16));</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    FinalizeAtk();</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="namespacenn_1_1htc.html#a8337c461b81d43d85571e7fa4e574c48">Finalize</a>();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="ttc" id="aclassnn_1_1_time_span_html_a2441d3c84cc24b901342ce11f87cd39c"><div class="ttname"><a href="classnn_1_1_time_span.html#a2441d3c84cc24b901342ce11f87cd39c">nn::TimeSpan::FromMilliSeconds</a></div><div class="ttdeci">static constexpr TimeSpan FromMilliSeconds(int64_t milliSeconds) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a milliseconds value.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:550</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_fs_sound_archive_html"><div class="ttname"><a href="classnn_1_1atk_1_1_fs_sound_archive.html">nn::atk::FsSoundArchive</a></div><div class="ttdoc">This class handles sound archives stored in the file system.</div><div class="ttdef"><b>Definition:</b> atk_FsSoundArchive.h:34</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_fs_sound_archive_html_a8aed39dcd230826f39f1bfba791126c6"><div class="ttname"><a href="classnn_1_1atk_1_1_fs_sound_archive.html#a8aed39dcd230826f39f1bfba791126c6">nn::atk::FsSoundArchive::BufferAlignSize</a></div><div class="ttdeci">static const int BufferAlignSize</div><div class="ttdoc">The buffer alignment size for each type of load location.</div><div class="ttdef"><b>Definition:</b> atk_FsSoundArchive.h:44</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_html"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive.html">nn::atk::SoundArchive</a></div><div class="ttdoc">Class for handling a sound archive.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchive.h:51</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_html_a37cf194dfc6867618c3d90711df0ec07"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive.html#a37cf194dfc6867618c3d90711df0ec07">nn::atk::SoundArchive::ItemId</a></div><div class="ttdeci">uint32_t ItemId</div><div class="ttdoc">A type that represents item IDs in sound archives.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchive.h:63</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_html_a50d647762730e28e422ebc167116fb97aae188da818d928deda4435d9549cb598"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive.html#a50d647762730e28e422ebc167116fb97aae188da818d928deda4435d9549cb598">nn::atk::SoundArchive::DecodeMode_Accelerator</a></div><div class="ttdeci">@ DecodeMode_Accelerator</div><div class="ttdoc">Decodes using the hardware accelerator.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchive.h:129</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_html_a6488d8370e994778cf71fbf9ead6d2af"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive.html#a6488d8370e994778cf71fbf9ead6d2af">nn::atk::SoundArchive::ReadStreamSoundInfo</a></div><div class="ttdeci">bool ReadStreamSoundInfo(StreamSoundInfo *pOutValue, ItemId soundId) const NN_NOEXCEPT</div><div class="ttdoc">Gets information for the stream sound that has the specified ID.</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_player_html"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive_player.html">nn::atk::SoundArchivePlayer</a></div><div class="ttdoc">Plays back sounds in a sound archive.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:89</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_archive_player_html_a9ae6957bb9012107e356845451a8ce84"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_archive_player.html#a9ae6957bb9012107e356845451a8ce84">nn::atk::SoundArchivePlayer::BufferAlignSize</a></div><div class="ttdeci">static const uint32_t BufferAlignSize</div><div class="ttdoc">Buffer aligned size.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:211</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_data_manager_html"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_data_manager.html">nn::atk::SoundDataManager</a></div><div class="ttdoc">A flag used to load sound archive data.</div><div class="ttdef"><b>Definition:</b> atk_SoundDataManager.h:58</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_data_manager_html_a2ae5b623c103452245affa706b6d48a9"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_data_manager.html#a2ae5b623c103452245affa706b6d48a9">nn::atk::SoundDataManager::BufferAlignSize</a></div><div class="ttdeci">static const uint32_t BufferAlignSize</div><div class="ttdoc">Buffer aligned size.</div><div class="ttdef"><b>Definition:</b> atk_SoundDataManager.h:63</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_handle_html"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_handle.html">nn::atk::SoundHandle</a></div><div class="ttdoc">A handle class that controls playback sounds.</div><div class="ttdef"><b>Definition:</b> atk_SoundHandle.h:111</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_heap_html"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_heap.html">nn::atk::SoundHeap</a></div><div class="ttdoc">The heap class for sound data.</div><div class="ttdef"><b>Definition:</b> atk_SoundHeap.h:42</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a09de4d6f343fc5220cb5bad8be09c080"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a09de4d6f343fc5220cb5bad8be09c080">nn::atk::SoundSystem::AttachMemoryPool</a></div><div class="ttdeci">static void AttachMemoryPool(nn::audio::MemoryPoolType *pMemoryPool, void *address, size_t size) NN_NOEXCEPT</div><div class="ttdoc">Attaches the specified buffer to the memory pool.</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a30ab524c42539c302be8e76a3c57e5fe"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a30ab524c42539c302be8e76a3c57e5fe">nn::atk::SoundSystem::WorkMemoryAlignSize</a></div><div class="ttdeci">static const uint32_t WorkMemoryAlignSize</div><div class="ttdoc">The working memory alignment size.</div><div class="ttdef"><b>Definition:</b> atk_SoundSystem.h:492</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a3dbeeceef71d2c2a527732d82d923671"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a3dbeeceef71d2c2a527732d82d923671">nn::atk::SoundSystem::Initialize</a></div><div class="ttdeci">static bool Initialize(const SoundSystemParam &amp;param, uintptr_t workMem, size_t workMemSize) NN_NOEXCEPT</div><div class="ttdoc">Initializes the sound library.</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a6140e3c94ee4ec89b3a3dd19707ff492"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a6140e3c94ee4ec89b3a3dd19707ff492">nn::atk::SoundSystem::DetachMemoryPool</a></div><div class="ttdeci">static void DetachMemoryPool(nn::audio::MemoryPoolType *pMemoryPool) NN_NOEXCEPT</div><div class="ttdoc">Detaches the specified buffer from the memory pool.</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a67118a2bc91146f4fb6e4c8f550db8be"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a67118a2bc91146f4fb6e4c8f550db8be">nn::atk::SoundSystem::GetRequiredMemSize</a></div><div class="ttdeci">static size_t GetRequiredMemSize(const SoundSystemParam &amp;param) NN_NOEXCEPT</div><div class="ttdoc">Gets the memory size required to initialize the sound library.</div></div>
<div class="ttc" id="aclassnn_1_1atk_1_1_sound_system_html_a886dcd68a20e0dbb8dd7e3fe312bb069"><div class="ttname"><a href="classnn_1_1atk_1_1_sound_system.html#a886dcd68a20e0dbb8dd7e3fe312bb069">nn::atk::SoundSystem::Finalize</a></div><div class="ttdeci">static void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the sound system.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a0493faa4abcd062c5affabb7f9a1fc16"><div class="ttname"><a href="namespacenn_1_1atk.html#a0493faa4abcd062c5affabb7f9a1fc16">nn::atk::FinalizeOpusDecoder</a></div><div class="ttdeci">void FinalizeOpusDecoder() NN_NOEXCEPT</div><div class="ttdoc">Finalizes OpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a07bcb5d9b9780384b5c0ff8b4cd2b41a"><div class="ttname"><a href="namespacenn_1_1atk.html#a07bcb5d9b9780384b5c0ff8b4cd2b41a">nn::atk::GetRequiredHardwareOpusDecoderBufferSize</a></div><div class="ttdeci">size_t GetRequiredHardwareOpusDecoderBufferSize() NN_NOEXCEPT</div><div class="ttdoc">Gets the size of the internal buffer used by HardwareOpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a0eb683cd6e49bf351eaa7429287eb2e4"><div class="ttname"><a href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4">nn::atk::StreamRegionCallbackResult</a></div><div class="ttdeci">StreamRegionCallbackResult</div><div class="ttdoc">Defines the return values of the callback used with the stream jump feature.</div><div class="ttdef"><b>Definition:</b> atk_RegionManager.h:30</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a0eb683cd6e49bf351eaa7429287eb2e4a2e582474857723b48186d81ede204fa1"><div class="ttname"><a href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a2e582474857723b48186d81ede204fa1">nn::atk::StreamRegionCallbackResult_Continue</a></div><div class="ttdeci">@ StreamRegionCallbackResult_Continue</div><div class="ttdoc">Indicates a jump to the next region.</div><div class="ttdef"><b>Definition:</b> atk_RegionManager.h:32</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a0eb683cd6e49bf351eaa7429287eb2e4a40468ee57d47c2430fcb0e4cd3f1b7aa"><div class="ttname"><a href="namespacenn_1_1atk.html#a0eb683cd6e49bf351eaa7429287eb2e4a40468ee57d47c2430fcb0e4cd3f1b7aa">nn::atk::StreamRegionCallbackResult_Finish</a></div><div class="ttdeci">@ StreamRegionCallbackResult_Finish</div><div class="ttdoc">Indicates that the sound is ending.</div><div class="ttdef"><b>Definition:</b> atk_RegionManager.h:31</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a238c8ce9cce97ff9c05dd9feda413090"><div class="ttname"><a href="namespacenn_1_1atk.html#a238c8ce9cce97ff9c05dd9feda413090">nn::atk::InitializeHardwareOpusDecoder</a></div><div class="ttdeci">void InitializeHardwareOpusDecoder(void *buffer, size_t bufferSize) NN_NOEXCEPT</div><div class="ttdoc">Initializes HardwareOpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a4c7c4f26febb6a7de6ae75c9dff280fc"><div class="ttname"><a href="namespacenn_1_1atk.html#a4c7c4f26febb6a7de6ae75c9dff280fc">nn::atk::InitializeOpusDecoder</a></div><div class="ttdeci">void InitializeOpusDecoder(void *buffer, size_t bufferSize) NN_NOEXCEPT</div><div class="ttdoc">Initializes OpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a4de9927ea724301d8ba4b4aa5432921d"><div class="ttname"><a href="namespacenn_1_1atk.html#a4de9927ea724301d8ba4b4aa5432921d">nn::atk::FinalizeHardwareOpusDecoder</a></div><div class="ttdeci">void FinalizeHardwareOpusDecoder() NN_NOEXCEPT</div><div class="ttdoc">Finalizes HardwareOpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_a83f91c89d57df161a36010600564f85b"><div class="ttname"><a href="namespacenn_1_1atk.html#a83f91c89d57df161a36010600564f85b">nn::atk::RegionNameLengthMax</a></div><div class="ttdeci">const int RegionNameLengthMax</div><div class="ttdoc">The maximum length of the region name.</div><div class="ttdef"><b>Definition:</b> atk_Global.h:96</div></div>
<div class="ttc" id="anamespacenn_1_1atk_html_ac0b734b81efc270dd38a22008f39c8ab"><div class="ttname"><a href="namespacenn_1_1atk.html#ac0b734b81efc270dd38a22008f39c8ab">nn::atk::GetRequiredOpusDecoderBufferSize</a></div><div class="ttdeci">size_t GetRequiredOpusDecoderBufferSize() NN_NOEXCEPT</div><div class="ttdoc">Gets the size of the buffer used internally by OpusDecoder.</div></div>
<div class="ttc" id="anamespacenn_1_1htc_html_a8337c461b81d43d85571e7fa4e574c48"><div class="ttname"><a href="namespacenn_1_1htc.html#a8337c461b81d43d85571e7fa4e574c48">nn::htc::Finalize</a></div><div class="ttdeci">void Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the htc library.</div></div>
<div class="ttc" id="anamespacenn_1_1htc_html_ae7d36d5610146607c2ebbc6b31dec9e3"><div class="ttname"><a href="namespacenn_1_1htc.html#ae7d36d5610146607c2ebbc6b31dec9e3">nn::htc::Initialize</a></div><div class="ttdeci">void Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the htc library.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">Puts the current thread to sleep for the specified amount of time.</div></div>
<div class="ttc" id="ann___abort_8h_html_a5c1a90d3a6474658ae0ac5dc5bcb14e4"><div class="ttname"><a href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS(condition,...)</div><div class="ttdoc">Tests whether a condition has been satisfied and stops execution if it has not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:38</div></div>
<div class="ttc" id="ann___abort_8h_html_ab38b300ab7c6ee59fa0e6728d3f7aa25"><div class="ttname"><a href="nn___abort_8h.html#ab38b300ab7c6ee59fa0e6728d3f7aa25">NN_ABORT_UNLESS_LESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_LESS(lhs, rhs)</div><div class="ttdoc">Tests whether the left side is less than the right side.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:99</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_1_1_stream_sound_info_html_a0aff6ed3a2c07696fcbd0d29235398dc"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_1_1_stream_sound_info.html#a0aff6ed3a2c07696fcbd0d29235398dc">nn::atk::SoundArchive::StreamSoundInfo::decodeMode</a></div><div class="ttdeci">DecodeMode decodeMode</div><div class="ttdoc">Sets the decoding targets.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchive.h:341</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html">nn::atk::SoundArchivePlayer::InitializeParam</a></div><div class="ttdoc">Structure used to initialize the sound archive player.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:110</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_a188c0f1a6575af182787bee6766b9393"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a188c0f1a6575af182787bee6766b9393">nn::atk::SoundArchivePlayer::InitializeParam::streamCacheSize</a></div><div class="ttdeci">size_t streamCacheSize</div><div class="ttdoc">The size of pStreamCacheBuffer.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:149</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_a38da8b72fd38c2e11f749db3343955f0"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a38da8b72fd38c2e11f749db3343955f0">nn::atk::SoundArchivePlayer::InitializeParam::pSoundDataManager</a></div><div class="ttdeci">const SoundDataManager * pSoundDataManager</div><div class="ttdoc">Sound data manager used by the sound archive player.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:115</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_a43f0f8630ef76b6dffb38c05afe598a0"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a43f0f8630ef76b6dffb38c05afe598a0">nn::atk::SoundArchivePlayer::InitializeParam::streamBufferSize</a></div><div class="ttdeci">size_t streamBufferSize</div><div class="ttdoc">The size of pStreamBuffer.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:140</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_a7bbfaa74a6ae6fc146bfd7249fa24e88"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a7bbfaa74a6ae6fc146bfd7249fa24e88">nn::atk::SoundArchivePlayer::InitializeParam::pStreamCacheBuffer</a></div><div class="ttdeci">void * pStreamCacheBuffer</div><div class="ttdoc">The file read cache buffer for streaming sound playback.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:145</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_a9857957f6dbb80572946bbbe6721d6ed"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#a9857957f6dbb80572946bbbe6721d6ed">nn::atk::SoundArchivePlayer::InitializeParam::pSoundArchive</a></div><div class="ttdeci">const SoundArchive * pSoundArchive</div><div class="ttdoc">Sound archive used by the sound archive player.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:112</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_aa6c9612a5f970ec1d061b59d6a9c58e4"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#aa6c9612a5f970ec1d061b59d6a9c58e4">nn::atk::SoundArchivePlayer::InitializeParam::pStreamBuffer</a></div><div class="ttdeci">void * pStreamBuffer</div><div class="ttdoc">The buffer used for streaming sound playback.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:136</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_ae3247345845a2034158ca2ed8a3285be"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#ae3247345845a2034158ca2ed8a3285be">nn::atk::SoundArchivePlayer::InitializeParam::pSetupBuffer</a></div><div class="ttdeci">void * pSetupBuffer</div><div class="ttdoc">The buffer used by the instance and player heap generated in the sound archive player.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:125</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param_html_af6bbee2caa992e8632fffdc164e00fb7"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_archive_player_1_1_initialize_param.html#af6bbee2caa992e8632fffdc164e00fb7">nn::atk::SoundArchivePlayer::InitializeParam::setupBufferSize</a></div><div class="ttdeci">size_t setupBufferSize</div><div class="ttdoc">The size of pSetupBuffer.</div><div class="ttdef"><b>Definition:</b> atk_SoundArchivePlayer.h:129</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info_html_a6352dbe3eafa240ba170b9614278ae59"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a6352dbe3eafa240ba170b9614278ae59">nn::atk::SoundStartable::StartInfo::StreamSoundInfo::regionCallback</a></div><div class="ttdeci">StreamRegionCallback regionCallback</div><div class="ttdoc">The callback function that specifies the destination of the region jump, within stream jump functiona...</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:443</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info_html_a720b5163c9afc96a0192990d9c95aa4d"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info_1_1_stream_sound_info.html#a720b5163c9afc96a0192990d9c95aa4d">nn::atk::SoundStartable::StartInfo::StreamSoundInfo::regionCallbackArg</a></div><div class="ttdeci">void * regionCallbackArg</div><div class="ttdoc">The user argument passed to StreamRegionCallback.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:446</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html">nn::atk::SoundStartable::StartInfo</a></div><div class="ttdoc">Provided more information about playback parameters that are passed when a sound is played.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:266</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html_a2d67cbc1ef830829cb8243a859bf075a"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2d67cbc1ef830829cb8243a859bf075a">nn::atk::SoundStartable::StartInfo::streamSoundMetaInfo</a></div><div class="ttdeci">SoundArchive::StreamSoundInfo streamSoundMetaInfo</div><div class="ttdoc">Parameters for the metadata for stream sounds.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:598</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html_a2e503582d107885738d2cefbab5c2e24"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a2e503582d107885738d2cefbab5c2e24">nn::atk::SoundStartable::StartInfo::enableFlag</a></div><div class="ttdeci">uint32_t enableFlag</div><div class="ttdoc">Bit flags for enabling the values set in the structure.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:574</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html_a5adb7f64ee94195f797036239d39a1f5ab4788201497337d619c8edc28d3e7b4a"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a5adb7f64ee94195f797036239d39a1f5ab4788201497337d619c8edc28d3e7b4a">nn::atk::SoundStartable::StartInfo::EnableFlagBit_StreamSoundMetaInfo</a></div><div class="ttdeci">@ EnableFlagBit_StreamSoundMetaInfo</div><div class="ttdoc">Enables the value set for streamSoundMetaInfo.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:314</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html_a5adb7f64ee94195f797036239d39a1f5ab8e3641ca2e08b1c573067b0aed9105b"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a5adb7f64ee94195f797036239d39a1f5ab8e3641ca2e08b1c573067b0aed9105b">nn::atk::SoundStartable::StartInfo::EnableFlagBit_StreamSoundInfo</a></div><div class="ttdeci">@ EnableFlagBit_StreamSoundInfo</div><div class="ttdoc">Enables the value set for streamSoundInfo.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:295</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_startable_1_1_start_info_html_a9cb1d68eef583be5a37bbb278a7e9d3e"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html#a9cb1d68eef583be5a37bbb278a7e9d3e">nn::atk::SoundStartable::StartInfo::streamSoundInfo</a></div><div class="ttdeci">StreamSoundInfo streamSoundInfo</div><div class="ttdoc">Parameters for stream sounds.</div><div class="ttdef"><b>Definition:</b> atk_SoundStartable.h:595</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_sound_system_1_1_sound_system_param_html"><div class="ttname"><a href="structnn_1_1atk_1_1_sound_system_1_1_sound_system_param.html">nn::atk::SoundSystem::SoundSystemParam</a></div><div class="ttdoc">The structure used to initialize the sound system.</div><div class="ttdef"><b>Definition:</b> atk_SoundSystem.h:57</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_stream_region_callback_param_html"><div class="ttname"><a href="structnn_1_1atk_1_1_stream_region_callback_param.html">nn::atk::StreamRegionCallbackParam</a></div><div class="ttdoc">Defines the parameters to use as input and output for the callback used with the stream jump feature.</div><div class="ttdef"><b>Definition:</b> atk_RegionManager.h:42</div></div>
<div class="ttc" id="astructnn_1_1atk_1_1_stream_sound_marker_info_html"><div class="ttname"><a href="structnn_1_1atk_1_1_stream_sound_marker_info.html">nn::atk::StreamSoundMarkerInfo</a></div><div class="ttdoc">The stream data's marker information.</div><div class="ttdef"><b>Definition:</b> atk_StreamSoundPlayer.h:150</div></div>
<div class="ttc" id="astructnn_1_1audio_1_1_memory_pool_type_html"><div class="ttname"><a href="structnn_1_1audio_1_1_memory_pool_type.html">nn::audio::MemoryPoolType</a></div><div class="ttdoc">Structure for representing memory regions used by an audio renderer.</div><div class="ttdef"><b>Definition:</b> audio_MemoryPoolTypes.h:70</div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>The processes for the <code>atk</code> library of this sample program use the following flow. Places where this sample differs from the AtkSimple sample are marked as "additional."</p>
<ul>
<li>Initialize the <code>atk</code> library (<code>InitializeAtk()</code>).<ul>
<li>Initialize <code>OpusDecoder</code> (additional).</li>
<li>Initialize <code>HardwareOpusDecoder</code> (additional).</li>
<li>Configure the buffer for the file read cache (additional).</li>
<li>Perform initializations in <code>AtkSimple</code>.</li>
</ul>
</li>
<li>Load the data needed to play wave sounds and sequence sounds in <code>SoundHeap</code> (<code>LoadData()</code>).</li>
<li>Load the data needed to play stream sounds using prefetch data in <code>SoundHeap</code> (<code>LoadData()</code>, additional).</li>
<li>Main loop.<ul>
<li>Process key operations.<ul>
<li>Pause or play sounds.</li>
</ul>
</li>
<li>Update <code>SoundArchivePlayer</code>.</li>
</ul>
</li>
<li>Finalize the <code>atk</code> library (<code>FinalizeAtk()</code>).<ul>
<li>Execute termination processing with <code>AtkSimple</code>.</li>
<li>Finalize the <code>HardwareOpusDecoder</code> decoder (additional).</li>
<li>Finalize the <code>OpusDecoder</code> (additional).</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForOpus"></a>
Additional information for Opus Playback</h2>
<p>In addition to initializing the standard <code><a class="el" href="namespacenn_1_1atk.html" title="Namespace for the audio toolkit.">nn::atk</a></code> library, you can play stream sounds that use files in the Opus format that have been added already when you also call <code><a class="el" href="namespacenn_1_1atk.html#a4c7c4f26febb6a7de6ae75c9dff280fc" title="Initializes OpusDecoder.">nn::atk::InitializeOpusDecoder()</a></code>. In addition, the Opus decoder termination processing must be performed after the termination processing executed with <code>AtkSimple</code>.</p>
<p>For looped playback, note that you must prepare the data in advance. For more information about compression audio, see the NintendoWare Audio documentation.</p>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForHardwareOpus"></a>
Additional Information About Playing Back Opus Files That Use the Hardware Accelerator</h2>
<p>In addition to initializing the standard <code><a class="el" href="namespacenn_1_1atk.html" title="Namespace for the audio toolkit.">nn::atk</a></code> library, also execute <code><a class="el" href="namespacenn_1_1atk.html#a238c8ce9cce97ff9c05dd9feda413090" title="Initializes HardwareOpusDecoder.">nn::atk::InitializeHardwareOpusDecoder()</a></code> and use <code><a class="el" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html" title="Provided more information about playback parameters that are passed when a sound is played.">nn::atk::SoundStartable::StartInfo</a></code> to specify use of the hardware accelerator during playback so the Opus format files use the hardware accelerator and streams can be played.</p>
<p>Other considerations are the same as the additional information for Opus playback. For more information about compression audio, see the NintendoWare Audio documentation and Stream Sound in the programming guide.</p>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForPrefetch"></a>
Additional Information About the Prefetch Feature</h2>
<p>The settings for using prefetch must be configured in advance to use the stream sound prefetch feature. In addition, the prefetch data must be loaded ahead of time in SoundHeap in the program. The prefetch data can be loaded using <code><a class="el" href="classnn_1_1atk_1_1detail_1_1_sound_archive_loader.html#a3c8676a9807a4940a79a5c39546ab4f0" title="Loads the data in a sound archive.">nn::atk::SoundDataManager::LoadData()</a></code>, which is the same as when loading wave sound or sequence sound.</p>
<p>For more information about configuring settings in SoundMaker, see the SoundMaker documentation.</p>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForStreamJump"></a>
Additional Information About the Stream Jump Feature</h2>
<p>To use the stream jump feature, you must use stream sound with the region information embedded in the waveform. When playing stream sound with embedded region information, you can play the sound while moving between any regions by setting the callback function in <code><a class="el" href="structnn_1_1atk_1_1_sound_startable_1_1_start_info.html" title="Provided more information about playback parameters that are passed when a sound is played.">nn::atk::SoundStartable::StartInfo</a></code> and using the callback function to perform region control.</p>
<p>For more information about writing to the callback function, see the sample for specifying the region by index (<code>StreamRegionCallbackSample1</code>) and the sample for specifying the region with a string (<code>StreamRegionCallbackSample2</code>). For more information, see Stream Sounds in the programming guide.</p>
<p>For more information about embedding region information, see Stream Sound in the programming guide.</p>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForFileReadCache"></a>
Additional information about the file read cache feature</h2>
<p>While the process of reading and placing a set amount of sound data performed repeatedly for stream sound, there are situations where, depending on the environment, it is more efficient to read a large amount of data all at once instead of repeating the read process in smaller amounts.</p>
<p>The file read cache feature is intended to increase file access efficiency by repeating the process of reading a large amount of sound data into a larger separate buffer and then placing data from that buffer after a specified amount of playback has completed.</p>
<p>You can enable the file read cache feature by configuring the cache buffer in the initialization parameters for the sound archive player.</p>
<p>For more information about using the file read cache, see the stream sound page in the programming guide.</p>
<h2><a class="anchor" id="PageSampleAtkStreamSound_SectionSampleDetailForMultiTrack"></a>
Additional Information About the Multi-Track Feature</h2>
<p>With stream sounds, waveforms can be set to multiple tracks and played at the same time.</p>
<p>Some stream sound parameters can be set on a per-stream sound basis, while others like the volume parameters can be set on a per-track basis. This means you can adjust the volumes of the individual tracks according to the game scene, or play a certain additional track in a certain scene, or play only a certain track in a certain scene.</p>
<p>A stream sound for which multiple tracks have been set can be played in the same way as a stream sound that only has one track. Note, however, that if you set multiple tracks for a stream sound, you will need more stream channels. The setting for the number of stream channels is recorded in the sound archive, so you must make changes using SoundMaker.</p>
<p>For more information, see Sound Stream in the programming guide. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
