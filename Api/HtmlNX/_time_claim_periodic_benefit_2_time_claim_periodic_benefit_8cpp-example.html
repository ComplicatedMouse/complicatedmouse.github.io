<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TimeClaimPeriodicBenefit/TimeClaimPeriodicBenefit.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TimeClaimPeriodicBenefit/TimeClaimPeriodicBenefit.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_time_claim_periodic_benefit_with_user_system_clock.html">ClaimPeriodicBenefitWithUserSystemClock</a> and <tt>TimeClaimPeriodicBenefit/TimeClaimPeriodicBenefit.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright Nintendo.  All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">nn/time.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="os___thread_api_8h.html">nn/os/os_ThreadApi.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Time verification callback class for claiming a benefit once per minute (each time the minute component of the user clock time changes).</span></div>
<div class="line"><span class="keyword">class </span>PerMinuteBenefitCheckCallback : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html">nn::time::CheckCalendarTimeCallback</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a name="a1"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#a5da78723e0f8e2f9af19616d689f8aaf">IsSameTiming</a>(</div>
<div class="line">        <span class="keyword">const</span> <a name="_a2"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; lhs,</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; rhs) <span class="keyword">const</span> <a name="a3"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a name="a4"></a><a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// This function determines whether two times represent the same time at which a benefit was claimed.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">        // For example, for benefits that can only be claimed once each time the date changes, this function must return true when the dates (day, month, and year) are the same, as follows.</span></div>
<div class="line"><span class="comment">        return</span></div>
<div class="line"><span class="comment">            lhs.year == rhs.year &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhs.month == rhs.month &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhs.day == rhs.day;</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">        // For example, to allow a benefit to be claimed again every day after 04:00, do the following.</span></div>
<div class="line"><span class="comment">        nn::time::CalendarTime lhsCalendar = lhs - nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><span class="comment">        nn::time::CalendarTime rhsCalendar = rhs-nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><span class="comment">        // If the day, month, and year components of a date and time object from 4 hours ago are the same as the current day, month, and year, treat it as being the same benefit receipt timing.</span></div>
<div class="line"><span class="comment">        return</span></div>
<div class="line"><span class="comment">            lhsCalendar.year == rhsCalendar.year &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhsCalendar.month == rhsCalendar.month &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhsCalendar.day == rhsCalendar.day;</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// This sample defines time objects for which the minute, hour, day, month, and year components are the same to represent the same benefit receipt timing, and returns true when this condition is satisfied.</span></div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">            lhs.<a name="a5"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#aae0e0d30c9924216ce57c6491af2a214">year</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#aae0e0d30c9924216ce57c6491af2a214">year</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a6"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#aa8e374745265df68174bdbe02ddfc341">month</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#aa8e374745265df68174bdbe02ddfc341">month</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a7"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a6fbd1402f2b736ce6bb3400b9eaabbab">day</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a6fbd1402f2b736ce6bb3400b9eaabbab">day</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a8"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a7f6c4678c86027e32a71612eea0392e8">hour</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a7f6c4678c86027e32a71612eea0392e8">hour</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a9"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a5960b89e784cc2aedb48d3ce63df6ae8">minute</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a5960b89e784cc2aedb48d3ce63df6ae8">minute</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a name="a10"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#adcd6eeb5f2b7acb924edf766bec8fd44">IsMatched</a>(</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; calendarTime) <span class="keyword">const</span> <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// This function determines whether the specified CalendarTime object represents a valid time at which the benefit can be claimed.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">        // To only allow a benefit to be claimed on Wednesdays, for example, only return true when calendarTime represents a Wednesday, as follows.</span></div>
<div class="line"><span class="comment">        nn::time::DayOfWeek dayOfWeek = nn::time::GetDayOfWeek(calendarTime.year, calendarTime.month, calendarTime.day);</span></div>
<div class="line"><span class="comment">        return dayOfWeek == nn :: time :: DayOfWeek_Wednesday;</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// In this sample, the benefit can be claimed at any time regardless of the date, so this function does not do anything and simply returns true.</span></div>
<div class="line">        <a name="a11"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(calendarTime);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> nnMain()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize the time library.</span></div>
<div class="line">    <a name="a12"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a13"></a><a class="code" href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a>());</div>
<div class="line">    <a name="a14"></a><a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Initialize\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;---- Sample of claiming a periodic benefit with nn::time::StandardUserSystemClock.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The PeriodicBenefitClaimContext context for nn::time::ClaimPeriodicBenefitWithUserSystemClock().</span></div>
<div class="line">    <span class="comment">// (The required number of instances of this PeriodicBenefitClaimContext object is equal to the number of types of periodic events you want to support.</span></div>
<div class="line">    <span class="comment">// On the first determination, pass the instance of this object initialized by the constructor to ClaimPeriodicBenefitWithUserSystemClock() as is.)</span></div>
<div class="line">    <a name="_a15"></a><a class="code" href="structnn_1_1time_1_1_periodic_benefit_claim_context.html">nn::time::PeriodicBenefitClaimContext</a> handoverContext;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The maximum penalty period.</span></div>
<div class="line">    <span class="comment">// (The maximum penalty period incurred when a clock operation is detected. The benefit cannot be claimed during this penalty period.</span></div>
<div class="line">    <span class="comment">// In this sample, the benefit can be claimed once per minute (each time the minute component of the clock time changes), so the maximum penalty period is set to one minute.</span></div>
<div class="line">    <span class="comment">// For more information, see the API Reference.)</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a16"></a><a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> MaxPenaltyTimeSpan = <a name="a17"></a><a class="code" href="classnn_1_1_time_span.html#aa00b1f4275afe5351321caaa3679b4df">nn::TimeSpan::FromMinutes</a>(1);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The amount of by which the clock can be rolled forward without incurring a penalty.</span></div>
<div class="line">    <span class="comment">// (Even when the clock is rolled forward, as long as the magnitude of the change is less than or equal to this value, the clock operation is ignored.</span></div>
<div class="line">    <span class="comment">// In this sample, this value is simply set to 0 for simplicity.</span></div>
<div class="line">    <span class="comment">// For more information, see the API Reference.)</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> AcceptableOperationTimeSpan(0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Time verification class.</span></div>
<div class="line">    <span class="comment">// (Must be internally implemented and inherit the nn::time::CheckCalendarTimeCallback class.</span></div>
<div class="line">    <span class="comment">// For more information about implementation, see the API Reference.)</span></div>
<div class="line">    PerMinuteBenefitCheckCallback perMinuteBenefitCheckCallback;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> TryCount = 3;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1 ; i &lt;= TryCount ; i++)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Create a current ClockSnapshot object for determining whether the benefit can be claimed.</span></div>
<div class="line">        <a name="_a18"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a> currentSnapshot;</div>
<div class="line">        <a name="a19"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a>(&amp;currentSnapshot);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> c = currentSnapshot.<a name="a20"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#a7f42d9ee4a86b79cd6c7905920483150">GetStandardUserSystemClockCalendarTime</a>();</div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;[Claim Benefit (%d/%d) at %04d/%02d/%02d %02d:%02d:%02d]\n&quot;</span>,</div>
<div class="line">                i, TryCount,</div>
<div class="line">                c.year, c.month, c.day, c.hour, c.minute, c.second);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> backup = handoverContext; <span class="comment">// This is used to detect updates to handoverContext in subsequent calls to ClaimPeriodicBenefitWithUserSystemClock().</span></div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> result = <a name="a21"></a><a class="code" href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a>(</div>
<div class="line">            &amp;handoverContext,</div>
<div class="line">            currentSnapshot,</div>
<div class="line">            MaxPenaltyTimeSpan,</div>
<div class="line">            AcceptableOperationTimeSpan,</div>
<div class="line">            &amp;perMinuteBenefitCheckCallback);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(result == <a name="a22"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39">nn::time::PeriodicBenefitClaimResult_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The periodic benefit can be claimed.</span></div>
<div class="line">            <span class="comment">// These benefits can be used to give users items or points or to trigger some kind of</span></div>
<div class="line">            <span class="comment">// periodic event (whatever is appropriate for the application).</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; I can receive a benefit!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a name="a23"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8">nn::time::PeriodicBenefitClaimResult_NotReceivableTiming</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The time interval after which the benefit can be claimed again (starting from when the benefit was previously claimed) has not yet occurred, so the benefit cannot be claimed.</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed. (nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a name="a24"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc">nn::time::PeriodicBenefitClaimResult_Penalty</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// A penalty period during which the benefit cannot be claimed is currently in effect because a clock operation was detected.</span></div>
<div class="line">            <span class="comment">// The penalty period starts from the moment at which the clock was changed.</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed. (nn::time::PeriodicBenefitClaimResult_Penalty)\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Result values not in the preceding list are never returned.</span></div>
<div class="line">            <a name="a25"></a><a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;Unexpected result(%d)&quot;</span>, result);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// For example, keeping this handoverContext object for use next time by saving it to save data makes it possible to</span></div>
<div class="line">        <span class="comment">// manage how periodic benefits are claimed even across application exit or system shutdown events.</span></div>
<div class="line">        <span class="comment">// Note that regardless of the result returned by nn::time::ClaimPeriodicBenefitWithUserSystemClock() (success or failure),</span></div>
<div class="line">        <span class="comment">// this handoverContext object must be kept for the next call to the function.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Also, to prevent inconsistent data states from occurring when working with benefits that apply permanent effects within the application,</span></div>
<div class="line">        <span class="comment">// we strongly recommend that you save the PeriodicBenefitClaimContext (handoverContext) object used to make the determination together</span></div>
<div class="line">        <span class="comment">// with the application-side result of claiming the benefit.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// PeriodicBenefitClaimContext objects satisfy the standard C++ requirements for being trivially copyable and can be copied with std::memcpy(),</span></div>
<div class="line">        <span class="comment">// so you can save them to save data or similar as is.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// The following pseudocode shows one recommended implementation.</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">        bool isCommitRequired = false;</span></div>
<div class="line"><span class="comment">        if(backup != handoverContext) // It must be saved if updated, regardless of whether the result is success or failure.</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            WriteContext(handoverContext); // Save handoverContext.</span></div>
<div class="line"><span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        // Here, no inconsistencies will occur even if the application is closed or the system is powered off.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        if(result.IsSuccess())</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            WriteBenefit(...); // Save the application-side result of claiming the benefit.</span></div>
<div class="line"><span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        // Here, no inconsistencies will occur even if the application is closed or the system is powered off.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        if(isCommitRequired)</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            CommitSaveData(); // Save both of these to save data at the same time.</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">        <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(backup);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot; Waiting three seconds.\n&quot;</span>);</div>
<div class="line">        <a name="a26"></a><a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a name="a27"></a><a class="code" href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a>(3));</div>
<div class="line">        <span class="comment">// During this sleep period, press the HOME Button to display DevMenu or the HOME Menu, and then change the time or the time zone setting.</span></div>
<div class="line">        <span class="comment">// Subsequent determinations will then be performed on the branch when clock operations are detected.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// After changing the clock time, if you return to the sample application within one minute, you can confirm that a penalty period is in effect and that the benefit cannot be claimed.</span></div>
<div class="line">        <span class="comment">// Meanwhile, if you stay in DevMenu or the HOME Menu after changing the clock, for example, and allow at least one minute to elapse before returning to the sample application (that is, a period of time of at least</span></div>
<div class="line">        <span class="comment">// MaxPenaltyTimeSpan has elapsed after the clock operation), you can confirm that the benefit can be claimed again.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Finalize the time library.</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a name="a28"></a><a class="code" href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a>() );</div>
<div class="line">    <a class="code" href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Finalize\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="aclassnn_1_1_time_span_html"><div class="ttname"><a href="classnn_1_1_time_span.html">nn::TimeSpan</a></div><div class="ttdoc">This class represents a length of time.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:456</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_a8e74f5ceb64fc02aa614eed3cc148e82"><div class="ttname"><a href="classnn_1_1_time_span.html#a8e74f5ceb64fc02aa614eed3cc148e82">nn::TimeSpan::FromSeconds</a></div><div class="ttdeci">static constexpr TimeSpan FromSeconds(int64_t seconds) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in seconds.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:563</div></div>
<div class="ttc" id="aclassnn_1_1_time_span_html_aa00b1f4275afe5351321caaa3679b4df"><div class="ttname"><a href="classnn_1_1_time_span.html#aa00b1f4275afe5351321caaa3679b4df">nn::TimeSpan::FromMinutes</a></div><div class="ttdeci">static constexpr TimeSpan FromMinutes(int64_t minutes) NN_NOEXCEPT</div><div class="ttdoc">Generates a TimeSpan object from a value specified in minutes.</div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:576</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html">nn::time::CheckCalendarTimeCallback</a></div><div class="ttdoc">Callback class for checking the time.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:41</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html_a5da78723e0f8e2f9af19616d689f8aaf"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html#a5da78723e0f8e2f9af19616d689f8aaf">nn::time::CheckCalendarTimeCallback::IsSameTiming</a></div><div class="ttdeci">virtual bool IsSameTiming(const CalendarTime &amp;lhs, const CalendarTime &amp;rhs) const NN_NOEXCEPT=0</div><div class="ttdoc">Determines whether two times represent the same benefit receipt timing.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_check_calendar_time_callback_html_adcd6eeb5f2b7acb924edf766bec8fd44"><div class="ttname"><a href="classnn_1_1time_1_1_check_calendar_time_callback.html#adcd6eeb5f2b7acb924edf766bec8fd44">nn::time::CheckCalendarTimeCallback::IsMatched</a></div><div class="ttdeci">virtual bool IsMatched(const CalendarTime &amp;calendarTime) const NN_NOEXCEPT=0</div><div class="ttdoc">Determines whether the specified time represents a valid time when benefits can be claimed.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a></div><div class="ttdoc">Class for storing various types of time information.</div><div class="ttdef"><b>Definition:</b> time_ClockSnapshot.h:46</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_a7f42d9ee4a86b79cd6c7905920483150"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#a7f42d9ee4a86b79cd6c7905920483150">nn::time::ClockSnapshot::GetStandardUserSystemClockCalendarTime</a></div><div class="ttdeci">nn::time::CalendarTime GetStandardUserSystemClockCalendarTime() const NN_NOEXCEPT</div><div class="ttdoc">Gets the user clock calendar information stored by the object.</div></div>
<div class="ttc" id="aclassnn_1_1time_1_1_clock_snapshot_html_ab46c9996752e49c22634b140a99deee6"><div class="ttname"><a href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a></div><div class="ttdeci">static void CreateWithStandardSystemClock(ClockSnapshot *pOut) NN_NOEXCEPT</div><div class="ttdoc">Creates the object with the latest system time.</div></div>
<div class="ttc" id="anamespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">Puts the current thread to sleep for the specified amount of time.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_a316a48243971bfac1dfcc1ea07466563"><div class="ttname"><a href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a></div><div class="ttdeci">Result Finalize() NN_NOEXCEPT</div><div class="ttdoc">Finalizes the use of the time library.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_aa5e24f241a0806d6ac316075b655b3f7"><div class="ttname"><a href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a></div><div class="ttdeci">PeriodicBenefitClaimResult ClaimPeriodicBenefitWithUserSystemClock(PeriodicBenefitClaimContext *pHandover, const ClockSnapshot &amp;currentSnapshot, const nn::TimeSpan &amp;maxPenaltyTimeSpan, const nn::TimeSpan &amp;acceptableOperationTimeSpan, const CheckCalendarTimeCallback *pCheckCalendarTimeCallback) NN_NOEXCEPT</div><div class="ttdoc">Performs a user clock operation-aware determination of whether a periodic benefit can be claimed.</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8">nn::time::PeriodicBenefitClaimResult_NotReceivableTiming</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_NotReceivableTiming</div><div class="ttdoc">The benefit cannot be claimed at this time.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:228</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc">nn::time::PeriodicBenefitClaimResult_Penalty</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_Penalty</div><div class="ttdoc">The benefit cannot be claimed due to a penalty.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:229</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39"><div class="ttname"><a href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39">nn::time::PeriodicBenefitClaimResult_Success</a></div><div class="ttdeci">@ PeriodicBenefitClaimResult_Success</div><div class="ttdoc">The benefit can be claimed.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:227</div></div>
<div class="ttc" id="anamespacenn_1_1time_html_af3d5226ce5093e581b3892fbb2fbc34c"><div class="ttname"><a href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a></div><div class="ttdeci">Result Initialize() NN_NOEXCEPT</div><div class="ttdoc">Initializes the time library, making its features available to use.</div></div>
<div class="ttc" id="ann___abort_8h_html"><div class="ttname"><a href="nn___abort_8h.html">nn_Abort.h</a></div><div class="ttdoc">Declarations for API resources to abort execution when conditions are not satisfied.</div></div>
<div class="ttc" id="ann___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">Tests whether the specified nn::Result is successful or not, and stops if it is not.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:188</div></div>
<div class="ttc" id="ann___abort_8h_html_a205eaac89c47d49cb982bf136e113de2"><div class="ttname"><a href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a></div><div class="ttdeci">#define NN_ABORT(...)</div><div class="ttdoc">Stops execution.</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:29</div></div>
<div class="ttc" id="ann___log_8h_html"><div class="ttname"><a href="nn___log_8h.html">nn_Log.h</a></div><div class="ttdoc">Declarations for the logging API.</div></div>
<div class="ttc" id="ann___log_8h_html_a2d720c8bc6b733bce63879350d134a84"><div class="ttname"><a href="nn___log_8h.html#a2d720c8bc6b733bce63879350d134a84">NN_LOG</a></div><div class="ttdeci">#define NN_LOG(...)</div><div class="ttdoc">Adds the string specified in the parameter as a log entry.</div><div class="ttdef"><b>Definition:</b> nn_Log.h:33</div></div>
<div class="ttc" id="ann___macro_8h_html_a0e31cc4dc24d85253a31e48b1a85ab33"><div class="ttname"><a href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div><div class="ttdeci">#define NN_NOEXCEPT</div><div class="ttdoc">Declares that the function does not throw exceptions.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:196</div></div>
<div class="ttc" id="ann___macro_8h_html_a5b950a1a9c5f9b57d49185d8fb4cd4ab"><div class="ttname"><a href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div><div class="ttdeci">#define NN_OVERRIDE</div><div class="ttdoc">Declares that the function overrides a virtual function.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:210</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="aos___thread_api_8h_html"><div class="ttname"><a href="os___thread_api_8h.html">os_ThreadApi.h</a></div><div class="ttdoc">Declarations for API resources for threads.</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a></div><div class="ttdoc">The structure that handles calendar information.</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:37</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html_a5960b89e784cc2aedb48d3ce63df6ae8"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html#a5960b89e784cc2aedb48d3ce63df6ae8">nn::time::CalendarTime::minute</a></div><div class="ttdeci">int8_t minute</div><div class="ttdoc">Minute (takes a value in the range of 0 through 59).</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:42</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html_a6fbd1402f2b736ce6bb3400b9eaabbab"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html#a6fbd1402f2b736ce6bb3400b9eaabbab">nn::time::CalendarTime::day</a></div><div class="ttdeci">int8_t day</div><div class="ttdoc">Day (takes a value in the range of 1 through 31).</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:40</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html_a7f6c4678c86027e32a71612eea0392e8"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html#a7f6c4678c86027e32a71612eea0392e8">nn::time::CalendarTime::hour</a></div><div class="ttdeci">int8_t hour</div><div class="ttdoc">Hour (takes a value in the range of 0 through 23).</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:41</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html_aa8e374745265df68174bdbe02ddfc341"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html#aa8e374745265df68174bdbe02ddfc341">nn::time::CalendarTime::month</a></div><div class="ttdeci">int8_t month</div><div class="ttdoc">Month (takes a value in the range of 1 through 12).</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:39</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_calendar_time_html_aae0e0d30c9924216ce57c6491af2a214"><div class="ttname"><a href="structnn_1_1time_1_1_calendar_time.html#aae0e0d30c9924216ce57c6491af2a214">nn::time::CalendarTime::year</a></div><div class="ttdeci">int16_t year</div><div class="ttdoc">Western calendar.</div><div class="ttdef"><b>Definition:</b> time_CalendarTime.h:38</div></div>
<div class="ttc" id="astructnn_1_1time_1_1_periodic_benefit_claim_context_html"><div class="ttname"><a href="structnn_1_1time_1_1_periodic_benefit_claim_context.html">nn::time::PeriodicBenefitClaimContext</a></div><div class="ttdoc">Structure for storing information used to determine whether a periodic benefit can be claimed.</div><div class="ttdef"><b>Definition:</b> time_ApiForClaimPeriodicBenefit.h:106</div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div><div class="ttdoc">Declarations of API resources for the time library.</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
