<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Decoding JPEG Files and Parsing Exif Information Sample | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_image.html">Image Codec Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Decoding JPEG Files and Parsing Exif Information Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleImageJpegDecoding_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionHowToOperate">How to Use</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionPrecaution">Important Information</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleImageJpegDecoding_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>This sample program shows how to use JPEG decoding and Exif parsing.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionBrief"></a>
Overview</h1>
<p>This sample program loads a JPEG file and decodes the pixel data. It also extracts and parses recorded Exif information.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_4cff7d1aa999bafee1764c9a20944211.html">Samples/Sources/Applications/ImageJpegDecoding/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Conforms to the SDK.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionHowToOperate"></a>
How to Use</h1>
<p>When you run the sample program, the JPEG file is read and analyzed, and an analysis log is output. The loaded JPEG file is <code>Samples/Sources/Applications/ImageJpegDecoding/Data/ExampleInput.jpg</code>.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionPrecaution"></a>
Important Information</h1>
<p>Conforms to the SDK.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it.</p>
<h1><a class="anchor" id="PageSampleImageJpegDecoding_SectionDetail"></a>
Description</h1>
<p>This sample program shows how to parse JPEG data obtained from the file system. The process of parsing JPEG data includes expanding the pixel data and extracting Exif information.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Load the JPEG file.</li>
<li>Get the pixel buffer based on the image size allowed by the application.</li>
<li>Parse the JPEG file.<ul>
<li>Verify the format.</li>
<li>Verify the existence and location of Exif information.</li>
<li>Get the expanded image size.</li>
<li>Calculate the amount of work memory needed to decode the JPEG.</li>
</ul>
</li>
<li>Extract Exif information.<ul>
<li>Verify and parse the Exif format.</li>
<li>Get the metadata for the support target.</li>
<li>Expand the thumbnail image.</li>
</ul>
</li>
<li>Decode the JPEG file pixel data.<ul>
<li>Get the work buffer based on the obtained amount of work memory.</li>
<li>Decode processing.</li>
</ul>
</li>
</ul>
<p>The validity of the JPEG file obtained from the file system is checked by the <code><a class="el" href="classnn_1_1image_1_1_jpeg_decoder.html" title="Decodes JPEG data.">nn::image::JpegDecoder</a></code> class. If the JPEG file is valid, the EXIF information location and information for the pixel data can be obtained. This procedure gets the information required for Exif information and expanding the pixel data.</p>
<p>If the JPEG file seems to contain Exif information, the metadata contained in the Exif information can be obtained by parsing the file with the <code><a class="el" href="classnn_1_1image_1_1_exif_extractor.html" title="Analyzes the Exif information.">nn::image::ExifExtractor</a></code> class. However, if the Exif information is configured in an illegal format, a part or all of the metadata is treated as being nonexistent. Also, metadata not supported by <code><a class="el" href="classnn_1_1image_1_1_exif_extractor.html" title="Analyzes the Exif information.">nn::image::ExifExtractor</a></code> is also treated as being nonexistent.</p>
<p>When a thumbnail image is included in the Exif information, the JPEG data that is decoded in the next section is replaced with the thumbnail image. This example shows that JPEG data to be decoded with <code><a class="el" href="classnn_1_1image_1_1_jpeg_decoder.html" title="Decodes JPEG data.">nn::image::JpegDecoder</a></code> can be exchanged without reinitializing the class.</p>
<p>The JPEG file set in <code><a class="el" href="classnn_1_1image_1_1_jpeg_decoder.html" title="Decodes JPEG data.">nn::image::JpegDecoder</a></code> can be decoded by assigning an appropriately sized output buffer and work memory. To provide a padding region at the end, the pixel data can be suitably arranged by specifying a line alignment value for the buffer. Also, the output pixel data is data with R, G, B, and A components arranged in 1-byte units each from the start, unrelated to the CPU endianness. Accordingly, note that if 4 bytes are simply taken and referenced as <code>unit32_t</code>, the value may be seen differently depending on the endianness.</p>
<p>The following results occur from running this sample. This sample program does not display the expanded pixel data on the screen or do any other processing on the data.</p>
<pre class="fragment">出力画像サイズ: 幅 320 px, 高さ 240 px
Exif 情報が見つかりました。
 - メーカー名: "Nintendo co., ltd"
 - 画像方向: "垂直方向に反転"
 - ソフトウェア名: "Nintendo SDK Sample Program for JPEG library"
 - 撮影日時: "2015:08:07 09:00:00"
 - メーカーノート: 2 バイト
 - 実効画像サイズ: 幅 639 px, 高さ 480 px
 - ユニークID: "0123456789ABCDEF0123456789abcdef"
 - サムネイル: 5060 バイト
→ デコード対象をサムネイルに変更します。
出力画像サイズ: 幅 127 px, 高さ 96 px
JPEG データをデコードします。
処理は正常に完了しました。
</pre><p>This application is created by using the following OSS.</p>
<ul>
<li>IJG libjpeg<ul>
<li>This software is based in part on the work of the Independent JPEG Group. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
