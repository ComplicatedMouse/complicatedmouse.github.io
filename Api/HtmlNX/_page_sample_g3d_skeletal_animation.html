<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>G3dDemo SkeletalAnimation | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">Sample Descriptions</a></li><li class="navelem"><a class="el" href="_page_sample_g3d.html">3D Graphics Library Samples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">G3dDemo SkeletalAnimation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionNecessaryEnvironment">Required Environment</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionHowToOperate">Using the Demo</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionPrecaution">Cautions</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleG3dSkeletalAnimation_SectionDetail">Description</a></li>
</ul>
</div>
<div class="textblock"><p>Describes the <code>SkeletalAnimation</code> sample program.</p>
<div class="image">
<img src="skeletalanimation.png" alt=""/>
</div>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionBrief"></a>
Overview</h1>
<p>This sample program uses the skeletal animation and bone visibility animation features of the <code>g3d</code> library.</p>
<p>When initializing <code><a class="el" href="classnn_1_1g3d_1_1_skeletal_anim_obj.html" title="Skeletal animation instances.">nn::g3d::SkeletalAnimObj</a></code>, only the memory required to play the animation resources that can be played is allocated to <code><a class="el" href="classnn_1_1g3d_1_1_skeletal_anim_obj.html" title="Skeletal animation instances.">nn::g3d::SkeletalAnimObj</a></code>. You can switch the animation resource to play using <code>skeletalAnimObj::SetResource()</code> in the render loop. Select and play the animations from the menu to check the behavior of the skeletal animations. The skeletal animation created for the Pierrot model is applied to both the Pierrot model and the Robot model.</p>
<p>Bone visibility animation corresponding to the skeletal animation is played on the Pierrot model. By changing the bone visibility, you can control the drawing of the object held in the model's hand.</p>
<p>This sample program uses the following skeletal animation feature.</p><ul>
<li>Animation blending</li>
</ul>
<p>Using <code><a class="el" href="classnn_1_1g3d_1_1_skeletal_anim_blender.html" title="Class for blending skeletal animations.">nn::g3d::SkeletalAnimBlender</a></code>, blend and play multiple skeletal animations.</p>
<ul>
<li>Retargeting</li>
</ul>
<p>For the Pierrot and Robot models, which have different scales, apply the skeletal animation for Pierrot. If the animation is normally applied to Robot, the scale difference is ignored and the animation is played. For this reason, the animation behavior looks the same as Pierrot. If retargeting is enabled and the animation is applied to Robot, it is played after correcting the model scale difference. Retargeting can apply one animation resource to other models, so it can reduce the cost of creating animations.</p>
<ul>
<li>Motion Mirroring</li>
</ul>
<p>Mirrors skeletal animation playback in the Pierrot and Robot models. There are restrictions on the model's skeleton, but the skeletal animation can be flipped horizontally for the model and played back. This can reduce the cost of creating the artist's animations and reduce the number of animation resources.</p>
<p>The sample program also uses the following animation features.</p><ul>
<li>Animation baking (enable by <code>g_BakeAnimEnabled</code> = <code>true</code>)</li>
<li><code>PreBind</code> and <code>BindFast</code></li>
</ul>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <code><a class="el" href="dir_70c31aece60cd4d6421b86b15434e27b.html">Samples/Sources/Applications/G3dDemo/ </a> </code>.</p>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionNecessaryEnvironment"></a>
Required Environment</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionHowToOperate"></a>
Using the Demo</h1>
<p>Use input from the Joy-Con or DebugPad, or the keyboard and mouse when using a PC, to perform the following operations. </p>
<table class="doxtable">
<tr>
<th>Input </th><th>Operation  </th></tr>
<tr>
<td>START Button, SPACEBAR, Joy-Con + Button: </td><td>Returns to the menu.  </td></tr>
<tr>
<td>Directional Buttons: </td><td>Switches the menu selection state.  </td></tr>
<tr>
<td>A Button, A key, or left-mouse click: </td><td>Engages the selected menu option.  </td></tr>
<tr>
<td>Press the Right Stick or click the left mouse button: </td><td>Camera rotation. When using the mouse, the camera rotates based on the direction and distance of the click from the center of the screen.  </td></tr>
</table>
<p>For the Pierrot and Robot models, you can select each animation item and check the following behavior. </p>
<table class="doxtable">
<tr>
<th>Item </th><th>Operation  </th></tr>
<tr>
<td>AnimationPreset </td><td>To select the animation preset to play, press the Left and Right Buttons. The selected animation is played automatically. </td></tr>
<tr>
<td>Retargeting </td><td>Applies the retargeting feature to the Pierrot model for the Robot model. </td></tr>
<tr>
<td>MotionMirroring </td><td>Applies the motion mirroring feature to the Robot model. </td></tr>
<tr>
<td>ViewSkeleton </td><td>Shows the skeleton structure of the model.  </td></tr>
<tr>
<td>AnimStep </td><td>Changes the animation playback speed.  </td></tr>
</table>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionPrecaution"></a>
Cautions</h1>
<p>Nothing specific.</p>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program. From the menu, select <b>SkeletalAnimation</b>, and then run it.</p>
<h1><a class="anchor" id="PageSampleG3dSkeletalAnimation_SectionDetail"></a>
Description</h1>
<p>This sample program uses the <code>g3d</code> skeletal animation feature to animate a model.</p>
<p>This sample program has the following flow.</p>
<ul>
<li>Load and initialize the shader archive.</li>
<li>Load and initialize the model resource, and initialize the texture.</li>
<li>Register a sampler in the descriptor pool.</li>
<li>Set up the two models using <code><a class="el" href="namespacenns_1_1g3d.html" title="Namespace for the g3d sample library.">nns::g3d</a></code>.</li>
<li>Create <code>SkeletalAnimObj</code> for the number of slots.</li>
<li>Begin the loop.</li>
<li>Execute the command list created in the previous frame.</li>
<li>Allocate the animation resource selected in the menu to <code>SkeletalAnimObj</code>.</li>
<li>Update each matrix.</li>
<li>Update models.</li>
<li>Generate the command list.</li>
<li>Return to the start of the loop. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
