<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NvnTutorial/DebugTextRenderer.cpp | NintendoSDK API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<script type="text/javascript" src="searchapi.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   &#160;<span id="projectnumber">14.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NvnTutorial/DebugTextRenderer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>For an explanation of the source code, see <a class="el" href="_page_sample_nvn_tutorial_library.html">NVN Tutorial Library</a> and <tt>NvnTutorial/DebugTextRenderer.cpp</tt>.</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_debug_text_renderer_8h.html">nvntutorial/DebugTextRenderer.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_asset_file_data_holder_8h.html">nvntutorial/AssetFileDataHolder.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_asset_file_loading_helper_8h.html">nvntutorial/AssetFileLoadingHelper.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_texture_i_d_manager_8h.html">nvntutorial/TextureIDManager.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_debug_text_data_8h.html">nvntutorial/DebugTextData.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nvntutorial/ShaderHeaders/FontShaderDataHelper.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_tutorial_util_8h.html">nvntutorial/TutorialUtil.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t g_CommandMemorySize = 65536;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t g_ControlMemorySize = 65536;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer Constructor</span></div>
<div class="line"><span class="comment"> * -----------------------------</span></div>
<div class="line"><span class="comment"> * Set initial values, initialize font data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line">DebugTextRenderer::DebugTextRenderer() :</div>
<div class="line">    m_pDevice(NULL),</div>
<div class="line">    m_pQueue(NULL),</div>
<div class="line">    m_pManagedCommandBuffer(NULL),</div>
<div class="line">    m_pCommandMemoryPool(NULL),</div>
<div class="line">    m_pControlPool(NULL),</div>
<div class="line">    m_UsingSyncManager(false),</div>
<div class="line">    m_pVertexDataPool(NULL),</div>
<div class="line">    m_pUniformBufferPool(NULL),</div>
<div class="line">    m_pFontTexturePool(NULL),</div>
<div class="line">    m_pFontTextureBufferPool(NULL),</div>
<div class="line">    m_pTextureIDManager(NULL)</div>
<div class="line">{</div>
<div class="line">    memset(m_StringSize,                0, <span class="keyword">sizeof</span>(m_StringSize));</div>
<div class="line">    memset(m_FontPositionData,          0, <span class="keyword">sizeof</span>(m_FontPositionData));</div>
<div class="line">    memset(m_FontTextureCoordinateData, 0, <span class="keyword">sizeof</span>(m_FontTextureCoordinateData));</div>
<div class="line">    memset(m_FontMagScale,              0, <span class="keyword">sizeof</span>(m_FontMagScale));</div>
<div class="line">    memset(m_FontColor,                 0, <span class="keyword">sizeof</span>(m_FontColor));</div>
<div class="line">    memset(m_FontUniformDataVS,         0, <span class="keyword">sizeof</span>(m_FontUniformDataVS));</div>
<div class="line">    memset(m_FontUniformDataPSColor,    0, <span class="keyword">sizeof</span>(m_FontUniformDataPSColor));</div>
<div class="line">    memset(m_FontUniformDataPSSampler,  0, <span class="keyword">sizeof</span>(m_FontUniformDataPSSampler));</div>
<div class="line">    memset(m_FontTexture,               0, <span class="keyword">sizeof</span>(m_FontTexture));</div>
<div class="line">    memset(&amp;m_FontIndexData,            0, <span class="keyword">sizeof</span>(m_FontIndexData));</div>
<div class="line"> </div>
<div class="line">    GetFontCharData(&amp;m_FontF, s_FontHeaderF, (uint32_t*)s_CharDataF, s_FontImageDataF);</div>
<div class="line">    GetFontCharData(&amp;m_FontP, s_FontHeaderP, (uint32_t*)s_CharDataP, s_FontImageDataP);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::Init</span></div>
<div class="line"><span class="comment"> * -----------------------</span></div>
<div class="line"><span class="comment"> * Sets up NVN data (command buffer, font textures, vertex buffers,</span></div>
<div class="line"><span class="comment"> * uniform buffers, render states), loads the font shader, and sets</span></div>
<div class="line"><span class="comment"> * some default values for text rendering.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::Init(<a name="_a0"></a><a class="code" href="struct_n_v_ndevice.html">NVNdevice</a>* pDevice, <a name="_a1"></a><a class="code" href="struct_n_v_nqueue.html">NVNqueue</a>* pQueue, TextureIDManager* pTextureIDManager, FrameBufferedSyncManager* pSyncManager, <span class="keywordtype">int</span> numChunks)</div>
<div class="line">{</div>
<div class="line">    m_pDevice = pDevice;</div>
<div class="line">    m_pQueue = pQueue;</div>
<div class="line">    m_pTextureIDManager = pTextureIDManager;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Queries the device for the proper control and command</span></div>
<div class="line"><span class="comment">         * memory alignment for a command buffer.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    <span class="keywordtype">int</span> commandBufferCommandAlignment = 0;</div>
<div class="line">    <span class="keywordtype">int</span> commandBufferControlAlignment = 0;</div>
<div class="line">    nvnDeviceGetInteger(pDevice, NVN_DEVICE_INFO_COMMAND_BUFFER_COMMAND_ALIGNMENT, &amp;commandBufferCommandAlignment);</div>
<div class="line">    nvnDeviceGetInteger(pDevice, NVN_DEVICE_INFO_COMMAND_BUFFER_CONTROL_ALIGNMENT, &amp;commandBufferControlAlignment);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * If a sync manager is provided, allow it to properly manage the command memory</span></div>
<div class="line"><span class="comment">         * swapping through its own syncs.  Otherwise, manage swapping ourselves</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    <span class="keywordflow">if</span> (pSyncManager)</div>
<div class="line">    {</div>
<div class="line">        m_UsingSyncManager = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_UsingSyncManager)</div>
<div class="line">    {</div>
<div class="line">        m_pManagedCommandBuffer = <span class="keyword">new</span> ManagedCommandBuffer(pDevice, g_CommandMemorySize, g_ControlMemorySize, numChunks);</div>
<div class="line">        pSyncManager-&gt;RegisterMemoryManager(m_pManagedCommandBuffer);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (!nvnCommandBufferInitialize(&amp;m_CommandBuffer, m_pDevice))</div>
<div class="line">        {</div>
<div class="line">            <a name="a2"></a><a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0 &amp;&amp; <span class="stringliteral">&quot;nvnCommandBufferInitialize failed&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the command buffer memory. */</span></div>
<div class="line">        m_pCommandMemoryPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">        m_pCommandMemoryPool-&gt;Init(</div>
<div class="line">            NULL,</div>
<div class="line">            Align(g_CommandMemorySize, commandBufferCommandAlignment),</div>
<div class="line">            NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line">            pDevice);</div>
<div class="line"> </div>
<div class="line">        m_CommandPoolOffset = m_pCommandMemoryPool-&gt;GetNewMemoryChunkOffset(g_CommandMemorySize, commandBufferCommandAlignment);</div>
<div class="line">        m_pControlPool = AlignedAllocate(g_ControlMemorySize, commandBufferControlAlignment);</div>
<div class="line"> </div>
<div class="line">        nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">        nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!nvnSyncInitialize(&amp;m_CommandBufferSync, m_pDevice))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;nvnSyncInitialize failed&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the render states. */</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Blend State */</span></div>
<div class="line">    nvnBlendStateSetDefaults(&amp;m_BlendState);</div>
<div class="line">    nvnBlendStateSetBlendTarget(&amp;m_BlendState, 0);</div>
<div class="line">    nvnBlendStateSetBlendEquation(&amp;m_BlendState, NVNblendEquation::NVN_BLEND_EQUATION_ADD, NVNblendEquation::NVN_BLEND_EQUATION_ADD);</div>
<div class="line">    nvnBlendStateSetBlendFunc(&amp;m_BlendState, NVNblendFunc::NVN_BLEND_FUNC_SRC_ALPHA, NVNblendFunc::NVN_BLEND_FUNC_ONE_MINUS_SRC_ALPHA,</div>
<div class="line">                                             NVNblendFunc::NVN_BLEND_FUNC_SRC_ALPHA, NVNblendFunc::NVN_BLEND_FUNC_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Channel Mask State */</span></div>
<div class="line">    nvnChannelMaskStateSetDefaults(&amp;m_ChannelMaskState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Color State */</span></div>
<div class="line">    nvnColorStateSetDefaults(&amp;m_ColorState);</div>
<div class="line">    nvnColorStateSetBlendEnable(&amp;m_ColorState, 0, <a name="a3"></a><a class="code" href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a>);</div>
<div class="line">    nvnColorStateSetLogicOp(&amp;m_ColorState, NVNlogicOp::NVN_LOGIC_OP_COPY);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Depth Stencil State */</span></div>
<div class="line">    nvnDepthStencilStateSetDefaults(&amp;m_DepthStencilState);</div>
<div class="line">    nvnDepthStencilStateSetDepthTestEnable(&amp;m_DepthStencilState, <a name="a4"></a><a class="code" href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a>);</div>
<div class="line">    nvnDepthStencilStateSetDepthWriteEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a>);</div>
<div class="line">    nvnDepthStencilStateSetStencilTestEnable(&amp;m_DepthStencilState, <a class="code" href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Multisample state */</span></div>
<div class="line">    nvnMultisampleStateSetDefaults(&amp;m_MultisampleState);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Polygon state */</span></div>
<div class="line">    nvnPolygonStateSetDefaults(&amp;m_PolygonState);</div>
<div class="line">    nvnPolygonStateSetCullFace(&amp;m_PolygonState, NVNface::NVN_FACE_NONE);</div>
<div class="line">    nvnPolygonStateSetFrontFace(&amp;m_PolygonState, NVNfrontFace::NVN_FRONT_FACE_CCW);</div>
<div class="line">    nvnPolygonStateSetPolygonMode(&amp;m_PolygonState, NVNpolygonMode::NVN_POLYGON_MODE_FILL);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the builders */</span></div>
<div class="line">    nvnSamplerBuilderSetDevice(&amp;m_SamplerBuilder, m_pDevice);</div>
<div class="line">    nvnSamplerBuilderSetDefaults(&amp;m_SamplerBuilder);</div>
<div class="line"> </div>
<div class="line">    nvnBufferBuilderSetDevice(&amp;m_BufferBuilder, m_pDevice);</div>
<div class="line">    nvnBufferBuilderSetDefaults(&amp;m_BufferBuilder);</div>
<div class="line"> </div>
<div class="line">    nvnTextureBuilderSetDevice(&amp;m_TextureBuilder, m_pDevice);</div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_TextureBuilder);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Load the font shader asset file. */</span></div>
<div class="line">    m_pAssetLoader = <span class="keyword">new</span> AssetFileLoadingHelper(m_pDevice, NULL);</div>
<div class="line">    m_pDataHolder = m_pAssetLoader-&gt;LoadAssetFile(<span class="stringliteral">&quot;fontShader.out&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the position vertex attribute. */</span></div>
<div class="line">    m_PositionLocation = FontShader::Attributes::GetAttributeLocation(<span class="stringliteral">&quot;a_position&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_PositionLocation &gt;= 0, <span class="stringliteral">&quot;Position Vertex Attribute index is negative\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a name="_a5"></a><a class="code" href="struct_n_v_nvertex_attrib_state.html">NVNvertexAttribState</a>* positionAttribute = &amp;m_VertexAttributeStates[m_PositionLocation];</div>
<div class="line">    nvnVertexAttribStateSetDefaults(positionAttribute);</div>
<div class="line">    nvnVertexAttribStateSetFormat(positionAttribute, NVNformat::NVN_FORMAT_RGB32F, 0);</div>
<div class="line">    nvnVertexAttribStateSetStreamIndex(positionAttribute, m_PositionLocation);</div>
<div class="line"> </div>
<div class="line">    <a name="_a6"></a><a class="code" href="struct_n_v_nvertex_stream_state.html">NVNvertexStreamState</a>* positionStream = &amp;m_VertexStreamStates[m_PositionLocation];</div>
<div class="line">    nvnVertexStreamStateSetStride(positionStream, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the texture coordinate vertex attribute. */</span></div>
<div class="line">    m_TextureCoordinateLocation = FontShader::Attributes::GetAttributeLocation(<span class="stringliteral">&quot;a_texCoord&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_TextureCoordinateLocation &gt;= 0, <span class="stringliteral">&quot;Texture Coordinate Vertex Attribute index is negative\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="struct_n_v_nvertex_attrib_state.html">NVNvertexAttribState</a>* textureCoordinateAttribute = &amp;m_VertexAttributeStates[m_TextureCoordinateLocation];</div>
<div class="line">    nvnVertexAttribStateSetDefaults(textureCoordinateAttribute);</div>
<div class="line">    nvnVertexAttribStateSetFormat(textureCoordinateAttribute, NVNformat::NVN_FORMAT_RG32F, 0);</div>
<div class="line">    nvnVertexAttribStateSetStreamIndex(textureCoordinateAttribute, m_TextureCoordinateLocation);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="struct_n_v_nvertex_stream_state.html">NVNvertexStreamState</a>* textureCoordinateStream = &amp;m_VertexStreamStates[m_TextureCoordinateLocation];</div>
<div class="line">    nvnVertexStreamStateSetStride(textureCoordinateStream, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2);</div>
<div class="line"> </div>
<div class="line">    uint32_t indexElements = g_FontMaxBufferSize * 6;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the vertex data memory pool. */</span></div>
<div class="line">    m_pVertexDataPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pVertexDataPool-&gt;Init(</div>
<div class="line">        NULL,</div>
<div class="line">        (<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 + <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2) * 4 * g_FontMaxBufferSize * g_MaxNumLines + <span class="keyword">sizeof</span>(uint16_t) * indexElements,</div>
<div class="line">        NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line">        m_pDevice);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the uniform buffer memory pool. */</span></div>
<div class="line">    m_pUniformBufferPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pUniformBufferPool-&gt;Init(</div>
<div class="line">        NULL,</div>
<div class="line">       (Align(<span class="keyword">sizeof</span>(FontShader::BlockColorFSUniformBlockData), 256) +</div>
<div class="line">        Align(<span class="keyword">sizeof</span>(FontShader::BlockSamplerFSUniformBlockData), 256) +</div>
<div class="line">        Align(<span class="keyword">sizeof</span>(FontShader::BlockVSUniformBlockData), 256)) * g_MaxNumLines,</div>
<div class="line">        NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT,</div>
<div class="line">        m_pDevice);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the vertex buffers for the font. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; g_MaxNumLines; ++i)</div>
<div class="line">    {</div>
<div class="line">        ptrdiff_t vertexPoolOffset = m_pVertexDataPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * 4 * g_FontMaxBufferSize, 4);</div>
<div class="line">        CreateBuffer(&amp;m_FontPositionData[i], m_pVertexDataPool-&gt;GetMemoryPool(), <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * 4 * g_FontMaxBufferSize, vertexPoolOffset);</div>
<div class="line"> </div>
<div class="line">        vertexPoolOffset = m_pVertexDataPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2 * 4 * g_FontMaxBufferSize, 4);</div>
<div class="line">        CreateBuffer(&amp;m_FontTextureCoordinateData[i], m_pVertexDataPool-&gt;GetMemoryPool(), <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2 * 4 * g_FontMaxBufferSize, vertexPoolOffset);</div>
<div class="line"> </div>
<div class="line">        ptrdiff_t uniformPoolOffset = m_pUniformBufferPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(FontShader::BlockVSUniformBlockData), 256);</div>
<div class="line">        CreateBuffer(&amp;m_FontUniformDataVS[i], m_pUniformBufferPool-&gt;GetMemoryPool(), <span class="keyword">sizeof</span>(FontShader::BlockVSUniformBlockData), uniformPoolOffset);</div>
<div class="line"> </div>
<div class="line">        uniformPoolOffset = m_pUniformBufferPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(FontShader::BlockColorFSUniformBlockData), 256);</div>
<div class="line">        CreateBuffer(&amp;m_FontUniformDataPSColor[i], m_pUniformBufferPool-&gt;GetMemoryPool(), <span class="keyword">sizeof</span>(FontShader::BlockColorFSUniformBlockData), uniformPoolOffset);</div>
<div class="line"> </div>
<div class="line">        uniformPoolOffset = m_pUniformBufferPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(FontShader::BlockSamplerFSUniformBlockData), 256);</div>
<div class="line">        CreateBuffer(&amp;m_FontUniformDataPSSampler[i], m_pUniformBufferPool-&gt;GetMemoryPool(), <span class="keyword">sizeof</span>(FontShader::BlockSamplerFSUniformBlockData), uniformPoolOffset);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the index buffer. */</span></div>
<div class="line">    CreateBuffer(&amp;m_FontIndexData,</div>
<div class="line">                 m_pVertexDataPool-&gt;GetMemoryPool(),</div>
<div class="line">                 <span class="keyword">sizeof</span>(uint16_t) * indexElements,</div>
<div class="line">                 m_pVertexDataPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(uint16_t) * indexElements, 2));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup the indices. */</span></div>
<div class="line">    uint16_t remap[] = { 0, 1, 3, 3, 0, 2 };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; indexElements; ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">reinterpret_cast&lt;</span>uint16_t*<span class="keyword">&gt;</span>(m_FontIndexData.m_pBufferMap)[i] = (uint16_t)(i / 6 * 4 + remap[i % 6]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Allocate memory for the font textures. */</span></div>
<div class="line">    <span class="keywordtype">size_t</span> fontMemSize = Align(<span class="keyword">sizeof</span>(s_FontImageDataF), 512) + Align(<span class="keyword">sizeof</span>(s_FontImageDataP), 512);</div>
<div class="line"> </div>
<div class="line">    m_pFontTexturePool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pFontTexturePool-&gt;Init(NULL, fontMemSize, NVN_MEMORY_POOL_FLAGS_CPU_NO_ACCESS_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT, m_pDevice);</div>
<div class="line"> </div>
<div class="line">    m_pFontTextureBufferPool = <span class="keyword">new</span> <a class="code" href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">MemoryPool</a>();</div>
<div class="line">    m_pFontTextureBufferPool-&gt;Init(NULL, fontMemSize, NVN_MEMORY_POOL_FLAGS_CPU_UNCACHED_BIT | NVN_MEMORY_POOL_FLAGS_GPU_CACHED_BIT, m_pDevice);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the font textures. */</span></div>
<div class="line">    ptrdiff_t fontPOffset = m_pFontTextureBufferPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(s_FontImageDataP), 512);</div>
<div class="line">    InitFontTexture(&amp;m_FontP, fontPOffset);</div>
<div class="line"> </div>
<div class="line">    ptrdiff_t fontFOffset = m_pFontTextureBufferPool-&gt;GetNewMemoryChunkOffset(<span class="keyword">sizeof</span>(s_FontImageDataF), 512);</div>
<div class="line">    InitFontTexture(&amp;m_FontF, fontFOffset);</div>
<div class="line"> </div>
<div class="line">    uint32_t sizeP = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontP.m_FontTextureHeight * m_FontP.m_FontTextureWidth * m_FontP.m_Channel);</div>
<div class="line">    uint32_t sizeF = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontF.m_FontTextureHeight * m_FontF.m_FontTextureWidth * m_FontF.m_Channel);</div>
<div class="line"> </div>
<div class="line">    memcpy(m_FontP.m_FontTextureData.m_TextureBufferData.m_pBufferMap, m_FontP.m_pFontImageData, sizeP);</div>
<div class="line">    memcpy(m_FontF.m_FontTextureData.m_TextureBufferData.m_pBufferMap, m_FontF.m_pFontImageData, sizeF);</div>
<div class="line"> </div>
<div class="line">    <a name="_a7"></a><a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>* pCmdBuf = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (!m_UsingSyncManager)</div>
<div class="line">    {</div>
<div class="line">        nvnQueueFenceSync(m_pQueue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">        nvnQueueFlush(m_pQueue);</div>
<div class="line">        nvnSyncWait(&amp;m_CommandBufferSync, <a name="a8"></a><a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        pCmdBuf = &amp;m_CommandBuffer;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        pCmdBuf = m_pManagedCommandBuffer-&gt;GetCommandBuffer();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Copy the font texture data into an NVNtexture. */</span></div>
<div class="line">    nvnCommandBufferBeginRecording(pCmdBuf);</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a> fontPBufferAddress = nvnBufferGetAddress(m_FontP.m_FontTextureData.m_TextureBufferData.m_pObject);</div>
<div class="line">        <a name="_a9"></a><a class="code" href="struct_n_v_ncopy_region.html">NVNcopyRegion</a> fontPCopyRegion;</div>
<div class="line">        fontPCopyRegion.<a name="a10"></a><a class="code" href="struct_n_v_ncopy_region.html#a62818971f7c2d1d8b50b4f2f17695a89">xoffset</a> = 0;</div>
<div class="line">        fontPCopyRegion.<a name="a11"></a><a class="code" href="struct_n_v_ncopy_region.html#a5cf7bfd9a638b605b6dbb1925ec15579">yoffset</a> = 0;</div>
<div class="line">        fontPCopyRegion.<a name="a12"></a><a class="code" href="struct_n_v_ncopy_region.html#a049973b5f7801c8f6077abd1bd10cdb5">zoffset</a> = 0;</div>
<div class="line">        fontPCopyRegion.<a name="a13"></a><a class="code" href="struct_n_v_ncopy_region.html#a2760a2442f385cff3de39e1f43fb3d15">width</a>   = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontP.m_FontTextureWidth);</div>
<div class="line">        fontPCopyRegion.<a name="a14"></a><a class="code" href="struct_n_v_ncopy_region.html#af7912a472ef5b80b2f57617046c52de7">height</a>  = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontP.m_FontTextureHeight);</div>
<div class="line">        fontPCopyRegion.<a name="a15"></a><a class="code" href="struct_n_v_ncopy_region.html#a10692b82ad7fa9f6c9ecce2a653cf09f">depth</a>   = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#ga264a21eefa322cd0ad9acf4c2ab949ad">NVNcopyFlags</a> fontPCopyFlags = <a class="code" href="group__nvn__c__enum.html#gga264a21eefa322cd0ad9acf4c2ab949ada2dcf02e35d39e7fbdd45f48d6a086286">NVN_COPY_FLAGS_NONE</a>;</div>
<div class="line">        nvnCommandBufferCopyBufferToTexture(</div>
<div class="line">            pCmdBuf,</div>
<div class="line">            fontPBufferAddress,</div>
<div class="line">            m_FontP.m_FontTextureData.m_pTexture,</div>
<div class="line">            NULL,</div>
<div class="line">            &amp;fontPCopyRegion,</div>
<div class="line">            fontPCopyFlags);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a> fontFBufferAddress = nvnBufferGetAddress(m_FontF.m_FontTextureData.m_TextureBufferData.m_pObject);</div>
<div class="line">        <a class="code" href="struct_n_v_ncopy_region.html">NVNcopyRegion</a> fontFCopyRegion;</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#a62818971f7c2d1d8b50b4f2f17695a89">xoffset</a> = 0;</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#a5cf7bfd9a638b605b6dbb1925ec15579">yoffset</a> = 0;</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#a049973b5f7801c8f6077abd1bd10cdb5">zoffset</a> = 0;</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#a2760a2442f385cff3de39e1f43fb3d15">width</a>   = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontF.m_FontTextureWidth);</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#af7912a472ef5b80b2f57617046c52de7">height</a>  = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(m_FontF.m_FontTextureHeight);</div>
<div class="line">        fontFCopyRegion.<a class="code" href="struct_n_v_ncopy_region.html#a10692b82ad7fa9f6c9ecce2a653cf09f">depth</a>   = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__nvn__c__enum.html#ga264a21eefa322cd0ad9acf4c2ab949ad">NVNcopyFlags</a> fontFCopyFlags = <a class="code" href="group__nvn__c__enum.html#gga264a21eefa322cd0ad9acf4c2ab949ada2dcf02e35d39e7fbdd45f48d6a086286">NVN_COPY_FLAGS_NONE</a>;</div>
<div class="line">        nvnCommandBufferCopyBufferToTexture(</div>
<div class="line">            pCmdBuf,</div>
<div class="line">            fontFBufferAddress,</div>
<div class="line">            m_FontF.m_FontTextureData.m_pTexture,</div>
<div class="line">            NULL,</div>
<div class="line">            &amp;fontFCopyRegion,</div>
<div class="line">            fontFCopyFlags);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_CommandHandle = nvnCommandBufferEndRecording(pCmdBuf);</div>
<div class="line">    nvnQueueSubmitCommands(m_pQueue, 1, &amp;m_CommandHandle);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set some default values for the renderer. */</span></div>
<div class="line">    SetSpacing(<span class="keyword">true</span>);</div>
<div class="line">    SetGridSize(60.0f, 24.0f);</div>
<div class="line">    SetColor(1.0f, 1.0f, 1.0f, 1.0f);</div>
<div class="line">    SetZValue(-1.0f);</div>
<div class="line"> </div>
<div class="line">    m_Enabled = <span class="keyword">true</span>;</div>
<div class="line">}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::InitFontTexture</span></div>
<div class="line"><span class="comment"> * ----------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up the NVN data for the font texture.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::InitFontTexture(FontData* pData, ptrdiff_t poolOffset)</div>
<div class="line">{</div>
<div class="line">    uint32_t width   = (uint32_t)pData-&gt;m_FontTextureWidth;</div>
<div class="line">    uint32_t height  = (uint32_t)pData-&gt;m_FontTextureHeight;</div>
<div class="line">    uint32_t depth   = 1;</div>
<div class="line">    uint32_t channel = (uint32_t)pData-&gt;m_Channel;</div>
<div class="line">    uint32_t size    = width*height*depth*channel;</div>
<div class="line"> </div>
<div class="line">    uint32_t samplerID, textureID;</div>
<div class="line"> </div>
<div class="line">    if (!pData-&gt;m_FontTextureData.m_pSampler)</div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_FontTextureData.m_pSampler = <span class="keyword">new</span> <a name="_a16"></a><a class="code" href="struct_n_v_nsampler.html">NVNsampler</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        nvnSamplerFinalize(pData-&gt;m_FontTextureData.m_pSampler);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the sampler, register it, and grab its ID. */</span></div>
<div class="line">    nvnSamplerBuilderSetDefaults(&amp;m_SamplerBuilder);</div>
<div class="line">    nvnSamplerBuilderSetMinMagFilter(&amp;m_SamplerBuilder, NVN_MIN_FILTER_LINEAR, NVN_MAG_FILTER_LINEAR);</div>
<div class="line">    nvnSamplerBuilderSetWrapMode(&amp;m_SamplerBuilder, NVN_WRAP_MODE_CLAMP, NVN_WRAP_MODE_CLAMP, NVN_WRAP_MODE_CLAMP);</div>
<div class="line">    nvnSamplerInitialize(pData-&gt;m_FontTextureData.m_pSampler, &amp;m_SamplerBuilder);</div>
<div class="line">    samplerID = m_pTextureIDManager-&gt;RegisterSampler(pData-&gt;m_FontTextureData.m_pSampler);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!pData-&gt;m_FontTextureData.m_pTexture)</div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_FontTextureData.m_pTexture = <span class="keyword">new</span> <a name="_a17"></a><a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(pData-&gt;m_FontTextureData.m_pTexture);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the texture and get its ID. */</span></div>
<div class="line">    nvnTextureBuilderSetDefaults(&amp;m_TextureBuilder);</div>
<div class="line">    nvnTextureBuilderSetTarget(&amp;m_TextureBuilder, NVN_TEXTURE_TARGET_2D);</div>
<div class="line">    nvnTextureBuilderSetLevels(&amp;m_TextureBuilder, 1);</div>
<div class="line">    nvnTextureBuilderSetFormat(&amp;m_TextureBuilder, NVN_FORMAT_R8);</div>
<div class="line">    nvnTextureBuilderSetSize2D(&amp;m_TextureBuilder, width, height);</div>
<div class="line">    nvnTextureBuilderSetDepth(&amp;m_TextureBuilder, depth);</div>
<div class="line">    nvnTextureBuilderSetSamples(&amp;m_TextureBuilder, 0);</div>
<div class="line">    uint64_t storage = nvnTextureBuilderGetStorageSize(&amp;m_TextureBuilder);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(storage);</div>
<div class="line">    <a name="a18"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(storage);</div>
<div class="line">    nvnTextureBuilderSetStorage(&amp;m_TextureBuilder, m_pFontTexturePool-&gt;GetMemoryPool(), poolOffset);</div>
<div class="line">    nvnTextureInitialize(pData-&gt;m_FontTextureData.m_pTexture, &amp;m_TextureBuilder);</div>
<div class="line">    textureID = m_pTextureIDManager-&gt;RegisterTexture(pData-&gt;m_FontTextureData.m_pTexture);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject)</div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject = <span class="keyword">new</span> <a name="_a19"></a><a class="code" href="struct_n_v_nbuffer.html">NVNbuffer</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create the NVNbuffer to hold the texture data to be copied into an NVNtexture. */</span></div>
<div class="line">    nvnBufferBuilderSetDefaults(&amp;m_BufferBuilder);</div>
<div class="line">    nvnBufferBuilderSetStorage(&amp;m_BufferBuilder, m_pFontTextureBufferPool-&gt;GetMemoryPool(), poolOffset, size);</div>
<div class="line">    nvnBufferInitialize(pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject, &amp;m_BufferBuilder);</div>
<div class="line">    pData-&gt;m_FontTextureData.m_TextureBufferData.m_Address = nvnBufferGetAddress(pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject);</div>
<div class="line">    pData-&gt;m_FontTextureData.m_TextureBufferData.m_pBufferMap = nvnBufferMap(pData-&gt;m_FontTextureData.m_TextureBufferData.m_pObject);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the texture&#39;s combined texture handle. */</span></div>
<div class="line">    pData-&gt;m_FontTextureData.m_TextureHandle = nvnDeviceGetTextureHandle(m_pDevice, textureID, samplerID);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::CleanBufferData</span></div>
<div class="line"><span class="comment"> * ----------------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up a given FontBufferData struct.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::CleanBufferData(FontBufferData&amp; bufferData)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(bufferData.m_pObject)</div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(bufferData.m_pObject);</div>
<div class="line">        <span class="keyword">delete</span> bufferData.m_pObject;</div>
<div class="line">        bufferData.m_pObject = NULL;</div>
<div class="line">        bufferData.m_pBufferMap = NULL;</div>
<div class="line">        bufferData.m_Address = 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::CleanUp</span></div>
<div class="line"><span class="comment"> * --------------------------</span></div>
<div class="line"><span class="comment"> * Cleans up all the NVN data and mempory allocated</span></div>
<div class="line"><span class="comment"> * for the text renderer.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::CleanUp()</div>
<div class="line">{</div>
<div class="line">    m_pDevice = NULL;</div>
<div class="line">    m_pQueue = NULL;</div>
<div class="line">    m_pTextureIDManager = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; g_MaxNumLines; ++i)</div>
<div class="line">    {</div>
<div class="line">        CleanBufferData(m_FontPositionData[i]);</div>
<div class="line">        CleanBufferData(m_FontTextureCoordinateData[i]);</div>
<div class="line">        CleanBufferData(m_FontUniformDataVS[i]);</div>
<div class="line">        CleanBufferData(m_FontUniformDataPSColor[i]);</div>
<div class="line">        CleanBufferData(m_FontUniformDataPSSampler[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(m_FontTexture[i] &amp;&amp; m_FontTexture[i]-&gt;m_pTexture)</div>
<div class="line">        {</div>
<div class="line">            nvnTextureFinalize(m_FontTexture[i]-&gt;m_pTexture);</div>
<div class="line">            <span class="keyword">delete</span> m_FontTexture[i]-&gt;m_pTexture;</div>
<div class="line">            m_FontTexture[i]-&gt;m_pTexture = NULL;</div>
<div class="line"> </div>
<div class="line">            m_FontTexture[i]-&gt;m_TextureHandle = 0;</div>
<div class="line"> </div>
<div class="line">            CleanBufferData(m_FontTexture[i]-&gt;m_TextureBufferData);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (m_FontTexture[i] &amp;&amp; m_FontTexture[i]-&gt;m_pSampler)</div>
<div class="line">        {</div>
<div class="line">            nvnSamplerFinalize(m_FontTexture[i]-&gt;m_pSampler);</div>
<div class="line">            <span class="keyword">delete</span> m_FontTexture[i]-&gt;m_pSampler;</div>
<div class="line">            m_FontTexture[i]-&gt;m_pSampler = NULL;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_FontP.m_FontTextureData.m_pSampler)</div>
<div class="line">    {</div>
<div class="line">        nvnSamplerFinalize(m_FontP.m_FontTextureData.m_pSampler);</div>
<div class="line">        <span class="keyword">delete</span> m_FontP.m_FontTextureData.m_pSampler;</div>
<div class="line">        m_FontP.m_FontTextureData.m_pSampler = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_FontP.m_FontTextureData.m_pTexture)</div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(m_FontP.m_FontTextureData.m_pTexture);</div>
<div class="line">        <span class="keyword">delete</span> m_FontP.m_FontTextureData.m_pTexture;</div>
<div class="line">        m_FontP.m_FontTextureData.m_pTexture = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    CleanBufferData(m_FontP.m_FontTextureData.m_TextureBufferData);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_FontF.m_FontTextureData.m_pSampler)</div>
<div class="line">    {</div>
<div class="line">        nvnSamplerFinalize(m_FontF.m_FontTextureData.m_pSampler);</div>
<div class="line">        <span class="keyword">delete</span> m_FontF.m_FontTextureData.m_pSampler;</div>
<div class="line">        m_FontF.m_FontTextureData.m_pSampler = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_FontF.m_FontTextureData.m_pTexture)</div>
<div class="line">    {</div>
<div class="line">        nvnTextureFinalize(m_FontF.m_FontTextureData.m_pTexture);</div>
<div class="line">        <span class="keyword">delete</span> m_FontF.m_FontTextureData.m_pTexture;</div>
<div class="line">        m_FontF.m_FontTextureData.m_pTexture = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    CleanBufferData(m_FontF.m_FontTextureData.m_TextureBufferData);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_FontIndexData.m_pObject)</div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(m_FontIndexData.m_pObject);</div>
<div class="line">        <span class="keyword">delete</span> m_FontIndexData.m_pObject;</div>
<div class="line">        m_FontIndexData.m_pObject = NULL;</div>
<div class="line">        m_FontIndexData.m_Address = 0;</div>
<div class="line">        m_FontIndexData.m_pBufferMap = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (m_UsingSyncManager)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pManagedCommandBuffer;</div>
<div class="line">        m_pManagedCommandBuffer = NULL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_pControlPool)</div>
<div class="line">        {</div>
<div class="line">            AlignedDeallocate(m_pControlPool);</div>
<div class="line">            m_pControlPool = NULL;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        nvnCommandBufferFinalize(&amp;m_CommandBuffer);</div>
<div class="line"> </div>
<div class="line">        nvnSyncFinalize(&amp;m_CommandBufferSync);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (m_pCommandMemoryPool)</div>
<div class="line">        {</div>
<div class="line">            m_pCommandMemoryPool-&gt;Shutdown();</div>
<div class="line">            <span class="keyword">delete</span> m_pCommandMemoryPool;</div>
<div class="line">            m_pCommandMemoryPool = NULL;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pVertexDataPool)</div>
<div class="line">    {</div>
<div class="line">        m_pVertexDataPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pVertexDataPool;</div>
<div class="line">        m_pVertexDataPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pUniformBufferPool)</div>
<div class="line">    {</div>
<div class="line">        m_pUniformBufferPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pUniformBufferPool;</div>
<div class="line">        m_pUniformBufferPool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pAssetLoader)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pAssetLoader;</div>
<div class="line">        m_pAssetLoader = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pDataHolder)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">delete</span> m_pDataHolder;</div>
<div class="line">        m_pDataHolder = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pFontTexturePool)</div>
<div class="line">    {</div>
<div class="line">        m_pFontTexturePool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pFontTexturePool;</div>
<div class="line">        m_pFontTexturePool = NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(m_pFontTextureBufferPool)</div>
<div class="line">    {</div>
<div class="line">        m_pFontTextureBufferPool-&gt;Shutdown();</div>
<div class="line">        <span class="keyword">delete</span> m_pFontTextureBufferPool;</div>
<div class="line">        m_pFontTextureBufferPool= NULL;</div>
<div class="line">    }</div>
<div class="line">}<span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer Destructor</span></div>
<div class="line"><span class="comment"> * ----------------------------</span></div>
<div class="line"><span class="comment"> * Empty destructor.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">DebugTextRenderer::~DebugTextRenderer()</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::GetFontCharData</span></div>
<div class="line"><span class="comment"> * ----------------------------------</span></div>
<div class="line"><span class="comment"> * Sets up the font data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::GetFontCharData(FontData* pData, <span class="keyword">const</span> uint32_t* pFontHeader, <span class="keyword">const</span> uint32_t* pCharData, <span class="keyword">const</span> uint8_t* pFontImageData)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">float</span> lineHeight;</div>
<div class="line">    <span class="keywordtype">float</span> maxCharWidth = 0.0f;</div>
<div class="line">    <span class="keywordtype">float</span> maxCharHeight = 0.0f;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check Font Texture Data */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pFontHeader != NULL &amp;&amp; pCharData != NULL &amp;&amp; pFontImageData != NULL &amp;&amp; <span class="stringliteral">&quot;No texture data.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check char data buffer */</span></div>
<div class="line">    <span class="keywordflow">if</span> (pData-&gt;m_pCharDataBuffer)</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* Skip Data Initialization */</span></div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set Font Texture Data Information */</span></div>
<div class="line">    pData-&gt;m_FontTextureWidth  = (float)pFontHeader[0];</div>
<div class="line">    pData-&gt;m_FontTextureHeight = (float)pFontHeader[1];</div>
<div class="line">    pData-&gt;m_Channel           = (uint32_t)pFontHeader[2];</div>
<div class="line">    lineHeight                 = (float)pFontHeader[4];</div>
<div class="line">    pData-&gt;m_NumCharData       = pFontHeader[5];</div>
<div class="line">    pData-&gt;m_GridOffsetX       = 0;</div>
<div class="line">    pData-&gt;m_GridOffsetY       = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pData == &amp;m_FontP)</div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_pCharDataBuffer = m_CharDataBufferP;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_pCharDataBuffer = m_CharDataBufferF;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check the max number */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pData-&gt;m_NumCharData &lt;= g_MaxNumChars &amp;&amp; <span class="stringliteral">&quot;Font has over the max number of characters.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Format of data is: id, x, y, width, height, xOffset, yOffset, xAdvance */</span></div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pData-&gt;m_NumCharData; ++i)</div>
<div class="line">    {</div>
<div class="line">        uint32_t <span class="keywordtype">id</span>       = pCharData[i * 8 + 0];</div>
<div class="line">        uint32_t x        = pCharData[i * 8 + 1];</div>
<div class="line">        uint32_t y        = pCharData[i * 8 + 2];</div>
<div class="line">        uint32_t w        = pCharData[i * 8 + 3];</div>
<div class="line">        uint32_t h        = pCharData[i * 8 + 4];</div>
<div class="line">        <span class="keywordtype">int</span> xOffset       = (int)pCharData[i * 8 + 5];</div>
<div class="line">        <span class="keywordtype">int</span> yOffset       = (int)pCharData[i * 8 + 6];</div>
<div class="line">        uint32_t xAdvance = pCharData[i * 8 + 7];</div>
<div class="line">        <span class="keywordtype">float</span> charHeight  = (float)(h + yOffset);</div>
<div class="line"> </div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_Id       = id;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MinS     = (float)x / pData-&gt;m_FontTextureWidth;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MinT     = (<span class="keywordtype">float</span>)(pData-&gt;m_FontTextureHeight - h - y) / pData-&gt;m_FontTextureHeight;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MaxS     = (<span class="keywordtype">float</span>)(x + w) / pData-&gt;m_FontTextureWidth;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MaxT     = (<span class="keywordtype">float</span>)(pData-&gt;m_FontTextureHeight - y) / pData-&gt;m_FontTextureHeight;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MinX     = (<span class="keywordtype">float</span>)xOffset;</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MinY     = (float)(lineHeight - yOffset - h);</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MaxX     = (float)(xOffset + w);</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_MaxY     = (float)(lineHeight - yOffset);</div>
<div class="line">        pData-&gt;m_pCharDataBuffer[i].m_XAdvance = (float)xAdvance;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Set max height of char in GL cordinate space */</span></div>
<div class="line">        <span class="keywordflow">if</span>(charHeight &gt; maxCharHeight)</div>
<div class="line">        {</div>
<div class="line">            maxCharHeight = charHeight;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pData-&gt;m_pCharDataBuffer[i].m_XAdvance &gt; maxCharWidth)</div>
<div class="line">        {</div>
<div class="line">            maxCharWidth = (float)pData-&gt;m_pCharDataBuffer[i].m_XAdvance;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set grid offsetX */</span></div>
<div class="line">    pData-&gt;m_GridOffsetX = maxCharWidth;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set grid offsetY */</span></div>
<div class="line">    pData-&gt;m_GridOffsetY = maxCharHeight;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set pointer of Font Image Data */</span></div>
<div class="line">    pData-&gt;m_pFontImageData = (uint8_t*)pFontImageData;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::CreateBuffer</span></div>
<div class="line"><span class="comment"> * -------------------------------</span></div>
<div class="line"><span class="comment"> * Create an NVNbuffer with the specified structure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::CreateBuffer(FontBufferData* pData, <a name="_a20"></a><a class="code" href="struct_n_v_nmemory_pool.html">NVNmemoryPool</a>* pPool, <span class="keywordtype">size_t</span> size, ptrdiff_t offset)</div>
<div class="line">{</div>
<div class="line">    nvnBufferBuilderSetDefaults(&amp;m_BufferBuilder);</div>
<div class="line">    nvnBufferBuilderSetStorage(&amp;m_BufferBuilder, pPool, offset, size);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pData-&gt;m_pObject)</div>
<div class="line">    {</div>
<div class="line">        nvnBufferFinalize(pData-&gt;m_pObject);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        pData-&gt;m_pObject = <span class="keyword">new</span> <a class="code" href="struct_n_v_nbuffer.html">NVNbuffer</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!nvnBufferInitialize(pData-&gt;m_pObject, &amp;m_BufferBuilder))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(0, <span class="stringliteral">&quot;Failed to initialize buffer&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pData-&gt;m_Address = nvnBufferGetAddress(pData-&gt;m_pObject);</div>
<div class="line">    pData-&gt;m_pBufferMap = nvnBufferMap(pData-&gt;m_pObject);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::SetSpacing</span></div>
<div class="line"><span class="comment"> * -----------------------------</span></div>
<div class="line"><span class="comment"> * Sets the spacing for the file</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::SetSpacing(<span class="keywordtype">bool</span> proportional)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Check initialization. */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_FontP.m_pCharDataBuffer &amp;&amp; <span class="stringliteral">&quot;Need to call DebugTextRenderer::Init first&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update proportional boolean. */</span></div>
<div class="line">    m_Proportional = proportional;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Switch which scale we use. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (proportional)</div>
<div class="line">    {</div>
<div class="line">        m_Font.m_pCharMagScale = m_Font.m_CharMagScaleP;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        m_Font.m_pCharMagScale = m_Font.m_CharMagScaleF;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::SetGridSize</span></div>
<div class="line"><span class="comment"> * ------------------------------</span></div>
<div class="line"><span class="comment"> * Sets the size of the grid that the text is rendered in.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::SetGridSize(<span class="keywordtype">float</span> xGrid, <span class="keywordtype">float</span> yGrid)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Check initialization. */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_FontP.m_pCharDataBuffer &amp;&amp; <span class="stringliteral">&quot;Need to call DebugTextRenderer::Init first&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update scale */</span></div>
<div class="line">    UpdateScale(&amp;m_Font, xGrid, yGrid);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::UpdateScale</span></div>
<div class="line"><span class="comment"> * ------------------------------</span></div>
<div class="line"><span class="comment"> * Sets the scale of the text.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::UpdateScale(FontRenderData* pData, <span class="keywordtype">float</span> scaleX, <span class="keywordtype">float</span> scaleY)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Calculate char scale */</span></div>
<div class="line">    pData-&gt;m_CharMagScaleF[0] = 2.0f / (scaleX * m_FontF.m_GridOffsetX);</div>
<div class="line">    pData-&gt;m_CharMagScaleF[1] = 2.0f / (scaleY * m_FontF.m_GridOffsetY);</div>
<div class="line"> </div>
<div class="line">    pData-&gt;m_CharMagScaleP[0] = 2.0f / (scaleX * m_FontP.m_GridOffsetX);</div>
<div class="line">    pData-&gt;m_CharMagScaleP[1] = 2.0f / (scaleY * m_FontP.m_GridOffsetY);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::SetColor</span></div>
<div class="line"><span class="comment"> * ---------------------------</span></div>
<div class="line"><span class="comment"> * Sets the color of the text.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::SetColor(<span class="keywordtype">float</span> r, <span class="keywordtype">float</span> g, <span class="keywordtype">float</span> b, <span class="keywordtype">float</span> a)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/*  Check initialization */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_FontP.m_pCharDataBuffer &amp;&amp; <span class="stringliteral">&quot;Need to call DebugTextRenderer::Init first&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*  Update color */</span></div>
<div class="line">    m_Font.m_Color[0] = r;</div>
<div class="line">    m_Font.m_Color[1] = g;</div>
<div class="line">    m_Font.m_Color[2] = b;</div>
<div class="line">    m_Font.m_Color[3] = a;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::SetZValue</span></div>
<div class="line"><span class="comment"> * ----------------------------</span></div>
<div class="line"><span class="comment"> * Set the text&#39;s z value.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::SetZValue(<span class="keywordtype">float</span> zValue)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* Check initialization */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(m_FontP.m_pCharDataBuffer &amp;&amp; <span class="stringliteral">&quot;Need to call DebugTextRenderer::Init first&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update depth value */</span></div>
<div class="line">    m_Font.m_Depth = zValue;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::UpdateVertexBuffers</span></div>
<div class="line"><span class="comment"> * --------------------------------------</span></div>
<div class="line"><span class="comment"> * Updates the vertex buffers for a new string of characters.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::UpdateVertexBuffers(<span class="keyword">const</span> <span class="keywordtype">char</span>* pStr, uint32_t strLength, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y)</div>
<div class="line">{</div>
<div class="line">    uint32_t i = 0;</div>
<div class="line">    <span class="keywordtype">float</span> cursorOffset = 0;</div>
<div class="line">    <span class="keywordtype">float</span> gridOffset = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">float</span> s_PositionBuffer[g_FontMaxBufferSize * 3 * 4];</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">float</span> s_TextureCoordinateBuffer[g_FontMaxBufferSize * 2 * 4];</div>
<div class="line"> </div>
<div class="line">    FontRenderData* pFontData = &amp;m_Font;</div>
<div class="line">    FontData* pFont = GetCurrentFont();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (i &lt; strLength)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span>(; i &lt; strLength; i++)</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">/* Get character id */</span></div>
<div class="line">            uint32_t <span class="keywordtype">id</span> = (uint32_t)pStr[i];</div>
<div class="line">            uint32_t index = 0;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Set index offset of buffers */</span></div>
<div class="line">            uint32_t posSt = i * 12;</div>
<div class="line">            uint32_t texSt = i * 8;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Check &quot;\n&quot; */</span></div>
<div class="line">            <span class="keywordflow">if</span>(<span class="keywordtype">id</span> == 10)</div>
<div class="line">            {</div>
<div class="line">                gridOffset -= (float)pFont-&gt;m_GridOffsetY;</div>
<div class="line">                cursorOffset = 0;</div>
<div class="line">                i++;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keywordtype">id</span> &gt;= 32 &amp;&amp; <span class="keywordtype">id</span> &lt;= 127)</div>
<div class="line">            {</div>
<div class="line">                    <span class="comment">/* Get index of character id */</span></div>
<div class="line">                index = BSearchIndex(pFont, <span class="keywordtype">id</span>);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Set Vertex position */</span></div>
<div class="line">            s_PositionBuffer[posSt + 0] = (float)(pFont-&gt;m_pCharDataBuffer[index].m_MinX + cursorOffset + x);</div>
<div class="line">            s_PositionBuffer[posSt + 3] = (float)s_PositionBuffer[posSt + 0];</div>
<div class="line">            s_PositionBuffer[posSt + 6] = (float)(pFont-&gt;m_pCharDataBuffer[index].m_MaxX + cursorOffset + x);</div>
<div class="line">            s_PositionBuffer[posSt + 9] = (float)s_PositionBuffer[posSt + 6];</div>
<div class="line"> </div>
<div class="line">            cursorOffset += pFont-&gt;m_pCharDataBuffer[index].m_XAdvance;</div>
<div class="line"> </div>
<div class="line">            s_PositionBuffer[posSt + 1] = (float)(pFont-&gt;m_pCharDataBuffer[index].m_MinY + gridOffset + y);</div>
<div class="line">            s_PositionBuffer[posSt + 4] = (float)(pFont-&gt;m_pCharDataBuffer[index].m_MaxY + gridOffset + y);</div>
<div class="line">            s_PositionBuffer[posSt + 7] = (float)s_PositionBuffer[posSt + 1];</div>
<div class="line">            s_PositionBuffer[posSt + 10] = (float)s_PositionBuffer[posSt + 4];</div>
<div class="line"> </div>
<div class="line">            s_PositionBuffer[posSt + 2] = (float)pFontData-&gt;m_Depth;</div>
<div class="line">            s_PositionBuffer[posSt + 5] = (<span class="keywordtype">float</span>)pFontData-&gt;m_Depth;</div>
<div class="line">            s_PositionBuffer[posSt + 8] = (float)pFontData-&gt;m_Depth;</div>
<div class="line">            s_PositionBuffer[posSt + 11] = (<span class="keywordtype">float</span>)pFontData-&gt;m_Depth;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Set Texture coordinate */</span></div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 0] = (float)pFont-&gt;m_pCharDataBuffer[index].m_MinS;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 2] = (<span class="keywordtype">float</span>)pFont-&gt;m_pCharDataBuffer[index].m_MinS;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 4] = (float)pFont-&gt;m_pCharDataBuffer[index].m_MaxS;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 6] = (<span class="keywordtype">float</span>)pFont-&gt;m_pCharDataBuffer[index].m_MaxS;</div>
<div class="line"> </div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 1] = (float)pFont-&gt;m_pCharDataBuffer[index].m_MinT;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 3] = (<span class="keywordtype">float</span>)pFont-&gt;m_pCharDataBuffer[index].m_MaxT;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 5] = (float)pFont-&gt;m_pCharDataBuffer[index].m_MinT;</div>
<div class="line">            s_TextureCoordinateBuffer[texSt + 7] = (<span class="keywordtype">float</span>)pFont-&gt;m_pCharDataBuffer[index].m_MaxT;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Fill vertex buffer with vertex data. */</span></div>
<div class="line">    memcpy(m_FontPositionData[m_FontNumLines].m_pBufferMap, s_PositionBuffer, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * 4 * strLength);</div>
<div class="line">    memcpy(m_FontTextureCoordinateData[m_FontNumLines].m_pBufferMap, s_TextureCoordinateBuffer, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2 * 4 * strLength);</div>
<div class="line"> </div>
<div class="line">    m_StringSize[m_FontNumLines] = strLength;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::UpdateTextureBuffer</span></div>
<div class="line"><span class="comment"> * --------------------------------------</span></div>
<div class="line"><span class="comment"> * Update the texture buffer with the current texture.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::UpdateTextureBuffer(FontTextureData* texture)</div>
<div class="line">{</div>
<div class="line">    m_FontTexture[m_FontNumLines] = texture;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::UpdateUniformBuffers</span></div>
<div class="line"><span class="comment"> * ---------------------------------------</span></div>
<div class="line"><span class="comment"> * Update the uniform buffers for the frame.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::UpdateUniformBuffers(<span class="keywordtype">float</span>* magScale, <span class="keywordtype">float</span>* color, <a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a>* textureHandle)</div>
<div class="line">{</div>
<div class="line">    memcpy(m_FontUniformDataVS[m_FontNumLines].m_pBufferMap, magScale, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2);</div>
<div class="line"> </div>
<div class="line">    memcpy(m_FontUniformDataPSColor[m_FontNumLines].m_pBufferMap, color, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 4);</div>
<div class="line"> </div>
<div class="line">    memcpy(m_FontUniformDataPSSampler[m_FontNumLines].m_pBufferMap, textureHandle, <span class="keyword">sizeof</span>(<a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a>));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::BSearchIndex</span></div>
<div class="line"><span class="comment"> * -------------------------------</span></div>
<div class="line"><span class="comment"> * Find the index of a given character.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">uint32_t DebugTextRenderer::BSearchIndex(FontData* pFont, uint32_t <span class="keywordtype">id</span>)</div>
<div class="line">{</div>
<div class="line">    uint32_t first;</div>
<div class="line">    uint32_t last;</div>
<div class="line">    uint32_t index = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= 32 &amp;&amp; id &lt; 32 + pFont-&gt;m_NumCharData &amp;&amp; pFont-&gt;m_pCharDataBuffer[<span class="keywordtype">id</span> - 32].m_Id == <span class="keywordtype">id</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keywordtype">id</span> - 32;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    first = 0;</div>
<div class="line">    last = pFont-&gt;m_NumCharData - 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(first &lt;= last)</div>
<div class="line">    {</div>
<div class="line">        uint32_t mid = first + (last - first) / 2;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pFont-&gt;m_pCharDataBuffer[mid].m_Id &lt; <span class="keywordtype">id</span>)</div>
<div class="line">        {</div>
<div class="line">            first = mid + 1;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (id &lt; pFont-&gt;m_pCharDataBuffer[mid].m_Id)</div>
<div class="line">        {</div>
<div class="line">            last = mid - 1;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            index = mid;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::GetCurrentFont</span></div>
<div class="line"><span class="comment"> * ---------------------------------</span></div>
<div class="line"><span class="comment"> * Get which font is in use.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">DebugTextRenderer::FontData* DebugTextRenderer::GetCurrentFont()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(m_Proportional)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> &amp;m_FontP;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> &amp;m_FontF;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::GetCharSize</span></div>
<div class="line"><span class="comment"> * ------------------------------</span></div>
<div class="line"><span class="comment"> * Get the current character size.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::GetCharSize(<span class="keywordtype">float</span>* pCharWidth, <span class="keywordtype">float</span>* pCharHeight)</div>
<div class="line">{</div>
<div class="line">    FontData* pFont = GetCurrentFont();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get size of font */</span></div>
<div class="line">    *pCharWidth  = pFont-&gt;m_GridOffsetX;</div>
<div class="line">    *pCharHeight = pFont-&gt;m_GridOffsetY;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::SetDrawEnable</span></div>
<div class="line"><span class="comment"> * --------------------------------</span></div>
<div class="line"><span class="comment"> * Enable/disable drawing.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::SetDrawEnable(<span class="keywordtype">bool</span> enable)</div>
<div class="line">{</div>
<div class="line">    m_Enabled = enable;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::IsEnabled</span></div>
<div class="line"><span class="comment"> * ----------------------------</span></div>
<div class="line"><span class="comment"> * Check whether text rendering is enabled.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">bool</span> DebugTextRenderer::IsEnabled()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> m_Enabled;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::Puts</span></div>
<div class="line"><span class="comment"> * -----------------------</span></div>
<div class="line"><span class="comment"> * Render a string of text at a given line/column.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::Puts(<span class="keywordtype">float</span> column, <span class="keywordtype">float</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* pStr)</div>
<div class="line">{</div>
<div class="line">    uint32_t stringLength;</div>
<div class="line">    <span class="keywordtype">float</span> offsetX;</div>
<div class="line">    <span class="keywordtype">float</span> offsetY;</div>
<div class="line">    FontData* pFont = GetCurrentFont();</div>
<div class="line">    FontRenderData* pFontData = &amp;m_Font;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Don&#39;t draw if fonts are disabled */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!m_Enabled)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check the initialize */</span></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pStr &amp;&amp; <span class="stringliteral">&quot;Need to initialize str.\n&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(pFont-&gt;m_pCharDataBuffer &amp;&amp; <span class="stringliteral">&quot;Need to call DebugTextRenderer::Init first.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    stringLength = (uint32_t)(strlen((<span class="keyword">const</span> <span class="keywordtype">char</span> *)pStr));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Calculate offsets */</span></div>
<div class="line">    offsetX = (float)(column * pFont-&gt;m_GridOffsetX);</div>
<div class="line">    offsetY = -(float)(line * pFont-&gt;m_GridOffsetY);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update Texture Buffer */</span></div>
<div class="line">    UpdateTextureBuffer(&amp;pFont-&gt;m_FontTextureData);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update Vertex Buffers */</span></div>
<div class="line">    UpdateVertexBuffers(pStr, stringLength, offsetX, offsetY - pFont-&gt;m_GridOffsetY);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update Uniform Buffers */</span></div>
<div class="line">    UpdateUniformBuffers(pFontData-&gt;m_pCharMagScale, pFontData-&gt;m_Color, &amp;pFont-&gt;m_FontTextureData.m_TextureHandle);</div>
<div class="line"> </div>
<div class="line">    ++m_FontNumLines;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::Printf</span></div>
<div class="line"><span class="comment"> * -------------------------</span></div>
<div class="line"><span class="comment"> * Render a formatted string of text at a given line/column.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::Printf(<span class="keywordtype">float</span> column, <span class="keywordtype">float</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* pFmt, ...)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> str[g_FontMaxBufferSize];</div>
<div class="line">    va_list args;</div>
<div class="line">    <span class="keywordtype">int</span> stringSize;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Don&#39;t draw if fonts are disabled */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!m_Enabled)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get string */</span></div>
<div class="line">    va_start(args, pFmt);</div>
<div class="line">    stringSize = vsnprintf(str, g_FontMaxBufferSize, pFmt, args);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Assert for over string size */</span></div>
<div class="line">    <span class="keywordflow">if</span> ( stringSize &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(!<span class="stringliteral">&quot;String is too long\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    va_end(args);</div>
<div class="line"> </div>
<div class="line">    Puts( column, line, str );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * DebugTextRenderer::Draw</span></div>
<div class="line"><span class="comment"> * -----------------------</span></div>
<div class="line"><span class="comment"> * Render the text to a given render target.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> DebugTextRenderer::Draw(<a class="code" href="struct_n_v_ntexture.html">NVNtexture</a>* renderTarget, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a>* pCmdBuf = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!m_UsingSyncManager)</div>
<div class="line">    {</div>
<div class="line">        nvnQueueFenceSync(m_pQueue, &amp;m_CommandBufferSync, NVN_SYNC_CONDITION_ALL_GPU_COMMANDS_COMPLETE, 0);</div>
<div class="line">        nvnQueueFlush(m_pQueue);</div>
<div class="line">        nvnSyncWait(&amp;m_CommandBufferSync, <a class="code" href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Reset the command/control memory for the command buffer. */</span></div>
<div class="line">        nvnCommandBufferAddCommandMemory(&amp;m_CommandBuffer, m_pCommandMemoryPool-&gt;GetMemoryPool(), m_CommandPoolOffset, g_CommandMemorySize);</div>
<div class="line">        nvnCommandBufferAddControlMemory(&amp;m_CommandBuffer, m_pControlPool, g_ControlMemorySize);</div>
<div class="line"> </div>
<div class="line">        pCmdBuf = &amp;m_CommandBuffer;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        pCmdBuf = m_pManagedCommandBuffer-&gt;GetCommandBuffer();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nvnCommandBufferBeginRecording(pCmdBuf);</div>
<div class="line">    {</div>
<div class="line">            <span class="comment">/* Set the sampler and texture pool. */</span></div>
<div class="line">        m_pTextureIDManager-&gt;SetSamplerPool(pCmdBuf);</div>
<div class="line">        m_pTextureIDManager-&gt;SetTexturePool(pCmdBuf);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Sets the render target. */</span></div>
<div class="line">        nvnCommandBufferSetRenderTargets(pCmdBuf, 1, &amp;renderTarget, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">        nvnCommandBufferSetScissor(pCmdBuf, 0, 0, width, height);</div>
<div class="line">        nvnCommandBufferSetViewport(pCmdBuf, 0, 0, width, height);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the render states. */</span></div>
<div class="line">        nvnCommandBufferBindBlendState(pCmdBuf, &amp;m_BlendState);</div>
<div class="line">        nvnCommandBufferBindChannelMaskState(pCmdBuf, &amp;m_ChannelMaskState);</div>
<div class="line">        nvnCommandBufferBindColorState(pCmdBuf, &amp;m_ColorState);</div>
<div class="line">        nvnCommandBufferBindDepthStencilState(pCmdBuf, &amp;m_DepthStencilState);</div>
<div class="line">        nvnCommandBufferBindMultisampleState(pCmdBuf, &amp;m_MultisampleState);</div>
<div class="line">        nvnCommandBufferBindPolygonState(pCmdBuf, &amp;m_PolygonState);</div>
<div class="line">        nvnCommandBufferSetSampleMask(pCmdBuf, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(~0));</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the vertex states. */</span></div>
<div class="line">        nvnCommandBufferBindVertexAttribState(pCmdBuf, 2, m_VertexAttributeStates);</div>
<div class="line">        nvnCommandBufferBindVertexStreamState(pCmdBuf, 2, m_VertexStreamStates);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the shader program. */</span></div>
<div class="line">        m_pDataHolder-&gt;GetProgramData()[0]-&gt;BindShaderProgram(pCmdBuf);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Bind the vertex/uniform buffers and draw. */</span></div>
<div class="line">        <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; m_FontNumLines; ++i)</div>
<div class="line">        {</div>
<div class="line">            nvnCommandBufferBindVertexBuffer(pCmdBuf, m_PositionLocation, m_FontPositionData[i].m_Address, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * 4 * m_StringSize[i]);</div>
<div class="line">            nvnCommandBufferBindVertexBuffer(pCmdBuf, m_TextureCoordinateLocation, m_FontTextureCoordinateData[i].m_Address, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2 * 4 * m_StringSize[i]);</div>
<div class="line"> </div>
<div class="line">            nvnCommandBufferBindUniformBuffer(pCmdBuf, (NVNshaderStage::NVN_SHADER_STAGE_VERTEX), FontShader::BlockVSUniformBlockData::GetBinding(NVNshaderStage::NVN_SHADER_STAGE_VERTEX), m_FontUniformDataVS[i].m_Address, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2);</div>
<div class="line">            nvnCommandBufferBindUniformBuffer(pCmdBuf, (NVNshaderStage::NVN_SHADER_STAGE_FRAGMENT), FontShader::BlockColorFSUniformBlockData::GetBinding(NVNshaderStage::NVN_SHADER_STAGE_FRAGMENT), m_FontUniformDataPSColor[i].m_Address, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 4);</div>
<div class="line">            nvnCommandBufferBindUniformBuffer(pCmdBuf, (NVNshaderStage::NVN_SHADER_STAGE_FRAGMENT), FontShader::BlockSamplerFSUniformBlockData::GetBinding(NVNshaderStage::NVN_SHADER_STAGE_FRAGMENT), m_FontUniformDataPSSampler[i].m_Address, <span class="keyword">sizeof</span>(<a class="code" href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a>));</div>
<div class="line"> </div>
<div class="line">            nvnCommandBufferDrawElements(pCmdBuf, NVN_DRAW_PRIMITIVE_TRIANGLES, NVN_INDEX_TYPE_UNSIGNED_SHORT, m_StringSize[i] * 6, m_FontIndexData.m_Address);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Grab and submit the command handle. */</span></div>
<div class="line">    m_CommandHandle = nvnCommandBufferEndRecording(pCmdBuf);</div>
<div class="line">    nvnQueueSubmitCommands(m_pQueue, 1, &amp;m_CommandHandle);</div>
<div class="line"> </div>
<div class="line">    m_FontNumLines = 0;</div>
<div class="line">}</div>
<div class="ttc" id="a_asset_file_data_holder_8h_html"><div class="ttname"><a href="_asset_file_data_holder_8h.html">AssetFileDataHolder.h</a></div><div class="ttdoc">This files defines some structures that hold the data provided by an asset file created by Tutorial02...</div></div>
<div class="ttc" id="a_asset_file_loading_helper_8h_html"><div class="ttname"><a href="_asset_file_loading_helper_8h.html">AssetFileLoadingHelper.h</a></div><div class="ttdoc">This file defines a helper class used to load in asset files generated by Tutorial02.</div></div>
<div class="ttc" id="a_debug_text_data_8h_html"><div class="ttname"><a href="_debug_text_data_8h.html">DebugTextData.h</a></div><div class="ttdoc">This file contains the raw texture data for the debug text renderer font.</div></div>
<div class="ttc" id="a_debug_text_renderer_8h_html"><div class="ttname"><a href="_debug_text_renderer_8h.html">DebugTextRenderer.h</a></div><div class="ttdoc">This file defines a singleton class that renders text to the screen.</div></div>
<div class="ttc" id="a_texture_i_d_manager_8h_html"><div class="ttname"><a href="_texture_i_d_manager_8h.html">TextureIDManager.h</a></div><div class="ttdoc">This file defines a class that wraps the texture and sampler registering process.</div></div>
<div class="ttc" id="a_tutorial_util_8h_html"><div class="ttname"><a href="_tutorial_util_8h.html">TutorialUtil.h</a></div><div class="ttdoc">This file defines the interface for utility functions used in the tutorials.</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga48151b7e768a13685d77d1a4c464a33b"><div class="ttname"><a href="group__nvn__c__defines.html#ga48151b7e768a13685d77d1a4c464a33b">NVN_TRUE</a></div><div class="ttdeci">#define NVN_TRUE</div><div class="ttdoc">Boolean condition with a value of true.</div><div class="ttdef"><b>Definition:</b> nvn.h:4566</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_ga6c3444e501307a094f1d57abf1059aed"><div class="ttname"><a href="group__nvn__c__defines.html#ga6c3444e501307a094f1d57abf1059aed">NVN_WAIT_TIMEOUT_MAXIMUM</a></div><div class="ttdeci">#define NVN_WAIT_TIMEOUT_MAXIMUM</div><div class="ttdoc">When waiting on NVNsync objects, wait indefinitely until the sync object is signaled.</div><div class="ttdef"><b>Definition:</b> nvn.h:4574</div></div>
<div class="ttc" id="agroup__nvn__c__defines_html_gad12fb86930f09043843be6b39c78bb1b"><div class="ttname"><a href="group__nvn__c__defines.html#gad12fb86930f09043843be6b39c78bb1b">NVN_FALSE</a></div><div class="ttdeci">#define NVN_FALSE</div><div class="ttdoc">Boolean condition with a value of false.</div><div class="ttdef"><b>Definition:</b> nvn.h:4563</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_ga264a21eefa322cd0ad9acf4c2ab949ad"><div class="ttname"><a href="group__nvn__c__enum.html#ga264a21eefa322cd0ad9acf4c2ab949ad">NVNcopyFlags</a></div><div class="ttdeci">NVNcopyFlags</div><div class="ttdoc">Flags controlling the operation of copy commands.</div><div class="ttdef"><b>Definition:</b> nvn.h:3721</div></div>
<div class="ttc" id="agroup__nvn__c__enum_html_gga264a21eefa322cd0ad9acf4c2ab949ada2dcf02e35d39e7fbdd45f48d6a086286"><div class="ttname"><a href="group__nvn__c__enum.html#gga264a21eefa322cd0ad9acf4c2ab949ada2dcf02e35d39e7fbdd45f48d6a086286">NVN_COPY_FLAGS_NONE</a></div><div class="ttdeci">@ NVN_COPY_FLAGS_NONE</div><div class="ttdoc">No special operations should be performed on the copy.</div><div class="ttdef"><b>Definition:</b> nvn.h:3724</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_ga067da3a838f115226c89fad655278f80"><div class="ttname"><a href="group__nvn__c__handle.html#ga067da3a838f115226c89fad655278f80">NVNbufferAddress</a></div><div class="ttdeci">uint64_t NVNbufferAddress</div><div class="ttdoc">GPU address of memory inside a buffer object.</div><div class="ttdef"><b>Definition:</b> nvn.h:434</div></div>
<div class="ttc" id="agroup__nvn__c__handle_html_gaa1a1fc7a9e690ce93870bcd71ea6b446"><div class="ttname"><a href="group__nvn__c__handle.html#gaa1a1fc7a9e690ce93870bcd71ea6b446">NVNtextureHandle</a></div><div class="ttdeci">uint64_t NVNtextureHandle</div><div class="ttdoc">GPU handle used to refer to a texture object for texture mapping operations.</div><div class="ttdef"><b>Definition:</b> nvn.h:441</div></div>
<div class="ttc" id="anamespacenn_1_1gfx_html_ad620d8208dd309eb7c4dd5973a6aeee5"><div class="ttname"><a href="namespacenn_1_1gfx.html#ad620d8208dd309eb7c4dd5973a6aeee5">nn::gfx::MemoryPool</a></div><div class="ttdeci">TMemoryPool&lt; TargetConfig::Variation &gt; MemoryPool</div><div class="ttdoc">The type definition representing a memory pool.</div><div class="ttdef"><b>Definition:</b> gfx_Types.h:116</div></div>
<div class="ttc" id="ann___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">Declarations for API resources to test whether conditions are satisfied.</div></div>
<div class="ttc" id="ann___assert_8h_html_ade59d1d911907a16c0241f8fe3b31542"><div class="ttname"><a href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a></div><div class="ttdeci">#define NN_ASSERT(condition,...)</div><div class="ttdoc">Tests whether a condition is satisfied.</div><div class="ttdef"><b>Definition:</b> nn_Assert.h:124</div></div>
<div class="ttc" id="ann___macro_8h_html_af2d1673769927c5eae977d8dde3ce106"><div class="ttname"><a href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a></div><div class="ttdeci">#define NN_UNUSED(variable)</div><div class="ttdoc">Suppresses compiler warnings on intentionally unused variables.</div><div class="ttdef"><b>Definition:</b> nn_Macro.h:610</div></div>
<div class="ttc" id="astruct_n_v_nbuffer_html"><div class="ttname"><a href="struct_n_v_nbuffer.html">NVNbuffer</a></div><div class="ttdoc">Block of GPU-accessible memory used to hold data used for various purposes.</div><div class="ttdef"><b>Definition:</b> nvn.h:319</div></div>
<div class="ttc" id="astruct_n_v_ncommand_buffer_html"><div class="ttname"><a href="struct_n_v_ncommand_buffer.html">NVNcommandBuffer</a></div><div class="ttdoc">Collection of commands to send to the GPU via queues.</div><div class="ttdef"><b>Definition:</b> nvn.h:236</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html"><div class="ttname"><a href="struct_n_v_ncopy_region.html">NVNcopyRegion</a></div><div class="ttdoc">Data structure describing a region of a texture used in copy commands.</div><div class="ttdef"><b>Definition:</b> nvn.h:4432</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_a049973b5f7801c8f6077abd1bd10cdb5"><div class="ttname"><a href="struct_n_v_ncopy_region.html#a049973b5f7801c8f6077abd1bd10cdb5">NVNcopyRegion::zoffset</a></div><div class="ttdeci">int zoffset</div><div class="ttdoc">Z offset (in texels) of first texel copied.</div><div class="ttdef"><b>Definition:</b> nvn.h:4441</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_a10692b82ad7fa9f6c9ecce2a653cf09f"><div class="ttname"><a href="struct_n_v_ncopy_region.html#a10692b82ad7fa9f6c9ecce2a653cf09f">NVNcopyRegion::depth</a></div><div class="ttdeci">int depth</div><div class="ttdoc">Depth (in texels) of the region being copied; should be one for one- and two-dimensional images.</div><div class="ttdef"><b>Definition:</b> nvn.h:4452</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_a2760a2442f385cff3de39e1f43fb3d15"><div class="ttname"><a href="struct_n_v_ncopy_region.html#a2760a2442f385cff3de39e1f43fb3d15">NVNcopyRegion::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">Width (in texels) of the region being copied.</div><div class="ttdef"><b>Definition:</b> nvn.h:4444</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_a5cf7bfd9a638b605b6dbb1925ec15579"><div class="ttname"><a href="struct_n_v_ncopy_region.html#a5cf7bfd9a638b605b6dbb1925ec15579">NVNcopyRegion::yoffset</a></div><div class="ttdeci">int yoffset</div><div class="ttdoc">Y offset (in texels) of first texel copied.</div><div class="ttdef"><b>Definition:</b> nvn.h:4438</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_a62818971f7c2d1d8b50b4f2f17695a89"><div class="ttname"><a href="struct_n_v_ncopy_region.html#a62818971f7c2d1d8b50b4f2f17695a89">NVNcopyRegion::xoffset</a></div><div class="ttdeci">int xoffset</div><div class="ttdoc">X offset (in texels) of first texel copied.</div><div class="ttdef"><b>Definition:</b> nvn.h:4435</div></div>
<div class="ttc" id="astruct_n_v_ncopy_region_html_af7912a472ef5b80b2f57617046c52de7"><div class="ttname"><a href="struct_n_v_ncopy_region.html#af7912a472ef5b80b2f57617046c52de7">NVNcopyRegion::height</a></div><div class="ttdeci">int height</div><div class="ttdoc">Height (in texels) of the region being copied; should be one for one-dimensional images.</div><div class="ttdef"><b>Definition:</b> nvn.h:4448</div></div>
<div class="ttc" id="astruct_n_v_ndevice_html"><div class="ttname"><a href="struct_n_v_ndevice.html">NVNdevice</a></div><div class="ttdoc">API class used to represent a specific GPU/device.</div><div class="ttdef"><b>Definition:</b> nvn.h:221</div></div>
<div class="ttc" id="astruct_n_v_nmemory_pool_html"><div class="ttname"><a href="struct_n_v_nmemory_pool.html">NVNmemoryPool</a></div><div class="ttdoc">Block of GPU-accessible memory that can be used for storage of buffer and texture objects.</div><div class="ttdef"><b>Definition:</b> nvn.h:296</div></div>
<div class="ttc" id="astruct_n_v_nqueue_html"><div class="ttname"><a href="struct_n_v_nqueue.html">NVNqueue</a></div><div class="ttdoc">API class used to send commands to the GPU.</div><div class="ttdef"><b>Definition:</b> nvn.h:231</div></div>
<div class="ttc" id="astruct_n_v_nsampler_html"><div class="ttname"><a href="struct_n_v_nsampler.html">NVNsampler</a></div><div class="ttdoc">GPU-accessible object controlling how texture data are fetched and filtered.</div><div class="ttdef"><b>Definition:</b> nvn.h:358</div></div>
<div class="ttc" id="astruct_n_v_ntexture_html"><div class="ttname"><a href="struct_n_v_ntexture.html">NVNtexture</a></div><div class="ttdoc">Block of GPU-accessible memory and related state used to hold image data.</div><div class="ttdef"><b>Definition:</b> nvn.h:325</div></div>
<div class="ttc" id="astruct_n_v_nvertex_attrib_state_html"><div class="ttname"><a href="struct_n_v_nvertex_attrib_state.html">NVNvertexAttribState</a></div><div class="ttdoc">API state object controlling vertex attrib state.</div><div class="ttdef"><b>Definition:</b> nvn.h:274</div></div>
<div class="ttc" id="astruct_n_v_nvertex_stream_state_html"><div class="ttname"><a href="struct_n_v_nvertex_stream_state.html">NVNvertexStreamState</a></div><div class="ttdoc">API state object controlling vertex stream state.</div><div class="ttdef"><b>Definition:</b> nvn.h:279</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
